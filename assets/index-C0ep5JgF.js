(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var At={},fs={};fs.byteLength=Xh;fs.toByteArray=Qh;fs.fromByteArray=nd;var _n=[],on=[],Zh=typeof Uint8Array<"u"?Uint8Array:Array,co="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ii=0,Yh=co.length;Ii<Yh;++Ii)_n[Ii]=co[Ii],on[co.charCodeAt(Ii)]=Ii;on[45]=62;on[95]=63;function yl(i){var e=i.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=i.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Xh(i){var e=yl(i),t=e[0],n=e[1];return(t+n)*3/4-n}function Jh(i,e,t){return(e+t)*3/4-t}function Qh(i){var e,t=yl(i),n=t[0],s=t[1],r=new Zh(Jh(i,n,s)),o=0,a=s>0?n-4:n,l;for(l=0;l<a;l+=4)e=on[i.charCodeAt(l)]<<18|on[i.charCodeAt(l+1)]<<12|on[i.charCodeAt(l+2)]<<6|on[i.charCodeAt(l+3)],r[o++]=e>>16&255,r[o++]=e>>8&255,r[o++]=e&255;return s===2&&(e=on[i.charCodeAt(l)]<<2|on[i.charCodeAt(l+1)]>>4,r[o++]=e&255),s===1&&(e=on[i.charCodeAt(l)]<<10|on[i.charCodeAt(l+1)]<<4|on[i.charCodeAt(l+2)]>>2,r[o++]=e>>8&255,r[o++]=e&255),r}function ed(i){return _n[i>>18&63]+_n[i>>12&63]+_n[i>>6&63]+_n[i&63]}function td(i,e,t){for(var n,s=[],r=e;r<t;r+=3)n=(i[r]<<16&16711680)+(i[r+1]<<8&65280)+(i[r+2]&255),s.push(ed(n));return s.join("")}function nd(i){for(var e,t=i.length,n=t%3,s=[],r=16383,o=0,a=t-n;o<a;o+=r)s.push(td(i,o,o+r>a?a:o+r));return n===1?(e=i[t-1],s.push(_n[e>>2]+_n[e<<4&63]+"==")):n===2&&(e=(i[t-2]<<8)+i[t-1],s.push(_n[e>>10]+_n[e>>4&63]+_n[e<<2&63]+"=")),s.join("")}var sa={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */sa.read=function(i,e,t,n,s){var r,o,a=s*8-n-1,l=(1<<a)-1,p=l>>1,h=-7,b=t?s-1:0,k=t?-1:1,_=i[e+b];for(b+=k,r=_&(1<<-h)-1,_>>=-h,h+=a;h>0;r=r*256+i[e+b],b+=k,h-=8);for(o=r&(1<<-h)-1,r>>=-h,h+=n;h>0;o=o*256+i[e+b],b+=k,h-=8);if(r===0)r=1-p;else{if(r===l)return o?NaN:(_?-1:1)*(1/0);o=o+Math.pow(2,n),r=r-p}return(_?-1:1)*o*Math.pow(2,r-n)};sa.write=function(i,e,t,n,s,r){var o,a,l,p=r*8-s-1,h=(1<<p)-1,b=h>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:r-1,x=n?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=h):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+b>=1?e+=k/l:e+=k*Math.pow(2,1-b),e*l>=2&&(o++,l/=2),o+b>=h?(a=0,o=h):o+b>=1?(a=(e*l-1)*Math.pow(2,s),o=o+b):(a=e*Math.pow(2,b-1)*Math.pow(2,s),o=0));s>=8;i[t+_]=a&255,_+=x,a/=256,s-=8);for(o=o<<s|a,p+=s;p>0;i[t+_]=o&255,_+=x,o/=256,p-=8);i[t+_-x]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const e=fs,t=sa,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=h,i.SlowBuffer=Y,i.INSPECT_MAX_BYTES=50;const s=2147483647;i.kMaxLength=s;const{Uint8Array:r,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;h.TYPED_ARRAY_SUPPORT=l(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const v=new r(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,r.prototype),Object.setPrototypeOf(v,f),v.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function p(v){if(v>s)throw new RangeError('The value "'+v+'" is invalid for option "size"');const f=new r(v);return Object.setPrototypeOf(f,h.prototype),f}function h(v,f,m){if(typeof v=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(v)}return b(v,f,m)}h.poolSize=8192;function b(v,f,m){if(typeof v=="string")return C(v,f);if(o.isView(v))return B(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(Jt(v,o)||v&&Jt(v.buffer,o)||typeof a<"u"&&(Jt(v,a)||v&&Jt(v.buffer,a)))return D(v,f,m);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const T=v.valueOf&&v.valueOf();if(T!=null&&T!==v)return h.from(T,f,m);const M=L(v);if(M)return M;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return h.from(v[Symbol.toPrimitive]("string"),f,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}h.from=function(v,f,m){return b(v,f,m)},Object.setPrototypeOf(h.prototype,r.prototype),Object.setPrototypeOf(h,r);function k(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function _(v,f,m){return k(v),v<=0?p(v):f!==void 0?typeof m=="string"?p(v).fill(f,m):p(v).fill(f):p(v)}h.alloc=function(v,f,m){return _(v,f,m)};function x(v){return k(v),p(v<0?0:W(v)|0)}h.allocUnsafe=function(v){return x(v)},h.allocUnsafeSlow=function(v){return x(v)};function C(v,f){if((typeof f!="string"||f==="")&&(f="utf8"),!h.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const m=J(v,f)|0;let T=p(m);const M=T.write(v,f);return M!==m&&(T=T.slice(0,M)),T}function A(v){const f=v.length<0?0:W(v.length)|0,m=p(f);for(let T=0;T<f;T+=1)m[T]=v[T]&255;return m}function B(v){if(Jt(v,r)){const f=new r(v);return D(f.buffer,f.byteOffset,f.byteLength)}return A(v)}function D(v,f,m){if(f<0||v.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<f+(m||0))throw new RangeError('"length" is outside of buffer bounds');let T;return f===void 0&&m===void 0?T=new r(v):m===void 0?T=new r(v,f):T=new r(v,f,m),Object.setPrototypeOf(T,h.prototype),T}function L(v){if(h.isBuffer(v)){const f=W(v.length)|0,m=p(f);return m.length===0||v.copy(m,0,0,f),m}if(v.length!==void 0)return typeof v.length!="number"||Ze(v.length)?p(0):A(v);if(v.type==="Buffer"&&Array.isArray(v.data))return A(v.data)}function W(v){if(v>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return v|0}function Y(v){return+v!=v&&(v=0),h.alloc(+v)}h.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==h.prototype},h.compare=function(f,m){if(Jt(f,r)&&(f=h.from(f,f.offset,f.byteLength)),Jt(m,r)&&(m=h.from(m,m.offset,m.byteLength)),!h.isBuffer(f)||!h.isBuffer(m))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===m)return 0;let T=f.length,M=m.length;for(let F=0,z=Math.min(T,M);F<z;++F)if(f[F]!==m[F]){T=f[F],M=m[F];break}return T<M?-1:M<T?1:0},h.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(f,m){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return h.alloc(0);let T;if(m===void 0)for(m=0,T=0;T<f.length;++T)m+=f[T].length;const M=h.allocUnsafe(m);let F=0;for(T=0;T<f.length;++T){let z=f[T];if(Jt(z,r))F+z.length>M.length?(h.isBuffer(z)||(z=h.from(z)),z.copy(M,F)):r.prototype.set.call(M,z,F);else if(h.isBuffer(z))z.copy(M,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=z.length}return M};function J(v,f){if(h.isBuffer(v))return v.length;if(o.isView(v)||Jt(v,o))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const m=v.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&m===0)return 0;let M=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return He(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return Xe(v).length;default:if(M)return T?-1:He(v).length;f=(""+f).toLowerCase(),M=!0}}h.byteLength=J;function Q(v,f,m){let T=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,f>>>=0,m<=f))return"";for(v||(v="utf8");;)switch(v){case"hex":return y(this,f,m);case"utf8":case"utf-8":return S(this,f,m);case"ascii":return N(this,f,m);case"latin1":case"binary":return P(this,f,m);case"base64":return w(this,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,f,m);default:if(T)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),T=!0}}h.prototype._isBuffer=!0;function ee(v,f,m){const T=v[f];v[f]=v[m],v[m]=T}h.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let m=0;m<f;m+=2)ee(this,m,m+1);return this},h.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let m=0;m<f;m+=4)ee(this,m,m+3),ee(this,m+1,m+2);return this},h.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let m=0;m<f;m+=8)ee(this,m,m+7),ee(this,m+1,m+6),ee(this,m+2,m+5),ee(this,m+3,m+4);return this},h.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?S(this,0,f):Q.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(f){if(!h.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:h.compare(this,f)===0},h.prototype.inspect=function(){let f="";const m=i.INSPECT_MAX_BYTES;return f=this.toString("hex",0,m).replace(/(.{2})/g,"$1 ").trim(),this.length>m&&(f+=" ... "),"<Buffer "+f+">"},n&&(h.prototype[n]=h.prototype.inspect),h.prototype.compare=function(f,m,T,M,F){if(Jt(f,r)&&(f=h.from(f,f.offset,f.byteLength)),!h.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(m===void 0&&(m=0),T===void 0&&(T=f?f.length:0),M===void 0&&(M=0),F===void 0&&(F=this.length),m<0||T>f.length||M<0||F>this.length)throw new RangeError("out of range index");if(M>=F&&m>=T)return 0;if(M>=F)return-1;if(m>=T)return 1;if(m>>>=0,T>>>=0,M>>>=0,F>>>=0,this===f)return 0;let z=F-M,Ee=T-m;const be=Math.min(z,Ee),ye=this.slice(M,F),qe=f.slice(m,T);for(let ge=0;ge<be;++ge)if(ye[ge]!==qe[ge]){z=ye[ge],Ee=qe[ge];break}return z<Ee?-1:Ee<z?1:0};function oe(v,f,m,T,M){if(v.length===0)return-1;if(typeof m=="string"?(T=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,Ze(m)&&(m=M?0:v.length-1),m<0&&(m=v.length+m),m>=v.length){if(M)return-1;m=v.length-1}else if(m<0)if(M)m=0;else return-1;if(typeof f=="string"&&(f=h.from(f,T)),h.isBuffer(f))return f.length===0?-1:de(v,f,m,T,M);if(typeof f=="number")return f=f&255,typeof r.prototype.indexOf=="function"?M?r.prototype.indexOf.call(v,f,m):r.prototype.lastIndexOf.call(v,f,m):de(v,[f],m,T,M);throw new TypeError("val must be string, number or Buffer")}function de(v,f,m,T,M){let F=1,z=v.length,Ee=f.length;if(T!==void 0&&(T=String(T).toLowerCase(),T==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(v.length<2||f.length<2)return-1;F=2,z/=2,Ee/=2,m/=2}function be(qe,ge){return F===1?qe[ge]:qe.readUInt16BE(ge*F)}let ye;if(M){let qe=-1;for(ye=m;ye<z;ye++)if(be(v,ye)===be(f,qe===-1?0:ye-qe)){if(qe===-1&&(qe=ye),ye-qe+1===Ee)return qe*F}else qe!==-1&&(ye-=ye-qe),qe=-1}else for(m+Ee>z&&(m=z-Ee),ye=m;ye>=0;ye--){let qe=!0;for(let ge=0;ge<Ee;ge++)if(be(v,ye+ge)!==be(f,ge)){qe=!1;break}if(qe)return ye}return-1}h.prototype.includes=function(f,m,T){return this.indexOf(f,m,T)!==-1},h.prototype.indexOf=function(f,m,T){return oe(this,f,m,T,!0)},h.prototype.lastIndexOf=function(f,m,T){return oe(this,f,m,T,!1)};function ie(v,f,m,T){m=Number(m)||0;const M=v.length-m;T?(T=Number(T),T>M&&(T=M)):T=M;const F=f.length;T>F/2&&(T=F/2);let z;for(z=0;z<T;++z){const Ee=parseInt(f.substr(z*2,2),16);if(Ze(Ee))return z;v[m+z]=Ee}return z}function K(v,f,m,T){return Ge(He(f,v.length-m),v,m,T)}function R(v,f,m,T){return Ge(tt(f),v,m,T)}function c(v,f,m,T){return Ge(Xe(f),v,m,T)}function d(v,f,m,T){return Ge(Lr(f,v.length-m),v,m,T)}h.prototype.write=function(f,m,T,M){if(m===void 0)M="utf8",T=this.length,m=0;else if(T===void 0&&typeof m=="string")M=m,T=this.length,m=0;else if(isFinite(m))m=m>>>0,isFinite(T)?(T=T>>>0,M===void 0&&(M="utf8")):(M=T,T=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const F=this.length-m;if((T===void 0||T>F)&&(T=F),f.length>0&&(T<0||m<0)||m>this.length)throw new RangeError("Attempt to write outside buffer bounds");M||(M="utf8");let z=!1;for(;;)switch(M){case"hex":return ie(this,f,m,T);case"utf8":case"utf-8":return K(this,f,m,T);case"ascii":case"latin1":case"binary":return R(this,f,m,T);case"base64":return c(this,f,m,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,f,m,T);default:if(z)throw new TypeError("Unknown encoding: "+M);M=(""+M).toLowerCase(),z=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function w(v,f,m){return f===0&&m===v.length?e.fromByteArray(v):e.fromByteArray(v.slice(f,m))}function S(v,f,m){m=Math.min(v.length,m);const T=[];let M=f;for(;M<m;){const F=v[M];let z=null,Ee=F>239?4:F>223?3:F>191?2:1;if(M+Ee<=m){let be,ye,qe,ge;switch(Ee){case 1:F<128&&(z=F);break;case 2:be=v[M+1],(be&192)===128&&(ge=(F&31)<<6|be&63,ge>127&&(z=ge));break;case 3:be=v[M+1],ye=v[M+2],(be&192)===128&&(ye&192)===128&&(ge=(F&15)<<12|(be&63)<<6|ye&63,ge>2047&&(ge<55296||ge>57343)&&(z=ge));break;case 4:be=v[M+1],ye=v[M+2],qe=v[M+3],(be&192)===128&&(ye&192)===128&&(qe&192)===128&&(ge=(F&15)<<18|(be&63)<<12|(ye&63)<<6|qe&63,ge>65535&&ge<1114112&&(z=ge))}}z===null?(z=65533,Ee=1):z>65535&&(z-=65536,T.push(z>>>10&1023|55296),z=56320|z&1023),T.push(z),M+=Ee}return O(T)}const E=4096;function O(v){const f=v.length;if(f<=E)return String.fromCharCode.apply(String,v);let m="",T=0;for(;T<f;)m+=String.fromCharCode.apply(String,v.slice(T,T+=E));return m}function N(v,f,m){let T="";m=Math.min(v.length,m);for(let M=f;M<m;++M)T+=String.fromCharCode(v[M]&127);return T}function P(v,f,m){let T="";m=Math.min(v.length,m);for(let M=f;M<m;++M)T+=String.fromCharCode(v[M]);return T}function y(v,f,m){const T=v.length;(!f||f<0)&&(f=0),(!m||m<0||m>T)&&(m=T);let M="";for(let F=f;F<m;++F)M+=nt[v[F]];return M}function I(v,f,m){const T=v.slice(f,m);let M="";for(let F=0;F<T.length-1;F+=2)M+=String.fromCharCode(T[F]+T[F+1]*256);return M}h.prototype.slice=function(f,m){const T=this.length;f=~~f,m=m===void 0?T:~~m,f<0?(f+=T,f<0&&(f=0)):f>T&&(f=T),m<0?(m+=T,m<0&&(m=0)):m>T&&(m=T),m<f&&(m=f);const M=this.subarray(f,m);return Object.setPrototypeOf(M,h.prototype),M};function j(v,f,m){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+f>m)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(f,m,T){f=f>>>0,m=m>>>0,T||j(f,m,this.length);let M=this[f],F=1,z=0;for(;++z<m&&(F*=256);)M+=this[f+z]*F;return M},h.prototype.readUintBE=h.prototype.readUIntBE=function(f,m,T){f=f>>>0,m=m>>>0,T||j(f,m,this.length);let M=this[f+--m],F=1;for(;m>0&&(F*=256);)M+=this[f+--m]*F;return M},h.prototype.readUint8=h.prototype.readUInt8=function(f,m){return f=f>>>0,m||j(f,1,this.length),this[f]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(f,m){return f=f>>>0,m||j(f,2,this.length),this[f]|this[f+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(f,m){return f=f>>>0,m||j(f,2,this.length),this[f]<<8|this[f+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(f,m){return f=f>>>0,m||j(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(f,m){return f=f>>>0,m||j(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},h.prototype.readBigUInt64LE=fn(function(f){f=f>>>0,sn(f,"offset");const m=this[f],T=this[f+7];(m===void 0||T===void 0)&&De(f,this.length-8);const M=m+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,F=this[++f]+this[++f]*2**8+this[++f]*2**16+T*2**24;return BigInt(M)+(BigInt(F)<<BigInt(32))}),h.prototype.readBigUInt64BE=fn(function(f){f=f>>>0,sn(f,"offset");const m=this[f],T=this[f+7];(m===void 0||T===void 0)&&De(f,this.length-8);const M=m*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],F=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+T;return(BigInt(M)<<BigInt(32))+BigInt(F)}),h.prototype.readIntLE=function(f,m,T){f=f>>>0,m=m>>>0,T||j(f,m,this.length);let M=this[f],F=1,z=0;for(;++z<m&&(F*=256);)M+=this[f+z]*F;return F*=128,M>=F&&(M-=Math.pow(2,8*m)),M},h.prototype.readIntBE=function(f,m,T){f=f>>>0,m=m>>>0,T||j(f,m,this.length);let M=m,F=1,z=this[f+--M];for(;M>0&&(F*=256);)z+=this[f+--M]*F;return F*=128,z>=F&&(z-=Math.pow(2,8*m)),z},h.prototype.readInt8=function(f,m){return f=f>>>0,m||j(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},h.prototype.readInt16LE=function(f,m){f=f>>>0,m||j(f,2,this.length);const T=this[f]|this[f+1]<<8;return T&32768?T|4294901760:T},h.prototype.readInt16BE=function(f,m){f=f>>>0,m||j(f,2,this.length);const T=this[f+1]|this[f]<<8;return T&32768?T|4294901760:T},h.prototype.readInt32LE=function(f,m){return f=f>>>0,m||j(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},h.prototype.readInt32BE=function(f,m){return f=f>>>0,m||j(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},h.prototype.readBigInt64LE=fn(function(f){f=f>>>0,sn(f,"offset");const m=this[f],T=this[f+7];(m===void 0||T===void 0)&&De(f,this.length-8);const M=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(T<<24);return(BigInt(M)<<BigInt(32))+BigInt(m+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),h.prototype.readBigInt64BE=fn(function(f){f=f>>>0,sn(f,"offset");const m=this[f],T=this[f+7];(m===void 0||T===void 0)&&De(f,this.length-8);const M=(m<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(M)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+T)}),h.prototype.readFloatLE=function(f,m){return f=f>>>0,m||j(f,4,this.length),t.read(this,f,!0,23,4)},h.prototype.readFloatBE=function(f,m){return f=f>>>0,m||j(f,4,this.length),t.read(this,f,!1,23,4)},h.prototype.readDoubleLE=function(f,m){return f=f>>>0,m||j(f,8,this.length),t.read(this,f,!0,52,8)},h.prototype.readDoubleBE=function(f,m){return f=f>>>0,m||j(f,8,this.length),t.read(this,f,!1,52,8)};function Z(v,f,m,T,M,F){if(!h.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>M||f<F)throw new RangeError('"value" argument is out of bounds');if(m+T>v.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(f,m,T,M){if(f=+f,m=m>>>0,T=T>>>0,!M){const Ee=Math.pow(2,8*T)-1;Z(this,f,m,T,Ee,0)}let F=1,z=0;for(this[m]=f&255;++z<T&&(F*=256);)this[m+z]=f/F&255;return m+T},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(f,m,T,M){if(f=+f,m=m>>>0,T=T>>>0,!M){const Ee=Math.pow(2,8*T)-1;Z(this,f,m,T,Ee,0)}let F=T-1,z=1;for(this[m+F]=f&255;--F>=0&&(z*=256);)this[m+F]=f/z&255;return m+T},h.prototype.writeUint8=h.prototype.writeUInt8=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,1,255,0),this[m]=f&255,m+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,2,65535,0),this[m]=f&255,this[m+1]=f>>>8,m+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,2,65535,0),this[m]=f>>>8,this[m+1]=f&255,m+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,4,4294967295,0),this[m+3]=f>>>24,this[m+2]=f>>>16,this[m+1]=f>>>8,this[m]=f&255,m+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,4,4294967295,0),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=f&255,m+4};function ne(v,f,m,T,M){Me(f,T,M,v,m,7);let F=Number(f&BigInt(4294967295));v[m++]=F,F=F>>8,v[m++]=F,F=F>>8,v[m++]=F,F=F>>8,v[m++]=F;let z=Number(f>>BigInt(32)&BigInt(4294967295));return v[m++]=z,z=z>>8,v[m++]=z,z=z>>8,v[m++]=z,z=z>>8,v[m++]=z,m}function Se(v,f,m,T,M){Me(f,T,M,v,m,7);let F=Number(f&BigInt(4294967295));v[m+7]=F,F=F>>8,v[m+6]=F,F=F>>8,v[m+5]=F,F=F>>8,v[m+4]=F;let z=Number(f>>BigInt(32)&BigInt(4294967295));return v[m+3]=z,z=z>>8,v[m+2]=z,z=z>>8,v[m+1]=z,z=z>>8,v[m]=z,m+8}h.prototype.writeBigUInt64LE=fn(function(f,m=0){return ne(this,f,m,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=fn(function(f,m=0){return Se(this,f,m,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(f,m,T,M){if(f=+f,m=m>>>0,!M){const be=Math.pow(2,8*T-1);Z(this,f,m,T,be-1,-be)}let F=0,z=1,Ee=0;for(this[m]=f&255;++F<T&&(z*=256);)f<0&&Ee===0&&this[m+F-1]!==0&&(Ee=1),this[m+F]=(f/z>>0)-Ee&255;return m+T},h.prototype.writeIntBE=function(f,m,T,M){if(f=+f,m=m>>>0,!M){const be=Math.pow(2,8*T-1);Z(this,f,m,T,be-1,-be)}let F=T-1,z=1,Ee=0;for(this[m+F]=f&255;--F>=0&&(z*=256);)f<0&&Ee===0&&this[m+F+1]!==0&&(Ee=1),this[m+F]=(f/z>>0)-Ee&255;return m+T},h.prototype.writeInt8=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,1,127,-128),f<0&&(f=255+f+1),this[m]=f&255,m+1},h.prototype.writeInt16LE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,2,32767,-32768),this[m]=f&255,this[m+1]=f>>>8,m+2},h.prototype.writeInt16BE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,2,32767,-32768),this[m]=f>>>8,this[m+1]=f&255,m+2},h.prototype.writeInt32LE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,4,2147483647,-2147483648),this[m]=f&255,this[m+1]=f>>>8,this[m+2]=f>>>16,this[m+3]=f>>>24,m+4},h.prototype.writeInt32BE=function(f,m,T){return f=+f,m=m>>>0,T||Z(this,f,m,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[m]=f>>>24,this[m+1]=f>>>16,this[m+2]=f>>>8,this[m+3]=f&255,m+4},h.prototype.writeBigInt64LE=fn(function(f,m=0){return ne(this,f,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=fn(function(f,m=0){return Se(this,f,m,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function pe(v,f,m,T,M,F){if(m+T>v.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function we(v,f,m,T,M){return f=+f,m=m>>>0,M||pe(v,f,m,4),t.write(v,f,m,T,23,4),m+4}h.prototype.writeFloatLE=function(f,m,T){return we(this,f,m,!0,T)},h.prototype.writeFloatBE=function(f,m,T){return we(this,f,m,!1,T)};function ot(v,f,m,T,M){return f=+f,m=m>>>0,M||pe(v,f,m,8),t.write(v,f,m,T,52,8),m+8}h.prototype.writeDoubleLE=function(f,m,T){return ot(this,f,m,!0,T)},h.prototype.writeDoubleBE=function(f,m,T){return ot(this,f,m,!1,T)},h.prototype.copy=function(f,m,T,M){if(!h.isBuffer(f))throw new TypeError("argument should be a Buffer");if(T||(T=0),!M&&M!==0&&(M=this.length),m>=f.length&&(m=f.length),m||(m=0),M>0&&M<T&&(M=T),M===T||f.length===0||this.length===0)return 0;if(m<0)throw new RangeError("targetStart out of bounds");if(T<0||T>=this.length)throw new RangeError("Index out of range");if(M<0)throw new RangeError("sourceEnd out of bounds");M>this.length&&(M=this.length),f.length-m<M-T&&(M=f.length-m+T);const F=M-T;return this===f&&typeof r.prototype.copyWithin=="function"?this.copyWithin(m,T,M):r.prototype.set.call(f,this.subarray(T,M),m),F},h.prototype.fill=function(f,m,T,M){if(typeof f=="string"){if(typeof m=="string"?(M=m,m=0,T=this.length):typeof T=="string"&&(M=T,T=this.length),M!==void 0&&typeof M!="string")throw new TypeError("encoding must be a string");if(typeof M=="string"&&!h.isEncoding(M))throw new TypeError("Unknown encoding: "+M);if(f.length===1){const z=f.charCodeAt(0);(M==="utf8"&&z<128||M==="latin1")&&(f=z)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(m<0||this.length<m||this.length<T)throw new RangeError("Out of range index");if(T<=m)return this;m=m>>>0,T=T===void 0?this.length:T>>>0,f||(f=0);let F;if(typeof f=="number")for(F=m;F<T;++F)this[F]=f;else{const z=h.isBuffer(f)?f:h.from(f,M),Ee=z.length;if(Ee===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(F=0;F<T-m;++F)this[F+m]=z[F%Ee]}return this};const me={};function ve(v,f,m){me[v]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(M){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:M,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}ve("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ve("ERR_INVALID_ARG_TYPE",function(v,f){return`The "${v}" argument must be of type number. Received type ${typeof f}`},TypeError),ve("ERR_OUT_OF_RANGE",function(v,f,m){let T=`The value of "${v}" is out of range.`,M=m;return Number.isInteger(m)&&Math.abs(m)>2**32?M=_t(String(m)):typeof m=="bigint"&&(M=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(M=_t(M)),M+="n"),T+=` It must be ${f}. Received ${M}`,T},RangeError);function _t(v){let f="",m=v.length;const T=v[0]==="-"?1:0;for(;m>=T+4;m-=3)f=`_${v.slice(m-3,m)}${f}`;return`${v.slice(0,m)}${f}`}function xe(v,f,m){sn(f,"offset"),(v[f]===void 0||v[f+m]===void 0)&&De(f,v.length-(m+1))}function Me(v,f,m,T,M,F){if(v>m||v<f){const z=typeof f=="bigint"?"n":"";let Ee;throw f===0||f===BigInt(0)?Ee=`>= 0${z} and < 2${z} ** ${(F+1)*8}${z}`:Ee=`>= -(2${z} ** ${(F+1)*8-1}${z}) and < 2 ** ${(F+1)*8-1}${z}`,new me.ERR_OUT_OF_RANGE("value",Ee,v)}xe(T,M,F)}function sn(v,f){if(typeof v!="number")throw new me.ERR_INVALID_ARG_TYPE(f,"number",v)}function De(v,f,m){throw Math.floor(v)!==v?(sn(v,m),new me.ERR_OUT_OF_RANGE("offset","an integer",v)):f<0?new me.ERR_BUFFER_OUT_OF_BOUNDS:new me.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,v)}const je=/[^+/0-9A-Za-z-_]/g;function xi(v){if(v=v.split("=")[0],v=v.trim().replace(je,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function He(v,f){f=f||1/0;let m;const T=v.length;let M=null;const F=[];for(let z=0;z<T;++z){if(m=v.charCodeAt(z),m>55295&&m<57344){if(!M){if(m>56319){(f-=3)>-1&&F.push(239,191,189);continue}else if(z+1===T){(f-=3)>-1&&F.push(239,191,189);continue}M=m;continue}if(m<56320){(f-=3)>-1&&F.push(239,191,189),M=m;continue}m=(M-55296<<10|m-56320)+65536}else M&&(f-=3)>-1&&F.push(239,191,189);if(M=null,m<128){if((f-=1)<0)break;F.push(m)}else if(m<2048){if((f-=2)<0)break;F.push(m>>6|192,m&63|128)}else if(m<65536){if((f-=3)<0)break;F.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((f-=4)<0)break;F.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return F}function tt(v){const f=[];for(let m=0;m<v.length;++m)f.push(v.charCodeAt(m)&255);return f}function Lr(v,f){let m,T,M;const F=[];for(let z=0;z<v.length&&!((f-=2)<0);++z)m=v.charCodeAt(z),T=m>>8,M=m%256,F.push(M),F.push(T);return F}function Xe(v){return e.toByteArray(xi(v))}function Ge(v,f,m,T){let M;for(M=0;M<T&&!(M+m>=f.length||M>=v.length);++M)f[M+m]=v[M];return M}function Jt(v,f){return v instanceof f||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===f.name}function Ze(v){return v!==v}const nt=function(){const v="0123456789abcdef",f=new Array(256);for(let m=0;m<16;++m){const T=m*16;for(let M=0;M<16;++M)f[T+M]=v[m]+v[M]}return f}();function fn(v){return typeof BigInt>"u"?it:v}function it(){throw new Error("BigInt not supported")}})(At);const ke=At.Buffer,id=At.Blob,rd=At.BlobOptions,fe=At.Buffer,sd=At.File,od=At.FileOptions,ad=At.INSPECT_MAX_BYTES,cd=At.SlowBuffer,ld=At.TranscodeEncoding,ud=At.atob,hd=At.btoa,dd=At.constants,fd=At.isAscii,pd=At.isUtf8,gd=At.kMaxLength,md=At.kStringMaxLength,yd=At.resolveObjectURL,wd=At.transcode,bd=Object.freeze(Object.defineProperty({__proto__:null,Blob:id,BlobOptions:rd,Buffer:fe,File:sd,FileOptions:od,INSPECT_MAX_BYTES:ad,SlowBuffer:cd,TranscodeEncoding:ld,atob:ud,btoa:hd,constants:dd,default:ke,isAscii:fd,isUtf8:pd,kMaxLength:gd,kStringMaxLength:md,resolveObjectURL:yd,transcode:wd},Symbol.toStringTag,{value:"Module"}));function mc(i){if(!Number.isSafeInteger(i)||i<0)throw new Error("positive integer expected, got "+i)}function vd(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function ps(i,...e){if(!vd(i))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(i.length))throw new Error("Uint8Array expected of length "+e+", got length="+i.length)}function Sd(i){if(typeof i!="function"||typeof i.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");mc(i.outputLen),mc(i.blockLen)}function jr(i,e=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(e&&i.finished)throw new Error("Hash#digest() has already been called")}function Ed(i,e){ps(i);const t=e.outputLen;if(i.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const Ci=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lo(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function bn(i,e){return i<<32-e|i>>>e}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function _d(i){if(typeof i!="string")throw new Error("utf8ToBytes expected string, got "+typeof i);return new Uint8Array(new TextEncoder().encode(i))}function oa(i){return typeof i=="string"&&(i=_d(i)),ps(i),i}function Rd(...i){let e=0;for(let n=0;n<i.length;n++){const s=i[n];ps(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<i.length;n++){const r=i[n];t.set(r,s),s+=r.length}return t}let wl=class{clone(){return this._cloneInto()}};function bl(i){const e=n=>i().update(oa(n)).digest(),t=i();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>i(),e}function vl(i=32){if(Ci&&typeof Ci.getRandomValues=="function")return Ci.getRandomValues(new Uint8Array(i));if(Ci&&typeof Ci.randomBytes=="function")return Uint8Array.from(Ci.randomBytes(i));throw new Error("crypto.getRandomValues must be defined")}function kd(i,e,t,n){if(typeof i.setBigUint64=="function")return i.setBigUint64(e,t,n);const s=BigInt(32),r=BigInt(4294967295),o=Number(t>>s&r),a=Number(t&r),l=n?4:0,p=n?0:4;i.setUint32(e+l,o,n),i.setUint32(e+p,a,n)}function Pd(i,e,t){return i&e^~i&t}function Ad(i,e,t){return i&e^i&t^e&t}let Sl=class extends wl{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=lo(this.buffer)}update(e){jr(this);const{view:t,buffer:n,blockLen:s}=this;e=oa(e);const r=e.length;for(let o=0;o<r;){const a=Math.min(s-this.pos,r-o);if(a===s){const l=lo(e);for(;s<=r-o;o+=s)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){jr(this),Ed(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:r}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(n,0),o=0);for(let b=o;b<s;b++)t[b]=0;kd(n,s-8,BigInt(this.length*8),r),this.process(n,0);const a=lo(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=l/4,h=this.get();if(p>h.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)a.setUint32(4*b,h[b],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:r,destroyed:o,pos:a}=this;return e.length=s,e.pos=a,e.finished=r,e.destroyed=o,s%t&&e.buffer.set(n),e}};const Od=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),jn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Zn=new Uint32Array(64);let Td=class extends Sl{constructor(e=32){super(64,e,8,!1),this.A=jn[0]|0,this.B=jn[1]|0,this.C=jn[2]|0,this.D=jn[3]|0,this.E=jn[4]|0,this.F=jn[5]|0,this.G=jn[6]|0,this.H=jn[7]|0}get(){const{A:e,B:t,C:n,D:s,E:r,F:o,G:a,H:l}=this;return[e,t,n,s,r,o,a,l]}set(e,t,n,s,r,o,a,l){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=r|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let b=0;b<16;b++,t+=4)Zn[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const k=Zn[b-15],_=Zn[b-2],x=bn(k,7)^bn(k,18)^k>>>3,C=bn(_,17)^bn(_,19)^_>>>10;Zn[b]=C+Zn[b-7]+x+Zn[b-16]|0}let{A:n,B:s,C:r,D:o,E:a,F:l,G:p,H:h}=this;for(let b=0;b<64;b++){const k=bn(a,6)^bn(a,11)^bn(a,25),_=h+k+Pd(a,l,p)+Od[b]+Zn[b]|0,C=(bn(n,2)^bn(n,13)^bn(n,22))+Ad(n,s,r)|0;h=p,p=l,l=a,a=o+_|0,o=r,r=s,s=n,n=_+C|0}n=n+this.A|0,s=s+this.B|0,r=r+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,p=p+this.G|0,h=h+this.H|0,this.set(n,s,r,o,a,l,p,h)}roundClean(){Zn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const xd=bl(()=>new Td),Mr=BigInt(2**32-1),Uo=BigInt(32);function El(i,e=!1){return e?{h:Number(i&Mr),l:Number(i>>Uo&Mr)}:{h:Number(i>>Uo&Mr)|0,l:Number(i&Mr)|0}}function Id(i,e=!1){let t=new Uint32Array(i.length),n=new Uint32Array(i.length);for(let s=0;s<i.length;s++){const{h:r,l:o}=El(i[s],e);[t[s],n[s]]=[r,o]}return[t,n]}const Cd=(i,e)=>BigInt(i>>>0)<<Uo|BigInt(e>>>0),Nd=(i,e,t)=>i>>>t,Bd=(i,e,t)=>i<<32-t|e>>>t,Ld=(i,e,t)=>i>>>t|e<<32-t,Md=(i,e,t)=>i<<32-t|e>>>t,Fd=(i,e,t)=>i<<64-t|e>>>t-32,Ud=(i,e,t)=>i>>>t-32|e<<64-t,Dd=(i,e)=>e,Vd=(i,e)=>i,$d=(i,e,t)=>i<<t|e>>>32-t,zd=(i,e,t)=>e<<t|i>>>32-t,Hd=(i,e,t)=>e<<t-32|i>>>64-t,Kd=(i,e,t)=>i<<t-32|e>>>64-t;function Wd(i,e,t,n){const s=(e>>>0)+(n>>>0);return{h:i+t+(s/2**32|0)|0,l:s|0}}const Gd=(i,e,t)=>(i>>>0)+(e>>>0)+(t>>>0),qd=(i,e,t,n)=>e+t+n+(i/2**32|0)|0,jd=(i,e,t,n)=>(i>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Zd=(i,e,t,n,s)=>e+t+n+s+(i/2**32|0)|0,Yd=(i,e,t,n,s)=>(i>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),Xd=(i,e,t,n,s,r)=>e+t+n+s+r+(i/2**32|0)|0,_e={fromBig:El,split:Id,toBig:Cd,shrSH:Nd,shrSL:Bd,rotrSH:Ld,rotrSL:Md,rotrBH:Fd,rotrBL:Ud,rotr32H:Dd,rotr32L:Vd,rotlSH:$d,rotlSL:zd,rotlBH:Hd,rotlBL:Kd,add:Wd,add3L:Gd,add3H:qd,add4L:jd,add4H:Zd,add5H:Xd,add5L:Yd},[Jd,Qd]=_e.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(i=>BigInt(i))),Yn=new Uint32Array(80),Xn=new Uint32Array(80);class ef extends Sl{constructor(e=64){super(128,e,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:r,Cl:o,Dh:a,Dl:l,Eh:p,El:h,Fh:b,Fl:k,Gh:_,Gl:x,Hh:C,Hl:A}=this;return[e,t,n,s,r,o,a,l,p,h,b,k,_,x,C,A]}set(e,t,n,s,r,o,a,l,p,h,b,k,_,x,C,A){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=r|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=p|0,this.El=h|0,this.Fh=b|0,this.Fl=k|0,this.Gh=_|0,this.Gl=x|0,this.Hh=C|0,this.Hl=A|0}process(e,t){for(let L=0;L<16;L++,t+=4)Yn[L]=e.getUint32(t),Xn[L]=e.getUint32(t+=4);for(let L=16;L<80;L++){const W=Yn[L-15]|0,Y=Xn[L-15]|0,J=_e.rotrSH(W,Y,1)^_e.rotrSH(W,Y,8)^_e.shrSH(W,Y,7),Q=_e.rotrSL(W,Y,1)^_e.rotrSL(W,Y,8)^_e.shrSL(W,Y,7),ee=Yn[L-2]|0,oe=Xn[L-2]|0,de=_e.rotrSH(ee,oe,19)^_e.rotrBH(ee,oe,61)^_e.shrSH(ee,oe,6),ie=_e.rotrSL(ee,oe,19)^_e.rotrBL(ee,oe,61)^_e.shrSL(ee,oe,6),K=_e.add4L(Q,ie,Xn[L-7],Xn[L-16]),R=_e.add4H(K,J,de,Yn[L-7],Yn[L-16]);Yn[L]=R|0,Xn[L]=K|0}let{Ah:n,Al:s,Bh:r,Bl:o,Ch:a,Cl:l,Dh:p,Dl:h,Eh:b,El:k,Fh:_,Fl:x,Gh:C,Gl:A,Hh:B,Hl:D}=this;for(let L=0;L<80;L++){const W=_e.rotrSH(b,k,14)^_e.rotrSH(b,k,18)^_e.rotrBH(b,k,41),Y=_e.rotrSL(b,k,14)^_e.rotrSL(b,k,18)^_e.rotrBL(b,k,41),J=b&_^~b&C,Q=k&x^~k&A,ee=_e.add5L(D,Y,Q,Qd[L],Xn[L]),oe=_e.add5H(ee,B,W,J,Jd[L],Yn[L]),de=ee|0,ie=_e.rotrSH(n,s,28)^_e.rotrBH(n,s,34)^_e.rotrBH(n,s,39),K=_e.rotrSL(n,s,28)^_e.rotrBL(n,s,34)^_e.rotrBL(n,s,39),R=n&r^n&a^r&a,c=s&o^s&l^o&l;B=C|0,D=A|0,C=_|0,A=x|0,_=b|0,x=k|0,{h:b,l:k}=_e.add(p|0,h|0,oe|0,de|0),p=a|0,h=l|0,a=r|0,l=o|0,r=n|0,o=s|0;const d=_e.add3L(de,K,c);n=_e.add3H(d,oe,ie,R),s=d|0}({h:n,l:s}=_e.add(this.Ah|0,this.Al|0,n|0,s|0)),{h:r,l:o}=_e.add(this.Bh|0,this.Bl|0,r|0,o|0),{h:a,l}=_e.add(this.Ch|0,this.Cl|0,a|0,l|0),{h:p,l:h}=_e.add(this.Dh|0,this.Dl|0,p|0,h|0),{h:b,l:k}=_e.add(this.Eh|0,this.El|0,b|0,k|0),{h:_,l:x}=_e.add(this.Fh|0,this.Fl|0,_|0,x|0),{h:C,l:A}=_e.add(this.Gh|0,this.Gl|0,C|0,A|0),{h:B,l:D}=_e.add(this.Hh|0,this.Hl|0,B|0,D|0),this.set(n,s,r,o,a,l,p,h,b,k,_,x,C,A,B,D)}roundClean(){Yn.fill(0),Xn.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const tf=bl(()=>new ef);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const aa=BigInt(0),Do=BigInt(1);function zi(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function ca(i){if(!zi(i))throw new Error("Uint8Array expected")}function ni(i,e){if(typeof e!="boolean")throw new Error(i+" boolean expected, got "+e)}function Fr(i){const e=i.toString(16);return e.length&1?"0"+e:e}function _l(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);return i===""?aa:BigInt("0x"+i)}const Rl=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",nf=Array.from({length:256},(i,e)=>e.toString(16).padStart(2,"0"));function Hi(i){if(ca(i),Rl)return i.toHex();let e="";for(let t=0;t<i.length;t++)e+=nf[i[t]];return e}const Bn={_0:48,_9:57,A:65,F:70,a:97,f:102};function yc(i){if(i>=Bn._0&&i<=Bn._9)return i-Bn._0;if(i>=Bn.A&&i<=Bn.F)return i-(Bn.A-10);if(i>=Bn.a&&i<=Bn.f)return i-(Bn.a-10)}function Zr(i){if(typeof i!="string")throw new Error("hex string expected, got "+typeof i);if(Rl)return Uint8Array.fromHex(i);const e=i.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,r=0;s<t;s++,r+=2){const o=yc(i.charCodeAt(r)),a=yc(i.charCodeAt(r+1));if(o===void 0||a===void 0){const l=i[r]+i[r+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+r)}n[s]=o*16+a}return n}function bi(i){return _l(Hi(i))}function hr(i){return ca(i),_l(Hi(Uint8Array.from(i).reverse()))}function yr(i,e){return Zr(i.toString(16).padStart(e*2,"0"))}function Yr(i,e){return yr(i,e).reverse()}function Et(i,e,t){let n;if(typeof e=="string")try{n=Zr(e)}catch(r){throw new Error(i+" must be hex string or Uint8Array, cause: "+r)}else if(zi(e))n=Uint8Array.from(e);else throw new Error(i+" must be hex string or Uint8Array");const s=n.length;if(typeof t=="number"&&s!==t)throw new Error(i+" of length "+t+" expected, got "+s);return n}function Ki(...i){let e=0;for(let n=0;n<i.length;n++){const s=i[n];ca(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<i.length;n++){const r=i[n];t.set(r,s),s+=r.length}return t}const uo=i=>typeof i=="bigint"&&aa<=i;function la(i,e,t){return uo(i)&&uo(e)&&uo(t)&&e<=i&&i<t}function pn(i,e,t,n){if(!la(e,t,n))throw new Error("expected valid "+i+": "+t+" <= n < "+n+", got "+e)}function rf(i){let e;for(e=0;i>aa;i>>=Do,e+=1);return e}const gs=i=>(Do<<BigInt(i))-Do,ho=i=>new Uint8Array(i),wc=i=>Uint8Array.from(i);function sf(i,e,t){if(typeof i!="number"||i<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=ho(i),s=ho(i),r=0;const o=()=>{n.fill(1),s.fill(0),r=0},a=(...b)=>t(s,n,...b),l=(b=ho(0))=>{s=a(wc([0]),b),n=a(),b.length!==0&&(s=a(wc([1]),b),n=a())},p=()=>{if(r++>=1e3)throw new Error("drbg: tried 1000 values");let b=0;const k=[];for(;b<e;){n=a();const _=n.slice();k.push(_),b+=n.length}return Ki(...k)};return(b,k)=>{o(),l(b);let _;for(;!(_=k(p()));)l();return o(),_}}const of={bigint:i=>typeof i=="bigint",function:i=>typeof i=="function",boolean:i=>typeof i=="boolean",string:i=>typeof i=="string",stringOrUint8Array:i=>typeof i=="string"||zi(i),isSafeInteger:i=>Number.isSafeInteger(i),array:i=>Array.isArray(i),field:(i,e)=>e.Fp.isValid(i),hash:i=>typeof i=="function"&&Number.isSafeInteger(i.outputLen)};function Pr(i,e,t={}){const n=(s,r,o)=>{const a=of[r];if(typeof a!="function")throw new Error("invalid validator function");const l=i[s];if(!(o&&l===void 0)&&!a(l,i))throw new Error("param "+String(s)+" is invalid. Expected "+r+", got "+l)};for(const[s,r]of Object.entries(e))n(s,r,!1);for(const[s,r]of Object.entries(t))n(s,r,!0);return i}function Xr(i){const e=new WeakMap;return(t,...n)=>{const s=e.get(t);if(s!==void 0)return s;const r=i(t,...n);return e.set(t,r),r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xt=BigInt(0),Qe=BigInt(1),di=BigInt(2),af=BigInt(3),Vo=BigInt(4),bc=BigInt(5),vc=BigInt(8);function Ye(i,e){const t=i%e;return t>=xt?t:e+t}function cf(i,e,t){if(e<xt)throw new Error("invalid exponent, negatives unsupported");if(t<=xt)throw new Error("invalid modulus");if(t===Qe)return xt;let n=Qe;for(;e>xt;)e&Qe&&(n=n*i%t),i=i*i%t,e>>=Qe;return n}function rt(i,e,t){let n=i;for(;e-- >xt;)n*=n,n%=t;return n}function $o(i,e){if(i===xt)throw new Error("invert: expected non-zero number");if(e<=xt)throw new Error("invert: expected positive modulus, got "+e);let t=Ye(i,e),n=e,s=xt,r=Qe;for(;t!==xt;){const a=n/t,l=n%t,p=s-r*a;n=t,t=l,s=r,r=p}if(n!==Qe)throw new Error("invert: does not exist");return Ye(s,e)}function lf(i){const e=(i-Qe)/di;let t,n,s;for(t=i-Qe,n=0;t%di===xt;t/=di,n++);for(s=di;s<i&&cf(s,e,i)!==i-Qe;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(n===1){const o=(i+Qe)/Vo;return function(l,p){const h=l.pow(p,o);if(!l.eql(l.sqr(h),p))throw new Error("Cannot find square root");return h}}const r=(t+Qe)/di;return function(a,l){if(a.pow(l,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let p=n,h=a.pow(a.mul(a.ONE,s),t),b=a.pow(l,r),k=a.pow(l,t);for(;!a.eql(k,a.ONE);){if(a.eql(k,a.ZERO))return a.ZERO;let _=1;for(let C=a.sqr(k);_<p&&!a.eql(C,a.ONE);_++)C=a.sqr(C);const x=a.pow(h,Qe<<BigInt(p-_-1));h=a.sqr(x),b=a.mul(b,x),k=a.mul(k,h),p=_}return b}}function uf(i){if(i%Vo===af){const e=(i+Qe)/Vo;return function(n,s){const r=n.pow(s,e);if(!n.eql(n.sqr(r),s))throw new Error("Cannot find square root");return r}}if(i%vc===bc){const e=(i-bc)/vc;return function(n,s){const r=n.mul(s,di),o=n.pow(r,e),a=n.mul(s,o),l=n.mul(n.mul(a,di),o),p=n.mul(a,n.sub(l,n.ONE));if(!n.eql(n.sqr(p),s))throw new Error("Cannot find square root");return p}}return lf(i)}const hf=(i,e)=>(Ye(i,e)&Qe)===Qe,df=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ff(i){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=df.reduce((n,s)=>(n[s]="function",n),e);return Pr(i,t)}function pf(i,e,t){if(t<xt)throw new Error("invalid exponent, negatives unsupported");if(t===xt)return i.ONE;if(t===Qe)return e;let n=i.ONE,s=e;for(;t>xt;)t&Qe&&(n=i.mul(n,s)),s=i.sqr(s),t>>=Qe;return n}function gf(i,e){const t=new Array(e.length),n=e.reduce((r,o,a)=>i.is0(o)?r:(t[a]=r,i.mul(r,o)),i.ONE),s=i.inv(n);return e.reduceRight((r,o,a)=>i.is0(o)?r:(t[a]=i.mul(r,t[a]),i.mul(r,o)),s),t}function kl(i,e){const t=e!==void 0?e:i.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function ms(i,e,t=!1,n={}){if(i<=xt)throw new Error("invalid field: expected ORDER > 0, got "+i);const{nBitLength:s,nByteLength:r}=kl(i,e);if(r>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:i,isLE:t,BITS:s,BYTES:r,MASK:gs(s),ZERO:xt,ONE:Qe,create:l=>Ye(l,i),isValid:l=>{if(typeof l!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof l);return xt<=l&&l<i},is0:l=>l===xt,isOdd:l=>(l&Qe)===Qe,neg:l=>Ye(-l,i),eql:(l,p)=>l===p,sqr:l=>Ye(l*l,i),add:(l,p)=>Ye(l+p,i),sub:(l,p)=>Ye(l-p,i),mul:(l,p)=>Ye(l*p,i),pow:(l,p)=>pf(a,l,p),div:(l,p)=>Ye(l*$o(p,i),i),sqrN:l=>l*l,addN:(l,p)=>l+p,subN:(l,p)=>l-p,mulN:(l,p)=>l*p,inv:l=>$o(l,i),sqrt:n.sqrt||(l=>(o||(o=uf(i)),o(a,l))),invertBatch:l=>gf(a,l),cmov:(l,p,h)=>h?p:l,toBytes:l=>t?Yr(l,r):yr(l,r),fromBytes:l=>{if(l.length!==r)throw new Error("Field.fromBytes: expected "+r+" bytes, got "+l.length);return t?hr(l):bi(l)}});return Object.freeze(a)}function Pl(i){if(typeof i!="bigint")throw new Error("field order must be bigint");const e=i.toString(2).length;return Math.ceil(e/8)}function Al(i){const e=Pl(i);return e+Math.ceil(e/2)}function mf(i,e,t=!1){const n=i.length,s=Pl(e),r=Al(e);if(n<16||n<r||n>1024)throw new Error("expected "+r+"-1024 bytes of input, got "+n);const o=t?hr(i):bi(i),a=Ye(o,e-Qe)+Qe;return t?Yr(a,s):yr(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Sc=BigInt(0),zo=BigInt(1);function fo(i,e){const t=e.negate();return i?t:e}function Ol(i,e){if(!Number.isSafeInteger(i)||i<=0||i>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+i)}function po(i,e){Ol(i,e);const t=Math.ceil(e/i)+1,n=2**(i-1),s=2**i,r=gs(i),o=BigInt(i);return{windows:t,windowSize:n,mask:r,maxNumber:s,shiftBy:o}}function Ec(i,e,t){const{windowSize:n,mask:s,maxNumber:r,shiftBy:o}=t;let a=Number(i&s),l=i>>o;a>n&&(a-=r,l+=zo);const p=e*n,h=p+Math.abs(a)-1,b=a===0,k=a<0,_=e%2!==0;return{nextN:l,offset:h,isZero:b,isNeg:k,isNegF:_,offsetF:p}}function yf(i,e){if(!Array.isArray(i))throw new Error("array expected");i.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function wf(i,e){if(!Array.isArray(i))throw new Error("array of scalars expected");i.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}const go=new WeakMap,Tl=new WeakMap;function mo(i){return Tl.get(i)||1}function xl(i,e){return{constTimeNegate:fo,hasPrecomputes(t){return mo(t)!==1},unsafeLadder(t,n,s=i.ZERO){let r=t;for(;n>Sc;)n&zo&&(s=s.add(r)),r=r.double(),n>>=zo;return s},precomputeWindow(t,n){const{windows:s,windowSize:r}=po(n,e),o=[];let a=t,l=a;for(let p=0;p<s;p++){l=a,o.push(l);for(let h=1;h<r;h++)l=l.add(a),o.push(l);a=l.double()}return o},wNAF(t,n,s){let r=i.ZERO,o=i.BASE;const a=po(t,e);for(let l=0;l<a.windows;l++){const{nextN:p,offset:h,isZero:b,isNeg:k,isNegF:_,offsetF:x}=Ec(s,l,a);s=p,b?o=o.add(fo(_,n[x])):r=r.add(fo(k,n[h]))}return{p:r,f:o}},wNAFUnsafe(t,n,s,r=i.ZERO){const o=po(t,e);for(let a=0;a<o.windows&&s!==Sc;a++){const{nextN:l,offset:p,isZero:h,isNeg:b}=Ec(s,a,o);if(s=l,!h){const k=n[p];r=r.add(b?k.negate():k)}}return r},getPrecomputes(t,n,s){let r=go.get(n);return r||(r=this.precomputeWindow(n,t),t!==1&&go.set(n,s(r))),r},wNAFCached(t,n,s){const r=mo(t);return this.wNAF(r,this.getPrecomputes(r,t,s),n)},wNAFCachedUnsafe(t,n,s,r){const o=mo(t);return o===1?this.unsafeLadder(t,n,r):this.wNAFUnsafe(o,this.getPrecomputes(o,t,s),n,r)},setWindowSize(t,n){Ol(n,e),Tl.set(t,n),go.delete(t)}}}function Il(i,e,t,n){if(yf(t,i),wf(n,e),t.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=i.ZERO,r=rf(BigInt(t.length)),o=r>12?r-3:r>4?r-2:r?2:1,a=gs(o),l=new Array(Number(a)+1).fill(s),p=Math.floor((e.BITS-1)/o)*o;let h=s;for(let b=p;b>=0;b-=o){l.fill(s);for(let _=0;_<n.length;_++){const x=n[_],C=Number(x>>BigInt(b)&a);l[C]=l[C].add(t[_])}let k=s;for(let _=l.length-1,x=s;_>0;_--)x=x.add(l[_]),k=k.add(x);if(h=h.add(k),b!==0)for(let _=0;_<o;_++)h=h.double()}return h}function ua(i){return ff(i.Fp),Pr(i,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kl(i.n,i.nBitLength),...i,p:i.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vn=BigInt(0),zt=BigInt(1),_c=BigInt(2),bf=BigInt(8),vf={zip215:!0};function Sf(i){const e=ua(i);return Pr(i,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...e})}function Ef(i){const e=Sf(i),{Fp:t,n,prehash:s,hash:r,randomBytes:o,nByteLength:a,h:l}=e,p=_c<<BigInt(a*8)-zt,h=t.create,b=ms(e.n,e.nBitLength),k=e.uvRatio||((S,E)=>{try{return{isValid:!0,value:t.sqrt(S*t.inv(E))}}catch{return{isValid:!1,value:vn}}}),_=e.adjustScalarBytes||(S=>S),x=e.domain||((S,E,O)=>{if(ni("phflag",O),E.length||O)throw new Error("Contexts/pre-hash are not supported");return S});function C(S,E,O=!1){const N=O?zt:vn;pn("coordinate "+S,E,N,p)}function A(S){if(!(S instanceof L))throw new Error("ExtendedPoint expected")}const B=Xr((S,E)=>{const{ex:O,ey:N,ez:P}=S,y=S.is0();E==null&&(E=y?bf:t.inv(P));const I=h(O*E),j=h(N*E),Z=h(P*E);if(y)return{x:vn,y:zt};if(Z!==zt)throw new Error("invZ was invalid");return{x:I,y:j}}),D=Xr(S=>{const{a:E,d:O}=e;if(S.is0())throw new Error("bad point: ZERO");const{ex:N,ey:P,ez:y,et:I}=S,j=h(N*N),Z=h(P*P),ne=h(y*y),Se=h(ne*ne),pe=h(j*E),we=h(ne*h(pe+Z)),ot=h(Se+h(O*h(j*Z)));if(we!==ot)throw new Error("bad point: equation left != right (1)");const me=h(N*P),ve=h(y*I);if(me!==ve)throw new Error("bad point: equation left != right (2)");return!0});class L{constructor(E,O,N,P){C("x",E),C("y",O),C("z",N,!0),C("t",P),this.ex=E,this.ey=O,this.ez=N,this.et=P,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(E){if(E instanceof L)throw new Error("extended point not allowed");const{x:O,y:N}=E||{};return C("x",O),C("y",N),new L(O,N,zt,h(O*N))}static normalizeZ(E){const O=t.invertBatch(E.map(N=>N.ez));return E.map((N,P)=>N.toAffine(O[P])).map(L.fromAffine)}static msm(E,O){return Il(L,b,E,O)}_setWindowSize(E){J.setWindowSize(this,E)}assertValidity(){D(this)}equals(E){A(E);const{ex:O,ey:N,ez:P}=this,{ex:y,ey:I,ez:j}=E,Z=h(O*j),ne=h(y*P),Se=h(N*j),pe=h(I*P);return Z===ne&&Se===pe}is0(){return this.equals(L.ZERO)}negate(){return new L(h(-this.ex),this.ey,this.ez,h(-this.et))}double(){const{a:E}=e,{ex:O,ey:N,ez:P}=this,y=h(O*O),I=h(N*N),j=h(_c*h(P*P)),Z=h(E*y),ne=O+N,Se=h(h(ne*ne)-y-I),pe=Z+I,we=pe-j,ot=Z-I,me=h(Se*we),ve=h(pe*ot),_t=h(Se*ot),xe=h(we*pe);return new L(me,ve,xe,_t)}add(E){A(E);const{a:O,d:N}=e,{ex:P,ey:y,ez:I,et:j}=this,{ex:Z,ey:ne,ez:Se,et:pe}=E,we=h(P*Z),ot=h(y*ne),me=h(j*N*pe),ve=h(I*Se),_t=h((P+y)*(Z+ne)-we-ot),xe=ve-me,Me=ve+me,sn=h(ot-O*we),De=h(_t*xe),je=h(Me*sn),xi=h(_t*sn),He=h(xe*Me);return new L(De,je,He,xi)}subtract(E){return this.add(E.negate())}wNAF(E){return J.wNAFCached(this,E,L.normalizeZ)}multiply(E){const O=E;pn("scalar",O,zt,n);const{p:N,f:P}=this.wNAF(O);return L.normalizeZ([N,P])[0]}multiplyUnsafe(E,O=L.ZERO){const N=E;return pn("scalar",N,vn,n),N===vn?Y:this.is0()||N===zt?this:J.wNAFCachedUnsafe(this,N,L.normalizeZ,O)}isSmallOrder(){return this.multiplyUnsafe(l).is0()}isTorsionFree(){return J.unsafeLadder(this,n).is0()}toAffine(E){return B(this,E)}clearCofactor(){const{h:E}=e;return E===zt?this:this.multiplyUnsafe(E)}static fromHex(E,O=!1){const{d:N,a:P}=e,y=t.BYTES;E=Et("pointHex",E,y),ni("zip215",O);const I=E.slice(),j=E[y-1];I[y-1]=j&-129;const Z=hr(I),ne=O?p:t.ORDER;pn("pointHex.y",Z,vn,ne);const Se=h(Z*Z),pe=h(Se-zt),we=h(N*Se-P);let{isValid:ot,value:me}=k(pe,we);if(!ot)throw new Error("Point.fromHex: invalid y coordinate");const ve=(me&zt)===zt,_t=(j&128)!==0;if(!O&&me===vn&&_t)throw new Error("Point.fromHex: x=0 and x_0=1");return _t!==ve&&(me=h(-me)),L.fromAffine({x:me,y:Z})}static fromPrivateKey(E){const{scalar:O}=oe(E);return W.multiply(O)}toRawBytes(){const{x:E,y:O}=this.toAffine(),N=Yr(O,t.BYTES);return N[N.length-1]|=E&zt?128:0,N}toHex(){return Hi(this.toRawBytes())}}L.BASE=new L(e.Gx,e.Gy,zt,h(e.Gx*e.Gy)),L.ZERO=new L(vn,zt,zt,vn);const{BASE:W,ZERO:Y}=L,J=xl(L,a*8);function Q(S){return Ye(S,n)}function ee(S){return Q(hr(S))}function oe(S){const E=t.BYTES;S=Et("private key",S,E);const O=Et("hashed private key",r(S),2*E),N=_(O.slice(0,E)),P=O.slice(E,2*E),y=ee(N);return{head:N,prefix:P,scalar:y}}function de(S){const{head:E,prefix:O,scalar:N}=oe(S),P=W.multiply(N),y=P.toRawBytes();return{head:E,prefix:O,scalar:N,point:P,pointBytes:y}}function ie(S){return de(S).pointBytes}function K(S=new Uint8Array,...E){const O=Ki(...E);return ee(r(x(O,Et("context",S),!!s)))}function R(S,E,O={}){S=Et("message",S),s&&(S=s(S));const{prefix:N,scalar:P,pointBytes:y}=de(E),I=K(O.context,N,S),j=W.multiply(I).toRawBytes(),Z=K(O.context,j,y,S),ne=Q(I+Z*P);pn("signature.s",ne,vn,n);const Se=Ki(j,Yr(ne,t.BYTES));return Et("result",Se,t.BYTES*2)}const c=vf;function d(S,E,O,N=c){const{context:P,zip215:y}=N,I=t.BYTES;S=Et("signature",S,2*I),E=Et("message",E),O=Et("publicKey",O,I),y!==void 0&&ni("zip215",y),s&&(E=s(E));const j=hr(S.slice(I,2*I));let Z,ne,Se;try{Z=L.fromHex(O,y),ne=L.fromHex(S.slice(0,I),y),Se=W.multiplyUnsafe(j)}catch{return!1}if(!y&&Z.isSmallOrder())return!1;const pe=K(P,ne.toRawBytes(),Z.toRawBytes(),E);return ne.add(Z.multiplyUnsafe(pe)).subtract(Se).clearCofactor().equals(L.ZERO)}return W._setWindowSize(8),{CURVE:e,getPublicKey:ie,sign:R,verify:d,ExtendedPoint:L,utils:{getExtendedPublicKey:de,randomPrivateKey:()=>o(t.BYTES),precompute(S=8,E=L.BASE){return E._setWindowSize(S),E.multiply(BigInt(3)),E}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ha=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Rc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _f=BigInt(1),kc=BigInt(2);BigInt(3);const Rf=BigInt(5),kf=BigInt(8);function Pf(i){const e=BigInt(10),t=BigInt(20),n=BigInt(40),s=BigInt(80),r=ha,a=i*i%r*i%r,l=rt(a,kc,r)*a%r,p=rt(l,_f,r)*i%r,h=rt(p,Rf,r)*p%r,b=rt(h,e,r)*h%r,k=rt(b,t,r)*b%r,_=rt(k,n,r)*k%r,x=rt(_,s,r)*_%r,C=rt(x,s,r)*_%r,A=rt(C,e,r)*h%r;return{pow_p_5_8:rt(A,kc,r)*i%r,b2:a}}function Af(i){return i[0]&=248,i[31]&=127,i[31]|=64,i}function Of(i,e){const t=ha,n=Ye(e*e*e,t),s=Ye(n*n*e,t),r=Pf(i*s).pow_p_5_8;let o=Ye(i*n*r,t);const a=Ye(e*o*o,t),l=o,p=Ye(o*Rc,t),h=a===i,b=a===Ye(-i,t),k=a===Ye(-i*Rc,t);return h&&(o=l),(b||k)&&(o=p),hf(o,t)&&(o=Ye(-o,t)),{isValid:h||b,value:o}}const Pc=ms(ha,void 0,!0),Tf={a:Pc.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Pc,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:kf,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:tf,randomBytes:vl,adjustScalarBytes:Af,uvRatio:Of},Xi=Ef(Tf);var tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function ys(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ws(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),t}var da={exports:{}};const fa=ws(bd);da.exports;(function(i){(function(e,t){function n(R,c){if(!R)throw new Error(c||"Assertion failed")}function s(R,c){R.super_=c;var d=function(){};d.prototype=c.prototype,R.prototype=new d,R.prototype.constructor=R}function r(R,c,d){if(r.isBN(R))return R;this.negative=0,this.words=null,this.length=0,this.red=null,R!==null&&((c==="le"||c==="be")&&(d=c,c=10),this._init(R||0,c||10,d||"be"))}typeof e=="object"?e.exports=r:t.BN=r,r.BN=r,r.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=fa.Buffer}catch{}r.isBN=function(c){return c instanceof r?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===r.wordSize&&Array.isArray(c.words)},r.max=function(c,d){return c.cmp(d)>0?c:d},r.min=function(c,d){return c.cmp(d)<0?c:d},r.prototype._init=function(c,d,w){if(typeof c=="number")return this._initNumber(c,d,w);if(typeof c=="object")return this._initArray(c,d,w);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),c=c.toString().replace(/\s+/g,"");var S=0;c[0]==="-"&&(S++,this.negative=1),S<c.length&&(d===16?this._parseHex(c,S,w):(this._parseBase(c,d,S),w==="le"&&this._initArray(this.toArray(),d,w)))},r.prototype._initNumber=function(c,d,w){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),d,w)},r.prototype._initArray=function(c,d,w){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var E,O,N=0;if(w==="be")for(S=c.length-1,E=0;S>=0;S-=3)O=c[S]|c[S-1]<<8|c[S-2]<<16,this.words[E]|=O<<N&67108863,this.words[E+1]=O>>>26-N&67108863,N+=24,N>=26&&(N-=26,E++);else if(w==="le")for(S=0,E=0;S<c.length;S+=3)O=c[S]|c[S+1]<<8|c[S+2]<<16,this.words[E]|=O<<N&67108863,this.words[E+1]=O>>>26-N&67108863,N+=24,N>=26&&(N-=26,E++);return this._strip()};function a(R,c){var d=R.charCodeAt(c);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+R)}function l(R,c,d){var w=a(R,d);return d-1>=c&&(w|=a(R,d-1)<<4),w}r.prototype._parseHex=function(c,d,w){this.length=Math.ceil((c.length-d)/6),this.words=new Array(this.length);for(var S=0;S<this.length;S++)this.words[S]=0;var E=0,O=0,N;if(w==="be")for(S=c.length-1;S>=d;S-=2)N=l(c,d,S)<<E,this.words[O]|=N&67108863,E>=18?(E-=18,O+=1,this.words[O]|=N>>>26):E+=8;else{var P=c.length-d;for(S=P%2===0?d+1:d;S<c.length;S+=2)N=l(c,d,S)<<E,this.words[O]|=N&67108863,E>=18?(E-=18,O+=1,this.words[O]|=N>>>26):E+=8}this._strip()};function p(R,c,d,w){for(var S=0,E=0,O=Math.min(R.length,d),N=c;N<O;N++){var P=R.charCodeAt(N)-48;S*=w,P>=49?E=P-49+10:P>=17?E=P-17+10:E=P,n(P>=0&&E<w,"Invalid character"),S+=E}return S}r.prototype._parseBase=function(c,d,w){this.words=[0],this.length=1;for(var S=0,E=1;E<=67108863;E*=d)S++;S--,E=E/d|0;for(var O=c.length-w,N=O%S,P=Math.min(O,O-N)+w,y=0,I=w;I<P;I+=S)y=p(c,I,I+S,d),this.imuln(E),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y);if(N!==0){var j=1;for(y=p(c,I,c.length,d),I=0;I<N;I++)j*=d;this.imuln(j),this.words[0]+y<67108864?this.words[0]+=y:this._iaddn(y)}this._strip()},r.prototype.copy=function(c){c.words=new Array(this.length);for(var d=0;d<this.length;d++)c.words[d]=this.words[d];c.length=this.length,c.negative=this.negative,c.red=this.red};function h(R,c){R.words=c.words,R.length=c.length,R.negative=c.negative,R.red=c.red}if(r.prototype._move=function(c){h(c,this)},r.prototype.clone=function(){var c=new r(null);return this.copy(c),c},r.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},r.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},r.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{r.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{r.prototype.inspect=b}else r.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];r.prototype.toString=function(c,d){c=c||10,d=d|0||1;var w;if(c===16||c==="hex"){w="";for(var S=0,E=0,O=0;O<this.length;O++){var N=this.words[O],P=((N<<S|E)&16777215).toString(16);E=N>>>24-S&16777215,S+=2,S>=26&&(S-=26,O--),E!==0||O!==this.length-1?w=k[6-P.length]+P+w:w=P+w}for(E!==0&&(w=E.toString(16)+w);w.length%d!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(c===(c|0)&&c>=2&&c<=36){var y=_[c],I=x[c];w="";var j=this.clone();for(j.negative=0;!j.isZero();){var Z=j.modrn(I).toString(c);j=j.idivn(I),j.isZero()?w=Z+w:w=k[y-Z.length]+Z+w}for(this.isZero()&&(w="0"+w);w.length%d!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},r.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},r.prototype.toJSON=function(){return this.toString(16,2)},o&&(r.prototype.toBuffer=function(c,d){return this.toArrayLike(o,c,d)}),r.prototype.toArray=function(c,d){return this.toArrayLike(Array,c,d)};var C=function(c,d){return c.allocUnsafe?c.allocUnsafe(d):new c(d)};r.prototype.toArrayLike=function(c,d,w){this._strip();var S=this.byteLength(),E=w||Math.max(1,S);n(S<=E,"byte array longer than desired length"),n(E>0,"Requested array length <= 0");var O=C(c,E),N=d==="le"?"LE":"BE";return this["_toArrayLike"+N](O,S),O},r.prototype._toArrayLikeLE=function(c,d){for(var w=0,S=0,E=0,O=0;E<this.length;E++){var N=this.words[E]<<O|S;c[w++]=N&255,w<c.length&&(c[w++]=N>>8&255),w<c.length&&(c[w++]=N>>16&255),O===6?(w<c.length&&(c[w++]=N>>24&255),S=0,O=0):(S=N>>>24,O+=2)}if(w<c.length)for(c[w++]=S;w<c.length;)c[w++]=0},r.prototype._toArrayLikeBE=function(c,d){for(var w=c.length-1,S=0,E=0,O=0;E<this.length;E++){var N=this.words[E]<<O|S;c[w--]=N&255,w>=0&&(c[w--]=N>>8&255),w>=0&&(c[w--]=N>>16&255),O===6?(w>=0&&(c[w--]=N>>24&255),S=0,O=0):(S=N>>>24,O+=2)}if(w>=0)for(c[w--]=S;w>=0;)c[w--]=0},Math.clz32?r.prototype._countBits=function(c){return 32-Math.clz32(c)}:r.prototype._countBits=function(c){var d=c,w=0;return d>=4096&&(w+=13,d>>>=13),d>=64&&(w+=7,d>>>=7),d>=8&&(w+=4,d>>>=4),d>=2&&(w+=2,d>>>=2),w+d},r.prototype._zeroBits=function(c){if(c===0)return 26;var d=c,w=0;return d&8191||(w+=13,d>>>=13),d&127||(w+=7,d>>>=7),d&15||(w+=4,d>>>=4),d&3||(w+=2,d>>>=2),d&1||w++,w},r.prototype.bitLength=function(){var c=this.words[this.length-1],d=this._countBits(c);return(this.length-1)*26+d};function A(R){for(var c=new Array(R.bitLength()),d=0;d<c.length;d++){var w=d/26|0,S=d%26;c[d]=R.words[w]>>>S&1}return c}r.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,d=0;d<this.length;d++){var w=this._zeroBits(this.words[d]);if(c+=w,w!==26)break}return c},r.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},r.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},r.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},r.prototype.isNeg=function(){return this.negative!==0},r.prototype.neg=function(){return this.clone().ineg()},r.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},r.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var d=0;d<c.length;d++)this.words[d]=this.words[d]|c.words[d];return this._strip()},r.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},r.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},r.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},r.prototype.iuand=function(c){var d;this.length>c.length?d=c:d=this;for(var w=0;w<d.length;w++)this.words[w]=this.words[w]&c.words[w];return this.length=d.length,this._strip()},r.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},r.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},r.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},r.prototype.iuxor=function(c){var d,w;this.length>c.length?(d=this,w=c):(d=c,w=this);for(var S=0;S<w.length;S++)this.words[S]=d.words[S]^w.words[S];if(this!==d)for(;S<d.length;S++)this.words[S]=d.words[S];return this.length=d.length,this._strip()},r.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},r.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},r.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},r.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var d=Math.ceil(c/26)|0,w=c%26;this._expand(d),w>0&&d--;for(var S=0;S<d;S++)this.words[S]=~this.words[S]&67108863;return w>0&&(this.words[S]=~this.words[S]&67108863>>26-w),this._strip()},r.prototype.notn=function(c){return this.clone().inotn(c)},r.prototype.setn=function(c,d){n(typeof c=="number"&&c>=0);var w=c/26|0,S=c%26;return this._expand(w+1),d?this.words[w]=this.words[w]|1<<S:this.words[w]=this.words[w]&~(1<<S),this._strip()},r.prototype.iadd=function(c){var d;if(this.negative!==0&&c.negative===0)return this.negative=0,d=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,d=this.isub(c),c.negative=1,d._normSign();var w,S;this.length>c.length?(w=this,S=c):(w=c,S=this);for(var E=0,O=0;O<S.length;O++)d=(w.words[O]|0)+(S.words[O]|0)+E,this.words[O]=d&67108863,E=d>>>26;for(;E!==0&&O<w.length;O++)d=(w.words[O]|0)+E,this.words[O]=d&67108863,E=d>>>26;if(this.length=w.length,E!==0)this.words[this.length]=E,this.length++;else if(w!==this)for(;O<w.length;O++)this.words[O]=w.words[O];return this},r.prototype.add=function(c){var d;return c.negative!==0&&this.negative===0?(c.negative=0,d=this.sub(c),c.negative^=1,d):c.negative===0&&this.negative!==0?(this.negative=0,d=c.sub(this),this.negative=1,d):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},r.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var d=this.iadd(c);return c.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var w=this.cmp(c);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var S,E;w>0?(S=this,E=c):(S=c,E=this);for(var O=0,N=0;N<E.length;N++)d=(S.words[N]|0)-(E.words[N]|0)+O,O=d>>26,this.words[N]=d&67108863;for(;O!==0&&N<S.length;N++)d=(S.words[N]|0)+O,O=d>>26,this.words[N]=d&67108863;if(O===0&&N<S.length&&S!==this)for(;N<S.length;N++)this.words[N]=S.words[N];return this.length=Math.max(this.length,N),S!==this&&(this.negative=1),this._strip()},r.prototype.sub=function(c){return this.clone().isub(c)};function B(R,c,d){d.negative=c.negative^R.negative;var w=R.length+c.length|0;d.length=w,w=w-1|0;var S=R.words[0]|0,E=c.words[0]|0,O=S*E,N=O&67108863,P=O/67108864|0;d.words[0]=N;for(var y=1;y<w;y++){for(var I=P>>>26,j=P&67108863,Z=Math.min(y,c.length-1),ne=Math.max(0,y-R.length+1);ne<=Z;ne++){var Se=y-ne|0;S=R.words[Se]|0,E=c.words[ne]|0,O=S*E+j,I+=O/67108864|0,j=O&67108863}d.words[y]=j|0,P=I|0}return P!==0?d.words[y]=P|0:d.length--,d._strip()}var D=function(c,d,w){var S=c.words,E=d.words,O=w.words,N=0,P,y,I,j=S[0]|0,Z=j&8191,ne=j>>>13,Se=S[1]|0,pe=Se&8191,we=Se>>>13,ot=S[2]|0,me=ot&8191,ve=ot>>>13,_t=S[3]|0,xe=_t&8191,Me=_t>>>13,sn=S[4]|0,De=sn&8191,je=sn>>>13,xi=S[5]|0,He=xi&8191,tt=xi>>>13,Lr=S[6]|0,Xe=Lr&8191,Ge=Lr>>>13,Jt=S[7]|0,Ze=Jt&8191,nt=Jt>>>13,fn=S[8]|0,it=fn&8191,v=fn>>>13,f=S[9]|0,m=f&8191,T=f>>>13,M=E[0]|0,F=M&8191,z=M>>>13,Ee=E[1]|0,be=Ee&8191,ye=Ee>>>13,qe=E[2]|0,ge=qe&8191,at=qe>>>13,lc=E[3]|0,ct=lc&8191,lt=lc>>>13,uc=E[4]|0,ut=uc&8191,ht=uc>>>13,hc=E[5]|0,dt=hc&8191,ft=hc>>>13,dc=E[6]|0,pt=dc&8191,gt=dc>>>13,fc=E[7]|0,mt=fc&8191,yt=fc>>>13,pc=E[8]|0,wt=pc&8191,bt=pc>>>13,gc=E[9]|0,vt=gc&8191,St=gc>>>13;w.negative=c.negative^d.negative,w.length=19,P=Math.imul(Z,F),y=Math.imul(Z,z),y=y+Math.imul(ne,F)|0,I=Math.imul(ne,z);var Hs=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,P=Math.imul(pe,F),y=Math.imul(pe,z),y=y+Math.imul(we,F)|0,I=Math.imul(we,z),P=P+Math.imul(Z,be)|0,y=y+Math.imul(Z,ye)|0,y=y+Math.imul(ne,be)|0,I=I+Math.imul(ne,ye)|0;var Ks=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Ks>>>26)|0,Ks&=67108863,P=Math.imul(me,F),y=Math.imul(me,z),y=y+Math.imul(ve,F)|0,I=Math.imul(ve,z),P=P+Math.imul(pe,be)|0,y=y+Math.imul(pe,ye)|0,y=y+Math.imul(we,be)|0,I=I+Math.imul(we,ye)|0,P=P+Math.imul(Z,ge)|0,y=y+Math.imul(Z,at)|0,y=y+Math.imul(ne,ge)|0,I=I+Math.imul(ne,at)|0;var Ws=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Ws>>>26)|0,Ws&=67108863,P=Math.imul(xe,F),y=Math.imul(xe,z),y=y+Math.imul(Me,F)|0,I=Math.imul(Me,z),P=P+Math.imul(me,be)|0,y=y+Math.imul(me,ye)|0,y=y+Math.imul(ve,be)|0,I=I+Math.imul(ve,ye)|0,P=P+Math.imul(pe,ge)|0,y=y+Math.imul(pe,at)|0,y=y+Math.imul(we,ge)|0,I=I+Math.imul(we,at)|0,P=P+Math.imul(Z,ct)|0,y=y+Math.imul(Z,lt)|0,y=y+Math.imul(ne,ct)|0,I=I+Math.imul(ne,lt)|0;var Gs=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,P=Math.imul(De,F),y=Math.imul(De,z),y=y+Math.imul(je,F)|0,I=Math.imul(je,z),P=P+Math.imul(xe,be)|0,y=y+Math.imul(xe,ye)|0,y=y+Math.imul(Me,be)|0,I=I+Math.imul(Me,ye)|0,P=P+Math.imul(me,ge)|0,y=y+Math.imul(me,at)|0,y=y+Math.imul(ve,ge)|0,I=I+Math.imul(ve,at)|0,P=P+Math.imul(pe,ct)|0,y=y+Math.imul(pe,lt)|0,y=y+Math.imul(we,ct)|0,I=I+Math.imul(we,lt)|0,P=P+Math.imul(Z,ut)|0,y=y+Math.imul(Z,ht)|0,y=y+Math.imul(ne,ut)|0,I=I+Math.imul(ne,ht)|0;var qs=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(qs>>>26)|0,qs&=67108863,P=Math.imul(He,F),y=Math.imul(He,z),y=y+Math.imul(tt,F)|0,I=Math.imul(tt,z),P=P+Math.imul(De,be)|0,y=y+Math.imul(De,ye)|0,y=y+Math.imul(je,be)|0,I=I+Math.imul(je,ye)|0,P=P+Math.imul(xe,ge)|0,y=y+Math.imul(xe,at)|0,y=y+Math.imul(Me,ge)|0,I=I+Math.imul(Me,at)|0,P=P+Math.imul(me,ct)|0,y=y+Math.imul(me,lt)|0,y=y+Math.imul(ve,ct)|0,I=I+Math.imul(ve,lt)|0,P=P+Math.imul(pe,ut)|0,y=y+Math.imul(pe,ht)|0,y=y+Math.imul(we,ut)|0,I=I+Math.imul(we,ht)|0,P=P+Math.imul(Z,dt)|0,y=y+Math.imul(Z,ft)|0,y=y+Math.imul(ne,dt)|0,I=I+Math.imul(ne,ft)|0;var js=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(js>>>26)|0,js&=67108863,P=Math.imul(Xe,F),y=Math.imul(Xe,z),y=y+Math.imul(Ge,F)|0,I=Math.imul(Ge,z),P=P+Math.imul(He,be)|0,y=y+Math.imul(He,ye)|0,y=y+Math.imul(tt,be)|0,I=I+Math.imul(tt,ye)|0,P=P+Math.imul(De,ge)|0,y=y+Math.imul(De,at)|0,y=y+Math.imul(je,ge)|0,I=I+Math.imul(je,at)|0,P=P+Math.imul(xe,ct)|0,y=y+Math.imul(xe,lt)|0,y=y+Math.imul(Me,ct)|0,I=I+Math.imul(Me,lt)|0,P=P+Math.imul(me,ut)|0,y=y+Math.imul(me,ht)|0,y=y+Math.imul(ve,ut)|0,I=I+Math.imul(ve,ht)|0,P=P+Math.imul(pe,dt)|0,y=y+Math.imul(pe,ft)|0,y=y+Math.imul(we,dt)|0,I=I+Math.imul(we,ft)|0,P=P+Math.imul(Z,pt)|0,y=y+Math.imul(Z,gt)|0,y=y+Math.imul(ne,pt)|0,I=I+Math.imul(ne,gt)|0;var Zs=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,P=Math.imul(Ze,F),y=Math.imul(Ze,z),y=y+Math.imul(nt,F)|0,I=Math.imul(nt,z),P=P+Math.imul(Xe,be)|0,y=y+Math.imul(Xe,ye)|0,y=y+Math.imul(Ge,be)|0,I=I+Math.imul(Ge,ye)|0,P=P+Math.imul(He,ge)|0,y=y+Math.imul(He,at)|0,y=y+Math.imul(tt,ge)|0,I=I+Math.imul(tt,at)|0,P=P+Math.imul(De,ct)|0,y=y+Math.imul(De,lt)|0,y=y+Math.imul(je,ct)|0,I=I+Math.imul(je,lt)|0,P=P+Math.imul(xe,ut)|0,y=y+Math.imul(xe,ht)|0,y=y+Math.imul(Me,ut)|0,I=I+Math.imul(Me,ht)|0,P=P+Math.imul(me,dt)|0,y=y+Math.imul(me,ft)|0,y=y+Math.imul(ve,dt)|0,I=I+Math.imul(ve,ft)|0,P=P+Math.imul(pe,pt)|0,y=y+Math.imul(pe,gt)|0,y=y+Math.imul(we,pt)|0,I=I+Math.imul(we,gt)|0,P=P+Math.imul(Z,mt)|0,y=y+Math.imul(Z,yt)|0,y=y+Math.imul(ne,mt)|0,I=I+Math.imul(ne,yt)|0;var Ys=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,P=Math.imul(it,F),y=Math.imul(it,z),y=y+Math.imul(v,F)|0,I=Math.imul(v,z),P=P+Math.imul(Ze,be)|0,y=y+Math.imul(Ze,ye)|0,y=y+Math.imul(nt,be)|0,I=I+Math.imul(nt,ye)|0,P=P+Math.imul(Xe,ge)|0,y=y+Math.imul(Xe,at)|0,y=y+Math.imul(Ge,ge)|0,I=I+Math.imul(Ge,at)|0,P=P+Math.imul(He,ct)|0,y=y+Math.imul(He,lt)|0,y=y+Math.imul(tt,ct)|0,I=I+Math.imul(tt,lt)|0,P=P+Math.imul(De,ut)|0,y=y+Math.imul(De,ht)|0,y=y+Math.imul(je,ut)|0,I=I+Math.imul(je,ht)|0,P=P+Math.imul(xe,dt)|0,y=y+Math.imul(xe,ft)|0,y=y+Math.imul(Me,dt)|0,I=I+Math.imul(Me,ft)|0,P=P+Math.imul(me,pt)|0,y=y+Math.imul(me,gt)|0,y=y+Math.imul(ve,pt)|0,I=I+Math.imul(ve,gt)|0,P=P+Math.imul(pe,mt)|0,y=y+Math.imul(pe,yt)|0,y=y+Math.imul(we,mt)|0,I=I+Math.imul(we,yt)|0,P=P+Math.imul(Z,wt)|0,y=y+Math.imul(Z,bt)|0,y=y+Math.imul(ne,wt)|0,I=I+Math.imul(ne,bt)|0;var Xs=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,P=Math.imul(m,F),y=Math.imul(m,z),y=y+Math.imul(T,F)|0,I=Math.imul(T,z),P=P+Math.imul(it,be)|0,y=y+Math.imul(it,ye)|0,y=y+Math.imul(v,be)|0,I=I+Math.imul(v,ye)|0,P=P+Math.imul(Ze,ge)|0,y=y+Math.imul(Ze,at)|0,y=y+Math.imul(nt,ge)|0,I=I+Math.imul(nt,at)|0,P=P+Math.imul(Xe,ct)|0,y=y+Math.imul(Xe,lt)|0,y=y+Math.imul(Ge,ct)|0,I=I+Math.imul(Ge,lt)|0,P=P+Math.imul(He,ut)|0,y=y+Math.imul(He,ht)|0,y=y+Math.imul(tt,ut)|0,I=I+Math.imul(tt,ht)|0,P=P+Math.imul(De,dt)|0,y=y+Math.imul(De,ft)|0,y=y+Math.imul(je,dt)|0,I=I+Math.imul(je,ft)|0,P=P+Math.imul(xe,pt)|0,y=y+Math.imul(xe,gt)|0,y=y+Math.imul(Me,pt)|0,I=I+Math.imul(Me,gt)|0,P=P+Math.imul(me,mt)|0,y=y+Math.imul(me,yt)|0,y=y+Math.imul(ve,mt)|0,I=I+Math.imul(ve,yt)|0,P=P+Math.imul(pe,wt)|0,y=y+Math.imul(pe,bt)|0,y=y+Math.imul(we,wt)|0,I=I+Math.imul(we,bt)|0,P=P+Math.imul(Z,vt)|0,y=y+Math.imul(Z,St)|0,y=y+Math.imul(ne,vt)|0,I=I+Math.imul(ne,St)|0;var Js=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Js>>>26)|0,Js&=67108863,P=Math.imul(m,be),y=Math.imul(m,ye),y=y+Math.imul(T,be)|0,I=Math.imul(T,ye),P=P+Math.imul(it,ge)|0,y=y+Math.imul(it,at)|0,y=y+Math.imul(v,ge)|0,I=I+Math.imul(v,at)|0,P=P+Math.imul(Ze,ct)|0,y=y+Math.imul(Ze,lt)|0,y=y+Math.imul(nt,ct)|0,I=I+Math.imul(nt,lt)|0,P=P+Math.imul(Xe,ut)|0,y=y+Math.imul(Xe,ht)|0,y=y+Math.imul(Ge,ut)|0,I=I+Math.imul(Ge,ht)|0,P=P+Math.imul(He,dt)|0,y=y+Math.imul(He,ft)|0,y=y+Math.imul(tt,dt)|0,I=I+Math.imul(tt,ft)|0,P=P+Math.imul(De,pt)|0,y=y+Math.imul(De,gt)|0,y=y+Math.imul(je,pt)|0,I=I+Math.imul(je,gt)|0,P=P+Math.imul(xe,mt)|0,y=y+Math.imul(xe,yt)|0,y=y+Math.imul(Me,mt)|0,I=I+Math.imul(Me,yt)|0,P=P+Math.imul(me,wt)|0,y=y+Math.imul(me,bt)|0,y=y+Math.imul(ve,wt)|0,I=I+Math.imul(ve,bt)|0,P=P+Math.imul(pe,vt)|0,y=y+Math.imul(pe,St)|0,y=y+Math.imul(we,vt)|0,I=I+Math.imul(we,St)|0;var Qs=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,P=Math.imul(m,ge),y=Math.imul(m,at),y=y+Math.imul(T,ge)|0,I=Math.imul(T,at),P=P+Math.imul(it,ct)|0,y=y+Math.imul(it,lt)|0,y=y+Math.imul(v,ct)|0,I=I+Math.imul(v,lt)|0,P=P+Math.imul(Ze,ut)|0,y=y+Math.imul(Ze,ht)|0,y=y+Math.imul(nt,ut)|0,I=I+Math.imul(nt,ht)|0,P=P+Math.imul(Xe,dt)|0,y=y+Math.imul(Xe,ft)|0,y=y+Math.imul(Ge,dt)|0,I=I+Math.imul(Ge,ft)|0,P=P+Math.imul(He,pt)|0,y=y+Math.imul(He,gt)|0,y=y+Math.imul(tt,pt)|0,I=I+Math.imul(tt,gt)|0,P=P+Math.imul(De,mt)|0,y=y+Math.imul(De,yt)|0,y=y+Math.imul(je,mt)|0,I=I+Math.imul(je,yt)|0,P=P+Math.imul(xe,wt)|0,y=y+Math.imul(xe,bt)|0,y=y+Math.imul(Me,wt)|0,I=I+Math.imul(Me,bt)|0,P=P+Math.imul(me,vt)|0,y=y+Math.imul(me,St)|0,y=y+Math.imul(ve,vt)|0,I=I+Math.imul(ve,St)|0;var eo=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(eo>>>26)|0,eo&=67108863,P=Math.imul(m,ct),y=Math.imul(m,lt),y=y+Math.imul(T,ct)|0,I=Math.imul(T,lt),P=P+Math.imul(it,ut)|0,y=y+Math.imul(it,ht)|0,y=y+Math.imul(v,ut)|0,I=I+Math.imul(v,ht)|0,P=P+Math.imul(Ze,dt)|0,y=y+Math.imul(Ze,ft)|0,y=y+Math.imul(nt,dt)|0,I=I+Math.imul(nt,ft)|0,P=P+Math.imul(Xe,pt)|0,y=y+Math.imul(Xe,gt)|0,y=y+Math.imul(Ge,pt)|0,I=I+Math.imul(Ge,gt)|0,P=P+Math.imul(He,mt)|0,y=y+Math.imul(He,yt)|0,y=y+Math.imul(tt,mt)|0,I=I+Math.imul(tt,yt)|0,P=P+Math.imul(De,wt)|0,y=y+Math.imul(De,bt)|0,y=y+Math.imul(je,wt)|0,I=I+Math.imul(je,bt)|0,P=P+Math.imul(xe,vt)|0,y=y+Math.imul(xe,St)|0,y=y+Math.imul(Me,vt)|0,I=I+Math.imul(Me,St)|0;var to=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(to>>>26)|0,to&=67108863,P=Math.imul(m,ut),y=Math.imul(m,ht),y=y+Math.imul(T,ut)|0,I=Math.imul(T,ht),P=P+Math.imul(it,dt)|0,y=y+Math.imul(it,ft)|0,y=y+Math.imul(v,dt)|0,I=I+Math.imul(v,ft)|0,P=P+Math.imul(Ze,pt)|0,y=y+Math.imul(Ze,gt)|0,y=y+Math.imul(nt,pt)|0,I=I+Math.imul(nt,gt)|0,P=P+Math.imul(Xe,mt)|0,y=y+Math.imul(Xe,yt)|0,y=y+Math.imul(Ge,mt)|0,I=I+Math.imul(Ge,yt)|0,P=P+Math.imul(He,wt)|0,y=y+Math.imul(He,bt)|0,y=y+Math.imul(tt,wt)|0,I=I+Math.imul(tt,bt)|0,P=P+Math.imul(De,vt)|0,y=y+Math.imul(De,St)|0,y=y+Math.imul(je,vt)|0,I=I+Math.imul(je,St)|0;var no=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(no>>>26)|0,no&=67108863,P=Math.imul(m,dt),y=Math.imul(m,ft),y=y+Math.imul(T,dt)|0,I=Math.imul(T,ft),P=P+Math.imul(it,pt)|0,y=y+Math.imul(it,gt)|0,y=y+Math.imul(v,pt)|0,I=I+Math.imul(v,gt)|0,P=P+Math.imul(Ze,mt)|0,y=y+Math.imul(Ze,yt)|0,y=y+Math.imul(nt,mt)|0,I=I+Math.imul(nt,yt)|0,P=P+Math.imul(Xe,wt)|0,y=y+Math.imul(Xe,bt)|0,y=y+Math.imul(Ge,wt)|0,I=I+Math.imul(Ge,bt)|0,P=P+Math.imul(He,vt)|0,y=y+Math.imul(He,St)|0,y=y+Math.imul(tt,vt)|0,I=I+Math.imul(tt,St)|0;var io=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(io>>>26)|0,io&=67108863,P=Math.imul(m,pt),y=Math.imul(m,gt),y=y+Math.imul(T,pt)|0,I=Math.imul(T,gt),P=P+Math.imul(it,mt)|0,y=y+Math.imul(it,yt)|0,y=y+Math.imul(v,mt)|0,I=I+Math.imul(v,yt)|0,P=P+Math.imul(Ze,wt)|0,y=y+Math.imul(Ze,bt)|0,y=y+Math.imul(nt,wt)|0,I=I+Math.imul(nt,bt)|0,P=P+Math.imul(Xe,vt)|0,y=y+Math.imul(Xe,St)|0,y=y+Math.imul(Ge,vt)|0,I=I+Math.imul(Ge,St)|0;var ro=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(ro>>>26)|0,ro&=67108863,P=Math.imul(m,mt),y=Math.imul(m,yt),y=y+Math.imul(T,mt)|0,I=Math.imul(T,yt),P=P+Math.imul(it,wt)|0,y=y+Math.imul(it,bt)|0,y=y+Math.imul(v,wt)|0,I=I+Math.imul(v,bt)|0,P=P+Math.imul(Ze,vt)|0,y=y+Math.imul(Ze,St)|0,y=y+Math.imul(nt,vt)|0,I=I+Math.imul(nt,St)|0;var so=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(so>>>26)|0,so&=67108863,P=Math.imul(m,wt),y=Math.imul(m,bt),y=y+Math.imul(T,wt)|0,I=Math.imul(T,bt),P=P+Math.imul(it,vt)|0,y=y+Math.imul(it,St)|0,y=y+Math.imul(v,vt)|0,I=I+Math.imul(v,St)|0;var oo=(N+P|0)+((y&8191)<<13)|0;N=(I+(y>>>13)|0)+(oo>>>26)|0,oo&=67108863,P=Math.imul(m,vt),y=Math.imul(m,St),y=y+Math.imul(T,vt)|0,I=Math.imul(T,St);var ao=(N+P|0)+((y&8191)<<13)|0;return N=(I+(y>>>13)|0)+(ao>>>26)|0,ao&=67108863,O[0]=Hs,O[1]=Ks,O[2]=Ws,O[3]=Gs,O[4]=qs,O[5]=js,O[6]=Zs,O[7]=Ys,O[8]=Xs,O[9]=Js,O[10]=Qs,O[11]=eo,O[12]=to,O[13]=no,O[14]=io,O[15]=ro,O[16]=so,O[17]=oo,O[18]=ao,N!==0&&(O[19]=N,w.length++),w};Math.imul||(D=B);function L(R,c,d){d.negative=c.negative^R.negative,d.length=R.length+c.length;for(var w=0,S=0,E=0;E<d.length-1;E++){var O=S;S=0;for(var N=w&67108863,P=Math.min(E,c.length-1),y=Math.max(0,E-R.length+1);y<=P;y++){var I=E-y,j=R.words[I]|0,Z=c.words[y]|0,ne=j*Z,Se=ne&67108863;O=O+(ne/67108864|0)|0,Se=Se+N|0,N=Se&67108863,O=O+(Se>>>26)|0,S+=O>>>26,O&=67108863}d.words[E]=N,w=O,O=S}return w!==0?d.words[E]=w:d.length--,d._strip()}function W(R,c,d){return L(R,c,d)}r.prototype.mulTo=function(c,d){var w,S=this.length+c.length;return this.length===10&&c.length===10?w=D(this,c,d):S<63?w=B(this,c,d):S<1024?w=L(this,c,d):w=W(this,c,d),w},r.prototype.mul=function(c){var d=new r(null);return d.words=new Array(this.length+c.length),this.mulTo(c,d)},r.prototype.mulf=function(c){var d=new r(null);return d.words=new Array(this.length+c.length),W(this,c,d)},r.prototype.imul=function(c){return this.clone().mulTo(c,this)},r.prototype.imuln=function(c){var d=c<0;d&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var w=0,S=0;S<this.length;S++){var E=(this.words[S]|0)*c,O=(E&67108863)+(w&67108863);w>>=26,w+=E/67108864|0,w+=O>>>26,this.words[S]=O&67108863}return w!==0&&(this.words[S]=w,this.length++),d?this.ineg():this},r.prototype.muln=function(c){return this.clone().imuln(c)},r.prototype.sqr=function(){return this.mul(this)},r.prototype.isqr=function(){return this.imul(this.clone())},r.prototype.pow=function(c){var d=A(c);if(d.length===0)return new r(1);for(var w=this,S=0;S<d.length&&d[S]===0;S++,w=w.sqr());if(++S<d.length)for(var E=w.sqr();S<d.length;S++,E=E.sqr())d[S]!==0&&(w=w.mul(E));return w},r.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var d=c%26,w=(c-d)/26,S=67108863>>>26-d<<26-d,E;if(d!==0){var O=0;for(E=0;E<this.length;E++){var N=this.words[E]&S,P=(this.words[E]|0)-N<<d;this.words[E]=P|O,O=N>>>26-d}O&&(this.words[E]=O,this.length++)}if(w!==0){for(E=this.length-1;E>=0;E--)this.words[E+w]=this.words[E];for(E=0;E<w;E++)this.words[E]=0;this.length+=w}return this._strip()},r.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},r.prototype.iushrn=function(c,d,w){n(typeof c=="number"&&c>=0);var S;d?S=(d-d%26)/26:S=0;var E=c%26,O=Math.min((c-E)/26,this.length),N=67108863^67108863>>>E<<E,P=w;if(S-=O,S=Math.max(0,S),P){for(var y=0;y<O;y++)P.words[y]=this.words[y];P.length=O}if(O!==0)if(this.length>O)for(this.length-=O,y=0;y<this.length;y++)this.words[y]=this.words[y+O];else this.words[0]=0,this.length=1;var I=0;for(y=this.length-1;y>=0&&(I!==0||y>=S);y--){var j=this.words[y]|0;this.words[y]=I<<26-E|j>>>E,I=j&N}return P&&I!==0&&(P.words[P.length++]=I),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},r.prototype.ishrn=function(c,d,w){return n(this.negative===0),this.iushrn(c,d,w)},r.prototype.shln=function(c){return this.clone().ishln(c)},r.prototype.ushln=function(c){return this.clone().iushln(c)},r.prototype.shrn=function(c){return this.clone().ishrn(c)},r.prototype.ushrn=function(c){return this.clone().iushrn(c)},r.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,w=(c-d)/26,S=1<<d;if(this.length<=w)return!1;var E=this.words[w];return!!(E&S)},r.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var d=c%26,w=(c-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(d!==0&&w++,this.length=Math.min(w,this.length),d!==0){var S=67108863^67108863>>>d<<d;this.words[this.length-1]&=S}return this._strip()},r.prototype.maskn=function(c){return this.clone().imaskn(c)},r.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},r.prototype._iaddn=function(c){this.words[0]+=c;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},r.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},r.prototype.addn=function(c){return this.clone().iaddn(c)},r.prototype.subn=function(c){return this.clone().isubn(c)},r.prototype.iabs=function(){return this.negative=0,this},r.prototype.abs=function(){return this.clone().iabs()},r.prototype._ishlnsubmul=function(c,d,w){var S=c.length+w,E;this._expand(S);var O,N=0;for(E=0;E<c.length;E++){O=(this.words[E+w]|0)+N;var P=(c.words[E]|0)*d;O-=P&67108863,N=(O>>26)-(P/67108864|0),this.words[E+w]=O&67108863}for(;E<this.length-w;E++)O=(this.words[E+w]|0)+N,N=O>>26,this.words[E+w]=O&67108863;if(N===0)return this._strip();for(n(N===-1),N=0,E=0;E<this.length;E++)O=-(this.words[E]|0)+N,N=O>>26,this.words[E]=O&67108863;return this.negative=1,this._strip()},r.prototype._wordDiv=function(c,d){var w=this.length-c.length,S=this.clone(),E=c,O=E.words[E.length-1]|0,N=this._countBits(O);w=26-N,w!==0&&(E=E.ushln(w),S.iushln(w),O=E.words[E.length-1]|0);var P=S.length-E.length,y;if(d!=="mod"){y=new r(null),y.length=P+1,y.words=new Array(y.length);for(var I=0;I<y.length;I++)y.words[I]=0}var j=S.clone()._ishlnsubmul(E,1,P);j.negative===0&&(S=j,y&&(y.words[P]=1));for(var Z=P-1;Z>=0;Z--){var ne=(S.words[E.length+Z]|0)*67108864+(S.words[E.length+Z-1]|0);for(ne=Math.min(ne/O|0,67108863),S._ishlnsubmul(E,ne,Z);S.negative!==0;)ne--,S.negative=0,S._ishlnsubmul(E,1,Z),S.isZero()||(S.negative^=1);y&&(y.words[Z]=ne)}return y&&y._strip(),S._strip(),d!=="div"&&w!==0&&S.iushrn(w),{div:y||null,mod:S}},r.prototype.divmod=function(c,d,w){if(n(!c.isZero()),this.isZero())return{div:new r(0),mod:new r(0)};var S,E,O;return this.negative!==0&&c.negative===0?(O=this.neg().divmod(c,d),d!=="mod"&&(S=O.div.neg()),d!=="div"&&(E=O.mod.neg(),w&&E.negative!==0&&E.iadd(c)),{div:S,mod:E}):this.negative===0&&c.negative!==0?(O=this.divmod(c.neg(),d),d!=="mod"&&(S=O.div.neg()),{div:S,mod:O.mod}):this.negative&c.negative?(O=this.neg().divmod(c.neg(),d),d!=="div"&&(E=O.mod.neg(),w&&E.negative!==0&&E.isub(c)),{div:O.div,mod:E}):c.length>this.length||this.cmp(c)<0?{div:new r(0),mod:this}:c.length===1?d==="div"?{div:this.divn(c.words[0]),mod:null}:d==="mod"?{div:null,mod:new r(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new r(this.modrn(c.words[0]))}:this._wordDiv(c,d)},r.prototype.div=function(c){return this.divmod(c,"div",!1).div},r.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},r.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},r.prototype.divRound=function(c){var d=this.divmod(c);if(d.mod.isZero())return d.div;var w=d.div.negative!==0?d.mod.isub(c):d.mod,S=c.ushrn(1),E=c.andln(1),O=w.cmp(S);return O<0||E===1&&O===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},r.prototype.modrn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var w=(1<<26)%c,S=0,E=this.length-1;E>=0;E--)S=(w*S+(this.words[E]|0))%c;return d?-S:S},r.prototype.modn=function(c){return this.modrn(c)},r.prototype.idivn=function(c){var d=c<0;d&&(c=-c),n(c<=67108863);for(var w=0,S=this.length-1;S>=0;S--){var E=(this.words[S]|0)+w*67108864;this.words[S]=E/c|0,w=E%c}return this._strip(),d?this.ineg():this},r.prototype.divn=function(c){return this.clone().idivn(c)},r.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var d=this,w=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var S=new r(1),E=new r(0),O=new r(0),N=new r(1),P=0;d.isEven()&&w.isEven();)d.iushrn(1),w.iushrn(1),++P;for(var y=w.clone(),I=d.clone();!d.isZero();){for(var j=0,Z=1;!(d.words[0]&Z)&&j<26;++j,Z<<=1);if(j>0)for(d.iushrn(j);j-- >0;)(S.isOdd()||E.isOdd())&&(S.iadd(y),E.isub(I)),S.iushrn(1),E.iushrn(1);for(var ne=0,Se=1;!(w.words[0]&Se)&&ne<26;++ne,Se<<=1);if(ne>0)for(w.iushrn(ne);ne-- >0;)(O.isOdd()||N.isOdd())&&(O.iadd(y),N.isub(I)),O.iushrn(1),N.iushrn(1);d.cmp(w)>=0?(d.isub(w),S.isub(O),E.isub(N)):(w.isub(d),O.isub(S),N.isub(E))}return{a:O,b:N,gcd:w.iushln(P)}},r.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var d=this,w=c.clone();d.negative!==0?d=d.umod(c):d=d.clone();for(var S=new r(1),E=new r(0),O=w.clone();d.cmpn(1)>0&&w.cmpn(1)>0;){for(var N=0,P=1;!(d.words[0]&P)&&N<26;++N,P<<=1);if(N>0)for(d.iushrn(N);N-- >0;)S.isOdd()&&S.iadd(O),S.iushrn(1);for(var y=0,I=1;!(w.words[0]&I)&&y<26;++y,I<<=1);if(y>0)for(w.iushrn(y);y-- >0;)E.isOdd()&&E.iadd(O),E.iushrn(1);d.cmp(w)>=0?(d.isub(w),S.isub(E)):(w.isub(d),E.isub(S))}var j;return d.cmpn(1)===0?j=S:j=E,j.cmpn(0)<0&&j.iadd(c),j},r.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var d=this.clone(),w=c.clone();d.negative=0,w.negative=0;for(var S=0;d.isEven()&&w.isEven();S++)d.iushrn(1),w.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;w.isEven();)w.iushrn(1);var E=d.cmp(w);if(E<0){var O=d;d=w,w=O}else if(E===0||w.cmpn(1)===0)break;d.isub(w)}while(!0);return w.iushln(S)},r.prototype.invm=function(c){return this.egcd(c).a.umod(c)},r.prototype.isEven=function(){return(this.words[0]&1)===0},r.prototype.isOdd=function(){return(this.words[0]&1)===1},r.prototype.andln=function(c){return this.words[0]&c},r.prototype.bincn=function(c){n(typeof c=="number");var d=c%26,w=(c-d)/26,S=1<<d;if(this.length<=w)return this._expand(w+1),this.words[w]|=S,this;for(var E=S,O=w;E!==0&&O<this.length;O++){var N=this.words[O]|0;N+=E,E=N>>>26,N&=67108863,this.words[O]=N}return E!==0&&(this.words[O]=E,this.length++),this},r.prototype.isZero=function(){return this.length===1&&this.words[0]===0},r.prototype.cmpn=function(c){var d=c<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var w;if(this.length>1)w=1;else{d&&(c=-c),n(c<=67108863,"Number is too big");var S=this.words[0]|0;w=S===c?0:S<c?-1:1}return this.negative!==0?-w|0:w},r.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var d=this.ucmp(c);return this.negative!==0?-d|0:d},r.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var d=0,w=this.length-1;w>=0;w--){var S=this.words[w]|0,E=c.words[w]|0;if(S!==E){S<E?d=-1:S>E&&(d=1);break}}return d},r.prototype.gtn=function(c){return this.cmpn(c)===1},r.prototype.gt=function(c){return this.cmp(c)===1},r.prototype.gten=function(c){return this.cmpn(c)>=0},r.prototype.gte=function(c){return this.cmp(c)>=0},r.prototype.ltn=function(c){return this.cmpn(c)===-1},r.prototype.lt=function(c){return this.cmp(c)===-1},r.prototype.lten=function(c){return this.cmpn(c)<=0},r.prototype.lte=function(c){return this.cmp(c)<=0},r.prototype.eqn=function(c){return this.cmpn(c)===0},r.prototype.eq=function(c){return this.cmp(c)===0},r.red=function(c){return new ie(c)},r.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},r.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},r.prototype._forceRed=function(c){return this.red=c,this},r.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},r.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},r.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},r.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},r.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},r.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},r.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},r.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},r.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},r.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},r.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},r.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},r.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},r.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var Y={k256:null,p224:null,p192:null,p25519:null};function J(R,c){this.name=R,this.p=new r(c,16),this.n=this.p.bitLength(),this.k=new r(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}J.prototype._tmp=function(){var c=new r(null);return c.words=new Array(Math.ceil(this.n/13)),c},J.prototype.ireduce=function(c){var d=c,w;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),w=d.bitLength();while(w>this.n);var S=w<this.n?-1:d.ucmp(this.p);return S===0?(d.words[0]=0,d.length=1):S>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},J.prototype.split=function(c,d){c.iushrn(this.n,0,d)},J.prototype.imulK=function(c){return c.imul(this.k)};function Q(){J.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(Q,J),Q.prototype.split=function(c,d){for(var w=4194303,S=Math.min(c.length,9),E=0;E<S;E++)d.words[E]=c.words[E];if(d.length=S,c.length<=9){c.words[0]=0,c.length=1;return}var O=c.words[9];for(d.words[d.length++]=O&w,E=10;E<c.length;E++){var N=c.words[E]|0;c.words[E-10]=(N&w)<<4|O>>>22,O=N}O>>>=22,c.words[E-10]=O,O===0&&c.length>10?c.length-=10:c.length-=9},Q.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var d=0,w=0;w<c.length;w++){var S=c.words[w]|0;d+=S*977,c.words[w]=d&67108863,d=S*64+(d/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function ee(){J.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ee,J);function oe(){J.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(oe,J);function de(){J.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(de,J),de.prototype.imulK=function(c){for(var d=0,w=0;w<c.length;w++){var S=(c.words[w]|0)*19+d,E=S&67108863;S>>>=26,c.words[w]=E,d=S}return d!==0&&(c.words[c.length++]=d),c},r._prime=function(c){if(Y[c])return Y[c];var d;if(c==="k256")d=new Q;else if(c==="p224")d=new ee;else if(c==="p192")d=new oe;else if(c==="p25519")d=new de;else throw new Error("Unknown prime "+c);return Y[c]=d,d};function ie(R){if(typeof R=="string"){var c=r._prime(R);this.m=c.p,this.prime=c}else n(R.gtn(1),"modulus must be greater than 1"),this.m=R,this.prime=null}ie.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},ie.prototype._verify2=function(c,d){n((c.negative|d.negative)===0,"red works only with positives"),n(c.red&&c.red===d.red,"red works only with red numbers")},ie.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(h(c,c.umod(this.m)._forceRed(this)),c)},ie.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},ie.prototype.add=function(c,d){this._verify2(c,d);var w=c.add(d);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},ie.prototype.iadd=function(c,d){this._verify2(c,d);var w=c.iadd(d);return w.cmp(this.m)>=0&&w.isub(this.m),w},ie.prototype.sub=function(c,d){this._verify2(c,d);var w=c.sub(d);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},ie.prototype.isub=function(c,d){this._verify2(c,d);var w=c.isub(d);return w.cmpn(0)<0&&w.iadd(this.m),w},ie.prototype.shl=function(c,d){return this._verify1(c),this.imod(c.ushln(d))},ie.prototype.imul=function(c,d){return this._verify2(c,d),this.imod(c.imul(d))},ie.prototype.mul=function(c,d){return this._verify2(c,d),this.imod(c.mul(d))},ie.prototype.isqr=function(c){return this.imul(c,c.clone())},ie.prototype.sqr=function(c){return this.mul(c,c)},ie.prototype.sqrt=function(c){if(c.isZero())return c.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var w=this.m.add(new r(1)).iushrn(2);return this.pow(c,w)}for(var S=this.m.subn(1),E=0;!S.isZero()&&S.andln(1)===0;)E++,S.iushrn(1);n(!S.isZero());var O=new r(1).toRed(this),N=O.redNeg(),P=this.m.subn(1).iushrn(1),y=this.m.bitLength();for(y=new r(2*y*y).toRed(this);this.pow(y,P).cmp(N)!==0;)y.redIAdd(N);for(var I=this.pow(y,S),j=this.pow(c,S.addn(1).iushrn(1)),Z=this.pow(c,S),ne=E;Z.cmp(O)!==0;){for(var Se=Z,pe=0;Se.cmp(O)!==0;pe++)Se=Se.redSqr();n(pe<ne);var we=this.pow(I,new r(1).iushln(ne-pe-1));j=j.redMul(we),I=we.redSqr(),Z=Z.redMul(I),ne=pe}return j},ie.prototype.invm=function(c){var d=c._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},ie.prototype.pow=function(c,d){if(d.isZero())return new r(1).toRed(this);if(d.cmpn(1)===0)return c.clone();var w=4,S=new Array(1<<w);S[0]=new r(1).toRed(this),S[1]=c;for(var E=2;E<S.length;E++)S[E]=this.mul(S[E-1],c);var O=S[0],N=0,P=0,y=d.bitLength()%26;for(y===0&&(y=26),E=d.length-1;E>=0;E--){for(var I=d.words[E],j=y-1;j>=0;j--){var Z=I>>j&1;if(O!==S[0]&&(O=this.sqr(O)),Z===0&&N===0){P=0;continue}N<<=1,N|=Z,P++,!(P!==w&&(E!==0||j!==0))&&(O=this.mul(O,S[N]),P=0,N=0)}y=26}return O},ie.prototype.convertTo=function(c){var d=c.umod(this.m);return d===c?d.clone():d},ie.prototype.convertFrom=function(c){var d=c.clone();return d.red=null,d},r.mont=function(c){return new K(c)};function K(R){ie.call(this,R),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new r(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(K,ie),K.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},K.prototype.convertFrom=function(c){var d=this.imod(c.mul(this.rinv));return d.red=null,d},K.prototype.imul=function(c,d){if(c.isZero()||d.isZero())return c.words[0]=0,c.length=1,c;var w=c.imul(d),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=w.isub(S).iushrn(this.shift),O=E;return E.cmp(this.m)>=0?O=E.isub(this.m):E.cmpn(0)<0&&(O=E.iadd(this.m)),O._forceRed(this)},K.prototype.mul=function(c,d){if(c.isZero()||d.isZero())return new r(0)._forceRed(this);var w=c.mul(d),S=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),E=w.isub(S).iushrn(this.shift),O=E;return E.cmp(this.m)>=0?O=E.isub(this.m):E.cmpn(0)<0&&(O=E.iadd(this.m)),O._forceRed(this)},K.prototype.invm=function(c){var d=this.imod(c._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(i,tn)})(da);var pa=da.exports;const mn=ys(pa);var Ho={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(i,e){var t=fa,n=t.Buffer;function s(o,a){for(var l in o)a[l]=o[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?i.exports=t:(s(t,e),e.Buffer=r);function r(o,a,l){return n(o,a,l)}r.prototype=Object.create(n.prototype),s(n,r),r.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,l)},r.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof l=="string"?p.fill(a,l):p.fill(a):p.fill(0),p},r.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},r.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(o)}})(Ho,Ho.exports);var xf=Ho.exports,Ur=xf.Buffer;function If(i){if(i.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),t=0;t<e.length;t++)e[t]=255;for(var n=0;n<i.length;n++){var s=i.charAt(n),r=s.charCodeAt(0);if(e[r]!==255)throw new TypeError(s+" is ambiguous");e[r]=n}var o=i.length,a=i.charAt(0),l=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function h(_){if((Array.isArray(_)||_ instanceof Uint8Array)&&(_=Ur.from(_)),!Ur.isBuffer(_))throw new TypeError("Expected Buffer");if(_.length===0)return"";for(var x=0,C=0,A=0,B=_.length;A!==B&&_[A]===0;)A++,x++;for(var D=(B-A)*p+1>>>0,L=new Uint8Array(D);A!==B;){for(var W=_[A],Y=0,J=D-1;(W!==0||Y<C)&&J!==-1;J--,Y++)W+=256*L[J]>>>0,L[J]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");C=Y,A++}for(var Q=D-C;Q!==D&&L[Q]===0;)Q++;for(var ee=a.repeat(x);Q<D;++Q)ee+=i.charAt(L[Q]);return ee}function b(_){if(typeof _!="string")throw new TypeError("Expected String");if(_.length===0)return Ur.alloc(0);for(var x=0,C=0,A=0;_[x]===a;)C++,x++;for(var B=(_.length-x)*l+1>>>0,D=new Uint8Array(B);x<_.length;){var L=_.charCodeAt(x);if(L>255)return;var W=e[L];if(W===255)return;for(var Y=0,J=B-1;(W!==0||Y<A)&&J!==-1;J--,Y++)W+=o*D[J]>>>0,D[J]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");A=Y,x++}for(var Q=B-A;Q!==B&&D[Q]===0;)Q++;var ee=Ur.allocUnsafe(C+(B-Q));ee.fill(0,0,C);for(var oe=C;Q!==B;)ee[oe++]=D[Q++];return ee}function k(_){var x=b(_);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:h,decodeUnsafe:b,decode:k}}var Cf=If,Nf=Cf,Bf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Cl=Nf(Bf);const Lt=ys(Cl);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Lf(i){return i instanceof Uint8Array||ArrayBuffer.isView(i)&&i.constructor.name==="Uint8Array"}function Ac(i){if(!Number.isSafeInteger(i)||i<0)throw new Error("positive integer expected, got "+i)}function wr(i,...e){if(!Lf(i))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(i.length))throw new Error("Uint8Array expected of length "+e+", got length="+i.length)}function Jr(i,e=!0){if(i.destroyed)throw new Error("Hash instance has been destroyed");if(e&&i.finished)throw new Error("Hash#digest() has already been called")}function Nl(i,e){wr(i);const t=e.outputLen;if(i.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Mf(i){return new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4))}function br(...i){for(let e=0;e<i.length;e++)i[e].fill(0)}function yo(i){return new DataView(i.buffer,i.byteOffset,i.byteLength)}function Sn(i,e){return i<<32-e|i>>>e}const Ff=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Uf(i){return i<<24&4278190080|i<<8&16711680|i>>>8&65280|i>>>24&255}function Df(i){for(let e=0;e<i.length;e++)i[e]=Uf(i[e]);return i}const Oc=Ff?i=>i:Df;function Vf(i){if(typeof i!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(i))}function ga(i){return typeof i=="string"&&(i=Vf(i)),wr(i),i}class Bl{}function Ll(i){const e=n=>i().update(ga(n)).digest(),t=i();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>i(),e}function $f(i,e,t,n){if(typeof i.setBigUint64=="function")return i.setBigUint64(e,t,n);const s=BigInt(32),r=BigInt(4294967295),o=Number(t>>s&r),a=Number(t&r),l=n?4:0,p=n?0:4;i.setUint32(e+l,o,n),i.setUint32(e+p,a,n)}function zf(i,e,t){return i&e^~i&t}function Hf(i,e,t){return i&e^i&t^e&t}class Kf extends Bl{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=yo(this.buffer)}update(e){Jr(this),e=ga(e),wr(e);const{view:t,buffer:n,blockLen:s}=this,r=e.length;for(let o=0;o<r;){const a=Math.min(s-this.pos,r-o);if(a===s){const l=yo(e);for(;s<=r-o;o+=s)this.process(l,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Jr(this),Nl(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:r}=this;let{pos:o}=this;t[o++]=128,br(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let b=o;b<s;b++)t[b]=0;$f(n,s-8,BigInt(this.length*8),r),this.process(n,0);const a=yo(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=l/4,h=this.get();if(p>h.length)throw new Error("_sha2: outputLen bigger than state");for(let b=0;b<p;b++)a.setUint32(4*b,h[b],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:r,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=r,e.length=s,e.pos=a,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Jn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Dr=BigInt(2**32-1),Tc=BigInt(32);function Wf(i,e=!1){return e?{h:Number(i&Dr),l:Number(i>>Tc&Dr)}:{h:Number(i>>Tc&Dr)|0,l:Number(i&Dr)|0}}function Gf(i,e=!1){const t=i.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let r=0;r<t;r++){const{h:o,l:a}=Wf(i[r],e);[n[r],s[r]]=[o,a]}return[n,s]}const qf=(i,e,t)=>i<<t|e>>>32-t,jf=(i,e,t)=>e<<t|i>>>32-t,Zf=(i,e,t)=>e<<t-32|i>>>64-t,Yf=(i,e,t)=>i<<t-32|e>>>64-t,Xf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qn=new Uint32Array(64);class Jf extends Kf{constructor(e=32){super(64,e,8,!1),this.A=Jn[0]|0,this.B=Jn[1]|0,this.C=Jn[2]|0,this.D=Jn[3]|0,this.E=Jn[4]|0,this.F=Jn[5]|0,this.G=Jn[6]|0,this.H=Jn[7]|0}get(){const{A:e,B:t,C:n,D:s,E:r,F:o,G:a,H:l}=this;return[e,t,n,s,r,o,a,l]}set(e,t,n,s,r,o,a,l){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=r|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,t){for(let b=0;b<16;b++,t+=4)Qn[b]=e.getUint32(t,!1);for(let b=16;b<64;b++){const k=Qn[b-15],_=Qn[b-2],x=Sn(k,7)^Sn(k,18)^k>>>3,C=Sn(_,17)^Sn(_,19)^_>>>10;Qn[b]=C+Qn[b-7]+x+Qn[b-16]|0}let{A:n,B:s,C:r,D:o,E:a,F:l,G:p,H:h}=this;for(let b=0;b<64;b++){const k=Sn(a,6)^Sn(a,11)^Sn(a,25),_=h+k+zf(a,l,p)+Xf[b]+Qn[b]|0,C=(Sn(n,2)^Sn(n,13)^Sn(n,22))+Hf(n,s,r)|0;h=p,p=l,l=a,a=o+_|0,o=r,r=s,s=n,n=_+C|0}n=n+this.A|0,s=s+this.B|0,r=r+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,p=p+this.G|0,h=h+this.H|0,this.set(n,s,r,o,a,l,p,h)}roundClean(){br(Qn)}destroy(){this.set(0,0,0,0,0,0,0,0),br(this.buffer)}}const Qf=Ll(()=>new Jf),xc=Qf;var Bt={};function Fn(i,e,t){return e<=i&&i<=t}function bs(i){if(i===void 0)return{};if(i===Object(i))return i;throw TypeError("Could not convert argument to dictionary")}function ep(i){for(var e=String(i),t=e.length,n=0,s=[];n<t;){var r=e.charCodeAt(n);if(r<55296||r>57343)s.push(r);else if(56320<=r&&r<=57343)s.push(65533);else if(55296<=r&&r<=56319)if(n===t-1)s.push(65533);else{var o=i.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=r&1023,l=o&1023;s.push(65536+(a<<10)+l),n+=1}else s.push(65533)}n+=1}return s}function tp(i){for(var e="",t=0;t<i.length;++t){var n=i[t];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var Qr=-1;function ma(i){this.tokens=[].slice.call(i)}ma.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Qr},prepend:function(i){if(Array.isArray(i))for(var e=i;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(i)},push:function(i){if(Array.isArray(i))for(var e=i;e.length;)this.tokens.push(e.shift());else this.tokens.push(i)}};var Wi=-1;function wo(i,e){if(i)throw TypeError("Decoder error");return e||65533}var es="utf-8";function ts(i,e){if(!(this instanceof ts))return new ts(i,e);if(i=i!==void 0?String(i).toLowerCase():es,i!==es)throw new Error("Encoding not supported. Only utf-8 is supported");e=bs(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}ts.prototype={decode:function(e,t){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),t=bs(t),this._streaming||(this._decoder=new np({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!t.stream;for(var s=new ma(n),r=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Wi);)o!==null&&(Array.isArray(o)?r.push.apply(r,o):r.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Wi)break;o!==null&&(Array.isArray(o)?r.push.apply(r,o):r.push(o))}while(!s.endOfStream());this._decoder=null}return r.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(r[0]===65279?(this._BOMseen=!0,r.shift()):this._BOMseen=!0),tp(r)}};function ns(i,e){if(!(this instanceof ns))return new ns(i,e);if(i=i!==void 0?String(i).toLowerCase():es,i!==es)throw new Error("Encoding not supported. Only utf-8 is supported");e=bs(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ns.prototype={encode:function(e,t){e=e?String(e):"",t=bs(t),this._streaming||(this._encoder=new ip(this._options)),this._streaming=!!t.stream;for(var n=[],s=new ma(ep(e)),r;!s.endOfStream()&&(r=this._encoder.handler(s,s.read()),r!==Wi);)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;r=this._encoder.handler(s,s.read()),r!==Wi;)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}};function np(i){var e=i.fatal,t=0,n=0,s=0,r=128,o=191;this.handler=function(a,l){if(l===Qr&&s!==0)return s=0,wo(e);if(l===Qr)return Wi;if(s===0){if(Fn(l,0,127))return l;if(Fn(l,194,223))s=1,t=l-192;else if(Fn(l,224,239))l===224&&(r=160),l===237&&(o=159),s=2,t=l-224;else if(Fn(l,240,244))l===240&&(r=144),l===244&&(o=143),s=3,t=l-240;else return wo(e);return t=t<<6*s,null}if(!Fn(l,r,o))return t=s=n=0,r=128,o=191,a.prepend(l),wo(e);if(r=128,o=191,n+=1,t+=l-128<<6*(s-n),n!==s)return null;var p=t;return t=s=n=0,p}}function ip(i){i.fatal,this.handler=function(e,t){if(t===Qr)return Wi;if(Fn(t,0,127))return t;var n,s;Fn(t,128,2047)?(n=1,s=192):Fn(t,2048,65535)?(n=2,s=224):Fn(t,65536,1114111)&&(n=3,s=240);for(var r=[(t>>6*n)+s];n>0;){var o=t>>6*(n-1);r.push(128|o&63),n-=1}return r}}const rp=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:ts,TextEncoder:ns},Symbol.toStringTag,{value:"Module"})),sp=ws(rp);var op=tn&&tn.__createBinding||(Object.create?function(i,e,t,n){n===void 0&&(n=t),Object.defineProperty(i,n,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,n){n===void 0&&(n=t),i[n]=e[t]}),ap=tn&&tn.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),xn=tn&&tn.__decorate||function(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},cp=tn&&tn.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.hasOwnProperty.call(i,t)&&op(e,i,t);return ap(e,i),e},Ml=tn&&tn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Bt,"__esModule",{value:!0});var Fl=Bt.deserializeUnchecked=Hl=Bt.deserialize=zl=Bt.serialize=Bt.BinaryReader=Bt.BinaryWriter=Bt.BorshError=Bt.baseDecode=Bt.baseEncode=void 0;const ei=Ml(pa),Ul=Ml(Cl),lp=cp(sp),up=typeof TextDecoder!="function"?lp.TextDecoder:TextDecoder,hp=new up("utf-8",{fatal:!0});function dp(i){return typeof i=="string"&&(i=ke.from(i,"utf8")),Ul.default.encode(ke.from(i))}Bt.baseEncode=dp;function fp(i){return ke.from(Ul.default.decode(i))}Bt.baseDecode=fp;const bo=1024;class Ht extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Bt.BorshError=Ht;class Dl{constructor(){this.buf=ke.alloc(bo),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=ke.concat([this.buf,ke.alloc(bo)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(ke.from(new ei.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(ke.from(new ei.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(ke.from(new ei.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(ke.from(new ei.default(e).toArray("le",64)))}writeBuffer(e){this.buf=ke.concat([ke.from(this.buf.subarray(0,this.length)),e,ke.alloc(bo)]),this.length+=e.length}writeString(e){this.maybeResize();const t=ke.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(ke.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const n of e)this.maybeResize(),t(n)}toArray(){return this.buf.subarray(0,this.length)}}Bt.BinaryWriter=Dl;function In(i,e,t){const n=t.value;t.value=function(...s){try{return n.apply(this,s)}catch(r){if(r instanceof RangeError){const o=r.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ht("Reached the end of buffer when deserializing")}throw r}}}class nn{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new ei.default(e,"le")}readU128(){const e=this.readBuffer(16);return new ei.default(e,"le")}readU256(){const e=this.readBuffer(32);return new ei.default(e,"le")}readU512(){const e=this.readBuffer(64);return new ei.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Ht(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return hp.decode(t)}catch(n){throw new Ht(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),n=Array();for(let s=0;s<t;++s)n.push(e());return n}}xn([In],nn.prototype,"readU8",null);xn([In],nn.prototype,"readU16",null);xn([In],nn.prototype,"readU32",null);xn([In],nn.prototype,"readU64",null);xn([In],nn.prototype,"readU128",null);xn([In],nn.prototype,"readU256",null);xn([In],nn.prototype,"readU512",null);xn([In],nn.prototype,"readString",null);xn([In],nn.prototype,"readFixedArray",null);xn([In],nn.prototype,"readArray",null);Bt.BinaryReader=nn;function Vl(i){return i.charAt(0).toUpperCase()+i.slice(1)}function fi(i,e,t,n,s){try{if(typeof n=="string")s[`write${Vl(n)}`](t);else if(n instanceof Array)if(typeof n[0]=="number"){if(t.length!==n[0])throw new Ht(`Expecting byte array of length ${n[0]}, but got ${t.length} bytes`);s.writeFixedArray(t)}else if(n.length===2&&typeof n[1]=="number"){if(t.length!==n[1])throw new Ht(`Expecting byte array of length ${n[1]}, but got ${t.length} bytes`);for(let r=0;r<n[1];r++)fi(i,null,t[r],n[0],s)}else s.writeArray(t,r=>{fi(i,e,r,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{t==null?s.writeU8(0):(s.writeU8(1),fi(i,e,t,n.type,s));break}case"map":{s.writeU32(t.size),t.forEach((r,o)=>{fi(i,e,o,n.key,s),fi(i,e,r,n.value,s)});break}default:throw new Ht(`FieldType ${n} unrecognized`)}else $l(i,t,s)}catch(r){throw r instanceof Ht&&r.addToFieldPath(e),r}}function $l(i,e,t){if(typeof e.borshSerialize=="function"){e.borshSerialize(t);return}const n=i.get(e.constructor);if(!n)throw new Ht(`Class ${e.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,r])=>{fi(i,s,e[s],r,t)});else if(n.kind==="enum"){const s=e[n.field];for(let r=0;r<n.values.length;++r){const[o,a]=n.values[r];if(o===s){t.writeU8(r),fi(i,o,e[o],a,t);break}}}else throw new Ht(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function pp(i,e,t=Dl){const n=new t;return $l(i,e,n),n.toArray()}var zl=Bt.serialize=pp;function pi(i,e,t,n){try{if(typeof t=="string")return n[`read${Vl(t)}`]();if(t instanceof Array){if(typeof t[0]=="number")return n.readFixedArray(t[0]);if(typeof t[1]=="number"){const s=[];for(let r=0;r<t[1];r++)s.push(pi(i,null,t[0],n));return s}else return n.readArray(()=>pi(i,e,t[0],n))}if(t.kind==="option")return n.readU8()?pi(i,e,t.type,n):void 0;if(t.kind==="map"){let s=new Map;const r=n.readU32();for(let o=0;o<r;o++){const a=pi(i,e,t.key,n),l=pi(i,e,t.value,n);s.set(a,l)}return s}return ya(i,t,n)}catch(s){throw s instanceof Ht&&s.addToFieldPath(e),s}}function ya(i,e,t){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(t);const n=i.get(e);if(!n)throw new Ht(`Class ${e.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[r,o]of i.get(e).fields)s[r]=pi(i,r,o,t);return new e(s)}if(n.kind==="enum"){const s=t.readU8();if(s>=n.values.length)throw new Ht(`Enum index: ${s} is out of range`);const[r,o]=n.values[s],a=pi(i,r,o,t);return new e({[r]:a})}throw new Ht(`Unexpected schema kind: ${n.kind} for ${e.constructor.name}`)}function gp(i,e,t,n=nn){const s=new n(t),r=ya(i,e,s);if(s.offset<t.length)throw new Ht(`Unexpected ${t.length-s.offset} bytes after deserialized data`);return r}var Hl=Bt.deserialize=gp;function mp(i,e,t,n=nn){const s=new n(t);return ya(i,e,s)}Fl=Bt.deserializeUnchecked=mp;var $={};Object.defineProperty($,"__esModule",{value:!0});$.s16=$.s8=$.nu64be=$.u48be=$.u40be=$.u32be=$.u24be=$.u16be=Ct=$.nu64=$.u48=$.u40=ce=$.u32=$.u24=an=$.u16=Ae=$.u8=ii=$.offset=$.greedy=$.Constant=$.UTF8=$.CString=$.Blob=$.Boolean=$.BitField=$.BitStructure=$.VariantLayout=$.Union=$.UnionLayoutDiscriminator=$.UnionDiscriminator=$.Structure=$.Sequence=$.DoubleBE=$.Double=$.FloatBE=$.Float=$.NearInt64BE=$.NearInt64=$.NearUInt64BE=$.NearUInt64=$.IntBE=$.Int=$.UIntBE=$.UInt=$.OffsetLayout=$.GreedyCount=$.ExternalLayout=$.bindConstructorLayout=$.nameWithProperty=$.Layout=$.uint8ArrayToBuffer=$.checkUint8Array=void 0;$.constant=$.utf8=$.cstr=ze=$.blob=$.unionLayoutDiscriminator=$.union=Mt=$.seq=$.bits=le=$.struct=$.f64be=$.f64=$.f32be=$.f32=$.ns64be=$.s48be=$.s40be=$.s32be=$.s24be=$.s16be=Qt=$.ns64=$.s48=$.s40=$.s32=$.s24=void 0;const wa=fa;function Ji(i){if(!(i instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}$.checkUint8Array=Ji;function Be(i){return Ji(i),wa.Buffer.from(i.buffer,i.byteOffset,i.length)}$.uint8ArrayToBuffer=Be;let Fe=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};$.Layout=Fe;function ba(i,e){return e.property?i+"["+e.property+"]":i}$.nameWithProperty=ba;function yp(i,e){if(typeof i!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(i,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Fe))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");i.layout_=e,e.boundConstructor_=i,e.makeDestinationObject=()=>new i,Object.defineProperty(i.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(i,"decode",{value(t,n){return e.decode(t,n)},writable:!0})}$.bindConstructorLayout=yp;let Zt=class extends Fe{isCount(){throw new Error("ExternalLayout is abstract")}};$.ExternalLayout=Zt;let Kl=class extends Zt{constructor(e=1,t){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t=0){Ji(e);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}};$.GreedyCount=Kl;let va=class extends Zt{constructor(e,t=0,n){if(!(e instanceof Fe))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof ln||this.layout instanceof gn}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,n=0){return this.layout.encode(e,t,n+this.offset)}};$.OffsetLayout=va;let ln=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readUIntLE(t,this.span)}encode(e,t,n=0){return Be(t).writeUIntLE(e,n,this.span),this.span}};$.UInt=ln;let gn=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readUIntBE(t,this.span)}encode(e,t,n=0){return Be(t).writeUIntBE(e,n,this.span),this.span}};$.UIntBE=gn;let Ri=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readIntLE(t,this.span)}encode(e,t,n=0){return Be(t).writeIntLE(e,n,this.span),this.span}};$.Int=Ri;let Qi=class extends Fe{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return Be(e).readIntBE(t,this.span)}encode(e,t,n=0){return Be(t).writeIntBE(e,n,this.span),this.span}};$.IntBE=Qi;const Ko=Math.pow(2,32);function vs(i){const e=Math.floor(i/Ko),t=i-e*Ko;return{hi32:e,lo32:t}}function Ss(i,e){return i*Ko+e}let Wl=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readUInt32LE(t),r=n.readUInt32LE(t+4);return Ss(r,s)}encode(e,t,n=0){const s=vs(e),r=Be(t);return r.writeUInt32LE(s.lo32,n),r.writeUInt32LE(s.hi32,n+4),8}};$.NearUInt64=Wl;let Gl=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readUInt32BE(t),r=n.readUInt32BE(t+4);return Ss(s,r)}encode(e,t,n=0){const s=vs(e),r=Be(t);return r.writeUInt32BE(s.hi32,n),r.writeUInt32BE(s.lo32,n+4),8}};$.NearUInt64BE=Gl;let ql=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readUInt32LE(t),r=n.readInt32LE(t+4);return Ss(r,s)}encode(e,t,n=0){const s=vs(e),r=Be(t);return r.writeUInt32LE(s.lo32,n),r.writeInt32LE(s.hi32,n+4),8}};$.NearInt64=ql;let jl=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){const n=Be(e),s=n.readInt32BE(t),r=n.readUInt32BE(t+4);return Ss(s,r)}encode(e,t,n=0){const s=vs(e),r=Be(t);return r.writeInt32BE(s.hi32,n),r.writeUInt32BE(s.lo32,n+4),8}};$.NearInt64BE=jl;let Zl=class extends Fe{constructor(e){super(4,e)}decode(e,t=0){return Be(e).readFloatLE(t)}encode(e,t,n=0){return Be(t).writeFloatLE(e,n),4}};$.Float=Zl;let Yl=class extends Fe{constructor(e){super(4,e)}decode(e,t=0){return Be(e).readFloatBE(t)}encode(e,t,n=0){return Be(t).writeFloatBE(e,n),4}};$.FloatBE=Yl;let Xl=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){return Be(e).readDoubleLE(t)}encode(e,t,n=0){return Be(t).writeDoubleLE(e,n),8}};$.Double=Xl;let Jl=class extends Fe{constructor(e){super(8,e)}decode(e,t=0){return Be(e).readDoubleBE(t)}encode(e,t,n=0){return Be(t).writeDoubleBE(e,n),8}};$.DoubleBE=Jl;let Ql=class extends Fe{constructor(e,t,n){if(!(e instanceof Fe))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Zt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof Zt)&&0<e.span&&(s=t*e.span),super(s,n),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof Zt&&(s=s.decode(e,t)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let r=0;for(;r<s;)n+=this.elementLayout.getSpan(e,t+n),++r}return n}decode(e,t=0){const n=[];let s=0,r=this.count;for(r instanceof Zt&&(r=r.decode(e,t));s<r;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return n}encode(e,t,n=0){const s=this.elementLayout,r=e.reduce((o,a)=>o+s.encode(a,t,n+o),0);return this.count instanceof Zt&&this.count.encode(e.length,t,n),r}};$.Sequence=Ql;let eu=class extends Fe{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((r,o)=>r&&o instanceof Fe,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const r of e)if(0>r.span&&r.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((r,o)=>r+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,r)=>{const o=r.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t=0){Ji(e);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n=0){const s=n;let r=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const p=e[a.property];p!==void 0&&(o=a.encode(p,t,n),0>l&&(l=a.getSpan(t,n)))}r=n,n+=l}return r+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}};$.Structure=eu;let Sa=class{constructor(e){this.property=e}decode(e,t){throw new Error("UnionDiscriminator is abstract")}encode(e,t,n){throw new Error("UnionDiscriminator is abstract")}};$.UnionDiscriminator=Sa;let is=class extends Sa{constructor(e,t){if(!(e instanceof Zt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}};$.UnionLayoutDiscriminator=is;let Ea=class extends Fe{constructor(e,t,n){let s;if(e instanceof ln||e instanceof gn)s=new is(new va(e));else if(e instanceof Zt&&e.isCount())s=new is(e);else if(e instanceof Sa)s=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Fe))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let r=-1;t&&(r=t.span,0<=r&&(e instanceof ln||e instanceof gn)&&(r+=s.layout.span)),super(r,n),this.discriminator=s,this.usesPrefixDiscriminator=e instanceof ln||e instanceof gn,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t=0){if(0<=this.span)return this.span;const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(n.property&&Object.prototype.hasOwnProperty.call(e,n.property))return n}throw new Error("unable to infer src variant")}decode(e,t=0){let n;const s=this.discriminator,r=s.decode(e,t),o=this.registry[r];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=s.layout.span),n=this.makeDestinationObject(),n[s.property]=r,n[a.property]=a.decode(e,t+l)}else n=o.decode(e,t);return n}encode(e,t,n=0){const s=this.getSourceVariant(e);if(s===void 0){const r=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=r.layout.span),r.encode(e[r.property],t,n),a+o.encode(e[o.property],t,n+a)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new tu(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t=0){let n;return e instanceof Uint8Array?n=this.discriminator.decode(e,t):n=e,this.registry[n]}};$.Union=Ea;let tu=class extends Fe{constructor(e,t,n,s){if(!(e instanceof Ea))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Fe))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let r=e.span;0>e.span&&(r=n?n.span:0,0<=r&&e.usesPrefixDiscriminator&&(r+=e.discriminator.layout.span)),super(r,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(e,t+n)),n+s}decode(e,t=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let r=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),r+=this.layout.getSpan(t,n+s),0<=this.union.span&&r>this.union.span))throw new Error("encoded variant overruns containing union");return r}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};$.VariantLayout=tu;function Bi(i){return 0>i&&(i+=4294967296),i}let _a=class extends Fe{constructor(e,t,n){if(!(e instanceof ln||e instanceof gn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(r){return s=Bi(r),this},this._packedGetValue=function(){return s}}decode(e,t=0){const n=this.makeDestinationObject(),s=this.word.decode(e,t);this._packedSetValue(s);for(const r of this.fields)r.property!==void 0&&(n[r.property]=r.decode(e));return n}encode(e,t,n=0){const s=this.word.decode(t,n);this._packedSetValue(s);for(const r of this.fields)if(r.property!==void 0){const o=e[r.property];o!==void 0&&r.encode(o)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new Ra(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new nu(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}};$.BitStructure=_a;let Ra=class{constructor(e,t,n){if(!(e instanceof _a))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,r=e.fields.reduce((o,a)=>o+a.bits,0);if(t+r>s)throw new Error("bits too long for span remainder ("+(s-r)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=r,this.container.msb&&(this.start=s-r-t),this.wordMask=Bi(this.valueMask<<this.start),this.property=n}decode(e,t){const n=this.container._packedGetValue();return Bi(n&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Bi(e&this.valueMask))throw new TypeError(ba("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=Bi(e<<this.start);this.container._packedSetValue(Bi(t&~this.wordMask)|n)}};$.BitField=Ra;let nu=class extends Ra{constructor(e,t){super(e,1,t)}decode(e,t){return!!super.decode(e,t)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};$.Boolean=nu;let iu=class extends Fe{constructor(e,t){if(!(e instanceof Zt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Zt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t=0){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),Be(e).slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof Zt&&(s=e.length),!(e instanceof Uint8Array&&s===e.length))throw new TypeError(ba("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>t.length)throw new RangeError("encoding overruns Uint8Array");const r=Be(e);return Be(t).write(r.toString("hex"),n,s,"hex"),this.length instanceof Zt&&this.length.encode(s,t,n),s}};$.Blob=iu;let ru=class extends Fe{constructor(e){super(-1,e)}getSpan(e,t=0){Ji(e);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t=0){const n=this.getSpan(e,t);return Be(e).slice(t,t+n-1).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const s=wa.Buffer.from(e,"utf8"),r=s.length;if(n+r>t.length)throw new RangeError("encoding overruns Buffer");const o=Be(t);return s.copy(o,n),o[n+r]=0,r+1}};$.CString=ru;let su=class extends Fe{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t=0){return Ji(e),e.length-t}decode(e,t=0){const n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return Be(e).slice(t,t+n).toString("utf-8")}encode(e,t,n=0){typeof e!="string"&&(e=String(e));const s=wa.Buffer.from(e,"utf8"),r=s.length;if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(Be(t),n),r}};$.UTF8=su;let ou=class extends Fe{constructor(e,t){super(0,t),this.value=e}decode(e,t){return this.value}encode(e,t,n){return 0}};$.Constant=ou;$.greedy=(i,e)=>new Kl(i,e);var ii=$.offset=(i,e,t)=>new va(i,e,t),Ae=$.u8=i=>new ln(1,i),an=$.u16=i=>new ln(2,i);$.u24=i=>new ln(3,i);var ce=$.u32=i=>new ln(4,i);$.u40=i=>new ln(5,i);$.u48=i=>new ln(6,i);var Ct=$.nu64=i=>new Wl(i);$.u16be=i=>new gn(2,i);$.u24be=i=>new gn(3,i);$.u32be=i=>new gn(4,i);$.u40be=i=>new gn(5,i);$.u48be=i=>new gn(6,i);$.nu64be=i=>new Gl(i);$.s8=i=>new Ri(1,i);$.s16=i=>new Ri(2,i);$.s24=i=>new Ri(3,i);$.s32=i=>new Ri(4,i);$.s40=i=>new Ri(5,i);$.s48=i=>new Ri(6,i);var Qt=$.ns64=i=>new ql(i);$.s16be=i=>new Qi(2,i);$.s24be=i=>new Qi(3,i);$.s32be=i=>new Qi(4,i);$.s40be=i=>new Qi(5,i);$.s48be=i=>new Qi(6,i);$.ns64be=i=>new jl(i);$.f32=i=>new Zl(i);$.f32be=i=>new Yl(i);$.f64=i=>new Xl(i);$.f64be=i=>new Jl(i);var le=$.struct=(i,e,t)=>new eu(i,e,t);$.bits=(i,e,t)=>new _a(i,e,t);var Mt=$.seq=(i,e,t)=>new Ql(i,e,t);$.union=(i,e,t)=>new Ea(i,e,t);$.unionLayoutDiscriminator=(i,e)=>new is(i,e);var ze=$.blob=(i,e)=>new iu(i,e);$.cstr=i=>new ru(i);$.utf8=(i,e)=>new su(i,e);$.constant=(i,e)=>new ou(i,e);var wp=8078e3,bp=8078001,vp=8078004,Sp=8078005,Ep=8078006,_p=8078011;function au(i){return Array.isArray(i)?"%5B"+i.map(au).join("%2C%20")+"%5D":typeof i=="bigint"?`${i}n`:encodeURIComponent(String(i!=null&&Object.getPrototypeOf(i)===null?{...i}:i))}function Rp([i,e]){return`${i}=${au(e)}`}function kp(i){const e=Object.entries(i).map(Rp).join("&");return btoa(e)}function Pp(i,e={}){{let t=`Solana error #${i}; Decode this error by running \`npx @solana/errors decode -- ${i}`;return Object.keys(e).length&&(t+=` '${kp(e)}'`),`${t}\``}}var Ui=class extends Error{cause=this.cause;context;constructor(...[i,e]){let t,n;if(e){const{cause:r,...o}=e;r&&(n={cause:r}),Object.keys(o).length>0&&(t=o)}const s=Pp(i,t);super(s,n),this.context={__code:i,...t},this.name="SolanaError"}};function Ap(i,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(i)}function Op(i){return Object.freeze({...i,encode:e=>{const t=new Uint8Array(Ap(e,i));return i.write(e,t,0),t}})}function Tp(i){return Object.freeze({...i,decode:(e,t=0)=>i.read(e,t)[0]})}function Ni(i){return"fixedSize"in i&&typeof i.fixedSize=="number"}function xp(i,e){if(Ni(i)!==Ni(e))throw new Ui(vp);if(Ni(i)&&Ni(e)&&i.fixedSize!==e.fixedSize)throw new Ui(Sp,{decoderFixedSize:e.fixedSize,encoderFixedSize:i.fixedSize});if(!Ni(i)&&!Ni(e)&&i.maxSize!==e.maxSize)throw new Ui(Ep,{decoderMaxSize:e.maxSize,encoderMaxSize:i.maxSize});return{...e,...i,decode:e.decode,encode:i.encode,read:e.read,write:i.write}}function Ip(i,e,t=0){if(e.length-t<=0)throw new Ui(wp,{codecDescription:i})}function Cp(i,e,t,n=0){const s=t.length-n;if(s<e)throw new Ui(bp,{bytesLength:s,codecDescription:i,expected:e})}function Np(i,e,t,n){if(n<e||n>t)throw new Ui(_p,{codecDescription:i,max:t,min:e,value:n})}function cu(i){return i?.endian!==1}function Bp(i){return Op({fixedSize:i.size,write(e,t,n){i.range&&Np(i.name,i.range[0],i.range[1],e);const s=new ArrayBuffer(i.size);return i.set(new DataView(s),e,cu(i.config)),t.set(new Uint8Array(s),n),n+i.size}})}function Lp(i){return Tp({fixedSize:i.size,read(e,t=0){Ip(i.name,e,t),Cp(i.name,i.size,e,t);const n=new DataView(Mp(e,t,i.size));return[i.get(n,cu(i.config)),t+i.size]}})}function Mp(i,e,t){const n=i.byteOffset+(e??0),s=t??i.byteLength;return i.buffer.slice(n,n+s)}var lu=(i={})=>Bp({config:i,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,t,n)=>e.setBigUint64(0,BigInt(t),n),size:8}),Fp=(i={})=>Lp({config:i,get:(e,t)=>e.getBigUint64(0,t),name:"u64",size:8}),Up=(i={})=>xp(lu(i),Fp(i));let Dp=class extends TypeError{constructor(e,t){let n;const{message:s,explanation:r,...o}=e,{path:a}=e,l=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(r??l),r!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}};function Vp(i){return Ar(i)&&typeof i[Symbol.iterator]=="function"}function Ar(i){return typeof i=="object"&&i!=null}function rs(i){return Ar(i)&&!Array.isArray(i)}function yn(i){return typeof i=="symbol"?i.toString():typeof i=="string"?JSON.stringify(i):`${i}`}function $p(i){const{done:e,value:t}=i.next();return e?void 0:t}function zp(i,e,t,n){if(i===!0)return;i===!1?i={}:typeof i=="string"&&(i={message:i});const{path:s,branch:r}=e,{type:o}=t,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${yn(n)}\``}=i;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:r,...i,message:l}}function*Ic(i,e,t,n){Vp(i)||(i=[i]);for(const s of i){const r=zp(s,e,t,n);r&&(yield r)}}function*ka(i,e,t={}){const{path:n=[],branch:s=[i],coerce:r=!1,mask:o=!1}=t,a={path:n,branch:s,mask:o};r&&(i=e.coercer(i,a));let l="valid";for(const p of e.validator(i,a))p.explanation=t.message,l="not_valid",yield[p,void 0];for(let[p,h,b]of e.entries(i,a)){const k=ka(h,b,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,h],coerce:r,mask:o,message:t.message});for(const _ of k)_[0]?(l=_[0].refinement!=null?"not_refined":"not_valid",yield[_[0],void 0]):r&&(h=_[1],p===void 0?i=h:i instanceof Map?i.set(p,h):i instanceof Set?i.add(h):Ar(i)&&(h!==void 0||p in i)&&(i[p]=h))}if(l!=="not_valid")for(const p of e.refiner(i,a))p.explanation=t.message,l="not_refined",yield[p,void 0];l==="valid"&&(yield[void 0,i])}let Cn=class{constructor(e){const{type:t,schema:n,validator:s,refiner:r,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(l,p)=>{const h=s(l,p);return Ic(h,p,this,l)}:this.validator=()=>[],r?this.refiner=(l,p)=>{const h=r(l,p);return Ic(h,p,this,l)}:this.refiner=()=>[]}assert(e,t){return uu(e,this,t)}create(e,t){return te(e,this,t)}is(e){return hu(e,this)}mask(e,t){return Hp(e,this,t)}validate(e,t={}){return Or(e,this,t)}};function uu(i,e,t){const n=Or(i,e,{message:t});if(n[0])throw n[0]}function te(i,e,t){const n=Or(i,e,{coerce:!0,message:t});if(n[0])throw n[0];return n[1]}function Hp(i,e,t){const n=Or(i,e,{coerce:!0,mask:!0,message:t});if(n[0])throw n[0];return n[1]}function hu(i,e){return!Or(i,e)[0]}function Or(i,e,t={}){const n=ka(i,e,t),s=$p(n);return s[0]?[new Dp(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function ki(i,e){return new Cn({type:i,schema:null,validator:e})}function Kp(){return ki("any",()=>!0)}function re(i){return new Cn({type:"array",schema:i,*entries(e){if(i&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,i]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${yn(e)}`}})}function Tn(){return ki("boolean",i=>typeof i=="boolean")}function Pa(i){return ki("instance",e=>e instanceof i||`Expected a \`${i.name}\` instance, but received: ${yn(e)}`)}function Je(i){const e=yn(i),t=typeof i;return new Cn({type:"literal",schema:t==="string"||t==="number"||t==="boolean"?i:null,validator(n){return n===i||`Expected the literal \`${e}\`, but received: ${yn(n)}`}})}function Wp(){return ki("never",()=>!1)}function se(i){return new Cn({...i,validator:(e,t)=>e===null||i.validator(e,t),refiner:(e,t)=>e===null||i.refiner(e,t)})}function U(){return ki("number",i=>typeof i=="number"&&!isNaN(i)||`Expected a number, but received: ${yn(i)}`)}function he(i){return new Cn({...i,validator:(e,t)=>e===void 0||i.validator(e,t),refiner:(e,t)=>e===void 0||i.refiner(e,t)})}function du(i,e){return new Cn({type:"record",schema:null,*entries(t){if(Ar(t))for(const n in t){const s=t[n];yield[n,n,i],yield[n,s,e]}},validator(t){return rs(t)||`Expected an object, but received: ${yn(t)}`},coercer(t){return rs(t)?{...t}:t}})}function X(){return ki("string",i=>typeof i=="string"||`Expected a string, but received: ${yn(i)}`)}function Aa(i){const e=Wp();return new Cn({type:"tuple",schema:null,*entries(t){if(Array.isArray(t)){const n=Math.max(i.length,t.length);for(let s=0;s<n;s++)yield[s,t[s],i[s]||e]}},validator(t){return Array.isArray(t)||`Expected an array, but received: ${yn(t)}`},coercer(t){return Array.isArray(t)?t.slice():t}})}function q(i){const e=Object.keys(i);return new Cn({type:"type",schema:i,*entries(t){if(Ar(t))for(const n of e)yield[n,t[n],i[n]]},validator(t){return rs(t)||`Expected an object, but received: ${yn(t)}`},coercer(t){return rs(t)?{...t}:t}})}function Wt(i){const e=i.map(t=>t.type).join(" | ");return new Cn({type:"union",schema:null,coercer(t,n){for(const s of i){const[r,o]=s.validate(t,{coerce:!0,mask:n.mask});if(!r)return o}return t},validator(t,n){const s=[];for(const r of i){const[...o]=ka(t,r,n),[a]=o;if(a[0])for(const[l]of o)l&&s.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${yn(t)}`,...s]}})}function er(){return ki("unknown",()=>!0)}function Tr(i,e,t){return new Cn({...i,coercer:(n,s)=>hu(n,e)?i.coercer(t(n,s),s):i.coercer(n,s)})}var Vr,Gp=new Uint8Array(16);function fu(){if(!Vr&&(Vr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Vr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Vr(Gp)}const qp=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Es(i){return typeof i=="string"&&qp.test(i)}var It=[];for(var vo=0;vo<256;++vo)It.push((vo+256).toString(16).substr(1));function _s(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(It[i[e+0]]+It[i[e+1]]+It[i[e+2]]+It[i[e+3]]+"-"+It[i[e+4]]+It[i[e+5]]+"-"+It[i[e+6]]+It[i[e+7]]+"-"+It[i[e+8]]+It[i[e+9]]+"-"+It[i[e+10]]+It[i[e+11]]+It[i[e+12]]+It[i[e+13]]+It[i[e+14]]+It[i[e+15]]).toLowerCase();if(!Es(t))throw TypeError("Stringified UUID is invalid");return t}var Cc,So,Eo=0,_o=0;function jp(i,e,t){var n=e&&t||0,s=e||new Array(16);i=i||{};var r=i.node||Cc,o=i.clockseq!==void 0?i.clockseq:So;if(r==null||o==null){var a=i.random||(i.rng||fu)();r==null&&(r=Cc=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=So=(a[6]<<8|a[7])&16383)}var l=i.msecs!==void 0?i.msecs:Date.now(),p=i.nsecs!==void 0?i.nsecs:_o+1,h=l-Eo+(p-_o)/1e4;if(h<0&&i.clockseq===void 0&&(o=o+1&16383),(h<0||l>Eo)&&i.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Eo=l,_o=p,So=o,l+=122192928e5;var b=((l&268435455)*1e4+p)%4294967296;s[n++]=b>>>24&255,s[n++]=b>>>16&255,s[n++]=b>>>8&255,s[n++]=b&255;var k=l/4294967296*1e4&268435455;s[n++]=k>>>8&255,s[n++]=k&255,s[n++]=k>>>24&15|16,s[n++]=k>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var _=0;_<6;++_)s[n+_]=r[_];return e||_s(s)}function pu(i){if(!Es(i))throw TypeError("Invalid UUID");var e,t=new Uint8Array(16);return t[0]=(e=parseInt(i.slice(0,8),16))>>>24,t[1]=e>>>16&255,t[2]=e>>>8&255,t[3]=e&255,t[4]=(e=parseInt(i.slice(9,13),16))>>>8,t[5]=e&255,t[6]=(e=parseInt(i.slice(14,18),16))>>>8,t[7]=e&255,t[8]=(e=parseInt(i.slice(19,23),16))>>>8,t[9]=e&255,t[10]=(e=parseInt(i.slice(24,36),16))/1099511627776&255,t[11]=e/4294967296&255,t[12]=e>>>24&255,t[13]=e>>>16&255,t[14]=e>>>8&255,t[15]=e&255,t}function Zp(i){i=unescape(encodeURIComponent(i));for(var e=[],t=0;t<i.length;++t)e.push(i.charCodeAt(t));return e}var Yp="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Xp="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function gu(i,e,t){function n(s,r,o,a){if(typeof s=="string"&&(s=Zp(s)),typeof r=="string"&&(r=pu(r)),r.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+s.length);if(l.set(r),l.set(s,r.length),l=t(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var p=0;p<16;++p)o[a+p]=l[p];return o}return _s(l)}try{n.name=i}catch{}return n.DNS=Yp,n.URL=Xp,n}function Jp(i){if(typeof i=="string"){var e=unescape(encodeURIComponent(i));i=new Uint8Array(e.length);for(var t=0;t<e.length;++t)i[t]=e.charCodeAt(t)}return Qp(eg(tg(i),i.length*8))}function Qp(i){for(var e=[],t=i.length*32,n="0123456789abcdef",s=0;s<t;s+=8){var r=i[s>>5]>>>s%32&255,o=parseInt(n.charAt(r>>>4&15)+n.charAt(r&15),16);e.push(o)}return e}function mu(i){return(i+64>>>9<<4)+14+1}function eg(i,e){i[e>>5]|=128<<e%32,i[mu(e)-1]=e;for(var t=1732584193,n=-271733879,s=-1732584194,r=271733878,o=0;o<i.length;o+=16){var a=t,l=n,p=s,h=r;t=Ft(t,n,s,r,i[o],7,-680876936),r=Ft(r,t,n,s,i[o+1],12,-389564586),s=Ft(s,r,t,n,i[o+2],17,606105819),n=Ft(n,s,r,t,i[o+3],22,-1044525330),t=Ft(t,n,s,r,i[o+4],7,-176418897),r=Ft(r,t,n,s,i[o+5],12,1200080426),s=Ft(s,r,t,n,i[o+6],17,-1473231341),n=Ft(n,s,r,t,i[o+7],22,-45705983),t=Ft(t,n,s,r,i[o+8],7,1770035416),r=Ft(r,t,n,s,i[o+9],12,-1958414417),s=Ft(s,r,t,n,i[o+10],17,-42063),n=Ft(n,s,r,t,i[o+11],22,-1990404162),t=Ft(t,n,s,r,i[o+12],7,1804603682),r=Ft(r,t,n,s,i[o+13],12,-40341101),s=Ft(s,r,t,n,i[o+14],17,-1502002290),n=Ft(n,s,r,t,i[o+15],22,1236535329),t=Ut(t,n,s,r,i[o+1],5,-165796510),r=Ut(r,t,n,s,i[o+6],9,-1069501632),s=Ut(s,r,t,n,i[o+11],14,643717713),n=Ut(n,s,r,t,i[o],20,-373897302),t=Ut(t,n,s,r,i[o+5],5,-701558691),r=Ut(r,t,n,s,i[o+10],9,38016083),s=Ut(s,r,t,n,i[o+15],14,-660478335),n=Ut(n,s,r,t,i[o+4],20,-405537848),t=Ut(t,n,s,r,i[o+9],5,568446438),r=Ut(r,t,n,s,i[o+14],9,-1019803690),s=Ut(s,r,t,n,i[o+3],14,-187363961),n=Ut(n,s,r,t,i[o+8],20,1163531501),t=Ut(t,n,s,r,i[o+13],5,-1444681467),r=Ut(r,t,n,s,i[o+2],9,-51403784),s=Ut(s,r,t,n,i[o+7],14,1735328473),n=Ut(n,s,r,t,i[o+12],20,-1926607734),t=Dt(t,n,s,r,i[o+5],4,-378558),r=Dt(r,t,n,s,i[o+8],11,-2022574463),s=Dt(s,r,t,n,i[o+11],16,1839030562),n=Dt(n,s,r,t,i[o+14],23,-35309556),t=Dt(t,n,s,r,i[o+1],4,-1530992060),r=Dt(r,t,n,s,i[o+4],11,1272893353),s=Dt(s,r,t,n,i[o+7],16,-155497632),n=Dt(n,s,r,t,i[o+10],23,-1094730640),t=Dt(t,n,s,r,i[o+13],4,681279174),r=Dt(r,t,n,s,i[o],11,-358537222),s=Dt(s,r,t,n,i[o+3],16,-722521979),n=Dt(n,s,r,t,i[o+6],23,76029189),t=Dt(t,n,s,r,i[o+9],4,-640364487),r=Dt(r,t,n,s,i[o+12],11,-421815835),s=Dt(s,r,t,n,i[o+15],16,530742520),n=Dt(n,s,r,t,i[o+2],23,-995338651),t=Vt(t,n,s,r,i[o],6,-198630844),r=Vt(r,t,n,s,i[o+7],10,1126891415),s=Vt(s,r,t,n,i[o+14],15,-1416354905),n=Vt(n,s,r,t,i[o+5],21,-57434055),t=Vt(t,n,s,r,i[o+12],6,1700485571),r=Vt(r,t,n,s,i[o+3],10,-1894986606),s=Vt(s,r,t,n,i[o+10],15,-1051523),n=Vt(n,s,r,t,i[o+1],21,-2054922799),t=Vt(t,n,s,r,i[o+8],6,1873313359),r=Vt(r,t,n,s,i[o+15],10,-30611744),s=Vt(s,r,t,n,i[o+6],15,-1560198380),n=Vt(n,s,r,t,i[o+13],21,1309151649),t=Vt(t,n,s,r,i[o+4],6,-145523070),r=Vt(r,t,n,s,i[o+11],10,-1120210379),s=Vt(s,r,t,n,i[o+2],15,718787259),n=Vt(n,s,r,t,i[o+9],21,-343485551),t=ti(t,a),n=ti(n,l),s=ti(s,p),r=ti(r,h)}return[t,n,s,r]}function tg(i){if(i.length===0)return[];for(var e=i.length*8,t=new Uint32Array(mu(e)),n=0;n<e;n+=8)t[n>>5]|=(i[n/8]&255)<<n%32;return t}function ti(i,e){var t=(i&65535)+(e&65535),n=(i>>16)+(e>>16)+(t>>16);return n<<16|t&65535}function ng(i,e){return i<<e|i>>>32-e}function Rs(i,e,t,n,s,r){return ti(ng(ti(ti(e,i),ti(n,r)),s),t)}function Ft(i,e,t,n,s,r,o){return Rs(e&t|~e&n,i,e,s,r,o)}function Ut(i,e,t,n,s,r,o){return Rs(e&n|t&~n,i,e,s,r,o)}function Dt(i,e,t,n,s,r,o){return Rs(e^t^n,i,e,s,r,o)}function Vt(i,e,t,n,s,r,o){return Rs(t^(e|~n),i,e,s,r,o)}var ig=gu("v3",48,Jp);function rg(i,e,t){i=i||{};var n=i.random||(i.rng||fu)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=n[s];return e}return _s(n)}function sg(i,e,t,n){switch(i){case 0:return e&t^~e&n;case 1:return e^t^n;case 2:return e&t^e&n^t&n;case 3:return e^t^n}}function Ro(i,e){return i<<e|i>>>32-e}function og(i){var e=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof i=="string"){var n=unescape(encodeURIComponent(i));i=[];for(var s=0;s<n.length;++s)i.push(n.charCodeAt(s))}else Array.isArray(i)||(i=Array.prototype.slice.call(i));i.push(128);for(var r=i.length/4+2,o=Math.ceil(r/16),a=new Array(o),l=0;l<o;++l){for(var p=new Uint32Array(16),h=0;h<16;++h)p[h]=i[l*64+h*4]<<24|i[l*64+h*4+1]<<16|i[l*64+h*4+2]<<8|i[l*64+h*4+3];a[l]=p}a[o-1][14]=(i.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(i.length-1)*8&4294967295;for(var b=0;b<o;++b){for(var k=new Uint32Array(80),_=0;_<16;++_)k[_]=a[b][_];for(var x=16;x<80;++x)k[x]=Ro(k[x-3]^k[x-8]^k[x-14]^k[x-16],1);for(var C=t[0],A=t[1],B=t[2],D=t[3],L=t[4],W=0;W<80;++W){var Y=Math.floor(W/20),J=Ro(C,5)+sg(Y,A,B,D)+L+e[Y]+k[W]>>>0;L=D,D=B,B=Ro(A,30)>>>0,A=C,C=J}t[0]=t[0]+C>>>0,t[1]=t[1]+A>>>0,t[2]=t[2]+B>>>0,t[3]=t[3]+D>>>0,t[4]=t[4]+L>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var ag=gu("v5",80,og);const cg="00000000-0000-0000-0000-000000000000";function lg(i){if(!Es(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}const ug=Object.freeze(Object.defineProperty({__proto__:null,NIL:cg,parse:pu,stringify:_s,v1:jp,v3:ig,v4:rg,v5:ag,validate:Es,version:lg},Symbol.toStringTag,{value:"Module"})),yu=ws(ug),hg=yu.v4,dg=function(i,e,t,n){if(typeof i!="string")throw new TypeError(i+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const r={method:i};if(s===2&&(r.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");r.params=e}if(typeof t>"u"){const o=typeof n.generator=="function"?n.generator:function(){return hg()};r.id=o(r,n)}else s===2&&t===null?n.notificationIdNull&&(r.id=null):r.id=t;return r};var fg=dg;const pg=yu.v4,gg=fg,vr=function(i,e){if(!(this instanceof vr))return new vr(i,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return pg()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=i};var mg=vr;vr.prototype.request=function(i,e,t,n){const s=this;let r=null;const o=Array.isArray(i)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&i&&typeof i=="object"&&typeof e=="function")n=e,r=i;else{typeof t=="function"&&(n=t,t=void 0);const p=typeof n=="function";try{r=gg(i,e,t,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(h){if(p)return n(h);throw h}if(!p)return r}let l;try{l=JSON.stringify(r,this.options.replacer)}catch(p){return n(p)}return this.callServer(l,function(p,h){s._parseResponse(p,h,n)}),r};vr.prototype._parseResponse=function(i,e,t){if(i){t(i);return}if(!e)return t();let n;try{n=JSON.parse(e,this.options.reviver)}catch(s){return t(s)}if(t.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},r=function(o){return!s(o)};return t(null,n.filter(s),n.filter(r))}else return t(null,n.error,n.result);t(null,n)};const yg=ys(mg);var wu={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,p,h){this.fn=l,this.context=p,this.once=h||!1}function r(l,p,h,b,k){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new s(h,b||l,k),x=t?t+p:p;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],_]:l._events[x].push(_):(l._events[x]=_,l._eventsCount++),l}function o(l,p){--l._eventsCount===0?l._events=new n:delete l._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],h,b;if(this._eventsCount===0)return p;for(b in h=this._events)e.call(h,b)&&p.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},a.prototype.listeners=function(p){var h=t?t+p:p,b=this._events[h];if(!b)return[];if(b.fn)return[b.fn];for(var k=0,_=b.length,x=new Array(_);k<_;k++)x[k]=b[k].fn;return x},a.prototype.listenerCount=function(p){var h=t?t+p:p,b=this._events[h];return b?b.fn?1:b.length:0},a.prototype.emit=function(p,h,b,k,_,x){var C=t?t+p:p;if(!this._events[C])return!1;var A=this._events[C],B=arguments.length,D,L;if(A.fn){switch(A.once&&this.removeListener(p,A.fn,void 0,!0),B){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,b),!0;case 4:return A.fn.call(A.context,h,b,k),!0;case 5:return A.fn.call(A.context,h,b,k,_),!0;case 6:return A.fn.call(A.context,h,b,k,_,x),!0}for(L=1,D=new Array(B-1);L<B;L++)D[L-1]=arguments[L];A.fn.apply(A.context,D)}else{var W=A.length,Y;for(L=0;L<W;L++)switch(A[L].once&&this.removeListener(p,A[L].fn,void 0,!0),B){case 1:A[L].fn.call(A[L].context);break;case 2:A[L].fn.call(A[L].context,h);break;case 3:A[L].fn.call(A[L].context,h,b);break;case 4:A[L].fn.call(A[L].context,h,b,k);break;default:if(!D)for(Y=1,D=new Array(B-1);Y<B;Y++)D[Y-1]=arguments[Y];A[L].fn.apply(A[L].context,D)}}return!0},a.prototype.on=function(p,h,b){return r(this,p,h,b,!1)},a.prototype.once=function(p,h,b){return r(this,p,h,b,!0)},a.prototype.removeListener=function(p,h,b,k){var _=t?t+p:p;if(!this._events[_])return this;if(!h)return o(this,_),this;var x=this._events[_];if(x.fn)x.fn===h&&(!k||x.once)&&(!b||x.context===b)&&o(this,_);else{for(var C=0,A=[],B=x.length;C<B;C++)(x[C].fn!==h||k&&!x[C].once||b&&x[C].context!==b)&&A.push(x[C]);A.length?this._events[_]=A.length===1?A[0]:A:o(this,_)}return this},a.prototype.removeAllListeners=function(p){var h;return p?(h=t?t+p:p,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a})(wu);var wg=wu.exports;const bu=ys(wg);var bg=class extends bu{socket;constructor(i,e,t){super(),this.socket=new window.WebSocket(i,t),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=n=>this.emit("message",n.data),this.socket.onerror=n=>this.emit("error",n),this.socket.onclose=n=>{this.emit("close",n.code,n.reason)}}send(i,e,t){const n=t||e;try{this.socket.send(i),n()}catch(s){n(s)}}close(i,e){this.socket.close(i,e)}addEventListener(i,e,t){this.socket.addEventListener(i,e,t)}};function vg(i,e){return new bg(i,e)}var Sg=class{encode(i){return JSON.stringify(i)}decode(i){return JSON.parse(i)}},Eg=class extends bu{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(i,e="ws://localhost:8080",{autoconnect:t=!0,reconnect:n=!0,reconnect_interval:s=1e3,max_reconnects:r=5,...o}={},a,l){super(),this.webSocketFactory=i,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=t,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=r,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),l?this.dataPack=l:this.dataPack=new Sg,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(i,e,t,n){return!n&&typeof t=="object"&&(n=t,t=null),new Promise((s,r)=>{if(!this.ready)return r(new Error("socket not ready"));const o=this.generate_request_id(i,e),a={jsonrpc:"2.0",method:i,params:e||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,l=>{if(l)return r(l);this.queue[o]={promise:[s,r]},t&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],r(new Error("reply timeout"))},t))})})}async login(i){const e=await this.call("rpc.login",i);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(i,e){return new Promise((t,n)=>{if(!this.ready)return n(new Error("socket not ready"));const s={jsonrpc:"2.0",method:i,params:e};this.socket.send(this.dataPack.encode(s),r=>{if(r)return n(r);t()})})}async subscribe(i){typeof i=="string"&&(i=[i]);const e=await this.call("rpc.on",i);if(typeof i=="string"&&e[i]!=="ok")throw new Error("Failed subscribing to an event '"+i+"' with: "+e[i]);return e}async unsubscribe(i){typeof i=="string"&&(i=[i]);const e=await this.call("rpc.off",i);if(typeof i=="string"&&e[i]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(i,e){this.socket.close(i||1e3,e)}setAutoReconnect(i){this.reconnect=i}setReconnectInterval(i){this.reconnect_interval=i}setMaxReconnects(i){this.max_reconnects=i}_connect(i,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(i,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:t})=>{t instanceof ArrayBuffer&&(t=fe.from(t).toString());try{t=this.dataPack.decode(t)}catch{return}if(t.notification&&this.listeners(t.notification).length){if(!Object.keys(t.params).length)return this.emit(t.notification);const n=[t.notification];if(t.params.constructor===Object)n.push(t.params);else for(let s=0;s<t.params.length;s++)n.push(t.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,n)})}if(!this.queue[t.id])return t.method?Promise.resolve().then(()=>{this.emit(t.method,t?.params)}):void 0;"error"in t=="result"in t&&this.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[t.id].timeout&&clearTimeout(this.queue[t.id].timeout),t.error?this.queue[t.id].promise[1](t.error):this.queue[t.id].promise[0](t.result),delete this.queue[t.id]}),this.socket.addEventListener("error",t=>this.emit("error",t)),this.socket.addEventListener("close",({code:t,reason:n})=>{this.ready&&setTimeout(()=>this.emit("close",t,n),0),this.ready=!1,this.socket=void 0,t!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(i,e),this.reconnect_interval)))})}};const _g=BigInt(0),or=BigInt(1),Rg=BigInt(2),kg=BigInt(7),Pg=BigInt(256),Ag=BigInt(113),vu=[],Su=[],Eu=[];for(let i=0,e=or,t=1,n=0;i<24;i++){[t,n]=[n,(2*t+3*n)%5],vu.push(2*(5*n+t)),Su.push((i+1)*(i+2)/2%64);let s=_g;for(let r=0;r<7;r++)e=(e<<or^(e>>kg)*Ag)%Pg,e&Rg&&(s^=or<<(or<<BigInt(r))-or);Eu.push(s)}const _u=Gf(Eu,!0),Og=_u[0],Tg=_u[1],Nc=(i,e,t)=>t>32?Zf(i,e,t):qf(i,e,t),Bc=(i,e,t)=>t>32?Yf(i,e,t):jf(i,e,t);function xg(i,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=i[o]^i[o+10]^i[o+20]^i[o+30]^i[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,l=(o+2)%10,p=t[l],h=t[l+1],b=Nc(p,h,1)^t[a],k=Bc(p,h,1)^t[a+1];for(let _=0;_<50;_+=10)i[o+_]^=b,i[o+_+1]^=k}let s=i[2],r=i[3];for(let o=0;o<24;o++){const a=Su[o],l=Nc(s,r,a),p=Bc(s,r,a),h=vu[o];s=i[h],r=i[h+1],i[h]=l,i[h+1]=p}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=i[o+a];for(let a=0;a<10;a++)i[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}i[0]^=Og[n],i[1]^=Tg[n]}br(t)}class Oa extends Bl{constructor(e,t,n,s=!1,r=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=r,Ac(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Mf(this.state)}clone(){return this._cloneInto()}keccak(){Oc(this.state32),xg(this.state32,this.rounds),Oc(this.state32),this.posOut=0,this.pos=0}update(e){Jr(this),e=ga(e),wr(e);const{blockLen:t,state:n}=this,s=e.length;for(let r=0;r<s;){const o=Math.min(t-this.pos,s-r);for(let a=0;a<o;a++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,t&128&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Jr(this,!1),wr(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,r=e.length;s<r;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,r-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ac(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Nl(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,br(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:r,enableXOF:o}=this;return e||(e=new Oa(t,n,s,o,r)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=r,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Ig=(i,e,t)=>Ll(()=>new Oa(e,i,t)),Lc=Ig(1,136,256/8);class Ru extends wl{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Sd(e);const n=oa(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,r=new Uint8Array(s);r.set(n.length>s?e.create().update(n).digest():n);for(let o=0;o<r.length;o++)r[o]^=54;this.iHash.update(r),this.oHash=e.create();for(let o=0;o<r.length;o++)r[o]^=106;this.oHash.update(r),r.fill(0)}update(e){return jr(this),this.iHash.update(e),this}digestInto(e){jr(this),ps(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:s,destroyed:r,blockLen:o,outputLen:a}=this;return e=e,e.finished=s,e.destroyed=r,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ku=(i,e,t)=>new Ru(i,e).update(t).digest();ku.create=(i,e)=>new Ru(i,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Mc(i){i.lowS!==void 0&&ni("lowS",i.lowS),i.prehash!==void 0&&ni("prehash",i.prehash)}function Cg(i){const e=ua(i);Pr(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...e})}class Ng extends Error{constructor(e=""){super(e)}}const Mn={Err:Ng,_tlv:{encode:(i,e)=>{const{Err:t}=Mn;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");const n=e.length/2,s=Fr(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");const r=n>127?Fr(s.length/2|128):"";return Fr(i)+r+s+e},decode(i,e){const{Err:t}=Mn;let n=0;if(i<0||i>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==i)throw new t("tlv.decode: wrong tlv");const s=e[n++],r=!!(s&128);let o=0;if(!r)o=s;else{const l=s&127;if(!l)throw new t("tlv.decode(long): indefinite length not supported");if(l>4)throw new t("tlv.decode(long): byte length is too big");const p=e.subarray(n,n+l);if(p.length!==l)throw new t("tlv.decode: length bytes not complete");if(p[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(const h of p)o=o<<8|h;if(n+=l,o<128)throw new t("tlv.decode(long): not minimal encoding")}const a=e.subarray(n,n+o);if(a.length!==o)throw new t("tlv.decode: wrong value length");return{v:a,l:e.subarray(n+o)}}},_int:{encode(i){const{Err:e}=Mn;if(i<Un)throw new e("integer: negative integers are not allowed");let t=Fr(i);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(i){const{Err:e}=Mn;if(i[0]&128)throw new e("invalid signature integer: negative");if(i[0]===0&&!(i[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bi(i)}},toSig(i){const{Err:e,_int:t,_tlv:n}=Mn,s=Et("signature",i),{v:r,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=n.decode(2,r),{v:p,l:h}=n.decode(2,l);if(h.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(a),s:t.decode(p)}},hexFromSig(i){const{_tlv:e,_int:t}=Mn,n=e.encode(2,t.encode(i.r)),s=e.encode(2,t.encode(i.s)),r=n+s;return e.encode(48,r)}},Un=BigInt(0),Ot=BigInt(1);BigInt(2);const Fc=BigInt(3);BigInt(4);function Bg(i){const e=Cg(i),{Fp:t}=e,n=ms(e.n,e.nBitLength),s=e.toBytes||((C,A,B)=>{const D=A.toAffine();return Ki(Uint8Array.from([4]),t.toBytes(D.x),t.toBytes(D.y))}),r=e.fromBytes||(C=>{const A=C.subarray(1),B=t.fromBytes(A.subarray(0,t.BYTES)),D=t.fromBytes(A.subarray(t.BYTES,2*t.BYTES));return{x:B,y:D}});function o(C){const{a:A,b:B}=e,D=t.sqr(C),L=t.mul(D,C);return t.add(t.add(L,t.mul(C,A)),B)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function a(C){return la(C,Ot,e.n)}function l(C){const{allowedPrivateKeyLengths:A,nByteLength:B,wrapPrivateKey:D,n:L}=e;if(A&&typeof C!="bigint"){if(zi(C)&&(C=Hi(C)),typeof C!="string"||!A.includes(C.length))throw new Error("invalid private key");C=C.padStart(B*2,"0")}let W;try{W=typeof C=="bigint"?C:bi(Et("private key",C,B))}catch{throw new Error("invalid private key, expected hex or "+B+" bytes, got "+typeof C)}return D&&(W=Ye(W,L)),pn("private key",W,Ot,L),W}function p(C){if(!(C instanceof k))throw new Error("ProjectivePoint expected")}const h=Xr((C,A)=>{const{px:B,py:D,pz:L}=C;if(t.eql(L,t.ONE))return{x:B,y:D};const W=C.is0();A==null&&(A=W?t.ONE:t.inv(L));const Y=t.mul(B,A),J=t.mul(D,A),Q=t.mul(L,A);if(W)return{x:t.ZERO,y:t.ZERO};if(!t.eql(Q,t.ONE))throw new Error("invZ was invalid");return{x:Y,y:J}}),b=Xr(C=>{if(C.is0()){if(e.allowInfinityPoint&&!t.is0(C.py))return;throw new Error("bad point: ZERO")}const{x:A,y:B}=C.toAffine();if(!t.isValid(A)||!t.isValid(B))throw new Error("bad point: x or y not FE");const D=t.sqr(B),L=o(A);if(!t.eql(D,L))throw new Error("bad point: equation left != right");if(!C.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class k{constructor(A,B,D){if(A==null||!t.isValid(A))throw new Error("x required");if(B==null||!t.isValid(B))throw new Error("y required");if(D==null||!t.isValid(D))throw new Error("z required");this.px=A,this.py=B,this.pz=D,Object.freeze(this)}static fromAffine(A){const{x:B,y:D}=A||{};if(!A||!t.isValid(B)||!t.isValid(D))throw new Error("invalid affine point");if(A instanceof k)throw new Error("projective point not allowed");const L=W=>t.eql(W,t.ZERO);return L(B)&&L(D)?k.ZERO:new k(B,D,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const B=t.invertBatch(A.map(D=>D.pz));return A.map((D,L)=>D.toAffine(B[L])).map(k.fromAffine)}static fromHex(A){const B=k.fromAffine(r(Et("pointHex",A)));return B.assertValidity(),B}static fromPrivateKey(A){return k.BASE.multiply(l(A))}static msm(A,B){return Il(k,n,A,B)}_setWindowSize(A){x.setWindowSize(this,A)}assertValidity(){b(this)}hasEvenY(){const{y:A}=this.toAffine();if(t.isOdd)return!t.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){p(A);const{px:B,py:D,pz:L}=this,{px:W,py:Y,pz:J}=A,Q=t.eql(t.mul(B,J),t.mul(W,L)),ee=t.eql(t.mul(D,J),t.mul(Y,L));return Q&&ee}negate(){return new k(this.px,t.neg(this.py),this.pz)}double(){const{a:A,b:B}=e,D=t.mul(B,Fc),{px:L,py:W,pz:Y}=this;let J=t.ZERO,Q=t.ZERO,ee=t.ZERO,oe=t.mul(L,L),de=t.mul(W,W),ie=t.mul(Y,Y),K=t.mul(L,W);return K=t.add(K,K),ee=t.mul(L,Y),ee=t.add(ee,ee),J=t.mul(A,ee),Q=t.mul(D,ie),Q=t.add(J,Q),J=t.sub(de,Q),Q=t.add(de,Q),Q=t.mul(J,Q),J=t.mul(K,J),ee=t.mul(D,ee),ie=t.mul(A,ie),K=t.sub(oe,ie),K=t.mul(A,K),K=t.add(K,ee),ee=t.add(oe,oe),oe=t.add(ee,oe),oe=t.add(oe,ie),oe=t.mul(oe,K),Q=t.add(Q,oe),ie=t.mul(W,Y),ie=t.add(ie,ie),oe=t.mul(ie,K),J=t.sub(J,oe),ee=t.mul(ie,de),ee=t.add(ee,ee),ee=t.add(ee,ee),new k(J,Q,ee)}add(A){p(A);const{px:B,py:D,pz:L}=this,{px:W,py:Y,pz:J}=A;let Q=t.ZERO,ee=t.ZERO,oe=t.ZERO;const de=e.a,ie=t.mul(e.b,Fc);let K=t.mul(B,W),R=t.mul(D,Y),c=t.mul(L,J),d=t.add(B,D),w=t.add(W,Y);d=t.mul(d,w),w=t.add(K,R),d=t.sub(d,w),w=t.add(B,L);let S=t.add(W,J);return w=t.mul(w,S),S=t.add(K,c),w=t.sub(w,S),S=t.add(D,L),Q=t.add(Y,J),S=t.mul(S,Q),Q=t.add(R,c),S=t.sub(S,Q),oe=t.mul(de,w),Q=t.mul(ie,c),oe=t.add(Q,oe),Q=t.sub(R,oe),oe=t.add(R,oe),ee=t.mul(Q,oe),R=t.add(K,K),R=t.add(R,K),c=t.mul(de,c),w=t.mul(ie,w),R=t.add(R,c),c=t.sub(K,c),c=t.mul(de,c),w=t.add(w,c),K=t.mul(R,w),ee=t.add(ee,K),K=t.mul(S,w),Q=t.mul(d,Q),Q=t.sub(Q,K),K=t.mul(d,R),oe=t.mul(S,oe),oe=t.add(oe,K),new k(Q,ee,oe)}subtract(A){return this.add(A.negate())}is0(){return this.equals(k.ZERO)}wNAF(A){return x.wNAFCached(this,A,k.normalizeZ)}multiplyUnsafe(A){const{endo:B,n:D}=e;pn("scalar",A,Un,D);const L=k.ZERO;if(A===Un)return L;if(this.is0()||A===Ot)return this;if(!B||x.hasPrecomputes(this))return x.wNAFCachedUnsafe(this,A,k.normalizeZ);let{k1neg:W,k1:Y,k2neg:J,k2:Q}=B.splitScalar(A),ee=L,oe=L,de=this;for(;Y>Un||Q>Un;)Y&Ot&&(ee=ee.add(de)),Q&Ot&&(oe=oe.add(de)),de=de.double(),Y>>=Ot,Q>>=Ot;return W&&(ee=ee.negate()),J&&(oe=oe.negate()),oe=new k(t.mul(oe.px,B.beta),oe.py,oe.pz),ee.add(oe)}multiply(A){const{endo:B,n:D}=e;pn("scalar",A,Ot,D);let L,W;if(B){const{k1neg:Y,k1:J,k2neg:Q,k2:ee}=B.splitScalar(A);let{p:oe,f:de}=this.wNAF(J),{p:ie,f:K}=this.wNAF(ee);oe=x.constTimeNegate(Y,oe),ie=x.constTimeNegate(Q,ie),ie=new k(t.mul(ie.px,B.beta),ie.py,ie.pz),L=oe.add(ie),W=de.add(K)}else{const{p:Y,f:J}=this.wNAF(A);L=Y,W=J}return k.normalizeZ([L,W])[0]}multiplyAndAddUnsafe(A,B,D){const L=k.BASE,W=(J,Q)=>Q===Un||Q===Ot||!J.equals(L)?J.multiplyUnsafe(Q):J.multiply(Q),Y=W(this,B).add(W(A,D));return Y.is0()?void 0:Y}toAffine(A){return h(this,A)}isTorsionFree(){const{h:A,isTorsionFree:B}=e;if(A===Ot)return!0;if(B)return B(k,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:B}=e;return A===Ot?this:B?B(k,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return ni("isCompressed",A),this.assertValidity(),s(k,this,A)}toHex(A=!0){return ni("isCompressed",A),Hi(this.toRawBytes(A))}}k.BASE=new k(e.Gx,e.Gy,t.ONE),k.ZERO=new k(t.ZERO,t.ONE,t.ZERO);const _=e.nBitLength,x=xl(k,e.endo?Math.ceil(_/2):_);return{CURVE:e,ProjectivePoint:k,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:a}}function Lg(i){const e=ua(i);return Pr(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function Mg(i){const e=Lg(i),{Fp:t,n}=e,s=t.BYTES+1,r=2*t.BYTES+1;function o(c){return Ye(c,n)}function a(c){return $o(c,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:b}=Bg({...e,toBytes(c,d,w){const S=d.toAffine(),E=t.toBytes(S.x),O=Ki;return ni("isCompressed",w),w?O(Uint8Array.from([d.hasEvenY()?2:3]),E):O(Uint8Array.from([4]),E,t.toBytes(S.y))},fromBytes(c){const d=c.length,w=c[0],S=c.subarray(1);if(d===s&&(w===2||w===3)){const E=bi(S);if(!la(E,Ot,t.ORDER))throw new Error("Point is not on curve");const O=h(E);let N;try{N=t.sqrt(O)}catch(I){const j=I instanceof Error?": "+I.message:"";throw new Error("Point is not on curve"+j)}const P=(N&Ot)===Ot;return(w&1)===1!==P&&(N=t.neg(N)),{x:E,y:N}}else if(d===r&&w===4){const E=t.fromBytes(S.subarray(0,t.BYTES)),O=t.fromBytes(S.subarray(t.BYTES,2*t.BYTES));return{x:E,y:O}}else{const E=s,O=r;throw new Error("invalid Point, expected length of "+E+", or uncompressed "+O+", got "+d)}}}),k=c=>Hi(yr(c,e.nByteLength));function _(c){const d=n>>Ot;return c>d}function x(c){return _(c)?o(-c):c}const C=(c,d,w)=>bi(c.slice(d,w));class A{constructor(d,w,S){pn("r",d,Ot,n),pn("s",w,Ot,n),this.r=d,this.s=w,S!=null&&(this.recovery=S),Object.freeze(this)}static fromCompact(d){const w=e.nByteLength;return d=Et("compactSignature",d,w*2),new A(C(d,0,w),C(d,w,2*w))}static fromDER(d){const{r:w,s:S}=Mn.toSig(Et("DER",d));return new A(w,S)}assertValidity(){}addRecoveryBit(d){return new A(this.r,this.s,d)}recoverPublicKey(d){const{r:w,s:S,recovery:E}=this,O=J(Et("msgHash",d));if(E==null||![0,1,2,3].includes(E))throw new Error("recovery id invalid");const N=E===2||E===3?w+e.n:w;if(N>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const P=E&1?"03":"02",y=l.fromHex(P+k(N)),I=a(N),j=o(-O*I),Z=o(S*I),ne=l.BASE.multiplyAndAddUnsafe(y,j,Z);if(!ne)throw new Error("point at infinify");return ne.assertValidity(),ne}hasHighS(){return _(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Zr(this.toDERHex())}toDERHex(){return Mn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Zr(this.toCompactHex())}toCompactHex(){return k(this.r)+k(this.s)}}const B={isValidPrivateKey(c){try{return p(c),!0}catch{return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const c=Al(e.n);return mf(e.randomBytes(c),e.n)},precompute(c=8,d=l.BASE){return d._setWindowSize(c),d.multiply(BigInt(3)),d}};function D(c,d=!0){return l.fromPrivateKey(c).toRawBytes(d)}function L(c){const d=zi(c),w=typeof c=="string",S=(d||w)&&c.length;return d?S===s||S===r:w?S===2*s||S===2*r:c instanceof l}function W(c,d,w=!0){if(L(c))throw new Error("first arg must be private key");if(!L(d))throw new Error("second arg must be public key");return l.fromHex(d).multiply(p(c)).toRawBytes(w)}const Y=e.bits2int||function(c){if(c.length>8192)throw new Error("input is too large");const d=bi(c),w=c.length*8-e.nBitLength;return w>0?d>>BigInt(w):d},J=e.bits2int_modN||function(c){return o(Y(c))},Q=gs(e.nBitLength);function ee(c){return pn("num < 2^"+e.nBitLength,c,Un,Q),yr(c,e.nByteLength)}function oe(c,d,w=de){if(["recovered","canonical"].some(pe=>pe in w))throw new Error("sign() legacy options not supported");const{hash:S,randomBytes:E}=e;let{lowS:O,prehash:N,extraEntropy:P}=w;O==null&&(O=!0),c=Et("msgHash",c),Mc(w),N&&(c=Et("prehashed msgHash",S(c)));const y=J(c),I=p(d),j=[ee(I),ee(y)];if(P!=null&&P!==!1){const pe=P===!0?E(t.BYTES):P;j.push(Et("extraEntropy",pe))}const Z=Ki(...j),ne=y;function Se(pe){const we=Y(pe);if(!b(we))return;const ot=a(we),me=l.BASE.multiply(we).toAffine(),ve=o(me.x);if(ve===Un)return;const _t=o(ot*o(ne+ve*I));if(_t===Un)return;let xe=(me.x===ve?0:2)|Number(me.y&Ot),Me=_t;return O&&_(_t)&&(Me=x(_t),xe^=1),new A(ve,Me,xe)}return{seed:Z,k2sig:Se}}const de={lowS:e.lowS,prehash:!1},ie={lowS:e.lowS,prehash:!1};function K(c,d,w=de){const{seed:S,k2sig:E}=oe(c,d,w),O=e;return sf(O.hash.outputLen,O.nByteLength,O.hmac)(S,E)}l.BASE._setWindowSize(8);function R(c,d,w,S=ie){const E=c;d=Et("msgHash",d),w=Et("publicKey",w);const{lowS:O,prehash:N,format:P}=S;if(Mc(S),"strict"in S)throw new Error("options.strict was renamed to lowS");if(P!==void 0&&P!=="compact"&&P!=="der")throw new Error("format must be compact or der");const y=typeof E=="string"||zi(E),I=!y&&!P&&typeof E=="object"&&E!==null&&typeof E.r=="bigint"&&typeof E.s=="bigint";if(!y&&!I)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let j,Z;try{if(I&&(j=new A(E.r,E.s)),y){try{P!=="compact"&&(j=A.fromDER(E))}catch(xe){if(!(xe instanceof Mn.Err))throw xe}!j&&P!=="der"&&(j=A.fromCompact(E))}Z=l.fromHex(w)}catch{return!1}if(!j||O&&j.hasHighS())return!1;N&&(d=e.hash(d));const{r:ne,s:Se}=j,pe=J(d),we=a(Se),ot=o(pe*we),me=o(ne*we),ve=l.BASE.multiplyAndAddUnsafe(Z,ot,me)?.toAffine();return ve?o(ve.x)===ne:!1}return{CURVE:e,getPublicKey:D,getSharedSecret:W,sign:K,verify:R,ProjectivePoint:l,Signature:A,utils:B}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fg(i){return{hash:i,hmac:(e,...t)=>ku(i,e,Rd(...t)),randomBytes:vl}}function Ug(i,e){const t=n=>Mg({...i,...Fg(n)});return{...t(e),create:t}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Pu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Uc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Dg=BigInt(1),Wo=BigInt(2),Dc=(i,e)=>(i+e/Wo)/e;function Vg(i){const e=Pu,t=BigInt(3),n=BigInt(6),s=BigInt(11),r=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),p=i*i*i%e,h=p*p*i%e,b=rt(h,t,e)*h%e,k=rt(b,t,e)*h%e,_=rt(k,Wo,e)*p%e,x=rt(_,s,e)*_%e,C=rt(x,r,e)*x%e,A=rt(C,a,e)*C%e,B=rt(A,l,e)*A%e,D=rt(B,a,e)*C%e,L=rt(D,t,e)*h%e,W=rt(L,o,e)*x%e,Y=rt(W,n,e)*p%e,J=rt(Y,Wo,e);if(!Go.eql(Go.sqr(J),i))throw new Error("Cannot find square root");return J}const Go=ms(Pu,void 0,void 0,{sqrt:Vg}),ks=Ug({a:BigInt(0),b:BigInt(7),Fp:Go,n:Uc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:i=>{const e=Uc,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Dg*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),r=t,o=BigInt("0x100000000000000000000000000000000"),a=Dc(r*i,e),l=Dc(-n*i,e);let p=Ye(i-a*t-l*s,e),h=Ye(-a*n-l*r,e);const b=p>o,k=h>o;if(b&&(p=e-p),k&&(h=e-h),p>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+i);return{k1neg:b,k1:p,k2neg:k,k2:h}}}},xd);BigInt(0);ks.ProjectivePoint;const $g=Xi.utils.randomPrivateKey,Vc=()=>{const i=Xi.utils.randomPrivateKey(),e=ss(i),t=new Uint8Array(64);return t.set(i),t.set(e,32),{publicKey:e,secretKey:t}},ss=Xi.getPublicKey;function $c(i){try{return Xi.ExtendedPoint.fromHex(i),!0}catch{return!1}}const Ta=(i,e)=>Xi.sign(i,e.slice(0,32)),zg=Xi.verify,Pe=i=>fe.isBuffer(i)?i:i instanceof Uint8Array?fe.from(i.buffer,i.byteOffset,i.byteLength):fe.from(i);let xa=class{constructor(e){Object.assign(this,e)}encode(){return fe.from(zl(dr,this))}static decode(e){return Hl(dr,this,e)}static decodeUnchecked(e){return Fl(dr,this,e)}};class Hg extends xa{constructor(e){if(super(e),this.enum="",Object.keys(e).length!==1)throw new Error("Enum can only take single value");Object.keys(e).map(t=>{this.enum=t})}}const dr=new Map;var Au;const Ou=32,On=32;function Kg(i){return i._bn!==void 0}let zc=1;class H extends xa{constructor(e){if(super({}),this._bn=void 0,Kg(e))this._bn=e._bn;else{if(typeof e=="string"){const t=Lt.decode(e);if(t.length!=On)throw new Error("Invalid public key input");this._bn=new mn(t)}else this._bn=new mn(e);if(this._bn.byteLength()>On)throw new Error("Invalid public key input")}}static unique(){const e=new H(zc);return zc+=1,new H(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Lt.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(fe);if(e.length===On)return e;const t=fe.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,n){const s=fe.concat([e.toBuffer(),fe.from(t),n.toBuffer()]),r=xc(s);return new H(r)}static createProgramAddressSync(e,t){let n=fe.alloc(0);e.forEach(function(r){if(r.length>Ou)throw new TypeError("Max seed length exceeded");n=fe.concat([n,Pe(r)])}),n=fe.concat([n,t.toBuffer(),fe.from("ProgramDerivedAddress")]);const s=xc(n);if($c(s))throw new Error("Invalid seeds, address must fall off the curve");return new H(s)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let n=255,s;for(;n!=0;){try{const r=e.concat(fe.from([n]));s=this.createProgramAddressSync(r,t)}catch(r){if(r instanceof TypeError)throw r;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){const t=new H(e);return $c(t.toBytes())}}Au=H;H.default=new Au("11111111111111111111111111111111");dr.set(H,{kind:"struct",fields:[["_bn","u256"]]});class Wg{constructor(e){if(this._publicKey=void 0,this._secretKey=void 0,e){const t=Pe(e);if(e.length!==64)throw new Error("bad secret key size");this._publicKey=t.slice(32,64),this._secretKey=t.slice(0,32)}else this._secretKey=Pe($g()),this._publicKey=Pe(ss(this._secretKey))}get publicKey(){return new H(this._publicKey)}get secretKey(){return fe.concat([this._secretKey,this._publicKey],64)}}const Gg=new H("BPFLoader1111111111111111111111111111111111"),ri=1232,Ps=127,Sr=64;class Ia extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ia.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ca extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ca.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Mi extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Mi.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Er{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((r,o)=>{n.set(r.toBase58(),o)});const s=r=>{const o=n.get(r.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(r=>({programIdIndex:s(r.programId),accountKeyIndexes:r.keys.map(o=>s(o.pubkey)),data:r.data}))}}const Oe=(i="publicKey")=>ze(32,i),qg=(i="signature")=>ze(64,i),mi=(i="string")=>{const e=le([ce("length"),ce("lengthPadding"),ze(ii(ce(),-8),"chars")],i),t=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(r,o)=>t(r,o).chars.toString(),s.encode=(r,o,a)=>{const l={chars:fe.from(r,"utf8")};return n(l,o,a)},s.alloc=r=>ce().span+ce().span+fe.from(r,"utf8").length,s},jg=(i="authorized")=>le([Oe("staker"),Oe("withdrawer")],i),Zg=(i="lockup")=>le([Qt("unixTimestamp"),Qt("epoch"),Oe("custodian")],i),Yg=(i="voteInit")=>le([Oe("nodePubkey"),Oe("authorizedVoter"),Oe("authorizedWithdrawer"),Ae("commission")],i),Xg=(i="voteAuthorizeWithSeedArgs")=>le([ce("voteAuthorizationType"),Oe("currentAuthorityDerivedKeyOwnerPubkey"),mi("currentAuthorityDerivedKeySeed"),Oe("newAuthorized")],i);function Tu(i,e){const t=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(e[s.property]);if("count"in s&&"elementLayout"in s){const r=e[s.property];if(Array.isArray(r))return r.length*t(s.elementLayout)}else if("fields"in s)return Tu({layout:s},e[s.property]);return 0};let n=0;return i.layout.fields.forEach(s=>{n+=t(s)}),n}function qt(i){let e=0,t=0;for(;;){let n=i.shift();if(e|=(n&127)<<t*7,t+=1,!(n&128))break}return e}function en(i,e){let t=e;for(;;){let n=t&127;if(t>>=7,t==0){i.push(n);break}else n|=128,i.push(n)}}function Ce(i,e){if(!i)throw new Error(e||"Assertion failed")}class As{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const n=new Map,s=o=>{const a=o.toBase58();let l=n.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,l)),l},r=s(t);r.isSigner=!0,r.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const a of o.keys){const l=s(a.pubkey);l.isSigner||=a.isSigner,l.isWritable||=a.isWritable}}return new As(t,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ce(e.length<=256,"Max static account keys length exceeded");const t=e.filter(([,l])=>l.isSigner&&l.isWritable),n=e.filter(([,l])=>l.isSigner&&!l.isWritable),s=e.filter(([,l])=>!l.isSigner&&l.isWritable),r=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:r.length};{Ce(t.length>0,"Expected at least one writable signer key");const[l]=t[0];Ce(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...t.map(([l])=>new H(l)),...n.map(([l])=>new H(l)),...s.map(([l])=>new H(l)),...r.map(([l])=>new H(l))];return[o,a]}extractTableLookup(e){const[t,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,r]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(t.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:s},{writable:n,readonly:r}]}drainKeysFoundInLookupTable(e,t){const n=new Array,s=new Array;for(const[r,o]of this.keyMetaMap.entries())if(t(o)){const a=new H(r),l=e.findIndex(p=>p.equals(a));l>=0&&(Ce(l<256,"Max lookup table index exceeded"),n.push(l),s.push(a),this.keyMetaMap.delete(r))}return[n,s]}}const xu="Reached end of buffer unexpectedly";function Rn(i){if(i.length===0)throw new Error(xu);return i.shift()}function jt(i,...e){const[t]=e;if(e.length===2?t+(e[1]??0)>i.length:t>=i.length)throw new Error(xu);return i.splice(...e)}class wn{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(t=>new H(t)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(t=>this.indexToProgramIds.set(t.programIdIndex,this.accountKeys[t.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Lt.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new Er(this.staticAccountKeys)}static compile(e){const t=As.compile(e.instructions,e.payerKey),[n,s]=t.getMessageComponents(),o=new Er(s).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Lt.encode(a.data)}));return new wn({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-t,r=this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts;return n<r}else{const n=t-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,t)=>!this.isProgramId(t))}serialize(){const e=this.accountKeys.length;let t=[];en(t,e);const n=this.instructions.map(b=>{const{accounts:k,programIdIndex:_}=b,x=Array.from(Lt.decode(b.data));let C=[];en(C,k.length);let A=[];return en(A,x.length),{programIdIndex:_,keyIndicesCount:fe.from(C),keyIndices:k,dataLength:fe.from(A),data:x}});let s=[];en(s,n.length);let r=fe.alloc(ri);fe.from(s).copy(r);let o=s.length;n.forEach(b=>{const _=le([Ae("programIdIndex"),ze(b.keyIndicesCount.length,"keyIndicesCount"),Mt(Ae("keyIndex"),b.keyIndices.length,"keyIndices"),ze(b.dataLength.length,"dataLength"),Mt(Ae("userdatum"),b.data.length,"data")]).encode(b,r,o);o+=_}),r=r.slice(0,o);const a=le([ze(1,"numRequiredSignatures"),ze(1,"numReadonlySignedAccounts"),ze(1,"numReadonlyUnsignedAccounts"),ze(t.length,"keyCount"),Mt(Oe("key"),e,"keys"),Oe("recentBlockhash")]),l={numRequiredSignatures:fe.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:fe.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:fe.from([this.header.numReadonlyUnsignedAccounts]),keyCount:fe.from(t),keys:this.accountKeys.map(b=>Pe(b.toBytes())),recentBlockhash:Lt.decode(this.recentBlockhash)};let p=fe.alloc(2048);const h=a.encode(l,p);return r.copy(p,h),p.slice(0,h+r.length)}static from(e){let t=[...e];const n=Rn(t);if(n!==(n&Ps))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=Rn(t),r=Rn(t),o=qt(t);let a=[];for(let k=0;k<o;k++){const _=jt(t,0,On);a.push(new H(fe.from(_)))}const l=jt(t,0,On),p=qt(t);let h=[];for(let k=0;k<p;k++){const _=Rn(t),x=qt(t),C=jt(t,0,x),A=qt(t),B=jt(t,0,A),D=Lt.encode(fe.from(B));h.push({programIdIndex:_,accounts:C,data:D})}const b={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:r},recentBlockhash:Lt.encode(fe.from(l)),accountKeys:a,instructions:h};return new wn(b)}}class Si{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Er(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,r=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<r}else if(e>=this.header.numRequiredSignatures){const s=e-t,o=n-t-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=t-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(r=>r.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const r of n.writableIndexes)if(r<s.state.addresses.length)t.writable.push(s.state.addresses[r]);else throw new Error(`Failed to find address for index ${r} in address lookup table ${n.accountKey.toBase58()}`);for(const r of n.readonlyIndexes)if(r<s.state.addresses.length)t.readonly.push(s.state.addresses[r]);else throw new Error(`Failed to find address for index ${r} in address lookup table ${n.accountKey.toBase58()}`)}return t}static compile(e){const t=As.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},r=e.addressLookupTableAccounts||[];for(const h of r){const b=t.extractTableLookup(h);if(b!==void 0){const[k,{writable:_,readonly:x}]=b;n.push(k),s.writable.push(..._),s.readonly.push(...x)}}const[o,a]=t.getMessageComponents(),p=new Er(a,s).compileInstructions(e.instructions);return new Si({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const e=Array();en(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),n=Array();en(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),r=Array();en(r,this.addressTableLookups.length);const o=le([Ae("prefix"),le([Ae("numRequiredSignatures"),Ae("numReadonlySignedAccounts"),Ae("numReadonlyUnsignedAccounts")],"header"),ze(e.length,"staticAccountKeysLength"),Mt(Oe(),this.staticAccountKeys.length,"staticAccountKeys"),Oe("recentBlockhash"),ze(n.length,"instructionsLength"),ze(t.length,"serializedInstructions"),ze(r.length,"addressTableLookupsLength"),ze(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(ri),p=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(h=>h.toBytes()),recentBlockhash:Lt.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(r),serializedAddressTableLookups:s},a);return a.slice(0,p)}serializeInstructions(){let e=0;const t=new Uint8Array(ri);for(const n of this.compiledInstructions){const s=Array();en(s,n.accountKeyIndexes.length);const r=Array();en(r,n.data.length);const o=le([Ae("programIdIndex"),ze(s.length,"encodedAccountKeyIndexesLength"),Mt(Ae(),n.accountKeyIndexes.length,"accountKeyIndexes"),ze(r.length,"encodedDataLength"),ze(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(r),data:n.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(ri);for(const n of this.addressTableLookups){const s=Array();en(s,n.writableIndexes.length);const r=Array();en(r,n.readonlyIndexes.length);const o=le([Oe("accountKey"),ze(s.length,"encodedWritableIndexesLength"),Mt(Ae(),n.writableIndexes.length,"writableIndexes"),ze(r.length,"encodedReadonlyIndexesLength"),Mt(Ae(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(r),readonlyIndexes:n.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const n=Rn(t),s=n&Ps;Ce(n!==s,"Expected versioned message but received legacy message");const r=s;Ce(r===0,`Expected versioned message with version 0 but found version ${r}`);const o={numRequiredSignatures:Rn(t),numReadonlySignedAccounts:Rn(t),numReadonlyUnsignedAccounts:Rn(t)},a=[],l=qt(t);for(let x=0;x<l;x++)a.push(new H(jt(t,0,On)));const p=Lt.encode(jt(t,0,On)),h=qt(t),b=[];for(let x=0;x<h;x++){const C=Rn(t),A=qt(t),B=jt(t,0,A),D=qt(t),L=new Uint8Array(jt(t,0,D));b.push({programIdIndex:C,accountKeyIndexes:B,data:L})}const k=qt(t),_=[];for(let x=0;x<k;x++){const C=new H(jt(t,0,On)),A=qt(t),B=jt(t,0,A),D=qt(t),L=jt(t,0,D);_.push({accountKey:C,writableIndexes:B,readonlyIndexes:L})}return new Si({header:o,staticAccountKeys:a,recentBlockhash:p,compiledInstructions:b,addressTableLookups:_})}}const Na={deserializeMessageVersion(i){const e=i[0],t=e&Ps;return t===e?"legacy":t},deserialize:i=>{const e=Na.deserializeMessageVersion(i);if(e==="legacy")return wn.from(i);if(e===0)return Si.deserialize(i);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Ln=function(i){return i[i.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",i[i.PROCESSED=1]="PROCESSED",i[i.TIMED_OUT=2]="TIMED_OUT",i[i.NONCE_INVALID=3]="NONCE_INVALID",i}({});const Jg=fe.alloc(Sr).fill(0);class Ne{constructor(e){this.keys=void 0,this.programId=void 0,this.data=fe.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:t,isWritable:n})=>({pubkey:e.toJSON(),isSigner:t,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class Te{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:n}=e;this.minNonceContextSlot=t,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:n}=e;this.recentBlockhash=t,this.lastValidBlockHeight=n}else{const{recentBlockhash:t,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(t=>{"instructions"in t?this.instructions=this.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?this.instructions.push(t):this.instructions.push(new Ne(t))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?t=[this.nonceInfo.nonceInstruction,...this.instructions]:t=this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");t.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let C=0;C<t.length;C++)if(t[C].programId===void 0)throw new Error(`Transaction instruction index ${C} has undefined program id`);const s=[],r=[];t.forEach(C=>{C.keys.forEach(B=>{r.push({...B})});const A=C.programId.toString();s.includes(A)||s.push(A)}),s.forEach(C=>{r.push({pubkey:new H(C),isSigner:!1,isWritable:!1})});const o=[];r.forEach(C=>{const A=C.pubkey.toString(),B=o.findIndex(D=>D.pubkey.toString()===A);B>-1?(o[B].isWritable=o[B].isWritable||C.isWritable,o[B].isSigner=o[B].isSigner||C.isSigner):o.push(C)}),o.sort(function(C,A){if(C.isSigner!==A.isSigner)return C.isSigner?-1:1;if(C.isWritable!==A.isWritable)return C.isWritable?-1:1;const B={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return C.pubkey.toBase58().localeCompare(A.pubkey.toBase58(),"en",B)});const a=o.findIndex(C=>C.pubkey.equals(n));if(a>-1){const[C]=o.splice(a,1);C.isSigner=!0,C.isWritable=!0,o.unshift(C)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const C of this.signatures){const A=o.findIndex(B=>B.pubkey.equals(C.publicKey));if(A>-1)o[A].isSigner||(o[A].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${C.publicKey.toString()}`)}let l=0,p=0,h=0;const b=[],k=[];o.forEach(({pubkey:C,isSigner:A,isWritable:B})=>{A?(b.push(C.toString()),l+=1,B||(p+=1)):(k.push(C.toString()),B||(h+=1))});const _=b.concat(k),x=t.map(C=>{const{data:A,programId:B}=C;return{programIdIndex:_.indexOf(B.toString()),accounts:C.keys.map(D=>_.indexOf(D.pubkey.toString())),data:Lt.encode(A)}});return x.forEach(C=>{Ce(C.programIdIndex>=0),C.accounts.forEach(A=>Ce(A>=0))}),new wn({header:{numRequiredSignatures:l,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:h},accountKeys:_,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every((s,r)=>t[r].equals(s.publicKey))||(this.signatures=t.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const t=new Set;this.signatures=e.filter(n=>{const s=n.toString();return t.has(s)?!1:(t.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const r of e){const o=r.publicKey.toString();t.has(o)||(t.add(o),n.push(r))}this.signatures=n.map(r=>({signature:null,publicKey:r.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const t=new Set,n=[];for(const r of e){const o=r.publicKey.toString();t.has(o)||(t.add(o),n.push(r))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...t){const n=e.serialize();t.forEach(s=>{const r=Ta(n,s.secretKey);this._addSignature(s.publicKey,Pe(r))})}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){Ce(t.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=fe.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const n={};for(const{signature:s,publicKey:r}of this.signatures)s===null?t&&(n.missing||=[]).push(r):zg(s,e,r.toBytes())||(n.invalid||=[]).push(r);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const r=this._getMessageSignednessErrors(s,t);if(r){let o="Signature verification failed.";throw r.invalid&&(o+=`
Invalid signature for public key${r.invalid.length===1?"":"(s)"} [\`${r.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),r.missing&&(o+=`
Missing signature for public key${r.missing.length===1?"":"(s)"} [\`${r.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:t}=this,n=[];en(n,t.length);const s=n.length+t.length*64+e.length,r=fe.alloc(s);return Ce(t.length<256),fe.from(n).copy(r,0),t.forEach(({signature:o},a)=>{o!==null&&(Ce(o.length===64,"signature has invalid length"),fe.from(o).copy(r,n.length+a*64))}),e.copy(r,n.length+t.length*64),Ce(r.length<=ri,`Transaction too large: ${r.length} > ${ri}`),r}get keys(){return Ce(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ce(this.instructions.length===1),this.instructions[0].programId}get data(){return Ce(this.instructions.length===1),this.instructions[0].data}static from(e){let t=[...e];const n=qt(t);let s=[];for(let r=0;r<n;r++){const o=jt(t,0,Sr);s.push(Lt.encode(fe.from(o)))}return Te.populate(wn.from(t),s)}static populate(e,t=[]){const n=new Te;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),t.forEach((s,r)=>{const o={signature:s==Lt.encode(Jg)?null:Lt.decode(s),publicKey:e.accountKeys[r]};n.signatures.push(o)}),e.instructions.forEach(s=>{const r=s.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new Ne({keys:r,programId:e.accountKeys[s.programIdIndex],data:Lt.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class Ba{constructor(e){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=e.payerKey,this.instructions=e.instructions,this.recentBlockhash=e.recentBlockhash}static decompile(e,t){const{header:n,compiledInstructions:s,recentBlockhash:r}=e,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:l}=n,p=o-a;Ce(p>0,"Message header is invalid");const h=e.staticAccountKeys.length-o-l;Ce(h>=0,"Message header is invalid");const b=e.getAccountKeys(t),k=b.get(0);if(k===void 0)throw new Error("Failed to decompile message because no account keys were found");const _=[];for(const x of s){const C=[];for(const B of x.accountKeyIndexes){const D=b.get(B);if(D===void 0)throw new Error(`Failed to find key for account key index ${B}`);const L=B<o;let W;L?W=B<p:B<b.staticAccountKeys.length?W=B-o<h:W=B-b.staticAccountKeys.length<b.accountKeysFromLookups.writable.length,C.push({pubkey:D,isSigner:B<n.numRequiredSignatures,isWritable:W})}const A=b.get(x.programIdIndex);if(A===void 0)throw new Error(`Failed to find program id for program id index ${x.programIdIndex}`);_.push(new Ne({programId:A,data:Pe(x.data),keys:C}))}return new Ba({payerKey:k,instructions:_,recentBlockhash:r})}compileToLegacyMessage(){return wn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(e){return Si.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}class La{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,t!==void 0)Ce(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(Sr));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),t=Array();en(t,this.signatures.length);const n=le([ze(t.length,"encodedSignaturesLength"),Mt(qg(),this.signatures.length,"signatures"),ze(e.length,"serializedMessage")]),s=new Uint8Array(2048),r=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,r)}static deserialize(e){let t=[...e];const n=[],s=qt(t);for(let o=0;o<s;o++)n.push(new Uint8Array(jt(t,0,Sr)));const r=Na.deserialize(new Uint8Array(t));return new La(r,n)}sign(e){const t=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const r=n.findIndex(o=>o.equals(s.publicKey));Ce(r>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[r]=Ta(t,s.secretKey)}}addSignature(e,t){Ce(t.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(r=>r.equals(e));Ce(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=t}}const Qg=160,em=64,tm=Qg/em,Iu=1e3/tm,En=new H("SysvarC1ock11111111111111111111111111111111"),nm=new H("SysvarEpochSchedu1e111111111111111111111111"),im=new H("Sysvar1nstructions1111111111111111111111111"),Kr=new H("SysvarRecentB1ockHashes11111111111111111111"),Gi=new H("SysvarRent111111111111111111111111111111111"),rm=new H("SysvarRewards111111111111111111111111111111"),sm=new H("SysvarS1otHashes111111111111111111111111111"),om=new H("SysvarS1otHistory11111111111111111111111111"),Wr=new H("SysvarStakeHistory1111111111111111111111111");class _r extends Error{constructor({action:e,signature:t,transactionMessage:n,logs:s}){const r=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${t} resulted in an error. 
${n}. `+r+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+r+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((t,n)=>{e.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const r=s.meta.logMessages;this.transactionLogs=r,t(r)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const am={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class ue extends Error{constructor({code:e,message:t,data:n},s){super(s!=null?`${s}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=n,this.name="SolanaJSONRPCError"}}async function Rr(i,e,t,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},r=await i.sendTransaction(e,t,s);let o;if(e.recentBlockhash!=null&&e.lastValidBlockHeight!=null)o=(await i.confirmTransaction({abortSignal:n?.abortSignal,signature:r,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},n&&n.commitment)).value;else if(e.minNonceContextSlot!=null&&e.nonceInfo!=null){const{nonceInstruction:a}=e.nonceInfo,l=a.keys[0].pubkey;o=(await i.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:e.minNonceContextSlot,nonceAccountPubkey:l,nonceValue:e.nonceInfo.nonce,signature:r},n&&n.commitment)).value}else n?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await i.confirmTransaction(r,n&&n.commitment)).value;if(o.err)throw r!=null?new _r({action:"send",signature:r,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${r} failed (${JSON.stringify(o)})`);return r}function gi(i){return new Promise(e=>setTimeout(e,i))}function Ie(i,e){const t=i.layout.span>=0?i.layout.span:Tu(i,e),n=fe.alloc(t),s=Object.assign({instruction:i.index},e);return i.layout.encode(s,n),n}function Le(i,e){let t;try{t=i.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.instruction!==i.index)throw new Error(`invalid instruction; instruction index mismatch ${t.instruction} != ${i.index}`);return t}const Cu=Ct("lamportsPerSignature"),Nu=le([ce("version"),ce("state"),Oe("authorizedPubkey"),Oe("nonce"),le([Cu],"feeCalculator")]),qo=Nu.span;class Os{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Nu.decode(Pe(e),0);return new Os({authorizedPubkey:new H(t.authorizedPubkey),nonce:new H(t.nonce).toString(),feeCalculator:t.feeCalculator})}}function qi(i){const e=ze(8,i),t=e.decode.bind(e),n=e.encode.bind(e),s=e,r=Up();return s.decode=(o,a)=>{const l=t(o,a);return r.decode(l)},s.encode=(o,a,l)=>{const p=r.encode(o);return n(p,a,l)},s}class cm{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[r,o]of Object.entries(We))if(o.index==n){s=r;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t,space:n,programId:s}=Le(We.Create,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:t,space:n,programId:new H(s)}}static decodeTransfer(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{lamports:t}=Le(We.Transfer,e.data);return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}static decodeTransferWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t,seed:n,programId:s}=Le(We.TransferWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:t,seed:n,programId:new H(s)}}static decodeAllocate(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{space:t}=Le(We.Allocate,e.data);return{accountPubkey:e.keys[0].pubkey,space:t}}static decodeAllocateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,space:s,programId:r}=Le(We.AllocateWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new H(t),seed:n,space:s,programId:new H(r)}}static decodeAssign(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{programId:t}=Le(We.Assign,e.data);return{accountPubkey:e.keys[0].pubkey,programId:new H(t)}}static decodeAssignWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);const{base:t,seed:n,programId:s}=Le(We.AssignWithSeed,e.data);return{accountPubkey:e.keys[0].pubkey,basePubkey:new H(t),seed:n,programId:new H(s)}}static decodeCreateWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{base:t,seed:n,lamports:s,space:r,programId:o}=Le(We.CreateWithSeed,e.data);return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new H(t),seed:n,lamports:s,space:r,programId:new H(o)}}static decodeNonceInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{authorized:t}=Le(We.InitializeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new H(t)}}static decodeNonceAdvance(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(We.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static decodeNonceWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Le(We.WithdrawNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}static decodeNonceAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t}=Le(We.AuthorizeNonceAccount,e.data);return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new H(t)}}static checkProgramId(e){if(!e.equals(Rt.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const We=Object.freeze({Create:{index:0,layout:le([ce("instruction"),Qt("lamports"),Qt("space"),Oe("programId")])},Assign:{index:1,layout:le([ce("instruction"),Oe("programId")])},Transfer:{index:2,layout:le([ce("instruction"),qi("lamports")])},CreateWithSeed:{index:3,layout:le([ce("instruction"),Oe("base"),mi("seed"),Qt("lamports"),Qt("space"),Oe("programId")])},AdvanceNonceAccount:{index:4,layout:le([ce("instruction")])},WithdrawNonceAccount:{index:5,layout:le([ce("instruction"),Qt("lamports")])},InitializeNonceAccount:{index:6,layout:le([ce("instruction"),Oe("authorized")])},AuthorizeNonceAccount:{index:7,layout:le([ce("instruction"),Oe("authorized")])},Allocate:{index:8,layout:le([ce("instruction"),Qt("space")])},AllocateWithSeed:{index:9,layout:le([ce("instruction"),Oe("base"),mi("seed"),Qt("space"),Oe("programId")])},AssignWithSeed:{index:10,layout:le([ce("instruction"),Oe("base"),mi("seed"),Oe("programId")])},TransferWithSeed:{index:11,layout:le([ce("instruction"),qi("lamports"),mi("seed"),Oe("programId")])},UpgradeNonceAccount:{index:12,layout:le([ce("instruction")])}});class Rt{constructor(){}static createAccount(e){const t=We.Create,n=Ie(t,{lamports:e.lamports,space:e.space,programId:Pe(e.programId.toBuffer())});return new Ne({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(e){let t,n;if("basePubkey"in e){const s=We.TransferWithSeed;t=Ie(s,{lamports:BigInt(e.lamports),seed:e.seed,programId:Pe(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=We.Transfer;t=Ie(s,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}static assign(e){let t,n;if("basePubkey"in e){const s=We.AssignWithSeed;t=Ie(s,{base:Pe(e.basePubkey.toBuffer()),seed:e.seed,programId:Pe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=We.Assign;t=Ie(s,{programId:Pe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=We.CreateWithSeed,n=Ie(t,{base:Pe(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Pe(e.programId.toBuffer())});let s=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||s.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new Ne({keys:s,programId:this.programId,data:n})}static createNonceAccount(e){const t=new Te;"basePubkey"in e&&"seed"in e?t.add(Rt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:qo,programId:this.programId})):t.add(Rt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:qo,programId:this.programId}));const n={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(n)),t}static nonceInitialize(e){const t=We.InitializeNonceAccount,n=Ie(t,{authorized:Pe(e.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Kr,isSigner:!1,isWritable:!1},{pubkey:Gi,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ne(s)}static nonceAdvance(e){const t=We.AdvanceNonceAccount,n=Ie(t),s={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Kr,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ne(s)}static nonceWithdraw(e){const t=We.WithdrawNonceAccount,n=Ie(t,{lamports:e.lamports});return new Ne({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Kr,isSigner:!1,isWritable:!1},{pubkey:Gi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(e){const t=We.AuthorizeNonceAccount,n=Ie(t,{authorized:Pe(e.newAuthorizedPubkey.toBuffer())});return new Ne({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(e){let t,n;if("basePubkey"in e){const s=We.AllocateWithSeed;t=Ie(s,{base:Pe(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Pe(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=We.Allocate;t=Ie(s,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ne({keys:n,programId:this.programId,data:t})}}Rt.programId=new H("11111111111111111111111111111111");const lm=ri-300;class Ei{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Ei.chunkSize)+1+1)}static async load(e,t,n,s,r){{const b=await e.getMinimumBalanceForRentExemption(r.length),k=await e.getAccountInfo(n.publicKey,"confirmed");let _=null;if(k!==null){if(k.executable)return console.error("Program load failed, account is already executable"),!1;k.data.length!==r.length&&(_=_||new Te,_.add(Rt.allocate({accountPubkey:n.publicKey,space:r.length}))),k.owner.equals(s)||(_=_||new Te,_.add(Rt.assign({accountPubkey:n.publicKey,programId:s}))),k.lamports<b&&(_=_||new Te,_.add(Rt.transfer({fromPubkey:t.publicKey,toPubkey:n.publicKey,lamports:b-k.lamports})))}else _=new Te().add(Rt.createAccount({fromPubkey:t.publicKey,newAccountPubkey:n.publicKey,lamports:b>0?b:1,space:r.length,programId:s}));_!==null&&await Rr(e,_,[t,n],{commitment:"confirmed"})}const o=le([ce("instruction"),ce("offset"),ce("bytesLength"),ce("bytesLengthPadding"),Mt(Ae("byte"),ii(ce(),-8),"bytes")]),a=Ei.chunkSize;let l=0,p=r,h=[];for(;p.length>0;){const b=p.slice(0,a),k=fe.alloc(a+16);o.encode({instruction:0,offset:l,bytes:b,bytesLength:0,bytesLengthPadding:0},k);const _=new Te().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:k});h.push(Rr(e,_,[t,n],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")&&await gi(1e3/4),l+=a,p=p.slice(a)}await Promise.all(h);{const b=le([ce("instruction")]),k=fe.alloc(b.span);b.encode({instruction:1},k);const _=new Te().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Gi,isSigner:!1,isWritable:!1}],programId:s,data:k}),x="processed",C=await e.sendTransaction(_,[t,n],{preflightCommitment:x}),{context:A,value:B}=await e.confirmTransaction({signature:C,lastValidBlockHeight:_.lastValidBlockHeight,blockhash:_.recentBlockhash},x);if(B.err)throw new Error(`Transaction ${C} failed (${JSON.stringify(B)})`);for(;;){try{if(await e.getSlot({commitment:x})>A.slot)break}catch{}await new Promise(D=>setTimeout(D,Math.round(Iu/2)))}}return!0}}Ei.chunkSize=lm;const um=new H("BPFLoader2111111111111111111111111111111111");class hm{static getMinNumSignatures(e){return Ei.getMinNumSignatures(e)}static load(e,t,n,s,r){return Ei.load(e,t,n,r,s)}}function dm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ko,Hc;function fm(){if(Hc)return ko;Hc=1;var i=Object.prototype.toString,e=Object.keys||function(n){var s=[];for(var r in n)s.push(r);return s};function t(n,s){var r,o,a,l,p,h,b;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return t(n.toJSON(),s);if(b=i.call(n),b==="[object Array]"){for(a="[",o=n.length-1,r=0;r<o;r++)a+=t(n[r],!0)+",";return o>-1&&(a+=t(n[r],!0)),a+"]"}else if(b==="[object Object]"){for(l=e(n).sort(),o=l.length,a="",r=0;r<o;)p=l[r],h=t(n[p],!1),h!==void 0&&(a&&(a+=","),a+=JSON.stringify(p)+":"+h),r++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return ko=function(n){var s=t(n,!1);if(s!==void 0)return""+s},ko}var pm=fm(),Kc=dm(pm);const ar=32;function Po(i){let e=0;for(;i>1;)i/=2,e++;return e}function gm(i){return i===0?1:(i--,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i|=i>>16,i|=i>>32,i+1)}class Bu{constructor(e,t,n,s,r){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=r}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const t=Po(gm(e+ar+1))-Po(ar)-1,n=this.getSlotsInEpoch(t),s=e-(n-ar);return[t,s]}else{const t=e-this.firstNormalSlot,n=Math.floor(t/this.slotsPerEpoch),s=this.firstNormalEpoch+n,r=t%this.slotsPerEpoch;return[s,r]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*ar:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Po(ar)):this.slotsPerEpoch}}var mm=globalThis.fetch;class ym extends Eg{constructor(e,t,n){const s=r=>{const o=vg(r,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,e,t,n),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return t===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return t===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}function wm(i,e){let t;try{t=i.layout.decode(e)}catch(n){throw new Error("invalid instruction; "+n)}if(t.typeIndex!==i.index)throw new Error(`invalid account data; account type mismatch ${t.typeIndex} != ${i.index}`);return t}const Wc=56;class jo{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=wm(bm,e),n=e.length-Wc;Ce(n>=0,"lookup table is invalid"),Ce(n%32===0,"lookup table is invalid");const s=n/32,{addresses:r}=le([Mt(Oe(),s,"addresses")]).decode(e.slice(Wc));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:t.authority.length!==0?new H(t.authority[0]):void 0,addresses:r.map(o=>new H(o))}}}const bm={index:1,layout:le([ce("typeIndex"),qi("deactivationSlot"),Ct("lastExtendedSlot"),Ae("lastExtendedStartIndex"),Ae(),Mt(Oe(),ii(Ae(),-1),"authority")])},vm=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Sm(i){const e=i.match(vm);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${i}\``);const[t,n,s,r]=e,o=i.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${n}${l}${r}`}const et=Tr(Pa(H),X(),i=>new H(i)),Lu=Aa([X(),Je("base64")]),Ma=Tr(Pa(fe),Lu,i=>fe.from(i[0],"base64")),Mu=30*1e3;function Em(i){if(/^https?:/.test(i)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return i}function Ke(i){let e,t;if(typeof i=="string")e=i;else if(i){const{commitment:n,...s}=i;e=n,t=s}return{commitment:e,config:t}}function Gc(i){return i.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Fu(i){return Wt([q({jsonrpc:Je("2.0"),id:X(),result:i}),q({jsonrpc:Je("2.0"),id:X(),error:q({code:er(),message:X(),data:he(Kp())})})])}const _m=Fu(er());function Re(i){return Tr(Fu(i),_m,e=>"error"in e?e:{...e,result:te(e.result,i)})}function st(i){return Re(q({context:q({slot:U()}),value:i}))}function Ts(i){return q({context:q({slot:U()}),value:i})}function Ao(i,e){return i===0?new Si({header:e.header,staticAccountKeys:e.accountKeys.map(t=>new H(t)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Lt.decode(t.data)})),addressTableLookups:e.addressTableLookups}):new wn(e)}const Rm=q({foundation:U(),foundationTerm:U(),initial:U(),taper:U(),terminal:U()}),km=Re(re(se(q({epoch:U(),effectiveSlot:U(),amount:U(),postBalance:U(),commission:he(se(U()))})))),Pm=re(q({slot:U(),prioritizationFee:U()})),Am=q({total:U(),validator:U(),foundation:U(),epoch:U()}),Om=q({epoch:U(),slotIndex:U(),slotsInEpoch:U(),absoluteSlot:U(),blockHeight:he(U()),transactionCount:he(U())}),Tm=q({slotsPerEpoch:U(),leaderScheduleSlotOffset:U(),warmup:Tn(),firstNormalEpoch:U(),firstNormalSlot:U()}),xm=du(X(),re(U())),Pi=se(Wt([q({}),X()])),Im=q({err:Pi}),Cm=Je("receivedSignature"),Nm=q({"solana-core":X(),"feature-set":he(U())}),Bm=q({program:X(),programId:et,parsed:er()}),Lm=q({programId:et,accounts:re(et),data:X()}),qc=st(q({err:se(Wt([q({}),X()])),logs:se(re(X())),accounts:he(se(re(se(q({executable:Tn(),owner:X(),lamports:U(),data:re(X()),rentEpoch:he(U())}))))),unitsConsumed:he(U()),returnData:he(se(q({programId:X(),data:Aa([X(),Je("base64")])}))),innerInstructions:he(se(re(q({index:U(),instructions:re(Wt([Bm,Lm]))}))))})),Mm=st(q({byIdentity:du(X(),re(U())),range:q({firstSlot:U(),lastSlot:U()})}));function Fm(i,e,t,n,s,r){const o=t||mm;let a;r!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return n&&(l=async(h,b)=>{const k=await new Promise((_,x)=>{try{n(h,b,(C,A)=>_([C,A]))}catch(C){x(C)}});return await o(...k)}),new yg(async(h,b)=>{const k={method:"POST",body:h,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},Fy)};try{let _=5,x,C=500;for(;l?x=await l(i,k):x=await o(i,k),!(x.status!==429||s===!0||(_-=1,_===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${C}ms delay...`),await gi(C),C*=2;const A=await x.text();x.ok?b(null,A):b(new Error(`${x.status} ${x.statusText}: ${A}`))}catch(_){_ instanceof Error&&b(_)}},{})}function Um(i){return(e,t)=>new Promise((n,s)=>{i.request(e,t,(r,o)=>{if(r){s(r);return}n(o)})})}function Dm(i){return e=>new Promise((t,n)=>{e.length===0&&t([]);const s=e.map(r=>i.request(r.methodName,r.args));i.request(s,(r,o)=>{if(r){n(r);return}t(o)})})}const Vm=Re(Rm),$m=Re(Am),zm=Re(Pm),Hm=Re(Om),Km=Re(Tm),Wm=Re(xm),Gm=Re(U()),qm=st(q({total:U(),circulating:U(),nonCirculating:U(),nonCirculatingAccounts:re(et)})),Zo=q({amount:X(),uiAmount:se(U()),decimals:U(),uiAmountString:he(X())}),jm=st(re(q({address:et,amount:X(),uiAmount:se(U()),decimals:U(),uiAmountString:he(X())}))),Zm=st(re(q({pubkey:et,account:q({executable:Tn(),owner:et,lamports:U(),data:Ma,rentEpoch:U()})}))),Yo=q({program:X(),parsed:er(),space:U()}),Ym=st(re(q({pubkey:et,account:q({executable:Tn(),owner:et,lamports:U(),data:Yo,rentEpoch:U()})}))),Xm=st(re(q({lamports:U(),address:et}))),kr=q({executable:Tn(),owner:et,lamports:U(),data:Ma,rentEpoch:U()}),Jm=q({pubkey:et,account:kr}),Qm=Tr(Wt([Pa(fe),Yo]),Wt([Lu,Yo]),i=>Array.isArray(i)?te(i,Ma):i),Xo=q({executable:Tn(),owner:et,lamports:U(),data:Qm,rentEpoch:U()}),ey=q({pubkey:et,account:Xo}),ty=q({state:Wt([Je("active"),Je("inactive"),Je("activating"),Je("deactivating")]),active:U(),inactive:U()}),ny=Re(re(q({signature:X(),slot:U(),err:Pi,memo:se(X()),blockTime:he(se(U()))}))),iy=Re(re(q({signature:X(),slot:U(),err:Pi,memo:se(X()),blockTime:he(se(U()))}))),ry=q({subscription:U(),result:Ts(kr)}),sy=q({pubkey:et,account:kr}),oy=q({subscription:U(),result:Ts(sy)}),ay=q({parent:U(),slot:U(),root:U()}),cy=q({subscription:U(),result:ay}),ly=Wt([q({type:Wt([Je("firstShredReceived"),Je("completed"),Je("optimisticConfirmation"),Je("root")]),slot:U(),timestamp:U()}),q({type:Je("createdBank"),parent:U(),slot:U(),timestamp:U()}),q({type:Je("frozen"),slot:U(),timestamp:U(),stats:q({numTransactionEntries:U(),numSuccessfulTransactions:U(),numFailedTransactions:U(),maxTransactionsPerEntry:U()})}),q({type:Je("dead"),slot:U(),timestamp:U(),err:X()})]),uy=q({subscription:U(),result:ly}),hy=q({subscription:U(),result:Ts(Wt([Im,Cm]))}),dy=q({subscription:U(),result:U()}),fy=q({pubkey:X(),gossip:se(X()),tpu:se(X()),rpc:se(X()),version:se(X())}),jc=q({votePubkey:X(),nodePubkey:X(),activatedStake:U(),epochVoteAccount:Tn(),epochCredits:re(Aa([U(),U(),U()])),commission:U(),lastVote:U(),rootSlot:se(U())}),py=Re(q({current:re(jc),delinquent:re(jc)})),gy=Wt([Je("processed"),Je("confirmed"),Je("finalized")]),my=q({slot:U(),confirmations:se(U()),err:Pi,confirmationStatus:he(gy)}),yy=st(re(se(my))),wy=Re(U()),Uu=q({accountKey:et,writableIndexes:re(U()),readonlyIndexes:re(U())}),Fa=q({signatures:re(X()),message:q({accountKeys:re(X()),header:q({numRequiredSignatures:U(),numReadonlySignedAccounts:U(),numReadonlyUnsignedAccounts:U()}),instructions:re(q({accounts:re(U()),data:X(),programIdIndex:U()})),recentBlockhash:X(),addressTableLookups:he(re(Uu))})}),Du=q({pubkey:et,signer:Tn(),writable:Tn(),source:he(Wt([Je("transaction"),Je("lookupTable")]))}),Vu=q({accountKeys:re(Du),signatures:re(X())}),$u=q({parsed:er(),program:X(),programId:et}),zu=q({accounts:re(et),data:X(),programId:et}),by=Wt([zu,$u]),vy=Wt([q({parsed:er(),program:X(),programId:X()}),q({accounts:re(X()),data:X(),programId:X()})]),Hu=Tr(by,vy,i=>"accounts"in i?te(i,zu):te(i,$u)),Ku=q({signatures:re(X()),message:q({accountKeys:re(Du),instructions:re(Hu),recentBlockhash:X(),addressTableLookups:he(se(re(Uu)))})}),os=q({accountIndex:U(),mint:X(),owner:he(X()),programId:he(X()),uiTokenAmount:Zo}),Wu=q({writable:re(et),readonly:re(et)}),xs=q({err:Pi,fee:U(),innerInstructions:he(se(re(q({index:U(),instructions:re(q({accounts:re(U()),data:X(),programIdIndex:U()}))})))),preBalances:re(U()),postBalances:re(U()),logMessages:he(se(re(X()))),preTokenBalances:he(se(re(os))),postTokenBalances:he(se(re(os))),loadedAddresses:he(Wu),computeUnitsConsumed:he(U())}),Ua=q({err:Pi,fee:U(),innerInstructions:he(se(re(q({index:U(),instructions:re(Hu)})))),preBalances:re(U()),postBalances:re(U()),logMessages:he(se(re(X()))),preTokenBalances:he(se(re(os))),postTokenBalances:he(se(re(os))),loadedAddresses:he(Wu),computeUnitsConsumed:he(U())}),tr=Wt([Je(0),Je("legacy")]),Ai=q({pubkey:X(),lamports:U(),postBalance:se(U()),rewardType:se(X()),commission:he(se(U()))}),Sy=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),transactions:re(q({transaction:Fa,meta:se(xs),version:he(tr)})),rewards:he(re(Ai)),blockTime:se(U()),blockHeight:se(U())}))),Ey=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),rewards:he(re(Ai)),blockTime:se(U()),blockHeight:se(U())}))),_y=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),transactions:re(q({transaction:Vu,meta:se(xs),version:he(tr)})),rewards:he(re(Ai)),blockTime:se(U()),blockHeight:se(U())}))),Ry=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),transactions:re(q({transaction:Ku,meta:se(Ua),version:he(tr)})),rewards:he(re(Ai)),blockTime:se(U()),blockHeight:se(U())}))),ky=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),transactions:re(q({transaction:Vu,meta:se(Ua),version:he(tr)})),rewards:he(re(Ai)),blockTime:se(U()),blockHeight:se(U())}))),Py=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),rewards:he(re(Ai)),blockTime:se(U()),blockHeight:se(U())}))),Ay=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),transactions:re(q({transaction:Fa,meta:se(xs)})),rewards:he(re(Ai)),blockTime:se(U())}))),Zc=Re(se(q({blockhash:X(),previousBlockhash:X(),parentSlot:U(),signatures:re(X()),blockTime:se(U())}))),Oo=Re(se(q({slot:U(),meta:se(xs),blockTime:he(se(U())),transaction:Fa,version:he(tr)}))),$r=Re(se(q({slot:U(),transaction:Ku,meta:se(Ua),blockTime:he(se(U())),version:he(tr)}))),Oy=st(q({blockhash:X(),lastValidBlockHeight:U()})),Ty=st(Tn()),xy=q({slot:U(),numTransactions:U(),numSlots:U(),samplePeriodSecs:U()}),Iy=Re(re(xy)),Cy=st(se(q({feeCalculator:q({lamportsPerSignature:U()})}))),Ny=Re(X()),By=Re(X()),Ly=q({err:Pi,logs:re(X()),signature:X()}),My=q({result:Ts(Ly),subscription:U()}),Fy={"solana-client":"js/1.0.0-maintenance"};class Gu{constructor(e,t){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async h=>{const{commitment:b,config:k}=Ke(h),_=this._buildArgs([],b,void 0,k),x=Kc(_);return p[x]=p[x]??(async()=>{try{const C=await this._rpcRequest("getBlockHeight",_),A=te(C,Re(U()));if("error"in A)throw new ue(A.error,"failed to get block height information");return A.result}finally{delete p[x]}})(),await p[x]}})();let n,s,r,o,a,l;t&&typeof t=="string"?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,n=t.wsEndpoint,s=t.httpHeaders,r=t.fetch,o=t.fetchMiddleware,a=t.disableRetryOnRateLimit,l=t.httpAgent),this._rpcEndpoint=Em(e),this._rpcWsEndpoint=n||Sm(e),this._rpcClient=Fm(e,s,r,o,a,l),this._rpcRequest=Um(this._rpcClient),this._rpcBatchRequest=Dm(this._rpcClient),this._rpcWebSocket=new ym(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgs([e.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",r),a=te(o,st(U()));if("error"in a)throw new ue(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+n)})}async getBlockTime(e){const t=await this._rpcRequest("getBlockTime",[e]),n=te(t,Re(se(U())));if("error"in n)throw new ue(n.error,`failed to get block time for slot ${e}`);return n.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),t=te(e,Re(U()));if("error"in t)throw new ue(t.error,"failed to get minimum ledger slot");return t.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),t=te(e,Gm);if("error"in t)throw new ue(t.error,"failed to get first available block");return t.result}async getSupply(e){let t={};typeof e=="string"?t={commitment:e}:e?t={...e,commitment:e&&e.commitment||this.commitment}:t={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[t]),s=te(n,qm);if("error"in s)throw new ue(s.error,"failed to get supply");return s.result}async getTokenSupply(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenSupply",n),r=te(s,st(Zo));if("error"in r)throw new ue(r.error,"failed to get token supply");return r.result}async getTokenAccountBalance(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenAccountBalance",n),r=te(s,st(Zo));if("error"in r)throw new ue(r.error,"failed to get token account balance");return r.result}async getTokenAccountsByOwner(e,t,n){const{commitment:s,config:r}=Ke(n);let o=[e.toBase58()];"mint"in t?o.push({mint:t.mint.toBase58()}):o.push({programId:t.programId.toBase58()});const a=this._buildArgs(o,s,"base64",r),l=await this._rpcRequest("getTokenAccountsByOwner",a),p=te(l,Zm);if("error"in p)throw new ue(p.error,`failed to get token accounts owned by account ${e.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(e,t,n){let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const r=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",r),a=te(o,Ym);if("error"in a)throw new ue(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},n=t.filter||t.commitment?[t]:[],s=await this._rpcRequest("getLargestAccounts",n),r=te(s,Xm);if("error"in r)throw new ue(r.error,"failed to get largest accounts");return r.result}async getTokenLargestAccounts(e,t){const n=this._buildArgs([e.toBase58()],t),s=await this._rpcRequest("getTokenLargestAccounts",n),r=te(s,jm);if("error"in r)throw new ue(r.error,"failed to get token largest accounts");return r.result}async getAccountInfoAndContext(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgs([e.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",r),a=te(o,st(se(kr)));if("error"in a)throw new ue(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",r),a=te(o,st(se(Xo)));if("error"in a)throw new ue(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(n){throw new Error("failed to get info about account "+e.toBase58()+": "+n)}}async getMultipleParsedAccounts(e,t){const{commitment:n,config:s}=Ke(t),r=e.map(p=>p.toBase58()),o=this._buildArgs([r],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),l=te(a,st(re(se(Xo))));if("error"in l)throw new ue(l.error,`failed to get info for accounts ${r}`);return l.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:n,config:s}=Ke(t),r=e.map(p=>p.toBase58()),o=this._buildArgs([r],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),l=te(a,st(re(se(kr))));if("error"in l)throw new ue(l.error,`failed to get info for accounts ${r}`);return l.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,n){const{commitment:s,config:r}=Ke(t),o=this._buildArgs([e.toBase58()],s,void 0,{...r,epoch:n??r?.epoch}),a=await this._rpcRequest("getStakeActivation",o),l=te(a,Re(ty));if("error"in l)throw new ue(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,t){const{commitment:n,config:s}=Ke(t),{encoding:r,...o}=s||{},a=this._buildArgs([e.toBase58()],n,r||"base64",{...o,...o.filters?{filters:Gc(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),p=re(Jm),h=o.withContext===!0?te(l,st(p)):te(l,Re(p));if("error"in h)throw new ue(h.error,`failed to get accounts owned by program ${e.toBase58()}`);return h.result}async getParsedProgramAccounts(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgs([e.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",r),a=te(o,Re(re(ey)));if("error"in a)throw new ue(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,t){let n;if(typeof e=="string")n=e;else{const r=e;if(r.abortSignal?.aborted)return Promise.reject(r.abortSignal.reason);n=r.signature}let s;try{s=Lt.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return Ce(s.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:n}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((t,n)=>{e!=null&&(e.aborted?n(e.reason):e.addEventListener("abort",()=>{n(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:t}){let n,s,r=!1;const o=new Promise((l,p)=>{try{n=this.onSignature(t,(b,k)=>{n=void 0;const _={context:k,value:b};l({__type:Ln.PROCESSED,response:_})},e);const h=new Promise(b=>{n==null?b():s=this._onSubscriptionStateChange(n,k=>{k==="subscribed"&&b()})});(async()=>{if(await h,r)return;const b=await this.getSignatureStatus(t);if(r||b==null)return;const{context:k,value:_}=b;if(_!=null)if(_?.err)p(_.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(_.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(_.confirmationStatus==="processed"||_.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}r=!0,l({__type:Ln.PROCESSED,response:{context:k,value:_}})}})()}catch(h){p(h)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:n,signature:s}}){let r=!1;const o=new Promise(b=>{const k=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let _=await k();if(!r){for(;_<=n;)if(await gi(1e3),r||(_=await k(),r))return;b({__type:Ln.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),p=this.getCancellationPromise(t);let h;try{const b=await Promise.race([p,l,o]);if(b.__type===Ln.PROCESSED)h=b.response;else throw new Ia(s)}finally{r=!0,a()}return h}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:n,nonceAccountPubkey:s,nonceValue:r,signature:o}}){let a=!1;const l=new Promise(_=>{let x=r,C=null;const A=async()=>{try{const{context:B,value:D}=await this.getNonceAndContext(s,{commitment:e,minContextSlot:n});return C=B.slot,D?.nonce}catch{return x}};(async()=>{if(x=await A(),!a)for(;;){if(r!==x){_({__type:Ln.NONCE_INVALID,slotInWhichNonceDidAdvance:C});return}if(await gi(2e3),a||(x=await A(),a))return}})()}),{abortConfirmation:p,confirmationPromise:h}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),b=this.getCancellationPromise(t);let k;try{const _=await Promise.race([b,h,l]);if(_.__type===Ln.PROCESSED)k=_.response;else{let x;for(;;){const C=await this.getSignatureStatus(o);if(C==null)break;if(C.context.slot<(_.slotInWhichNonceDidAdvance??n)){await gi(400);continue}x=C;break}if(x?.value){const C=e||"finalized",{confirmationStatus:A}=x.value;switch(C){case"processed":case"recent":if(A!=="processed"&&A!=="confirmed"&&A!=="finalized")throw new Mi(o);break;case"confirmed":case"single":case"singleGossip":if(A!=="confirmed"&&A!=="finalized")throw new Mi(o);break;case"finalized":case"max":case"root":if(A!=="finalized")throw new Mi(o);break;default:}k={context:x.context,value:{err:x.value.err}}}else throw new Mi(o)}}finally{a=!0,p()}return k}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let n;const s=new Promise(l=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>l({__type:Ln.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:r,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let a;try{const l=await Promise.race([o,s]);if(l.__type===Ln.PROCESSED)a=l.response;else throw new Ca(t,l.timeoutMs/1e3)}finally{clearTimeout(n),r()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),t=te(e,Re(re(fy)));if("error"in t)throw new ue(t.error,"failed to get cluster nodes");return t.result}async getVoteAccounts(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getVoteAccounts",t),s=te(n,py);if("error"in s)throw new ue(s.error,"failed to get vote accounts");return s.result}async getSlot(e){const{commitment:t,config:n}=Ke(e),s=this._buildArgs([],t,void 0,n),r=await this._rpcRequest("getSlot",s),o=te(r,Re(U()));if("error"in o)throw new ue(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:t,config:n}=Ke(e),s=this._buildArgs([],t,void 0,n),r=await this._rpcRequest("getSlotLeader",s),o=te(r,Re(X()));if("error"in o)throw new ue(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,t){const n=[e,t],s=await this._rpcRequest("getSlotLeaders",n),r=te(s,Re(re(et)));if("error"in r)throw new ue(r.error,"failed to get slot leaders");return r.result}async getSignatureStatus(e,t){const{context:n,value:s}=await this.getSignatureStatuses([e],t);Ce(s.length===1);const r=s[0];return{context:n,value:r}}async getSignatureStatuses(e,t){const n=[e];t&&n.push(t);const s=await this._rpcRequest("getSignatureStatuses",n),r=te(s,yy);if("error"in r)throw new ue(r.error,"failed to get signature status");return r.result}async getTransactionCount(e){const{commitment:t,config:n}=Ke(e),s=this._buildArgs([],t,void 0,n),r=await this._rpcRequest("getTransactionCount",s),o=te(r,Re(U()));if("error"in o)throw new ue(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),n=await this._rpcRequest("getInflationGovernor",t),s=te(n,Vm);if("error"in s)throw new ue(s.error,"failed to get inflation");return s.result}async getInflationReward(e,t,n){const{commitment:s,config:r}=Ke(n),o=this._buildArgs([e.map(p=>p.toBase58())],s,void 0,{...r,epoch:t??r?.epoch}),a=await this._rpcRequest("getInflationReward",o),l=te(a,km);if("error"in l)throw new ue(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),t=te(e,$m);if("error"in t)throw new ue(t.error,"failed to get inflation rate");return t.result}async getEpochInfo(e){const{commitment:t,config:n}=Ke(e),s=this._buildArgs([],t,void 0,n),r=await this._rpcRequest("getEpochInfo",s),o=te(r,Hm);if("error"in o)throw new ue(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),t=te(e,Km);if("error"in t)throw new ue(t.error,"failed to get epoch schedule");const n=t.result;return new Bu(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),t=te(e,Wm);if("error"in t)throw new ue(t.error,"failed to get leader schedule");return t.result}async getMinimumBalanceForRentExemption(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),r=te(s,wy);return"error"in r?(console.warn("Unable to fetch minimum balance for rent exemption"),0):r.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const t=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),n=te(t,Iy);if("error"in n)throw new ue(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(e,t){const n=this._buildArgs([e],t),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),r=te(s,Cy);if("error"in r)throw new ue(r.error,"failed to get fee calculator");const{context:o,value:a}=r.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,t){const n=Pe(e.serialize()).toString("base64"),s=this._buildArgs([n],t),r=await this._rpcRequest("getFeeForMessage",s),o=te(r,st(se(U())));if("error"in o)throw new ue(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map(o=>o.toBase58()),n=t?.length?[t]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),r=te(s,zm);if("error"in r)throw new ue(r.error,"failed to get recent prioritization fees");return r.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(t){throw new Error("failed to get recent blockhash: "+t)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:n}=Ke(e),s=this._buildArgs([],t,void 0,n),r=await this._rpcRequest("getLatestBlockhash",s),o=te(r,Oy);if("error"in o)throw new ue(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgs([e],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",r),a=te(o,Ty);if("error"in a)throw new ue(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),t=te(e,Re(Nm));if("error"in t)throw new ue(t.error,"failed to get version");return t.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),t=te(e,Re(X()));if("error"in t)throw new ue(t.error,"failed to get genesis hash");return t.result}async getBlock(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getBlock",r);try{switch(s?.transactionDetails){case"accounts":{const a=te(o,_y);if("error"in a)throw a.error;return a.result}case"none":{const a=te(o,Ey);if("error"in a)throw a.error;return a.result}default:{const a=te(o,Sy);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:p,meta:h,version:b})=>({meta:h,transaction:{...p,message:Ao(b,p.message)},version:b}))}:null}}}catch(a){throw new ue(a,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",r);try{switch(s?.transactionDetails){case"accounts":{const a=te(o,ky);if("error"in a)throw a.error;return a.result}case"none":{const a=te(o,Py);if("error"in a)throw a.error;return a.result}default:{const a=te(o,Ry);if("error"in a)throw a.error;return a.result}}}catch(a){throw new ue(a,"failed to get block")}}async getBlockProduction(e){let t,n;if(typeof e=="string")n=e;else if(e){const{commitment:a,...l}=e;n=a,t=l}const s=this._buildArgs([],n,"base64",t),r=await this._rpcRequest("getBlockProduction",s),o=te(r,Mm);if("error"in o)throw new ue(o.error,"failed to get block production information");return o.result}async getTransaction(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgsAtLeastConfirmed([e],n,void 0,s),o=await this._rpcRequest("getTransaction",r),a=te(o,Oo);if("error"in a)throw new ue(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:Ao(l.version,l.transaction.message)}}}async getParsedTransaction(e,t){const{commitment:n,config:s}=Ke(t),r=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",r),a=te(o,$r);if("error"in a)throw new ue(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,t){const{commitment:n,config:s}=Ke(t),r=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(r)).map(l=>{const p=te(l,$r);if("error"in p)throw new ue(p.error,"failed to get transactions");return p.result})}async getTransactions(e,t){const{commitment:n,config:s}=Ke(t),r=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],n,void 0,s)}));return(await this._rpcBatchRequest(r)).map(l=>{const p=te(l,Oo);if("error"in p)throw new ue(p.error,"failed to get transactions");const h=p.result;return h&&{...h,transaction:{...h.transaction,message:Ao(h.version,h.transaction.message)}}})}async getConfirmedBlock(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getBlock",n),r=te(s,Ay);if("error"in r)throw new ue(r.error,"failed to get confirmed block");const o=r.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:p})=>{const h=new wn(l.message);return{meta:p,transaction:{...l,message:h}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:p})=>({meta:p,transaction:Te.populate(l.message,l.signatures)}))}}async getBlocks(e,t,n){const s=this._buildArgsAtLeastConfirmed(t!==void 0?[e,t]:[e],n),r=await this._rpcRequest("getBlocks",s),o=te(r,Re(re(U())));if("error"in o)throw new ue(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),r=te(s,Zc);if("error"in r)throw new ue(r.error,"failed to get block");const o=r.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),r=te(s,Zc);if("error"in r)throw new ue(r.error,"failed to get confirmed block");const o=r.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t),s=await this._rpcRequest("getTransaction",n),r=te(s,Oo);if("error"in r)throw new ue(r.error,"failed to get transaction");const o=r.result;if(!o)return o;const a=new wn(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Te.populate(a,l)}}async getParsedConfirmedTransaction(e,t){const n=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),r=te(s,$r);if("error"in r)throw new ue(r.error,"failed to get confirmed transaction");return r.result}async getParsedConfirmedTransactions(e,t){const n=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],t,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=te(o,$r);if("error"in a)throw new ue(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,t,n){let s={},r=await this.getFirstAvailableBlock();for(;!("until"in s)&&(t--,!(t<=0||t<r));)try{const l=await this.getConfirmedBlockSignatures(t,"finalized");l.signatures.length>0&&(s.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const l=await this.getConfirmedBlockSignatures(n);l.signatures.length>0&&(s.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,s)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),r=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=te(r,ny);if("error"in o)throw new ue(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,t,n){const s=this._buildArgsAtLeastConfirmed([e.toBase58()],n,void 0,t),r=await this._rpcRequest("getSignaturesForAddress",s),o=te(r,iy);if("error"in o)throw new ue(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let r=null;return s!==null&&(r=new jo({key:e,state:jo.deserialize(s.data)})),{context:n,value:r}}async getNonceAndContext(e,t){const{context:n,value:s}=await this.getAccountInfoAndContext(e,t);let r=null;return s!==null&&(r=Os.fromAccountData(s.data)),{context:n,value:r}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+n)})}async requestAirdrop(e,t){const n=await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),s=te(n,Ny);if("error"in s)throw new ue(s.error,`airdrop to ${e.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await gi(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Mu;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,n=t?t.blockhash:null;for(let s=0;s<50;s++){const r=await this.getLatestBlockhash("finalized");if(n!==r.blockhash)return this._blockhashInfo={latestBlockhash:r,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},r;await gi(Iu/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:n}=Ke(e),s=this._buildArgs([],t,"base64",n),r=await this._rpcRequest("getStakeMinimumDelegation",s),o=te(r,st(U()));if("error"in o)throw new ue(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,t,n){if("message"in e){const C=e.serialize(),A=fe.from(C).toString("base64");if(Array.isArray(t)||n!==void 0)throw new Error("Invalid arguments");const B=t||{};B.encoding="base64","commitment"in B||(B.commitment=this.commitment),t&&typeof t=="object"&&"innerInstructions"in t&&(B.innerInstructions=t.innerInstructions);const D=[A,B],L=await this._rpcRequest("simulateTransaction",D),W=te(L,qc);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let s;if(e instanceof Te){let x=e;s=new Te,s.feePayer=x.feePayer,s.instructions=e.instructions,s.nonceInfo=x.nonceInfo,s.signatures=x.signatures}else s=Te.populate(e),s._message=s._json=void 0;if(t!==void 0&&!Array.isArray(t))throw new Error("Invalid arguments");const r=t;if(s.nonceInfo&&r)s.sign(...r);else{let x=this._disableBlockhashCaching;for(;;){const C=await this._blockhashWithExpiryBlockHeight(x);if(s.lastValidBlockHeight=C.lastValidBlockHeight,s.recentBlockhash=C.blockhash,!r)break;if(s.sign(...r),!s.signature)throw new Error("!signature");const A=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(A)&&!this._blockhashInfo.transactionSignatures.includes(A)){this._blockhashInfo.simulatedSignatures.push(A);break}else x=!0}}const o=s._compile(),a=o.serialize(),p=s._serialize(a).toString("base64"),h={encoding:"base64",commitment:this.commitment};if(n){const x=(Array.isArray(n)?n:o.nonProgramIds()).map(C=>C.toBase58());h.accounts={encoding:"base64",addresses:x}}r&&(h.sigVerify=!0),t&&typeof t=="object"&&"innerInstructions"in t&&(h.innerInstructions=t.innerInstructions);const b=[p,h],k=await this._rpcRequest("simulateTransaction",b),_=te(k,qc);if("error"in _){let x;if("data"in _.error&&(x=_.error.data.logs,x&&Array.isArray(x))){const C=`
    `,A=C+x.join(C);console.error(_.error.message,A)}throw new _r({action:"simulate",signature:"",transactionMessage:_.error.message,logs:x})}return _.result}async sendTransaction(e,t,n){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,t)}if(t===void 0||!Array.isArray(t))throw new Error("Invalid arguments");const s=t;if(e.nonceInfo)e.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...s),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const r=e.serialize();return await this.sendRawTransaction(r,n)}async sendRawTransaction(e,t){const n=Pe(e).toString("base64");return await this.sendEncodedTransaction(n,t)}async sendEncodedTransaction(e,t){const n={encoding:"base64"},s=t&&t.skipPreflight,r=s===!0?"processed":t&&t.preflightCommitment||this.commitment;t&&t.maxRetries!=null&&(n.maxRetries=t.maxRetries),t&&t.minContextSlot!=null&&(n.minContextSlot=t.minContextSlot),s&&(n.skipPreflight=s),r&&(n.preflightCommitment=r);const o=[e,n],a=await this._rpcRequest("sendTransaction",o),l=te(a,By);if("error"in l){let p;throw"data"in l.error&&(p=l.error.data.logs),new _r({action:s?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:p})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([t,n])=>{this._setSubscription(t,{...n,state:"pending"})})}_setSubscription(e,t){const n=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,n!==t.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(r=>{try{r(t.state)}catch{}})}}_onSubscriptionStateChange(e,t){const n=this._subscriptionHashByClientSubscriptionId[e];if(n==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[n]||=new Set;return s.add(t),()=>{s.delete(t),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:r,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,r);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:r,error:a}),!t())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:r,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(r))this._subscriptionsAutoDisposedByRpc.delete(r);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[r])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!t())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,t){const n=this._subscriptionCallbacksByServerSubscriptionId[e];n!==void 0&&n.forEach(s=>{try{s(...t)}catch(r){console.error(r)}})}_wsOnAccountNotification(e){const{result:t,subscription:n}=te(e,ry);this._handleServerNotification(n,[t.value,t.context])}_makeSubscription(e,t){const n=this._nextClientSubscriptionId++,s=Kc([e.method,t]),r=this._subscriptionsByHash[s];return r===void 0?this._subscriptionsByHash[s]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:r.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];Ce(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(e,t,n){const{commitment:s,config:r}=Ke(n),o=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",r);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:n}=te(e,oy);this._handleServerNotification(n,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,n,s){const{commitment:r,config:o}=Ke(n),a=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",o||(s?{filters:Gc(s)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,n){const s=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:n}=te(e,My);this._handleServerNotification(n,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:n}=te(e,cy);this._handleServerNotification(n,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:n}=te(e,uy);this._handleServerNotification(n,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,n,s){const r=t||this._commitment;if(r||n||s){let o={};n&&(o.encoding=n),r&&(o.commitment=r),s&&(o=Object.assign(o,s)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,t,n,s){const r=t||this._commitment;if(r&&!["confirmed","finalized"].includes(r))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,s)}_wsOnSignatureNotification(e){const{result:t,subscription:n}=te(e,hy);t.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,t.value==="receivedSignature"?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,n){const s=this._buildArgs([e],n||this._commitment||"finalized"),r=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){t(o.result,a);try{this.removeSignatureListener(r)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return r}onSignatureWithOptions(e,t,n){const{commitment:s,...r}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([e],s,void 0,r),a=this._makeSubscription({callback:(l,p)=>{t(l,p);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:n}=te(e,dy);this._handleServerNotification(n,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class vi{constructor(e){this._keypair=void 0,this._keypair=e??Vc()}static generate(){return new vi(Vc())}static fromSecretKey(e,t){if(e.byteLength!==64)throw new Error("bad secret key size");const n=e.slice(32,64);if(!t||!t.skipValidation){const s=e.slice(0,32),r=ss(s);for(let o=0;o<32;o++)if(n[o]!==r[o])throw new Error("provided secretKey is invalid")}return new vi({publicKey:n,secretKey:e})}static fromSeed(e){const t=ss(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),new vi({publicKey:t,secretKey:n})}get publicKey(){return new H(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Dn=Object.freeze({CreateLookupTable:{index:0,layout:le([ce("instruction"),qi("recentSlot"),Ae("bumpSeed")])},FreezeLookupTable:{index:1,layout:le([ce("instruction")])},ExtendLookupTable:{index:2,layout:le([ce("instruction"),qi(),Mt(Oe(),ii(ce(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:le([ce("instruction")])},CloseLookupTable:{index:4,layout:le([ce("instruction")])}});class Uy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[r,o]of Object.entries(Dn))if(o.index==n){s=r;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);const{recentSlot:t}=Le(Dn.CreateLookupTable,e.data);return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}static decodeExtendLookupTable(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error(`invalid instruction; found ${e.keys.length} keys, expected at least 2`);const{addresses:t}=Le(Dn.ExtendLookupTable,e.data);return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map(n=>new H(n))}}static decodeCloseLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}static decodeFreezeLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static decodeDeactivateLookupTable(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(Da.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}class Da{constructor(){}static createLookupTable(e){const[t,n]=H.findProgramAddressSync([e.authority.toBuffer(),lu().encode(e.recentSlot)],this.programId),s=Dn.CreateLookupTable,r=Ie(s,{recentSlot:BigInt(e.recentSlot),bumpSeed:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Rt.programId,isSigner:!1,isWritable:!1}];return[new Ne({programId:this.programId,keys:o,data:r}),t]}static freezeLookupTable(e){const t=Dn.FreezeLookupTable,n=Ie(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ne({programId:this.programId,keys:s,data:n})}static extendLookupTable(e){const t=Dn.ExtendLookupTable,n=Ie(t,{addresses:e.addresses.map(r=>r.toBytes())}),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&s.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Rt.programId,isSigner:!1,isWritable:!1}),new Ne({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(e){const t=Dn.DeactivateLookupTable,n=Ie(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new Ne({programId:this.programId,keys:s,data:n})}static closeLookupTable(e){const t=Dn.CloseLookupTable,n=Ie(t),s=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new Ne({programId:this.programId,keys:s,data:n})}}Da.programId=new H("AddressLookupTab1e1111111111111111111111111");class Dy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=Ae("instruction").decode(e.data);let s;for(const[r,o]of Object.entries(kn))if(o.index==n){s=r;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(e){this.checkProgramId(e.programId);const{units:t,additionalFee:n}=Le(kn.RequestUnits,e.data);return{units:t,additionalFee:n}}static decodeRequestHeapFrame(e){this.checkProgramId(e.programId);const{bytes:t}=Le(kn.RequestHeapFrame,e.data);return{bytes:t}}static decodeSetComputeUnitLimit(e){this.checkProgramId(e.programId);const{units:t}=Le(kn.SetComputeUnitLimit,e.data);return{units:t}}static decodeSetComputeUnitPrice(e){this.checkProgramId(e.programId);const{microLamports:t}=Le(kn.SetComputeUnitPrice,e.data);return{microLamports:t}}static checkProgramId(e){if(!e.equals(Kn.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const kn=Object.freeze({RequestUnits:{index:0,layout:le([Ae("instruction"),ce("units"),ce("additionalFee")])},RequestHeapFrame:{index:1,layout:le([Ae("instruction"),ce("bytes")])},SetComputeUnitLimit:{index:2,layout:le([Ae("instruction"),ce("units")])},SetComputeUnitPrice:{index:3,layout:le([Ae("instruction"),qi("microLamports")])}});class Kn{constructor(){}static requestUnits(e){const t=kn.RequestUnits,n=Ie(t,e);return new Ne({keys:[],programId:this.programId,data:n})}static requestHeapFrame(e){const t=kn.RequestHeapFrame,n=Ie(t,e);return new Ne({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(e){const t=kn.SetComputeUnitLimit,n=Ie(t,e);return new Ne({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(e){const t=kn.SetComputeUnitPrice,n=Ie(t,{microLamports:BigInt(e.microLamports)});return new Ne({keys:[],programId:this.programId,data:n})}}Kn.programId=new H("ComputeBudget111111111111111111111111111111");const Yc=64,Xc=32,Jc=64,Qc=le([Ae("numSignatures"),Ae("padding"),an("signatureOffset"),an("signatureInstructionIndex"),an("publicKeyOffset"),an("publicKeyInstructionIndex"),an("messageDataOffset"),an("messageDataSize"),an("messageInstructionIndex")]);class Is{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,instructionIndex:r}=e;Ce(t.length===Xc,`Public Key must be ${Xc} bytes but received ${t.length} bytes`),Ce(s.length===Jc,`Signature must be ${Jc} bytes but received ${s.length} bytes`);const o=Qc.span,a=o+t.length,l=a+s.length,p=1,h=fe.alloc(l+n.length),b=r??65535;return Qc.encode({numSignatures:p,padding:0,signatureOffset:a,signatureInstructionIndex:b,publicKeyOffset:o,publicKeyInstructionIndex:b,messageDataOffset:l,messageDataSize:n.length,messageInstructionIndex:b},h),h.fill(t,o),h.fill(s,a),h.fill(n,l),new Ne({keys:[],programId:Is.programId,data:h})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Ce(t.length===Yc,`Private key must be ${Yc} bytes but received ${t.length} bytes`);try{const r=vi.fromSecretKey(t),o=r.publicKey.toBytes(),a=Ta(n,r.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:s})}catch(r){throw new Error(`Error creating instruction; ${r}`)}}}Is.programId=new H("Ed25519SigVerify111111111111111111111111111");const Vy=(i,e)=>{const t=ks.sign(i,e);return[t.toCompactRawBytes(),t.recovery]};ks.utils.isValidPrivateKey;const $y=ks.getPublicKey,el=32,To=20,tl=64,zy=11,xo=le([Ae("numSignatures"),an("signatureOffset"),Ae("signatureInstructionIndex"),an("ethAddressOffset"),Ae("ethAddressInstructionIndex"),an("messageDataOffset"),an("messageDataSize"),Ae("messageInstructionIndex"),ze(20,"ethAddress"),ze(64,"signature"),Ae("recoveryId")]);class Di{constructor(){}static publicKeyToEthAddress(e){Ce(e.length===tl,`Public key must be ${tl} bytes but received ${e.length} bytes`);try{return fe.from(Lc(Pe(e))).slice(-To)}catch(t){throw new Error(`Error constructing Ethereum address: ${t}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:n,signature:s,recoveryId:r,instructionIndex:o}=e;return Di.createInstructionWithEthAddress({ethAddress:Di.publicKeyToEthAddress(t),message:n,signature:s,recoveryId:r,instructionIndex:o})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:n,signature:s,recoveryId:r,instructionIndex:o=0}=e;let a;typeof t=="string"?t.startsWith("0x")?a=fe.from(t.substr(2),"hex"):a=fe.from(t,"hex"):a=t,Ce(a.length===To,`Address must be ${To} bytes but received ${a.length} bytes`);const l=1+zy,p=l,h=l+a.length,b=h+s.length+1,k=1,_=fe.alloc(xo.span+n.length);return xo.encode({numSignatures:k,signatureOffset:h,signatureInstructionIndex:o,ethAddressOffset:p,ethAddressInstructionIndex:o,messageDataOffset:b,messageDataSize:n.length,messageInstructionIndex:o,signature:Pe(s),ethAddress:Pe(a),recoveryId:r},_),_.fill(Pe(n),xo.span),new Ne({keys:[],programId:Di.programId,data:_})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:n,instructionIndex:s}=e;Ce(t.length===el,`Private key must be ${el} bytes but received ${t.length} bytes`);try{const r=Pe(t),o=$y(r,!1).slice(1),a=fe.from(Lc(Pe(n))),[l,p]=Vy(a,r);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:l,recoveryId:p,instructionIndex:s})}catch(r){throw new Error(`Error creating instruction; ${r}`)}}}Di.programId=new H("KeccakSecp256k11111111111111111111111111111");var qu;const ju=new H("StakeConfig11111111111111111111111111111111");class Zu{constructor(e,t){this.staker=void 0,this.withdrawer=void 0,this.staker=e,this.withdrawer=t}}class xr{constructor(e,t,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=n}}qu=xr;xr.default=new qu(0,0,H.default);class Hy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[r,o]of Object.entries(Tt))if(o.index==n){s=r;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{authorized:t,lockup:n}=Le(Tt.Initialize,e.data);return{stakePubkey:e.keys[0].pubkey,authorized:new Zu(new H(t.staker),new H(t.withdrawer)),lockup:new xr(n.unixTimestamp,n.epoch,new H(n.custodian))}}static decodeDelegate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Le(Tt.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,stakeAuthorizationType:n}=Le(Tt.Authorize,e.data),s={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new H(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(s.custodianPubkey=e.keys[3].pubkey),s}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);const{newAuthorized:t,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:r}=Le(Tt.AuthorizeWithSeed,e.data),o={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:s,authorityOwner:new H(r),newAuthorizedPubkey:new H(t),stakeAuthorizationType:{index:n}};return e.keys.length>3&&(o.custodianPubkey=e.keys[3].pubkey),o}static decodeSplit(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Le(Tt.Split,e.data);return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}static decodeMerge(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Tt.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);const{lamports:t}=Le(Tt.Withdraw,e.data),n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}static decodeDeactivate(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Le(Tt.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}static checkProgramId(e){if(!e.equals(Cs.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Tt=Object.freeze({Initialize:{index:0,layout:le([ce("instruction"),jg(),Zg()])},Authorize:{index:1,layout:le([ce("instruction"),Oe("newAuthorized"),ce("stakeAuthorizationType")])},Delegate:{index:2,layout:le([ce("instruction")])},Split:{index:3,layout:le([ce("instruction"),Qt("lamports")])},Withdraw:{index:4,layout:le([ce("instruction"),Qt("lamports")])},Deactivate:{index:5,layout:le([ce("instruction")])},Merge:{index:7,layout:le([ce("instruction")])},AuthorizeWithSeed:{index:8,layout:le([ce("instruction"),Oe("newAuthorized"),ce("stakeAuthorizationType"),mi("authoritySeed"),Oe("authorityOwner")])}}),Ky=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Cs{constructor(){}static initialize(e){const{stakePubkey:t,authorized:n,lockup:s}=e,r=s||xr.default,o=Tt.Initialize,a=Ie(o,{authorized:{staker:Pe(n.staker.toBuffer()),withdrawer:Pe(n.withdrawer.toBuffer())},lockup:{unixTimestamp:r.unixTimestamp,epoch:r.epoch,custodian:Pe(r.custodian.toBuffer())}}),l={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Gi,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Ne(l)}static createAccountWithSeed(e){const t=new Te;t.add(Rt.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:r}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:r}))}static createAccount(e){const t=new Te;t.add(Rt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:r}=e;return t.add(this.initialize({stakePubkey:n,authorized:s,lockup:r}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:n,votePubkey:s}=e,r=Tt.Delegate,o=Ie(r);return new Te().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:Wr,isSigner:!1,isWritable:!1},{pubkey:ju,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(e){const{stakePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:r,custodianPubkey:o}=e,a=Tt.Authorize,l=Ie(a,{newAuthorized:Pe(s.toBuffer()),stakeAuthorizationType:r.index}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:En,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new Te().add({keys:p,programId:this.programId,data:l})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:n,authoritySeed:s,authorityOwner:r,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:l}=e,p=Tt.AuthorizeWithSeed,h=Ie(p,{newAuthorized:Pe(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:Pe(r.toBuffer())}),b=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:En,isSigner:!1,isWritable:!1}];return l&&b.push({pubkey:l,isSigner:!0,isWritable:!1}),new Te().add({keys:b,programId:this.programId,data:h})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:n,splitStakePubkey:s,lamports:r}=e,o=Tt.Split,a=Ie(o,{lamports:r});return new Ne({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(e,t){const n=new Te;return n.add(Rt.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),n.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:r,basePubkey:o,seed:a,lamports:l}=e,p=new Te;return p.add(Rt.allocate({accountPubkey:r,basePubkey:o,seed:a,space:this.space,programId:this.programId})),t&&t>0&&p.add(Rt.transfer({fromPubkey:e.authorizedPubkey,toPubkey:r,lamports:t})),p.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:r,lamports:l}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:n,authorizedPubkey:s}=e,r=Tt.Merge,o=Ie(r);return new Te().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:Wr,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:n,toPubkey:s,lamports:r,custodianPubkey:o}=e,a=Tt.Withdraw,l=Ie(a,{lamports:r}),p=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:Wr,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new Te().add({keys:p,programId:this.programId,data:l})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:n}=e,s=Tt.Deactivate,r=Ie(s);return new Te().add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}}Cs.programId=new H("Stake11111111111111111111111111111111111111");Cs.space=200;class Yu{constructor(e,t,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=e,this.authorizedVoter=t,this.authorizedWithdrawer=n,this.commission=s}}class Wy{constructor(){}static decodeInstructionType(e){this.checkProgramId(e.programId);const n=ce("instruction").decode(e.data);let s;for(const[r,o]of Object.entries(Pn))if(o.index==n){s=r;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);const{voteInit:t}=Le(Pn.InitializeAccount,e.data);return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new Yu(new H(t.nodePubkey),new H(t.authorizedVoter),new H(t.authorizedWithdrawer),t.commission)}}static decodeAuthorize(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{newAuthorized:t,voteAuthorizationType:n}=Le(Pn.Authorize,e.data);return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new H(t),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:t,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:r}}=Le(Pn.AuthorizeWithSeed,e.data);return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new H(t),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new H(s),voteAuthorizationType:{index:r},votePubkey:e.keys[0].pubkey}}static decodeWithdraw(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);const{lamports:t}=Le(Pn.Withdraw,e.data);return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}static checkProgramId(e){if(!e.equals(nr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(e,t){if(e.length<t)throw new Error(`invalid instruction; found ${e.length} keys, expected at least ${t}`)}}const Pn=Object.freeze({InitializeAccount:{index:0,layout:le([ce("instruction"),Yg()])},Authorize:{index:1,layout:le([ce("instruction"),Oe("newAuthorized"),ce("voteAuthorizationType")])},Withdraw:{index:3,layout:le([ce("instruction"),Qt("lamports")])},UpdateValidatorIdentity:{index:4,layout:le([ce("instruction")])},AuthorizeWithSeed:{index:10,layout:le([ce("instruction"),Xg()])}}),Gy=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class nr{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:n,voteInit:s}=e,r=Pn.InitializeAccount,o=Ie(r,{voteInit:{nodePubkey:Pe(s.nodePubkey.toBuffer()),authorizedVoter:Pe(s.authorizedVoter.toBuffer()),authorizedWithdrawer:Pe(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:Gi,isSigner:!1,isWritable:!1},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ne(a)}static createAccount(e){const t=new Te;return t.add(Rt.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:r}=e,o=Pn.Authorize,a=Ie(o,{newAuthorized:Pe(s.toBuffer()),voteAuthorizationType:r.index}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Te().add({keys:l,programId:this.programId,data:a})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:r,voteAuthorizationType:o,votePubkey:a}=e,l=Pn.AuthorizeWithSeed,p=Ie(l,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Pe(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:Pe(r.toBuffer()),voteAuthorizationType:o.index}}),h=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:En,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return new Te().add({keys:h,programId:this.programId,data:p})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:r}=e,o=Pn.Withdraw,a=Ie(o,{lamports:s}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new Te().add({keys:l,programId:this.programId,data:a})}static safeWithdraw(e,t,n){if(e.lamports>t-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return nr.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:n,nodePubkey:s}=e,r=Pn.UpdateValidatorIdentity,o=Ie(r),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new Te().add({keys:a,programId:this.programId,data:o})}}nr.programId=new H("Vote111111111111111111111111111111111111111");nr.space=3762;const Xu=new H("Va1idator1nfo111111111111111111111111111111"),qy=q({name:X(),website:he(X()),details:he(X()),iconUrl:he(X()),keybaseUsername:he(X())});class Va{constructor(e,t){this.key=void 0,this.info=void 0,this.key=e,this.info=t}static fromConfigData(e){let t=[...e];if(qt(t)!==2)return null;const s=[];for(let r=0;r<2;r++){const o=new H(jt(t,0,On)),a=Rn(t)===1;s.push({publicKey:o,isSigner:a})}if(s[0].publicKey.equals(Xu)&&s[1].isSigner){const r=mi().decode(fe.from(t)),o=JSON.parse(r);return uu(o,qy),new Va(s[1].publicKey,o)}return null}}const jy=new H("Vote111111111111111111111111111111111111111"),Zy=le([Oe("nodePubkey"),Oe("authorizedWithdrawer"),Ae("commission"),Ct(),Mt(le([Ct("slot"),ce("confirmationCount")]),ii(ce(),-8),"votes"),Ae("rootSlotValid"),Ct("rootSlot"),Ct(),Mt(le([Ct("epoch"),Oe("authorizedVoter")]),ii(ce(),-8),"authorizedVoters"),le([Mt(le([Oe("authorizedPubkey"),Ct("epochOfLastAuthorizedSwitch"),Ct("targetEpoch")]),32,"buf"),Ct("idx"),Ae("isEmpty")],"priorVoters"),Ct(),Mt(le([Ct("epoch"),Ct("credits"),Ct("prevCredits")]),ii(ce(),-8),"epochCredits"),le([Ct("slot"),Ct("timestamp")],"lastTimestamp")]);class $a{constructor(e){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=e.nodePubkey,this.authorizedWithdrawer=e.authorizedWithdrawer,this.commission=e.commission,this.rootSlot=e.rootSlot,this.votes=e.votes,this.authorizedVoters=e.authorizedVoters,this.priorVoters=e.priorVoters,this.epochCredits=e.epochCredits,this.lastTimestamp=e.lastTimestamp}static fromAccountData(e){const n=Zy.decode(Pe(e),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new $a({nodePubkey:new H(n.nodePubkey),authorizedWithdrawer:new H(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(Yy),priorVoters:Xy(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Yy({authorizedVoter:i,epoch:e}){return{epoch:e,authorizedVoter:new H(i)}}function nl({authorizedPubkey:i,epochOfLastAuthorizedSwitch:e,targetEpoch:t}){return{authorizedPubkey:new H(i),epochOfLastAuthorizedSwitch:e,targetEpoch:t}}function Xy({buf:i,idx:e,isEmpty:t}){return t?[]:[...i.slice(e+1).map(nl),...i.slice(0,e).map(nl)]}const il={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Jy(i,e){const t=e===!1?"http":"https";if(!i)return il[t].devnet;const n=il[t][i];if(!n)throw new Error(`Unknown ${t} cluster: ${i}`);return n}async function Qy(i,e,t,n){let s,r;t&&Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")||t&&Object.prototype.hasOwnProperty.call(t,"nonceValue")?(s=t,r=n):r=t;const o=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,minContextSlot:r.minContextSlot},a=await i.sendRawTransaction(e,o),l=r&&r.commitment,h=(await(s?i.confirmTransaction(s,l):i.confirmTransaction(a,l))).value;if(h.err)throw a!=null?new _r({action:o?.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(h)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(h)})`);return a}const e0=1e9,t0=Object.freeze(Object.defineProperty({__proto__:null,Account:Wg,AddressLookupTableAccount:jo,AddressLookupTableInstruction:Uy,AddressLookupTableProgram:Da,Authorized:Zu,BLOCKHASH_CACHE_TIMEOUT_MS:Mu,BPF_LOADER_DEPRECATED_PROGRAM_ID:Gg,BPF_LOADER_PROGRAM_ID:um,BpfLoader:hm,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:kn,ComputeBudgetInstruction:Dy,ComputeBudgetProgram:Kn,Connection:Gu,Ed25519Program:Is,Enum:Hg,EpochSchedule:Bu,FeeCalculatorLayout:Cu,Keypair:vi,LAMPORTS_PER_SOL:e0,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Dn,Loader:Ei,Lockup:xr,MAX_SEED_LENGTH:Ou,Message:wn,MessageAccountKeys:Er,MessageV0:Si,NONCE_ACCOUNT_LENGTH:qo,NonceAccount:Os,PACKET_DATA_SIZE:ri,PUBLIC_KEY_LENGTH:On,PublicKey:H,SIGNATURE_LENGTH_IN_BYTES:Sr,SOLANA_SCHEMA:dr,STAKE_CONFIG_ID:ju,STAKE_INSTRUCTION_LAYOUTS:Tt,SYSTEM_INSTRUCTION_LAYOUTS:We,SYSVAR_CLOCK_PUBKEY:En,SYSVAR_EPOCH_SCHEDULE_PUBKEY:nm,SYSVAR_INSTRUCTIONS_PUBKEY:im,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Kr,SYSVAR_RENT_PUBKEY:Gi,SYSVAR_REWARDS_PUBKEY:rm,SYSVAR_SLOT_HASHES_PUBKEY:sm,SYSVAR_SLOT_HISTORY_PUBKEY:om,SYSVAR_STAKE_HISTORY_PUBKEY:Wr,Secp256k1Program:Di,SendTransactionError:_r,SolanaJSONRPCError:ue,SolanaJSONRPCErrorCode:am,StakeAuthorizationLayout:Ky,StakeInstruction:Hy,StakeProgram:Cs,Struct:xa,SystemInstruction:cm,SystemProgram:Rt,Transaction:Te,TransactionExpiredBlockheightExceededError:Ia,TransactionExpiredNonceInvalidError:Mi,TransactionExpiredTimeoutError:Ca,TransactionInstruction:Ne,TransactionMessage:Ba,TransactionStatus:Ln,VALIDATOR_INFO_KEY:Xu,VERSION_PREFIX_MASK:Ps,VOTE_PROGRAM_ID:jy,ValidatorInfo:Va,VersionedMessage:Na,VersionedTransaction:La,VoteAccount:$a,VoteAuthorizationLayout:Gy,VoteInit:Yu,VoteInstruction:Wy,VoteProgram:nr,clusterApiUrl:Jy,sendAndConfirmRawTransaction:Qy,sendAndConfirmTransaction:Rr},Symbol.toStringTag,{value:"Module"})),hn=new H("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new H("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const ir=new H("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new H("So11111111111111111111111111111111111111112");new H("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const za=i=>{const e=i.decode.bind(i),t=i.encode.bind(i);return{decode:e,encode:t}};var Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});function n0(i){{const e=ke.from(i);e.reverse();const t=e.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}var i0=Ir.toBigIntLE=n0;function r0(i){{const e=i.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}Ir.toBigIntBE=r0;function s0(i,e){{const t=i.toString(16),n=ke.from(t.padStart(e*2,"0").slice(0,e*2),"hex");return n.reverse(),n}}var o0=Ir.toBufferLE=s0;function a0(i,e){{const t=i.toString(16);return ke.from(t.padStart(e*2,"0").slice(0,e*2),"hex")}}Ir.toBufferBE=a0;const c0=i=>e=>{const t=ze(i,e),{encode:n,decode:s}=za(t),r=t;return r.decode=(o,a)=>{const l=s(o,a);return i0(ke.from(l))},r.encode=(o,a,l)=>{const p=o0(o,i);return n(p,a,l)},r},fr=c0(8),Ju=i=>{const e=Ae(i),{encode:t,decode:n}=za(e),s=e;return s.decode=(r,o)=>!!n(r,o),s.encode=(r,o,a)=>{const l=Number(r);return t(l,o,a)},s},Nt=i=>{const e=ze(32,i),{encode:t,decode:n}=za(e),s=e;return s.decode=(r,o)=>{const a=n(r,o);return new H(a)},s.encode=(r,o,a)=>{const l=r.toBuffer();return t(l,o,a)},s};class Oi extends Error{constructor(e){super(e)}}class Qu extends Oi{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class l0 extends Oi{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class eh extends Oi{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class rl extends Oi{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class u0 extends Oi{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class h0 extends Oi{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class d0 extends Oi{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var Jo;(function(i){i[i.InitializeMint=0]="InitializeMint",i[i.InitializeAccount=1]="InitializeAccount",i[i.InitializeMultisig=2]="InitializeMultisig",i[i.Transfer=3]="Transfer",i[i.Approve=4]="Approve",i[i.Revoke=5]="Revoke",i[i.SetAuthority=6]="SetAuthority",i[i.MintTo=7]="MintTo",i[i.Burn=8]="Burn",i[i.CloseAccount=9]="CloseAccount",i[i.FreezeAccount=10]="FreezeAccount",i[i.ThawAccount=11]="ThawAccount",i[i.TransferChecked=12]="TransferChecked",i[i.ApproveChecked=13]="ApproveChecked",i[i.MintToChecked=14]="MintToChecked",i[i.BurnChecked=15]="BurnChecked",i[i.InitializeAccount2=16]="InitializeAccount2",i[i.SyncNative=17]="SyncNative",i[i.InitializeAccount3=18]="InitializeAccount3",i[i.InitializeMultisig2=19]="InitializeMultisig2",i[i.InitializeMint2=20]="InitializeMint2",i[i.GetAccountDataSize=21]="GetAccountDataSize",i[i.InitializeImmutableOwner=22]="InitializeImmutableOwner",i[i.AmountToUiAmount=23]="AmountToUiAmount",i[i.UiAmountToAmount=24]="UiAmountToAmount",i[i.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",i[i.TransferFeeExtension=26]="TransferFeeExtension",i[i.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",i[i.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",i[i.Reallocate=29]="Reallocate",i[i.MemoTransferExtension=30]="MemoTransferExtension",i[i.CreateNativeMint=31]="CreateNativeMint",i[i.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",i[i.InterestBearingMintExtension=33]="InterestBearingMintExtension",i[i.CpiGuardExtension=34]="CpiGuardExtension",i[i.InitializePermanentDelegate=35]="InitializePermanentDelegate",i[i.TransferHookExtension=36]="TransferHookExtension",i[i.MetadataPointerExtension=39]="MetadataPointerExtension",i[i.GroupPointerExtension=40]="GroupPointerExtension",i[i.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",i[i.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",i[i.PausableExtension=44]="PausableExtension"})(Jo||(Jo={}));var Qo;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Mint=1]="Mint",i[i.Account=2]="Account"})(Qo||(Qo={}));const f0=1,p0=le([Ae("m"),Ae("n"),Ju("isInitialized"),Nt("signer1"),Nt("signer2"),Nt("signer3"),Nt("signer4"),Nt("signer5"),Nt("signer6"),Nt("signer7"),Nt("signer8"),Nt("signer9"),Nt("signer10"),Nt("signer11")]),g0=p0.span;var as;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initialized=1]="Initialized",i[i.Frozen=2]="Frozen"})(as||(as={}));const th=le([Nt("mint"),Nt("owner"),fr("amount"),ce("delegateOption"),Nt("delegate"),Ae("state"),ce("isNativeOption"),fr("isNative"),fr("delegatedAmount"),ce("closeAuthorityOption"),Nt("closeAuthority")]),cr=th.span;async function sl(i,e,t,n=hn){const s=await i.getAccountInfo(e,t);return m0(e,s,n)}function m0(i,e,t=hn){if(!e)throw new Qu;if(!e.owner.equals(t))throw new eh;if(e.data.length<cr)throw new rl;const n=th.decode(e.data.slice(0,cr));let s=ke.alloc(0);if(e.data.length>cr){if(e.data.length===g0)throw new rl;if(e.data[cr]!=Qo.Account)throw new l0;s=e.data.slice(cr+f0)}return{address:i,mint:n.mint,owner:n.owner,amount:n.amount,delegate:n.delegateOption?n.delegate:null,delegatedAmount:n.delegatedAmount,isInitialized:n.state!==as.Uninitialized,isFrozen:n.state===as.Frozen,isNative:!!n.isNativeOption,rentExemptReserve:n.isNativeOption?n.isNative:null,closeAuthority:n.closeAuthorityOption?n.closeAuthority:null,tlvData:s}}function y0(i,e){return i instanceof H?[i,e]:[i.publicKey,[i]]}function w0(i,e,t){if(t.length){i.push({pubkey:e,isSigner:!1,isWritable:!1});for(const n of t)i.push({pubkey:n instanceof H?n:n.publicKey,isSigner:!0,isWritable:!1})}else i.push({pubkey:e,isSigner:!0,isWritable:!1});return i}const b0=le([ce("mintAuthorityOption"),Nt("mintAuthority"),fr("supply"),Ae("decimals"),Ju("isInitialized"),ce("freezeAuthorityOption"),Nt("freezeAuthority")]);b0.span;function v0(i,e,t=!1,n=hn,s=ir){if(!t&&!H.isOnCurve(e.toBuffer()))throw new d0;const[r]=H.findProgramAddressSync([e.toBuffer(),n.toBuffer(),i.toBuffer()],s);return r}function S0(i,e,t,n,s=hn,r=ir){return E0(i,e,t,n,ke.alloc(0),s,r)}function E0(i,e,t,n,s,r=hn,o=ir){const a=[{pubkey:i,isSigner:!0,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:Rt.programId,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1}];return new Ne({keys:a,programId:o,data:s})}async function nh(i,e,t,n,s=!1,r,o,a=hn,l=ir){const p=v0(t,n,s,a,l);let h;try{h=await sl(i,p,r,a)}catch(b){if(b instanceof Qu||b instanceof eh){try{const k=new Te().add(S0(e.publicKey,p,n,t,a,l));await Rr(i,k,[e],o)}catch{}h=await sl(i,p,r,a)}else throw b}if(!h.mint.equals(t))throw new u0;if(!h.owner.equals(n))throw new h0;return h}const ol=le([Ae("instruction"),fr("amount")]);function _0(i,e,t,n,s=[],r=hn){const o=w0([{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!0}],t,s),a=ke.alloc(ol.span);return ol.encode({instruction:Jo.MintTo,amount:BigInt(n)},a),new Ne({keys:o,programId:r,data:a})}async function ih(i,e,t,n,s,r,o=[],a,l=hn){const[p,h]=y0(s,o),b=new Te().add(_0(t,n,p,r,o,l));return await Rr(i,b,[e,...h],a)}var rh={exports:{}};const R0=/[\p{Lu}]/u,k0=/[\p{Ll}]/u,al=/^[\p{Lu}](?![\p{Lu}])/gu,sh=/([\p{Alpha}\p{N}_]|$)/u,oh=/[_.\- ]+/,P0=new RegExp("^"+oh.source),cl=new RegExp(oh.source+sh.source,"gu"),ll=new RegExp("\\d+"+sh.source,"gu"),A0=(i,e,t)=>{let n=!1,s=!1,r=!1;for(let o=0;o<i.length;o++){const a=i[o];n&&R0.test(a)?(i=i.slice(0,o)+"-"+i.slice(o),n=!1,r=s,s=!0,o++):s&&r&&k0.test(a)?(i=i.slice(0,o-1)+"-"+i.slice(o-1),r=s,s=!1,n=!0):(n=e(a)===a&&t(a)!==a,r=s,s=t(a)===a&&e(a)!==a)}return i},O0=(i,e)=>(al.lastIndex=0,i.replace(al,t=>e(t))),T0=(i,e)=>(cl.lastIndex=0,ll.lastIndex=0,i.replace(cl,(t,n)=>e(n)).replace(ll,t=>e(t))),ah=(i,e)=>{if(!(typeof i=="string"||Array.isArray(i)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(i)?i=i.map(r=>r.trim()).filter(r=>r.length).join("-"):i=i.trim(),i.length===0)return"";const t=e.locale===!1?r=>r.toLowerCase():r=>r.toLocaleLowerCase(e.locale),n=e.locale===!1?r=>r.toUpperCase():r=>r.toLocaleUpperCase(e.locale);return i.length===1?e.pascalCase?n(i):t(i):(i!==t(i)&&(i=A0(i,t,n)),i=i.replace(P0,""),e.preserveConsecutiveUppercase?i=O0(i,t):i=t(i),e.pascalCase&&(i=n(i.charAt(0))+i.slice(1)),T0(i,n))};rh.exports=ah;rh.exports.default=ah;var $t={},ae={};let Ue=class{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}};ae.Layout=Ue;function Ha(i,e){return e.property?i+"["+e.property+"]":i}ae.nameWithProperty=Ha;function x0(i,e){if(typeof i!="function")throw new TypeError("Class must be constructor");if(i.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Ue))throw new TypeError("layout must be a Layout");if(e.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");i.layout_=e,e.boundConstructor_=i,e.makeDestinationObject=()=>new i,Object.defineProperty(i.prototype,"encode",{value:function(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(i,"decode",{value:function(t,n){return e.decode(t,n)},writable:!0})}ae.bindConstructorLayout=x0;let Yt=class extends Ue{isCount(){throw new Error("ExternalLayout is abstract")}};class ch extends Yt{constructor(e,t){if(e===void 0&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,t),this.elementSpan=e}isCount(){return!0}decode(e,t){t===void 0&&(t=0);const n=e.length-t;return Math.floor(n/this.elementSpan)}encode(e,t,n){return 0}}let Ka=class extends Yt{constructor(e,t,n){if(!(e instanceof Ue))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Nn||this.layout instanceof qn}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}},Nn=class extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}},qn=class extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}};class Ti extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeIntLE(e,n,this.span),this.span}}class rr extends Ue{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeIntBE(e,n,this.span),this.span}}const ea=Math.pow(2,32);function Ns(i){const e=Math.floor(i/ea),t=i-e*ea;return{hi32:e,lo32:t}}function Bs(i,e){return i*ea+e}let I0=class extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readUInt32LE(t+4);return Bs(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=Ns(e);return t.writeUInt32LE(s.lo32,n),t.writeUInt32LE(s.hi32,n+4),8}};class C0 extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32BE(t),s=e.readUInt32BE(t+4);return Bs(n,s)}encode(e,t,n){n===void 0&&(n=0);const s=Ns(e);return t.writeUInt32BE(s.hi32,n),t.writeUInt32BE(s.lo32,n+4),8}}let N0=class extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readInt32LE(t+4);return Bs(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=Ns(e);return t.writeUInt32LE(s.lo32,n),t.writeInt32LE(s.hi32,n+4),8}};class B0 extends Ue{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readInt32BE(t),s=e.readUInt32BE(t+4);return Bs(n,s)}encode(e,t,n){n===void 0&&(n=0);const s=Ns(e);return t.writeInt32BE(s.hi32,n),t.writeUInt32BE(s.lo32,n+4),8}}class lh extends Ue{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatLE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeFloatLE(e,n),4}}class uh extends Ue{constructor(e){super(4,e)}decode(e,t){return t===void 0&&(t=0),e.readFloatBE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeFloatBE(e,n),4}}class hh extends Ue{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleLE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeDoubleLE(e,n),8}}class dh extends Ue{constructor(e){super(8,e)}decode(e,t){return t===void 0&&(t=0),e.readDoubleBE(t)}encode(e,t,n){return n===void 0&&(n=0),t.writeDoubleBE(e,n),8}}class fh extends Ue{constructor(e,t,n){if(!(e instanceof Ue))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof Yt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(t instanceof Yt)&&0<e.span&&(s=t*e.span),super(s,n),this.elementLayout=e,this.count=t}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0,s=this.count;if(s instanceof Yt&&(s=s.decode(e,t)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let r=0;for(;r<s;)n+=this.elementLayout.getSpan(e,t+n),++r}return n}decode(e,t){t===void 0&&(t=0);const n=[];let s=0,r=this.count;for(r instanceof Yt&&(r=r.decode(e,t));s<r;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),s+=1;return n}encode(e,t,n){n===void 0&&(n=0);const s=this.elementLayout,r=e.reduce((o,a)=>o+s.encode(a,t,n+o),0);return this.count instanceof Yt&&this.count.encode(e.length,t,n),r}}let ph=class extends Ue{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((r,o)=>r&&o instanceof Ue,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const r of e)if(0>r.span&&r.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((r,o)=>r+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((s,r)=>{const o=r.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const s=n;let r=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const p=e[a.property];p!==void 0&&(o=a.encode(p,t,n),0>l&&(l=a.getSpan(t,n)))}r=n,n+=l}return r+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}},Wa=class{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},cs=class extends Wa{constructor(e,t){if(!(e instanceof Yt&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}},Ga=class extends Ue{constructor(e,t,n){const s=e instanceof Nn||e instanceof qn;if(s)e=new cs(new Ka(e));else if(e instanceof Yt&&e.isCount())e=new cs(e);else if(!(e instanceof Wa))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Ue))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let r=-1;t&&(r=t.span,0<=r&&s&&(r+=e.layout.span)),super(r,n),this.discriminator=e,this.usesPrefixDiscriminator=s,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const s=this.discriminator,r=s.decode(e,t);let o=this.registry[r];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=s.layout.span),n=this.makeDestinationObject(),n[s.property]=r,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const s=this.getSourceVariant(e);if(s===void 0){const r=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=r.layout.span),r.encode(e[r.property],t,n),a+o.encode(e[o.property],t,n+a)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new gh(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t){let n=e;return ke.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}},gh=class extends Ue{constructor(e,t,n,s){if(!(e instanceof Ga))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Ue))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let r=e.span;0>e.span&&(r=n?n.span:0,0<=r&&e.usesPrefixDiscriminator&&(r+=e.discriminator.layout.span)),super(r,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let r=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),r+=this.layout.getSpan(t,n+s),0<=this.union.span&&r>this.union.span))throw new Error("encoded variant overruns containing union");return r}fromArray(e){if(this.layout)return this.layout.fromArray(e)}};function Li(i){return 0>i&&(i+=4294967296),i}class qa extends Ue{constructor(e,t,n){if(!(e instanceof Nn||e instanceof qn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof t=="string"&&n===void 0&&(n=t,t=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,n),this.word=e,this.msb=!!t,this.fields=[];let s=0;this._packedSetValue=function(r){return s=Li(r),this},this._packedGetValue=function(){return s}}decode(e,t){const n=this.makeDestinationObject();t===void 0&&(t=0);const s=this.word.decode(e,t);this._packedSetValue(s);for(const r of this.fields)r.property!==void 0&&(n[r.property]=r.decode(s));return n}encode(e,t,n){n===void 0&&(n=0);const s=this.word.decode(t,n);this._packedSetValue(s);for(const r of this.fields)if(r.property!==void 0){const o=e[r.property];o!==void 0&&r.encode(o)}return this.word.encode(this._packedGetValue(),t,n)}addField(e,t){const n=new pr(this,e,t);return this.fields.push(n),n}addBoolean(e){const t=new mh(this,e);return this.fields.push(t),t}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}}class pr{constructor(e,t,n){if(!(e instanceof qa))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(t)||0>=t)throw new TypeError("bits must be positive integer");const s=8*e.span,r=e.fields.reduce((o,a)=>o+a.bits,0);if(t+r>s)throw new Error("bits too long for span remainder ("+(s-r)+" of "+s+" remain)");this.container=e,this.bits=t,this.valueMask=(1<<t)-1,t===32&&(this.valueMask=4294967295),this.start=r,this.container.msb&&(this.start=s-r-t),this.wordMask=Li(this.valueMask<<this.start),this.property=n}decode(){const e=this.container._packedGetValue();return Li(e&this.wordMask)>>>this.start}encode(e){if(!Number.isInteger(e)||e!==Li(e&this.valueMask))throw new TypeError(Ha("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const t=this.container._packedGetValue(),n=Li(e<<this.start);this.container._packedSetValue(Li(t&~this.wordMask)|n)}}let mh=class extends pr{constructor(e,t){super(e,1,t)}decode(e,t){return!!pr.prototype.decode.call(this,e,t)}encode(e){return typeof e=="boolean"&&(e=+e),pr.prototype.encode.call(this,e)}},yh=class extends Ue{constructor(e,t){if(!(e instanceof Yt&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof Yt||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof Yt&&(s=e.length),!(ke.isBuffer(e)&&s===e.length))throw new TypeError(Ha("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,s,"hex"),this.length instanceof Yt&&this.length.encode(s,t,n),s}};class wh extends Ue{constructor(e){super(-1,e)}getSpan(e,t){if(!ke.isBuffer(e))throw new TypeError("b must be a Buffer");t===void 0&&(t=0);let n=t;for(;n<e.length&&e[n]!==0;)n+=1;return 1+n-t}decode(e,t,n){t===void 0&&(t=0);let s=this.getSpan(e,t);return e.slice(t,t+s-1).toString("utf-8")}encode(e,t,n){n===void 0&&(n=0),typeof e!="string"&&(e=e.toString());const s=new ke(e,"utf8"),r=s.length;if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(t,n),t[n+r]=0,r+1}}class bh extends Ue{constructor(e,t){if(typeof e=="string"&&t===void 0&&(t=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,t),this.maxSpan=e}getSpan(e,t){if(!ke.isBuffer(e))throw new TypeError("b must be a Buffer");return t===void 0&&(t=0),e.length-t}decode(e,t,n){t===void 0&&(t=0);let s=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+s).toString("utf-8")}encode(e,t,n){n===void 0&&(n=0),typeof e!="string"&&(e=e.toString());const s=new ke(e,"utf8"),r=s.length;if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return s.copy(t,n),r}}class vh extends Ue{constructor(e,t){super(0,t),this.value=e}decode(e,t,n){return this.value}encode(e,t,n){return 0}}ae.ExternalLayout=Yt;ae.GreedyCount=ch;ae.OffsetLayout=Ka;ae.UInt=Nn;ae.UIntBE=qn;ae.Int=Ti;ae.IntBE=rr;ae.Float=lh;ae.FloatBE=uh;ae.Double=hh;ae.DoubleBE=dh;ae.Sequence=fh;ae.Structure=ph;ae.UnionDiscriminator=Wa;ae.UnionLayoutDiscriminator=cs;ae.Union=Ga;ae.VariantLayout=gh;ae.BitStructure=qa;ae.BitField=pr;ae.Boolean=mh;ae.Blob=yh;ae.CString=wh;ae.UTF8=bh;ae.Constant=vh;ae.greedy=(i,e)=>new ch(i,e);ae.offset=(i,e,t)=>new Ka(i,e,t);ae.u8=i=>new Nn(1,i);ae.u16=i=>new Nn(2,i);ae.u24=i=>new Nn(3,i);ae.u32=i=>new Nn(4,i);ae.u40=i=>new Nn(5,i);ae.u48=i=>new Nn(6,i);ae.nu64=i=>new I0(i);ae.u16be=i=>new qn(2,i);ae.u24be=i=>new qn(3,i);ae.u32be=i=>new qn(4,i);ae.u40be=i=>new qn(5,i);ae.u48be=i=>new qn(6,i);ae.nu64be=i=>new C0(i);ae.s8=i=>new Ti(1,i);ae.s16=i=>new Ti(2,i);ae.s24=i=>new Ti(3,i);ae.s32=i=>new Ti(4,i);ae.s40=i=>new Ti(5,i);ae.s48=i=>new Ti(6,i);ae.ns64=i=>new N0(i);ae.s16be=i=>new rr(2,i);ae.s24be=i=>new rr(3,i);ae.s32be=i=>new rr(4,i);ae.s40be=i=>new rr(5,i);ae.s48be=i=>new rr(6,i);ae.ns64be=i=>new B0(i);ae.f32=i=>new lh(i);ae.f32be=i=>new uh(i);ae.f64=i=>new hh(i);ae.f64be=i=>new dh(i);ae.struct=(i,e,t)=>new ph(i,e,t);ae.bits=(i,e,t)=>new qa(i,e,t);ae.seq=(i,e,t)=>new fh(i,e,t);ae.union=(i,e,t)=>new Ga(i,e,t);ae.unionLayoutDiscriminator=(i,e)=>new cs(i,e);ae.blob=(i,e)=>new yh(i,e);ae.cstr=i=>new wh(i);ae.utf8=(i,e)=>new bh(i,e);ae.const=(i,e)=>new vh(i,e);const L0=ws(t0);(function(i){var e=tn&&tn.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(i,"__esModule",{value:!0}),i.struct=i.f64=i.f32=i.i32=i.u32=i.i16=i.u16=i.i8=i.u8=void 0,i.u64=a,i.i64=l,i.u128=p,i.i128=h,i.u256=b,i.i256=k,i.publicKey=x,i.option=A,i.bool=B,i.vec=W,i.tagged=Y,i.vecU8=J,i.str=Q,i.rustEnum=ee,i.array=oe,i.map=ie;const t=ae,n=L0,s=e(pa);var r=ae;Object.defineProperty(i,"u8",{enumerable:!0,get:function(){return r.u8}}),Object.defineProperty(i,"i8",{enumerable:!0,get:function(){return r.s8}}),Object.defineProperty(i,"u16",{enumerable:!0,get:function(){return r.u16}}),Object.defineProperty(i,"i16",{enumerable:!0,get:function(){return r.s16}}),Object.defineProperty(i,"u32",{enumerable:!0,get:function(){return r.u32}}),Object.defineProperty(i,"i32",{enumerable:!0,get:function(){return r.s32}}),Object.defineProperty(i,"f32",{enumerable:!0,get:function(){return r.f32}}),Object.defineProperty(i,"f64",{enumerable:!0,get:function(){return r.f64}}),Object.defineProperty(i,"struct",{enumerable:!0,get:function(){return r.struct}});class o extends t.Layout{constructor(R,c,d){super(R,d),this.blob=(0,t.blob)(R),this.signed=c}decode(R,c=0){const d=new s.default(this.blob.decode(R,c),10,"le");return this.signed?d.fromTwos(this.span*8).clone():d}encode(R,c,d=0){return this.signed&&(R=R.toTwos(this.span*8)),this.blob.encode(R.toArrayLike(ke,"le",this.span),c,d)}}function a(K){return new o(8,!1,K)}function l(K){return new o(8,!0,K)}function p(K){return new o(16,!1,K)}function h(K){return new o(16,!0,K)}function b(K){return new o(32,!1,K)}function k(K){return new o(32,!0,K)}class _ extends t.Layout{constructor(R,c,d,w){super(R.span,w),this.layout=R,this.decoder=c,this.encoder=d}decode(R,c){return this.decoder(this.layout.decode(R,c))}encode(R,c,d){return this.layout.encode(this.encoder(R),c,d)}getSpan(R,c){return this.layout.getSpan(R,c)}}function x(K){return new _((0,t.blob)(32),R=>new n.PublicKey(R),R=>R.toBuffer(),K)}class C extends t.Layout{constructor(R,c){super(-1,c),this.layout=R,this.discriminator=(0,t.u8)()}encode(R,c,d=0){return R==null?this.discriminator.encode(0,c,d):(this.discriminator.encode(1,c,d),this.layout.encode(R,c,d+1)+1)}decode(R,c=0){const d=this.discriminator.decode(R,c);if(d===0)return null;if(d===1)return this.layout.decode(R,c+1);throw new Error("Invalid option "+this.property)}getSpan(R,c=0){const d=this.discriminator.decode(R,c);if(d===0)return 1;if(d===1)return this.layout.getSpan(R,c+1)+1;throw new Error("Invalid option "+this.property)}}function A(K,R){return new C(K,R)}function B(K){return new _((0,t.u8)(),D,L,K)}function D(K){if(K===0)return!1;if(K===1)return!0;throw new Error("Invalid bool: "+K)}function L(K){return K?1:0}function W(K,R){const c=(0,t.u32)("length"),d=(0,t.struct)([c,(0,t.seq)(K,(0,t.offset)(c,-c.span),"values")]);return new _(d,({values:w})=>w,w=>({values:w}),R)}function Y(K,R,c){const d=(0,t.struct)([a("tag"),R.replicate("data")]);function w({tag:S,data:E}){if(!S.eq(K))throw new Error("Invalid tag, expected: "+K.toString("hex")+", got: "+S.toString("hex"));return E}return new _(d,w,S=>({tag:K,data:S}),c)}function J(K){const R=(0,t.u32)("length"),c=(0,t.struct)([R,(0,t.blob)((0,t.offset)(R,-R.span),"data")]);return new _(c,({data:d})=>d,d=>({data:d}),K)}function Q(K){return new _(J(),R=>R.toString("utf-8"),R=>ke.from(R,"utf-8"),K)}function ee(K,R,c){const d=(0,t.union)(c??(0,t.u8)(),R);return K.forEach((w,S)=>d.addVariant(S,w,w.property)),d}function oe(K,R,c){const d=(0,t.struct)([(0,t.seq)(K,R,"values")]);return new _(d,({values:w})=>w,w=>({values:w}),c)}class de extends t.Layout{constructor(R,c,d){super(R.span+c.span,d),this.keyLayout=R,this.valueLayout=c}decode(R,c){c=c||0;const d=this.keyLayout.decode(R,c),w=this.valueLayout.decode(R,c+this.keyLayout.getSpan(R,c));return[d,w]}encode(R,c,d){d=d||0;const w=this.keyLayout.encode(R[0],c,d),S=this.valueLayout.encode(R[1],c,d+w);return w+S}getSpan(R,c){return this.keyLayout.getSpan(R,c)+this.valueLayout.getSpan(R,c)}}function ie(K,R,c){const d=(0,t.u32)("length"),w=(0,t.struct)([d,(0,t.seq)(new de(K,R),(0,t.offset)(d,-d.span),"values")]);return new _(w,({values:S})=>new Map(S),S=>({values:Array.from(S.entries())}),c)}})($t);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function sr(i){let e=i.length;for(;--e>=0;)i[e]=0}const M0=3,F0=258,Sh=29,U0=256,D0=U0+1+Sh,Eh=30,V0=512,$0=new Array((D0+2)*2);sr($0);const z0=new Array(Eh*2);sr(z0);const H0=new Array(V0);sr(H0);const K0=new Array(F0-M0+1);sr(K0);const W0=new Array(Sh);sr(W0);const G0=new Array(Eh);sr(G0);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const ta=new Uint8Array(256);for(let i=0;i<256;i++)ta[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;ta[254]=ta[254]=1;var q0={exports:{}};(function(i){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,p,h){this.fn=l,this.context=p,this.once=h||!1}function r(l,p,h,b,k){if(typeof h!="function")throw new TypeError("The listener must be a function");var _=new s(h,b||l,k),x=t?t+p:p;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],_]:l._events[x].push(_):(l._events[x]=_,l._eventsCount++),l}function o(l,p){--l._eventsCount===0?l._events=new n:delete l._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],h,b;if(this._eventsCount===0)return p;for(b in h=this._events)e.call(h,b)&&p.push(t?b.slice(1):b);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(h)):p},a.prototype.listeners=function(p){var h=t?t+p:p,b=this._events[h];if(!b)return[];if(b.fn)return[b.fn];for(var k=0,_=b.length,x=new Array(_);k<_;k++)x[k]=b[k].fn;return x},a.prototype.listenerCount=function(p){var h=t?t+p:p,b=this._events[h];return b?b.fn?1:b.length:0},a.prototype.emit=function(p,h,b,k,_,x){var C=t?t+p:p;if(!this._events[C])return!1;var A=this._events[C],B=arguments.length,D,L;if(A.fn){switch(A.once&&this.removeListener(p,A.fn,void 0,!0),B){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,h),!0;case 3:return A.fn.call(A.context,h,b),!0;case 4:return A.fn.call(A.context,h,b,k),!0;case 5:return A.fn.call(A.context,h,b,k,_),!0;case 6:return A.fn.call(A.context,h,b,k,_,x),!0}for(L=1,D=new Array(B-1);L<B;L++)D[L-1]=arguments[L];A.fn.apply(A.context,D)}else{var W=A.length,Y;for(L=0;L<W;L++)switch(A[L].once&&this.removeListener(p,A[L].fn,void 0,!0),B){case 1:A[L].fn.call(A[L].context);break;case 2:A[L].fn.call(A[L].context,h);break;case 3:A[L].fn.call(A[L].context,h,b);break;case 4:A[L].fn.call(A[L].context,h,b,k);break;default:if(!D)for(Y=1,D=new Array(B-1);Y<B;Y++)D[Y-1]=arguments[Y];A[L].fn.apply(A[L].context,D)}}return!0},a.prototype.on=function(p,h,b){return r(this,p,h,b,!1)},a.prototype.once=function(p,h,b){return r(this,p,h,b,!0)},a.prototype.removeListener=function(p,h,b,k){var _=t?t+p:p;if(!this._events[_])return this;if(!h)return o(this,_),this;var x=this._events[_];if(x.fn)x.fn===h&&(!k||x.once)&&(!b||x.context===b)&&o(this,_);else{for(var C=0,A=[],B=x.length;C<B;C++)(x[C].fn!==h||k&&!x[C].once||b&&x[C].context!==b)&&A.push(x[C]);A.length?this._events[_]=A.length===1?A[0]:A:o(this,_)}return this},a.prototype.removeAllListeners=function(p){var h;return p?(h=t?t+p:p,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,i.exports=a})(q0);$t.struct([$t.publicKey("authority"),$t.vecU8("data")]);class j0 extends TypeError{constructor(e,t){let n;const{message:s,...r}=e,{path:o}=e,a=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(a),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,r),this.name=this.constructor.name,this.failures=()=>{var l;return(l=n)!=null?l:n=[e,...t()]}}}function Z0(i){return Vi(i)&&typeof i[Symbol.iterator]=="function"}function Vi(i){return typeof i=="object"&&i!=null}function oi(i){return typeof i=="string"?JSON.stringify(i):""+i}function Y0(i){const{done:e,value:t}=i.next();return e?void 0:t}function X0(i,e,t,n){if(i===!0)return;i===!1?i={}:typeof i=="string"&&(i={message:i});const{path:s,branch:r}=e,{type:o}=t,{refinement:a,message:l="Expected a value of type `"+o+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+oi(n)+"`"}=i;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:r,...i,message:l}}function*ul(i,e,t,n){Z0(i)||(i=[i]);for(const s of i){const r=X0(s,e,t,n);r&&(yield r)}}function*ja(i,e,t){t===void 0&&(t={});const{path:n=[],branch:s=[i],coerce:r=!1,mask:o=!1}=t,a={path:n,branch:s};if(r&&(i=e.coercer(i,a),o&&e.type!=="type"&&Vi(e.schema)&&Vi(i)&&!Array.isArray(i)))for(const p in i)e.schema[p]===void 0&&delete i[p];let l=!0;for(const p of e.validator(i,a))l=!1,yield[p,void 0];for(let[p,h,b]of e.entries(i,a)){const k=ja(h,b,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,h],coerce:r,mask:o});for(const _ of k)_[0]?(l=!1,yield[_[0],void 0]):r&&(h=_[1],p===void 0?i=h:i instanceof Map?i.set(p,h):i instanceof Set?i.add(h):Vi(i)&&(i[p]=h))}if(l)for(const p of e.refiner(i,a))l=!1,yield[p,void 0];l&&(yield[void 0,i])}class ci{constructor(e){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:t,schema:n,validator:s,refiner:r,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=t,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(l,p)=>{const h=s(l,p);return ul(h,p,this,l)}:this.validator=()=>[],r?this.refiner=(l,p)=>{const h=r(l,p);return ul(h,p,this,l)}:this.refiner=()=>[]}assert(e){return J0(e,this)}create(e){return _h(e,this)}is(e){return Rh(e,this)}mask(e){return Q0(e,this)}validate(e,t){return t===void 0&&(t={}),Cr(e,this,t)}}function J0(i,e){const t=Cr(i,e);if(t[0])throw t[0]}function _h(i,e){const t=Cr(i,e,{coerce:!0});if(t[0])throw t[0];return t[1]}function Q0(i,e){const t=Cr(i,e,{coerce:!0,mask:!0});if(t[0])throw t[0];return t[1]}function Rh(i,e){return!Cr(i,e)[0]}function Cr(i,e,t){t===void 0&&(t={});const n=ja(i,e,t),s=Y0(n);return s[0]?[new j0(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function Nr(i,e){return new ci({type:i,schema:null,validator:e})}function ew(){return Nr("any",()=>!0)}function Io(i){return new ci({type:"array",schema:i,*entries(e){if(i&&Array.isArray(e))for(const[t,n]of e.entries())yield[t,n,i]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||"Expected an array value, but received: "+oi(e)}})}function tw(){return Nr("boolean",i=>typeof i=="boolean")}function hl(i){const e=oi(i);return new ci({type:"literal",schema:i,validator(t){return t===i||"Expected the literal `"+e+"`, but received: "+oi(t)}})}function zr(i){return new ci({...i,validator:(e,t)=>e===null||i.validator(e,t),refiner:(e,t)=>e===null||i.refiner(e,t)})}function Gr(){return Nr("number",i=>typeof i=="number"&&!isNaN(i)||"Expected a number, but received: "+oi(i))}function qr(i){return new ci({...i,validator:(e,t)=>e===void 0||i.validator(e,t),refiner:(e,t)=>e===void 0||i.refiner(e,t)})}function yi(){return Nr("string",i=>typeof i=="string"||"Expected a string, but received: "+oi(i))}function si(i){const e=Object.keys(i);return new ci({type:"type",schema:i,*entries(t){if(Vi(t))for(const n of e)yield[n,t[n],i[n]]},validator(t){return Vi(t)||"Expected an object, but received: "+oi(t)}})}function kh(i){const e=i.map(t=>t.type).join(" | ");return new ci({type:"union",schema:null,coercer(t,n){return(i.find(r=>{const[o]=r.validate(t,{coerce:!0});return!o})||Za()).coercer(t,n)},validator(t,n){const s=[];for(const r of i){const[...o]=ja(t,r,n),[a]=o;if(a[0])for(const[l]of o)l&&s.push(l);else return[]}return["Expected the value to satisfy a union of `"+e+"`, but received: "+oi(t),...s]}})}function Za(){return Nr("unknown",()=>!0)}function nw(i,e,t){return new ci({...i,coercer:(n,s)=>Rh(n,e)?i.coercer(t(n,s),s):i.coercer(n,s)})}function iw(i){return nw(Ph(i),rw,e=>"error"in e?e:{...e,result:_h(e.result,i)})}const rw=Ph(Za());function Ph(i){return kh([si({jsonrpc:hl("2.0"),id:yi(),result:i}),si({jsonrpc:hl("2.0"),id:yi(),error:si({code:Za(),message:yi(),data:qr(ew())})})])}function sw(i){return iw(si({context:si({slot:Gr()}),value:i}))}sw(si({err:zr(kh([si({}),yi()])),logs:zr(Io(yi())),accounts:qr(zr(Io(zr(si({executable:tw(),owner:yi(),lamports:Gr(),data:Io(yi()),rentEpoch:qr(Gr())}))))),unitsConsumed:qr(Gr())}));var ow=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},V={};Object.defineProperty(V,"__esModule",{value:!0});V.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=V.ANCHOR_ERROR__REQUIRE_VIOLATED=V.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=V.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=V.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=V.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=V.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=V.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=V.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=V.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=V.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=V.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=V.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=V.ANCHOR_ERROR__CONSTRAINT_SPACE=V.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=V.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=V.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=V.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=V.ANCHOR_ERROR__CONSTRAINT_ZERO=V.ANCHOR_ERROR__CONSTRAINT_ADDRESS=V.ANCHOR_ERROR__CONSTRAINT_CLOSE=V.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=V.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=V.ANCHOR_ERROR__CONSTRAINT_STATE=V.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=V.ANCHOR_ERROR__CONSTRAINT_SEEDS=V.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=V.ANCHOR_ERROR__CONSTRAINT_OWNER=V.ANCHOR_ERROR__CONSTRAINT_RAW=V.ANCHOR_ERROR__CONSTRAINT_SIGNER=V.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=V.ANCHOR_ERROR__CONSTRAINT_MUT=V.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=V.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=V.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=V.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=V.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=V.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=V.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=V.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;V.ANCHOR_ERROR__DEPRECATED=V.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=V.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=V.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=V.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=V.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=V.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=V.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=V.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=V.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=V.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=V.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=V.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=V.ANCHOR_ERROR__INVALID_PROGRAM_ID=V.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=V.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=V.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=V.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=V.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=V.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=V.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=V.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=V.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=V.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=V.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=V.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=V.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;V.ANCHOR_ERROR__INSTRUCTION_MISSING=100;V.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;V.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;V.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;V.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;V.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;V.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;V.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;V.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;V.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;V.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;V.ANCHOR_ERROR__CONSTRAINT_RAW=2003;V.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;V.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;V.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;V.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;V.ANCHOR_ERROR__CONSTRAINT_STATE=2008;V.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;V.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;V.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;V.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;V.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;V.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;V.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;V.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;V.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;V.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;V.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;V.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;V.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;V.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;V.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;V.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;V.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;V.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;V.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;V.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;V.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;V.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;V.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;V.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;V.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;V.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;V.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;V.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;V.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;V.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;V.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;V.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;V.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;V.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;V.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;V.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;V.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;V.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;V.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;V.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;V.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;V.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;V.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;V.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;V.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;V.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;V.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;V.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;V.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;V.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;V.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;V.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;V.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;V.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;V.ANCHOR_ERROR__DEPRECATED=5e3;class Xt{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}decode(e,t){throw new Error("Layout is abstract")}encode(e,t,n){throw new Error("Layout is abstract")}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}var Ls=Xt;function aw(i,e){return e.property?i+"["+e.property+"]":i}class wi extends Xt{isCount(){throw new Error("ExternalLayout is abstract")}}class Ah extends wi{constructor(e,t,n){if(!(e instanceof Xt))throw new TypeError("layout must be a Layout");if(t===void 0)t=0;else if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,n||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof Ms||this.layout instanceof Oh}decode(e,t){return t===void 0&&(t=0),this.layout.decode(e,t+this.offset)}encode(e,t,n){return n===void 0&&(n=0),this.layout.encode(e,t,n+this.offset)}}class Ms extends Xt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntLE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}class Oh extends Xt{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t){return t===void 0&&(t=0),e.readUIntBE(t,this.span)}encode(e,t,n){return n===void 0&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}const na=Math.pow(2,32);function Th(i){const e=Math.floor(i/na),t=i-e*na;return{hi32:e,lo32:t}}function xh(i,e){return i*na+e}class cw extends Xt{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readUInt32LE(t+4);return xh(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=Th(e);return t.writeUInt32LE(s.lo32,n),t.writeUInt32LE(s.hi32,n+4),8}}class lw extends Xt{constructor(e){super(8,e)}decode(e,t){t===void 0&&(t=0);const n=e.readUInt32LE(t),s=e.readInt32LE(t+4);return xh(s,n)}encode(e,t,n){n===void 0&&(n=0);const s=Th(e);return t.writeUInt32LE(s.lo32,n),t.writeInt32LE(s.hi32,n+4),8}}class uw extends Xt{constructor(e,t,n){if(!(Array.isArray(e)&&e.reduce((r,o)=>r&&o instanceof Xt,!0)))throw new TypeError("fields must be array of Layout instances");typeof t=="boolean"&&n===void 0&&(n=t,t=void 0);for(const r of e)if(0>r.span&&r.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=e.reduce((r,o)=>r+o.getSpan(),0)}catch{}super(s,t),this.fields=e,this.decodePrefixes=!!n}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;try{n=this.fields.reduce((s,r)=>{const o=r.getSpan(e,t);return t+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(e,t){t===void 0&&(t=0);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(e,t)),t+=s.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return n}encode(e,t,n){n===void 0&&(n=0);const s=n;let r=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const p=e[a.property];p!==void 0&&(o=a.encode(p,t,n),0>l&&(l=a.getSpan(t,n)))}r=n,n+=l}return r+o-s}fromArray(e){const t=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<e.length&&(t[n.property]=e.shift());return t}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let t=0;for(const n of this.fields){if(n.property===e)return t;0>n.span?t=-1:0<=t&&(t+=n.span)}}}class Ih{constructor(e){this.property=e}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class dl extends Ih{constructor(e,t){if(!(e instanceof wi&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(t||e.property||"variant"),this.layout=e}decode(e,t){return this.layout.decode(e,t)}encode(e,t,n){return this.layout.encode(e,t,n)}}class Ch extends Xt{constructor(e,t,n){const s=e instanceof Ms||e instanceof Oh;if(s)e=new dl(new Ah(e));else if(e instanceof wi&&e.isCount())e=new dl(e);else if(!(e instanceof Ih))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(t===void 0&&(t=null),!(t===null||t instanceof Xt))throw new TypeError("defaultLayout must be null or a Layout");if(t!==null){if(0>t.span)throw new Error("defaultLayout must have constant span");t.property===void 0&&(t=t.replicate("content"))}let r=-1;t&&(r=t.span,0<=r&&s&&(r+=e.layout.span)),super(r,n),this.discriminator=e,this.usesPrefixDiscriminator=s,this.defaultLayout=t,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);const n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}defaultGetSourceVariant(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;const t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(const t in this.registry){const n=this.registry[t];if(e.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(e,t){t===void 0&&(t=0);let n;const s=this.discriminator,r=s.decode(e,t);let o=this.registry[r];if(o===void 0){let a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=s.layout.span),n=this.makeDestinationObject(),n[s.property]=r,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}encode(e,t,n){n===void 0&&(n=0);const s=this.getSourceVariant(e);if(s===void 0){const r=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=r.layout.span),r.encode(e[r.property],t,n),a+o.encode(e[o.property],t,n+a)}return s.encode(e,t,n)}addVariant(e,t,n){const s=new hw(this,e,t,n);return this.registry[e]=s,s}getVariant(e,t){let n=e;return ke.isBuffer(e)&&(t===void 0&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}class hw extends Xt{constructor(e,t,n,s){if(!(e instanceof Ch))throw new TypeError("union must be a Union");if(!Number.isInteger(t)||0>t)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Xt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=n.span&&n.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let r=e.span;0>e.span&&(r=n?n.span:0,0<=r&&e.usesPrefixDiscriminator&&(r+=e.discriminator.layout.span)),super(r,s),this.union=e,this.variant=t,this.layout=n||null}getSpan(e,t){if(0<=this.span)return this.span;t===void 0&&(t=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}decode(e,t){const n=this.makeDestinationObject();if(t===void 0&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(e,t,n){n===void 0&&(n=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);let r=s;if(this.layout&&(this.layout.encode(e[this.property],t,n+s),r+=this.layout.getSpan(t,n+s),0<=this.union.span&&r>this.union.span))throw new Error("encoded variant overruns containing union");return r}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}class dw extends Xt{constructor(e,t){if(!(e instanceof wi&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;e instanceof wi||(n=e),super(n,t),this.length=e}getSpan(e,t){let n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}decode(e,t){t===void 0&&(t=0);let n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}encode(e,t,n){let s=this.length;if(this.length instanceof wi&&(s=e.length),!(ke.isBuffer(e)&&s===e.length))throw new TypeError(aw("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(n+s>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,s,"hex"),this.length instanceof wi&&this.length.encode(s,t,n),s}}var fw=(i,e,t)=>new Ah(i,e,t),pw=i=>new Ms(1,i),Vn=i=>new Ms(4,i),gw=i=>new cw(i),Wn=i=>new lw(i),kt=(i,e,t)=>new uw(i,e,t),Nh=(i,e,t)=>new Ch(i,e,t),Br=(i,e)=>new dw(i,e);class mw extends Ls{constructor(e){super(-1,e),this.property=e,this.layout=kt([Vn("length"),Vn("lengthPadding"),Br(fw(Vn(),-8),"chars")],this.property)}encode(e,t,n=0){if(e==null)return this.layout.span;const s={chars:ke.from(e,"utf8")};return this.layout.encode(s,t,n)}decode(e,t=0){return this.layout.decode(e,t).chars.toString()}getSpan(e,t=0){return Vn().span+Vn().span+new mn(new Uint8Array(e).slice(t,t+4),10,"le").toNumber()}}function Fs(i){return new mw(i)}function dn(i){return Br(32,i)}const rn=Nh(Vn("instruction"));rn.addVariant(0,kt([Wn("lamports"),Wn("space"),dn("owner")]),"createAccount");rn.addVariant(1,kt([dn("owner")]),"assign");rn.addVariant(2,kt([Wn("lamports")]),"transfer");rn.addVariant(3,kt([dn("base"),Fs("seed"),Wn("lamports"),Wn("space"),dn("owner")]),"createAccountWithSeed");rn.addVariant(4,kt([dn("authorized")]),"advanceNonceAccount");rn.addVariant(5,kt([Wn("lamports")]),"withdrawNonceAccount");rn.addVariant(6,kt([dn("authorized")]),"initializeNonceAccount");rn.addVariant(7,kt([dn("authorized")]),"authorizeNonceAccount");rn.addVariant(8,kt([Wn("space")]),"allocate");rn.addVariant(9,kt([dn("base"),Fs("seed"),Wn("space"),dn("owner")]),"allocateWithSeed");rn.addVariant(10,kt([dn("base"),Fs("seed"),dn("owner")]),"assignWithSeed");rn.addVariant(11,kt([Wn("lamports"),Fs("seed"),dn("owner")]),"transferWithSeed");Math.max(...Object.values(rn.registry).map(i=>i.span));class yw extends Ls{constructor(e,t,n,s){super(e.span,s),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}function fl(i){return new yw(Br(32),e=>new H(e),e=>e.toBuffer(),i)}kt([Vn("version"),Vn("state"),fl("authorizedPubkey"),fl("nonce"),kt([gw("lamportsPerSignature")],"feeCalculator")]);new H("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new H("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var pl={exports:{}};(function(i,e){var t=typeof self<"u"?self:ow,n=function(){function r(){this.fetch=!1,this.DOMException=t.DOMException}return r.prototype=t,new r}();(function(r){(function(o){var a={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};function l(c){return c&&DataView.prototype.isPrototypeOf(c)}if(a.arrayBuffer)var p=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(c){return c&&p.indexOf(Object.prototype.toString.call(c))>-1};function b(c){if(typeof c!="string"&&(c=String(c)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function k(c){return typeof c!="string"&&(c=String(c)),c}function _(c){var d={next:function(){var w=c.shift();return{done:w===void 0,value:w}}};return a.iterable&&(d[Symbol.iterator]=function(){return d}),d}function x(c){this.map={},c instanceof x?c.forEach(function(d,w){this.append(w,d)},this):Array.isArray(c)?c.forEach(function(d){this.append(d[0],d[1])},this):c&&Object.getOwnPropertyNames(c).forEach(function(d){this.append(d,c[d])},this)}x.prototype.append=function(c,d){c=b(c),d=k(d);var w=this.map[c];this.map[c]=w?w+", "+d:d},x.prototype.delete=function(c){delete this.map[b(c)]},x.prototype.get=function(c){return c=b(c),this.has(c)?this.map[c]:null},x.prototype.has=function(c){return this.map.hasOwnProperty(b(c))},x.prototype.set=function(c,d){this.map[b(c)]=k(d)},x.prototype.forEach=function(c,d){for(var w in this.map)this.map.hasOwnProperty(w)&&c.call(d,this.map[w],w,this)},x.prototype.keys=function(){var c=[];return this.forEach(function(d,w){c.push(w)}),_(c)},x.prototype.values=function(){var c=[];return this.forEach(function(d){c.push(d)}),_(c)},x.prototype.entries=function(){var c=[];return this.forEach(function(d,w){c.push([w,d])}),_(c)},a.iterable&&(x.prototype[Symbol.iterator]=x.prototype.entries);function C(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=!0}function A(c){return new Promise(function(d,w){c.onload=function(){d(c.result)},c.onerror=function(){w(c.error)}})}function B(c){var d=new FileReader,w=A(d);return d.readAsArrayBuffer(c),w}function D(c){var d=new FileReader,w=A(d);return d.readAsText(c),w}function L(c){for(var d=new Uint8Array(c),w=new Array(d.length),S=0;S<d.length;S++)w[S]=String.fromCharCode(d[S]);return w.join("")}function W(c){if(c.slice)return c.slice(0);var d=new Uint8Array(c.byteLength);return d.set(new Uint8Array(c)),d.buffer}function Y(){return this.bodyUsed=!1,this._initBody=function(c){this._bodyInit=c,c?typeof c=="string"?this._bodyText=c:a.blob&&Blob.prototype.isPrototypeOf(c)?this._bodyBlob=c:a.formData&&FormData.prototype.isPrototypeOf(c)?this._bodyFormData=c:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)?this._bodyText=c.toString():a.arrayBuffer&&a.blob&&l(c)?(this._bodyArrayBuffer=W(c.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(c)||h(c))?this._bodyArrayBuffer=W(c):this._bodyText=c=Object.prototype.toString.call(c):this._bodyText="",this.headers.get("content-type")||(typeof c=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(c)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var c=C(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?C(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(B)}),this.text=function(){var c=C(this);if(c)return c;if(this._bodyBlob)return D(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(L(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(oe)}),this.json=function(){return this.text().then(JSON.parse)},this}var J=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Q(c){var d=c.toUpperCase();return J.indexOf(d)>-1?d:c}function ee(c,d){d=d||{};var w=d.body;if(c instanceof ee){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url,this.credentials=c.credentials,d.headers||(this.headers=new x(c.headers)),this.method=c.method,this.mode=c.mode,this.signal=c.signal,!w&&c._bodyInit!=null&&(w=c._bodyInit,c.bodyUsed=!0)}else this.url=String(c);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new x(d.headers)),this.method=Q(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&w)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(w)}ee.prototype.clone=function(){return new ee(this,{body:this._bodyInit})};function oe(c){var d=new FormData;return c.trim().split("&").forEach(function(w){if(w){var S=w.split("="),E=S.shift().replace(/\+/g," "),O=S.join("=").replace(/\+/g," ");d.append(decodeURIComponent(E),decodeURIComponent(O))}}),d}function de(c){var d=new x,w=c.replace(/\r?\n[\t ]+/g," ");return w.split(/\r?\n/).forEach(function(S){var E=S.split(":"),O=E.shift().trim();if(O){var N=E.join(":").trim();d.append(O,N)}}),d}Y.call(ee.prototype);function ie(c,d){d||(d={}),this.type="default",this.status=d.status===void 0?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new x(d.headers),this.url=d.url||"",this._initBody(c)}Y.call(ie.prototype),ie.prototype.clone=function(){return new ie(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new x(this.headers),url:this.url})},ie.error=function(){var c=new ie(null,{status:0,statusText:""});return c.type="error",c};var K=[301,302,303,307,308];ie.redirect=function(c,d){if(K.indexOf(d)===-1)throw new RangeError("Invalid status code");return new ie(null,{status:d,headers:{location:c}})},o.DOMException=r.DOMException;try{new o.DOMException}catch{o.DOMException=function(d,w){this.message=d,this.name=w;var S=Error(d);this.stack=S.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function R(c,d){return new Promise(function(w,S){var E=new ee(c,d);if(E.signal&&E.signal.aborted)return S(new o.DOMException("Aborted","AbortError"));var O=new XMLHttpRequest;function N(){O.abort()}O.onload=function(){var P={status:O.status,statusText:O.statusText,headers:de(O.getAllResponseHeaders()||"")};P.url="responseURL"in O?O.responseURL:P.headers.get("X-Request-URL");var y="response"in O?O.response:O.responseText;w(new ie(y,P))},O.onerror=function(){S(new TypeError("Network request failed"))},O.ontimeout=function(){S(new TypeError("Network request failed"))},O.onabort=function(){S(new o.DOMException("Aborted","AbortError"))},O.open(E.method,E.url,!0),E.credentials==="include"?O.withCredentials=!0:E.credentials==="omit"&&(O.withCredentials=!1),"responseType"in O&&a.blob&&(O.responseType="blob"),E.headers.forEach(function(P,y){O.setRequestHeader(y,P)}),E.signal&&(E.signal.addEventListener("abort",N),O.onreadystatechange=function(){O.readyState===4&&E.signal.removeEventListener("abort",N)}),O.send(typeof E._bodyInit>"u"?null:E._bodyInit)})}return R.polyfill=!0,r.fetch||(r.fetch=R,r.Headers=x,r.Request=ee,r.Response=ie),o.Headers=x,o.Request=ee,o.Response=ie,o.fetch=R,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var s=n;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,i.exports=e})(pl,pl.exports);$t.rustEnum([$t.struct([],"uninitialized"),$t.struct([$t.option($t.publicKey(),"authorityAddress")],"buffer"),$t.struct([$t.publicKey("programdataAddress")],"program"),$t.struct([$t.u64("slot"),$t.option($t.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,$t.u32());function Co(i){return new Bh(Br(8),e=>Ya.fromBuffer(e),e=>e.toBuffer(),i)}function Hr(i){return new Bh(Br(32),e=>new H(e),e=>e.toBuffer(),i)}function No(i,e){return new ww(i,e)}class Bh extends Ls{constructor(e,t,n,s){super(e.span,s),this.layout=e,this.decoder=t,this.encoder=n}decode(e,t){return this.decoder(this.layout.decode(e,t))}encode(e,t,n){return this.layout.encode(this.encoder(e),t,n)}getSpan(e,t){return this.layout.getSpan(e,t)}}class ww extends Ls{constructor(e,t){super(-1,t),this.layout=e,this.discriminator=Vn()}encode(e,t,n=0){return e==null?this.layout.span+this.discriminator.encode(0,t,n):(this.discriminator.encode(1,t,n),this.layout.encode(e,t,n+4)+4)}decode(e,t=0){const n=this.discriminator.decode(e,t);if(n===0)return null;if(n===1)return this.layout.decode(e,t+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(e,t=0){return this.layout.getSpan(e,t+4)+4}}class Ya extends mn{toBuffer(){const e=super.toArray().reverse(),t=ke.from(e);if(t.length===8)return t;if(t.length>=8)throw new Error("u64 too large");const n=ke.alloc(8);return t.copy(n),n}static fromBuffer(e){if(e.length!==8)throw new Error(`Invalid buffer length: ${e.length}`);return new Ya([...e].reverse().map(t=>`00${t.toString(16)}`.slice(-2)).join(""),16)}}kt([Hr("mint"),Hr("owner"),Co("amount"),No(Hr(),"delegate"),(i=>{const e=Nh(pw("discriminator"),null,i);return e.addVariant(0,kt([]),"uninitialized"),e.addVariant(1,kt([]),"initialized"),e.addVariant(2,kt([]),"frozen"),e})("state"),No(Co(),"isNative"),Co("delegatedAmount"),No(Hr(),"closeAuthority")]);new H("11111111111111111111111111111111");const G={};G.allowedTagList=["b","caption","cite","code","const","dd","del","div","dfn","dt","em","h1","h2","h3","h4","h5","h6","input","ins","kdb","label","li","option","output","p","q","s","sample","span","strong","td","th","u"];Object.freeze(G.allowedTagList);Object.defineProperty(G,"allowedTagList",{configurable:!1,writable:!1});G.fromCharCodeKeyCode={0:"LaunchCalculator",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",91:"OS",92:"OSRight",93:"ContextMenu",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",173:"-",182:"MyComputer",183:"MyCalculator",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Meta",225:"AltGraph"};Object.freeze(G.fromCharCodeKeyCode);Object.defineProperty(G,"fromCharCodeKeyCode",{configurable:!1,writable:!1});G.keyName={Unidentified:"Unidentified",AndroidDefault:"AndroidDefault",Alt:"Alt",AltGr:"AltGraph",CapsLock:"CapsLock",Ctrl:"Control",Fn:"Fn",FnLock:"FnLock",Hyper:"Hyper",Meta:"Meta",OSLeft:"OS",OSRight:"OS",Command:"OS",NumLock:"NumLock",ScrollLock:"ScrollLock",Shift:"Shift",Super:"Super",Symbol:"Symbol",SymbolLock:"SymbolLock",Enter:"Enter",Tab:"Tab",Space:" ",LeftArrow:"ArrowLeft",UpArrow:"ArrowUp",RightArrow:"ArrowRight",DownArrow:"ArrowDown",End:"End",Home:"Home",PageUp:"PageUp",PageDown:"PageDown",Backspace:"Backspace",Clear:"Clear",Copy:"Copy",CrSel:"CrSel",Cut:"Cut",Delete:"Delete",EraseEof:"EraseEof",ExSel:"ExSel",Insert:"Insert",Paste:"Paste",Redo:"Redo",Undo:"Undo",Accept:"Accept",Again:"Again",Attn:"Attn",Cancel:"Cancel",ContextMenu:"ContextMenu",Esc:"Escape",Execute:"Execute",Find:"Find",Finish:"Finish",Help:"Help",Pause:"Pause",Play:"Play",Props:"Props",Select:"Select",ZoomIn:"ZoomIn",ZoomOut:"ZoomOut",BrightnessDown:"BrightnessDown",BrightnessUp:"BrightnessUp",Eject:"Eject",LogOff:"LogOff",Power:"Power",PowerOff:"PowerOff",PrintScreen:"PrintScreen",Hibernate:"Hibernate",Standby:"Standby",WakeUp:"WakeUp",Compose:"Compose",Dead:"Dead",F1:"F1",F2:"F2",F3:"F3",F4:"F4",F5:"F5",F6:"F6",F7:"F7",F8:"F8",F9:"F9",F10:"F10",F11:"F11",F12:"F12",Print:"Print",num0:"0",num1:"1",num2:"2",num3:"3",num4:"4",num5:"5",num6:"6",num7:"7",num8:"8",num9:"9",a:"a",b:"b",c:"c",d:"d",e:"e",f:"f",g:"g",h:"h",i:"i",j:"j",k:"k",l:"l",m:"m",n:"n",o:"o",p:"p",q:"q",r:"r",s:"s",t:"t",u:"u",v:"v",w:"w",x:"x",y:"y",z:"z",A:"A",B:"B",C:"C",D:"D",E:"E",F:"F",G:"G",H:"H",I:"I",J:"J",K:"K",L:"L",M:"M",N:"N",O:"O",P:"P",Q:"Q",R:"R",S:"S",T:"T",U:"U",V:"V",W:"W",X:"X",Y:"Y",Z:"Z",Semicolon:";",Equal:"=",Comma:",",Hyphen:"-",Minus:"-",Plus:"+",Dot:".",Slash:"/",Backquote:"`",LeftParenthesis:"(",RightParenthesis:")",LeftBracket:"[",RightBracket:"]",Backslash:"\\",Quote:"'",numpad0:"0",numpad1:"1",numpad2:"2",numpad3:"3",numpad4:"4",numpad5:"5",numpad6:"6",numpad7:"7",numpad8:"8",numpad9:"9",NumpadDot:".",NumpadDotAlt:",",NumpadMultiply:"*",NumpadPlus:"+",NumpadMinus:"-",NumpadSubtract:"-",NumpadSlash:"/",NumpadDotObsoleteBrowsers:"Decimal",NumpadMultiplyObsoleteBrowsers:"Multiply",NumpadPlusObsoleteBrowsers:"Add",NumpadMinusObsoleteBrowsers:"Subtract",NumpadSlashObsoleteBrowsers:"Divide",_allFnKeys:["F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12"],_someNonPrintableKeys:["Tab","Enter","Shift","ShiftLeft","ShiftRight","Control","ControlLeft","ControlRight","Alt","AltLeft","AltRight","Pause","CapsLock","Escape"],_directionKeys:["PageUp","PageDown","End","Home","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"]};Object.freeze(G.keyName._allFnKeys);Object.freeze(G.keyName._someNonPrintableKeys);Object.freeze(G.keyName._directionKeys);Object.freeze(G.keyName);Object.defineProperty(G,"keyName",{configurable:!1,writable:!1});Object.freeze(G);class u{static isNull(e){return e===null}static isUndefined(e){return e===void 0}static isUndefinedOrNullOrEmpty(e){return e==null||e===""}static isString(e){return typeof e=="string"||e instanceof String}static isEmptyString(e){return e===""}static isBoolean(e){return typeof e=="boolean"}static isTrueOrFalseString(e){const t=String(e).toLowerCase();return t==="true"||t==="false"}static isObject(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}static isEmptyObj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}static isNumberStrict(e){return typeof e=="number"}static isNumber(e){return!this.isArray(e)&&!isNaN(parseFloat(e))&&isFinite(e)}static isDigit(e){return/\d/.test(e)}static isNumberOrArabic(e){const t=this.arabicToLatinNumbers(e,!1,!0,!0);return this.isNumber(t)}static isInt(e){return typeof e=="number"&&parseFloat(e)===parseInt(e,10)&&!isNaN(e)}static isFunction(e){return typeof e=="function"}static contains(e,t){return!this.isString(e)||!this.isString(t)||e===""||t===""?!1:e.indexOf(t)!==-1}static isInArray(e,t){return!this.isArray(t)||t===[]||this.isUndefined(e)?!1:t.indexOf(e)!==-1}static isArray(e){if(Object.prototype.toString.call([])==="[object Array]")return Array.isArray(e)||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Array]";throw new Error("toString message changed for Object Array")}static isElement(e){return typeof Element>"u"?!1:e instanceof Element}static isInputElement(e){return this.isElement(e)&&e.tagName.toLowerCase()==="input"}static decimalPlaces(e){const[,t]=e.split(".");return this.isUndefined(t)?0:t.length}static indexFirstNonZeroDecimalPlace(e){const[,t]=String(Math.abs(e)).split(".");if(this.isUndefined(t))return 0;let n=t.lastIndexOf("0");return n===-1?n=0:n+=2,n}static keyCodeNumber(e){return typeof e.which>"u"?e.keyCode:e.which}static character(e){let t;if(e.key==="Unidentified"||e.key===void 0||this.isSeleniumBot()){const n=this.keyCodeNumber(e);if(n===229)return G.keyName.AndroidDefault;const s=G.fromCharCodeKeyCode[n];u.isUndefinedOrNullOrEmpty(s)?t=String.fromCharCode(n):t=s}else switch(e.key){case"Add":t=G.keyName.NumpadPlus;break;case"Apps":t=G.keyName.ContextMenu;break;case"Crsel":t=G.keyName.CrSel;break;case"Decimal":e.char?t=e.char:t=G.keyName.NumpadDot;break;case"Del":t=G.keyName.Delete;break;case"Divide":t=G.keyName.NumpadSlash;break;case"Down":t=G.keyName.DownArrow;break;case"Esc":t=G.keyName.Esc;break;case"Exsel":t=G.keyName.ExSel;break;case"Left":t=G.keyName.LeftArrow;break;case"Meta":case"Super":t=G.keyName.OSLeft;break;case"Multiply":t=G.keyName.NumpadMultiply;break;case"Right":t=G.keyName.RightArrow;break;case"Spacebar":t=G.keyName.Space;break;case"Subtract":t=G.keyName.NumpadMinus;break;case"Up":t=G.keyName.UpArrow;break;default:t=e.key}return t}static browser(){const e=navigator.userAgent;let t,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"ie",version:t[1]||""}):n[1]==="Chrome"&&(t=e.match(/\b(OPR|Edge)\/(\d+)/),t!==null)?{name:t[1].replace("OPR","opera"),version:t[2]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],(t=e.match(/version\/(\d+)/i))!==null&&n.splice(1,1,t[1]),{name:n[0].toLowerCase(),version:n[1]})}static isSeleniumBot(){return window.navigator.webdriver===!0}static isNegative(e,t="-",n=!0){return e===t?!0:e===""?!1:u.isNumber(e)?e<0:n?this.contains(e,t):this.isNegativeStrict(e,t)}static isNegativeStrict(e,t="-"){return e.charAt(0)===t}static isNegativeWithBrackets(e,t,n){return e.charAt(0)===t&&this.contains(e,n)}static isZeroOrHasNoValue(e){return!/[1-9]/g.test(e)}static setRawNegativeSign(e){return this.isNegativeStrict(e,"-")?e:`-${e}`}static replaceCharAt(e,t,n){return`${e.substr(0,t)}${n}${e.substr(t+n.length)}`}static clampToRangeLimits(e,t){return Math.max(t.minimumValue,Math.min(t.maximumValue,e))}static countNumberCharactersOnTheCaretLeftSide(e,t,n){const s=new RegExp(`[0-9${n}-]`);let r=0;for(let o=0;o<t;o++)s.test(e[o])&&r++;return r}static findCaretPositionInFormattedNumber(e,t,n,s){const r=n.length,o=e.length;let a,l=0;for(a=0;a<r&&l<o&&l<t;a++)(e[l]===n[a]||e[l]==="."&&n[a]===s)&&l++;return a}static countCharInText(e,t){let n=0;for(let s=0;s<t.length;s++)t[s]===e&&n++;return n}static convertCharacterCountToIndexPosition(e){return Math.max(e,e-1)}static getElementSelection(e){const t={};let n;try{n=this.isUndefined(e.selectionStart)}catch{n=!1}try{if(n){const r=window.getSelection().getRangeAt(0);t.start=r.startOffset,t.end=r.endOffset,t.length=t.end-t.start}else t.start=e.selectionStart,t.end=e.selectionEnd,t.length=t.end-t.start}catch{t.start=0,t.end=0,t.length=0}return t}static setElementSelection(e,t,n=null){if(this.isUndefinedOrNullOrEmpty(n)&&(n=t),this.isInputElement(e))e.setSelectionRange(t,n);else if(!u.isNull(e.firstChild)){const s=document.createRange();s.setStart(e.firstChild,t),s.setEnd(e.firstChild,n);const r=window.getSelection();r.removeAllRanges(),r.addRange(s)}}static throwError(e){throw new Error(e)}static warning(e,t=!0){t&&console.warn(`Warning: ${e}`)}static isWheelEvent(e){return e instanceof WheelEvent}static isWheelUpEvent(e){return(!this.isWheelEvent(e)||this.isUndefinedOrNullOrEmpty(e.deltaY))&&this.throwError(`The event passed as a parameter is not a valid wheel event, '${e.type}' given.`),e.deltaY<0}static isWheelDownEvent(e){return(!this.isWheelEvent(e)||this.isUndefinedOrNullOrEmpty(e.deltaY))&&this.throwError(`The event passed as a parameter is not a valid wheel event, '${e.type}' given.`),e.deltaY>0}static isWheelEventWithZeroDeltaY(e){return this.isWheelEvent(e)&&!this.isUndefinedOrNullOrEmpty(e.deltaY)&&e.deltaY===0}static forceDecimalPlaces(e,t){const[n,s]=String(e).split(".");return s?`${n}.${s.substr(0,t)}`:e}static roundToNearest(e,t=1e3){return e===0?0:(t===0&&this.throwError("The `stepPlace` used to round is equal to `0`. This value must not be equal to zero."),Math.round(e/t)*t)}static modifyAndRoundToNearestAuto(e,t,n){e=Number(this.forceDecimalPlaces(e,n));const s=Math.abs(e);if(s>=0&&s<1){const r=Math.pow(10,-n);if(e===0)return t?r:-r;let o;const a=n,l=this.indexFirstNonZeroDecimalPlace(e);l>=a-1?o=r:o=Math.pow(10,-(l+1));let p;return t?p=e+o:p=e-o,this.roundToNearest(p,o)}else{e=parseInt(e,10);const r=Math.abs(e).toString().length;let o;switch(r){case 1:o=0;break;case 2:case 3:o=1;break;case 4:case 5:o=2;break;default:o=r-3}const a=Math.pow(10,o);let l;return t?l=e+a:l=e-a,l<=10&&l>=-10?l:this.roundToNearest(l,a)}}static addAndRoundToNearestAuto(e,t){return this.modifyAndRoundToNearestAuto(e,!0,t)}static subtractAndRoundToNearestAuto(e,t){return this.modifyAndRoundToNearestAuto(e,!1,t)}static arabicToLatinNumbers(e,t=!0,n=!1,s=!1){if(this.isNull(e))return e;let r=e.toString();if(r==="")return e;if(r.match(/[]/g)===null)return t&&(r=Number(r)),r;n&&(r=r.replace(//,".")),s&&(r=r.replace(//g,"")),r=r.replace(/[]/g,a=>a.charCodeAt(0)-1632).replace(/[]/g,a=>a.charCodeAt(0)-1776);const o=Number(r);return isNaN(o)?o:(t&&(r=o),r)}static triggerEvent(e,t=document,n=null,s=!0,r=!0){let o;window.CustomEvent?o=new CustomEvent(e,{detail:n,bubbles:s,cancelable:r}):(o=document.createEvent("CustomEvent"),o.initCustomEvent(e,s,r,{detail:n})),t.dispatchEvent(o)}static parseStr(e){const t={};let n,s,r,o;if(e===0&&1/e<0&&(e="-0"),e=e.toString(),this.isNegativeStrict(e,"-")?(e=e.slice(1),t.s=-1):t.s=1,n=e.indexOf("."),n>-1&&(e=e.replace(".","")),n<0&&(n=e.length),s=e.search(/[1-9]/i)===-1?e.length:e.search(/[1-9]/i),r=e.length,s===r)t.e=0,t.c=[0];else{for(o=r-1;e.charAt(o)==="0";o-=1)r-=1;for(r-=1,t.e=n-s-1,t.c=[],n=0;s<=r;s+=1)t.c[n]=+e.charAt(s),n+=1}return t}static testMinMax(e,t){const n=t.c,s=e.c;let r=t.s,o=e.s,a=t.e,l=e.e;if(!n[0]||!s[0]){let b;return n[0]?b=r:b=s[0]?-o:0,b}if(r!==o)return r;const p=r<0;if(a!==l)return a>l^p?1:-1;for(r=-1,a=n.length,l=s.length,o=a<l?a:l,r+=1;r<o;r+=1)if(n[r]!==s[r])return n[r]>s[r]^p?1:-1;let h;return a===l?h=0:h=a>l^p?1:-1,h}static randomString(e=5){return Math.random().toString(36).substr(2,e)}static domElement(e){let t;return u.isString(e)?t=document.querySelector(e):t=e,t}static getElementValue(e){return e.tagName.toLowerCase()==="input"?e.value:this.text(e)}static setElementValue(e,t=null){e.tagName.toLowerCase()==="input"?e.value=t:e.textContent=t}static setInvalidState(e,t="Invalid"){(t===""||this.isNull(t))&&this.throwError("Cannot set the invalid state with an empty message."),e.setCustomValidity(t)}static setValidState(e){e.setCustomValidity("")}static cloneObject(e){return Object.assign({},e)}static camelize(e,t="-",n=!0,s=!0){if(this.isNull(e))return null;n&&(e=e.replace(/^data-/,""));let o=e.split(t).map(a=>`${a.charAt(0).toUpperCase()}${a.slice(1)}`);return o=o.join(""),s&&(o=`${o.charAt(0).toLowerCase()}${o.slice(1)}`),o}static text(e){const t=e.nodeType;let n;return t===Node.ELEMENT_NODE||t===Node.DOCUMENT_NODE||t===Node.DOCUMENT_FRAGMENT_NODE?n=e.textContent:t===Node.TEXT_NODE?n=e.nodeValue:n="",n}static setText(e,t){const n=e.nodeType;(n===Node.ELEMENT_NODE||n===Node.DOCUMENT_NODE||n===Node.DOCUMENT_FRAGMENT_NODE)&&(e.textContent=t)}static filterOut(e,t){return e.filter(n=>!this.isInArray(n,t))}static trimPaddedZerosFromDecimalPlaces(e){if(e=String(e),e==="")return"";const[t,n]=e.split(".");if(this.isUndefinedOrNullOrEmpty(n))return t;const s=n.replace(/0+$/g,"");let r;return s===""?r=t:r=`${t}.${s}`,r}static getHoveredElement(){const e=[...document.querySelectorAll(":hover")];return e[e.length-1]}static arrayTrim(e,t){const n=e.length;return n===0||t>n?e:t<0?[]:(e.length=parseInt(t,10),e)}static arrayUnique(...e){return[...new Set([].concat(...e))]}static mergeMaps(...e){return new Map(e.reduce((t,n)=>t.concat([...n]),[]))}static objectKeyLookup(e,t){const n=Object.entries(e).find(r=>r[1]===t);let s=null;return n!==void 0&&(s=n[0]),s}static insertAt(e,t,n){if(e=String(e),n>e.length)throw new Error("The given index is out of the string range.");if(t.length!==1)throw new Error("The given string `char` should be only one character long.");return e===""&&n===0?t:`${e.slice(0,n)}${t}${e.slice(n)}`}static scientificToDecimal(e){const t=Number(e);if(isNaN(t))return NaN;if(e=String(e),!(this.contains(e,"e")||this.contains(e,"E")))return e;let[s,r]=e.split(/e/i);const o=s<0;o&&(s=s.replace("-",""));const a=+r<0;a&&(r=r.replace("-",""));const[l,p]=s.split(/\./);let h;return a?(l.length>r?h=this.insertAt(l,".",l.length-r):h=`0.${"0".repeat(r-l.length)}${l}`,h=`${h}${p||""}`):p?(s=`${l}${p}`,r<p.length?h=this.insertAt(s,".",+r+l.length):h=`${s}${"0".repeat(r-p.length)}`):(s=s.replace(".",""),h=`${s}${"0".repeat(Number(r))}`),o&&(h=`-${h}`),h}}class bw{constructor(e){if(e===null)throw new Error("Invalid AST")}evaluate(e){if(e==null)throw new Error("Invalid AST sub-tree");if(e.type==="number")return e.value;if(e.type==="unaryMinus")return-this.evaluate(e.left);{const t=this.evaluate(e.left),n=this.evaluate(e.right);switch(e.type){case"op_+":return Number(t)+Number(n);case"op_-":return t-n;case"op_*":return t*n;case"op_/":return t/n;default:throw new Error(`Invalid operator '${e.type}'`)}}}}class Gt{static createNode(e,t,n){const s=new Gt;return s.type=e,s.left=t,s.right=n,s}static createUnaryNode(e){const t=new Gt;return t.type="unaryMinus",t.left=e,t.right=null,t}static createLeaf(e){const t=new Gt;return t.type="number",t.value=e,t}}class vw{constructor(e,t,n){this.type=e,this.value=t,this.symbol=n}}class Sw{constructor(e){this.text=e,this.textLength=e.length,this.index=0,this.token=new vw("Error",0,0)}_skipSpaces(){for(;this.text[this.index]===" "&&this.index<=this.textLength;)this.index++}getIndex(){return this.index}getNextToken(e="."){if(this._skipSpaces(),this.textLength===this.index)return this.token.type="EOT",this.token;if(u.isDigit(this.text[this.index]))return this.token.type="num",this.token.value=this._getNumber(e),this.token;switch(this.token.type="Error",this.text[this.index]){case"+":this.token.type="+";break;case"-":this.token.type="-";break;case"*":this.token.type="*";break;case"/":this.token.type="/";break;case"(":this.token.type="(";break;case")":this.token.type=")";break}if(this.token.type!=="Error")this.token.symbol=this.text[this.index],this.index++;else throw new Error(`Unexpected token '${this.token.symbol}' at position '${this.token.index}' in the token function`);return this.token}_getNumber(e){this._skipSpaces();const t=this.index;for(;this.index<=this.textLength&&u.isDigit(this.text[this.index]);)this.index++;for(this.text[this.index]===e&&this.index++;this.index<=this.textLength&&u.isDigit(this.text[this.index]);)this.index++;if(this.index===t)throw new Error("No number has been found while it was expected");return this.text.substring(t,this.index).replace(e,".")}}class Ew{constructor(e,t="."){return this.text=e,this.decimalCharacter=t,this.lexer=new Sw(e),this.token=this.lexer.getNextToken(this.decimalCharacter),this._exp()}_exp(){const e=this._term(),t=this._moreExp();return Gt.createNode("op_+",e,t)}_moreExp(){let e,t;switch(this.token.type){case"+":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._term(),t=this._moreExp(),Gt.createNode("op_+",t,e);case"-":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._term(),t=this._moreExp(),Gt.createNode("op_-",t,e)}return Gt.createLeaf(0)}_term(){const e=this._factor(),t=this._moreTerms();return Gt.createNode("op_*",e,t)}_moreTerms(){let e,t;switch(this.token.type){case"*":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._factor(),t=this._moreTerms(),Gt.createNode("op_*",t,e);case"/":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._factor(),t=this._moreTerms(),Gt.createNode("op_/",t,e)}return Gt.createLeaf(1)}_factor(){let e,t,n;switch(this.token.type){case"num":return n=this.token.value,this.token=this.lexer.getNextToken(this.decimalCharacter),Gt.createLeaf(n);case"-":return this.token=this.lexer.getNextToken(this.decimalCharacter),t=this._factor(),Gt.createUnaryNode(t);case"(":return this.token=this.lexer.getNextToken(this.decimalCharacter),e=this._exp(),this._match(")"),e;default:throw new Error(`Unexpected token '${this.token.symbol}' with type '${this.token.type}' at position '${this.token.index}' in the factor function`)}}_match(e){const t=this.lexer.getIndex()-1;if(this.text[t]===e)this.token=this.lexer.getNextToken(this.decimalCharacter);else throw new Error(`Unexpected token '${this.token.symbol}' at position '${t}' in the match function`)}}/**
 *               AutoNumeric.js
 *
 * @version      4.10.8
 * @date         2025-03-03 UTC 08:10
 *
 * @authors      2016-2025 Alexandre Bonneau <alexandre.bonneau@linuxfr.eu>
 *               2009-2016 Bob Knothe <bob.knothe@gmail.com>
 * @contributors Sokolov Yura and others, cf. AUTHORS
 * @copyright    Alexandre Bonneau & Robert J. Knothe
 * @since        2009-08-09
 *
 * @summary      AutoNumeric is a standalone Javascript library
 *               that provides live *as-you-type* formatting for
 *               international numbers and currencies.
 *
 * @link         http://autonumeric.org
 * @docs         https://docs.autonumeric.org
 *
 *               Note : Some functions are borrowed from big.js
 * @see          https://github.com/MikeMcl/big.js/
 *
 * Please report any bugs to https://github.com/autoNumeric/autoNumeric
 *
 * @license      Released under the MIT License
 * @link         http://www.opensource.org/licenses/mit-license.php
 *
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sub license, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */class g{static options;static events;static defaultSettings;static predefinedOptions;static version(){return"4.10.8"}constructor(e=null,t=null,n=null){const{domElement:s,initialValue:r,userOptions:o}=g._setArgumentsValues(e,t,n);if(this.domElement=s,this.defaultRawValue="",this._setSettings(o,!1),this._checkElement(),this.savedCancellableValue=null,this.historyTable=[],this.historyTableIndex=-1,this.onGoingRedo=!1,this.parentForm=this._getParentForm(),!this.runOnce&&this.settings.formatOnPageLoad)this._formatDefaultValueOnPageLoad(r);else{let a;if(u.isNull(r))switch(this.settings.emptyInputBehavior){case g.options.emptyInputBehavior.min:a=this.settings.minimumValue;break;case g.options.emptyInputBehavior.max:a=this.settings.maximumValue;break;case g.options.emptyInputBehavior.zero:a="0";break;case g.options.emptyInputBehavior.focus:case g.options.emptyInputBehavior.press:case g.options.emptyInputBehavior.always:a="";break;case g.options.emptyInputBehavior.null:a=null;break;default:a=this.settings.emptyInputBehavior}else a=r;this._setElementAndRawValue(a)}this.runOnce=!0,this.hasEventListeners=!1,(this.isInputElement||this.isContentEditable)&&(this.settings.noEventListeners||this._createEventListeners(),this._setWritePermissions(!0)),this._saveInitialValues(r),this.storageNamePrefix="AUTO_",this._setPersistentStorageName(),this.validState=!0,this.isFocused=!1,this.isWheelEvent=!1,this.isDropEvent=!1,this.isEditing=!1,this.rawValueOnFocus=void 0,this.internalModification=!1,this.attributeToWatch=this._getAttributeToWatch(),this.getterSetter=Object.getOwnPropertyDescriptor(this.domElement.__proto__,this.attributeToWatch),this._addWatcher(),this.settings.createLocalList&&this._createLocalList(),this.constructor._addToGlobalList(this),this.global={set:(a,l=null)=>{this.autoNumericLocalList.forEach(p=>{p.set(a,l)})},setUnformatted:(a,l=null)=>{this.autoNumericLocalList.forEach(p=>{p.setUnformatted(a,l)})},get:(a=null)=>{const l=[];return this.autoNumericLocalList.forEach(p=>{l.push(p.get())}),this._executeCallback(l,a),l},getNumericString:(a=null)=>{const l=[];return this.autoNumericLocalList.forEach(p=>{l.push(p.getNumericString())}),this._executeCallback(l,a),l},getFormatted:(a=null)=>{const l=[];return this.autoNumericLocalList.forEach(p=>{l.push(p.getFormatted())}),this._executeCallback(l,a),l},getNumber:(a=null)=>{const l=[];return this.autoNumericLocalList.forEach(p=>{l.push(p.getNumber())}),this._executeCallback(l,a),l},getLocalized:(a=null)=>{const l=[];return this.autoNumericLocalList.forEach(p=>{l.push(p.getLocalized())}),this._executeCallback(l,a),l},reformat:()=>{this.autoNumericLocalList.forEach(a=>{a.reformat()})},unformat:()=>{this.autoNumericLocalList.forEach(a=>{a.unformat()})},unformatLocalized:(a=null)=>{this.autoNumericLocalList.forEach(l=>{l.unformatLocalized(a)})},update:(...a)=>{this.autoNumericLocalList.forEach(l=>{l.update(...a)})},isPristine:(a=!0)=>{let l=!0;return this.autoNumericLocalList.forEach(p=>{l&&!p.isPristine(a)&&(l=!1)}),l},clear:(a=!1)=>{this.autoNumericLocalList.forEach(l=>{l.clear(a)})},remove:()=>{this.autoNumericLocalList.forEach(a=>{a.remove()})},wipe:()=>{this.autoNumericLocalList.forEach(a=>{a.wipe()})},nuke:()=>{this.autoNumericLocalList.forEach(a=>{a.nuke()})},has:a=>{let l;return a instanceof g?l=this.autoNumericLocalList.has(a.node()):l=this.autoNumericLocalList.has(a),l},addObject:a=>{let l,p;a instanceof g?(l=a.node(),p=a):(l=a,p=g.getAutoNumericElement(l)),this._hasLocalList()||this._createLocalList();let h=p._getLocalList();h.size===0&&(p._createLocalList(),h=p._getLocalList());let b;h instanceof Map?b=u.mergeMaps(this._getLocalList(),h):(this._addToLocalList(l,p),b=this._getLocalList()),b.forEach(k=>{k._setLocalList(b)})},removeObject:(a,l=!1)=>{let p,h;a instanceof g?(p=a.node(),h=a):(p=a,h=g.getAutoNumericElement(p));const b=this.autoNumericLocalList;this.autoNumericLocalList.delete(p),b.forEach(k=>{k._setLocalList(this.autoNumericLocalList)}),!l&&p===this.node()?h._setLocalList(new Map):h._createLocalList()},empty:(a=!1)=>{this.autoNumericLocalList.forEach(p=>{a?p._createLocalList():p._setLocalList(new Map)})},elements:()=>{const a=[];return this.autoNumericLocalList.forEach(l=>{a.push(l.node())}),a},getList:()=>this.autoNumericLocalList,size:()=>this.autoNumericLocalList.size},this.options={reset:()=>(this.settings={rawValue:this.defaultRawValue},this.update(g.defaultSettings),this),allowDecimalPadding:a=>(this.update({allowDecimalPadding:a}),this),alwaysAllowDecimalCharacter:a=>(this.update({alwaysAllowDecimalCharacter:a}),this),caretPositionOnFocus:a=>(this.settings.caretPositionOnFocus=a,this),createLocalList:a=>(this.settings.createLocalList=a,this.settings.createLocalList?this._hasLocalList()||this._createLocalList():this._deleteLocalList(),this),currencySymbol:a=>(this.update({currencySymbol:a}),this),currencySymbolPlacement:a=>(this.update({currencySymbolPlacement:a}),this),decimalCharacter:a=>(this.update({decimalCharacter:a}),this),decimalCharacterAlternative:a=>(this.settings.decimalCharacterAlternative=a,this),decimalPlaces:a=>(u.warning("Using `options.decimalPlaces()` instead of calling the specific `options.decimalPlacesRawValue()`, `options.decimalPlacesShownOnFocus()` and `options.decimalPlacesShownOnBlur()` methods will reset those options.\nPlease call the specific methods if you do not want to reset those.",this.settings.showWarnings),this.update({decimalPlaces:a}),this),decimalPlacesRawValue:a=>(this.update({decimalPlacesRawValue:a}),this),decimalPlacesShownOnBlur:a=>(this.update({decimalPlacesShownOnBlur:a}),this),decimalPlacesShownOnFocus:a=>(this.update({decimalPlacesShownOnFocus:a}),this),defaultValueOverride:a=>(this.update({defaultValueOverride:a}),this),digitalGroupSpacing:a=>(this.update({digitalGroupSpacing:a}),this),digitGroupSeparator:a=>(this.update({digitGroupSeparator:a}),this),divisorWhenUnfocused:a=>(this.update({divisorWhenUnfocused:a}),this),emptyInputBehavior:a=>(this.rawValue===null&&a!==g.options.emptyInputBehavior.null&&(u.warning(`You are trying to modify the \`emptyInputBehavior\` option to something different than \`'null'\` (${a}), but the element raw value is currently set to \`null\`. This would result in an invalid \`rawValue\`. In order to fix that, the element value has been changed to the empty string \`''\`.`,this.settings.showWarnings),this.rawValue=""),this.update({emptyInputBehavior:a}),this),eventBubbles:a=>(this.settings.eventBubbles=a,this),eventIsCancelable:a=>(this.settings.eventIsCancelable=a,this),failOnUnknownOption:a=>(this.settings.failOnUnknownOption=a,this),formatOnPageLoad:a=>(this.settings.formatOnPageLoad=a,this),formulaMode:a=>(this.settings.formulaMode=a,this),historySize:a=>(this.settings.historySize=a,this),invalidClass:a=>(this.settings.invalidClass=a,this),isCancellable:a=>(this.settings.isCancellable=a,this),leadingZero:a=>(this.update({leadingZero:a}),this),maximumValue:a=>(this.update({maximumValue:a}),this),minimumValue:a=>(this.update({minimumValue:a}),this),modifyValueOnUpDownArrow:a=>(this.settings.modifyValueOnUpDownArrow=a,this),modifyValueOnWheel:a=>(this.settings.modifyValueOnWheel=a,this),negativeBracketsTypeOnBlur:a=>(this.update({negativeBracketsTypeOnBlur:a}),this),negativePositiveSignPlacement:a=>(this.update({negativePositiveSignPlacement:a}),this),negativeSignCharacter:a=>(this.update({negativeSignCharacter:a}),this),negativePositiveSignBehavior:a=>(this.settings.negativePositiveSignBehavior=a,this),noEventListeners:a=>(a===g.options.noEventListeners.noEvents&&this.settings.noEventListeners===g.options.noEventListeners.addEvents&&this._removeEventListeners(),this.update({noEventListeners:a}),this),onInvalidPaste:a=>(this.settings.onInvalidPaste=a,this),outputFormat:a=>(this.settings.outputFormat=a,this),overrideMinMaxLimits:a=>(this.update({overrideMinMaxLimits:a}),this),positiveSignCharacter:a=>(this.update({positiveSignCharacter:a}),this),rawValueDivisor:a=>(this.update({rawValueDivisor:a}),this),readOnly:a=>(this.settings.readOnly=a,this._setWritePermissions(),this),roundingMethod:a=>(this.update({roundingMethod:a}),this),saveValueToSessionStorage:a=>(this.update({saveValueToSessionStorage:a}),this),symbolWhenUnfocused:a=>(this.update({symbolWhenUnfocused:a}),this),selectNumberOnly:a=>(this.settings.selectNumberOnly=a,this),selectOnFocus:a=>(this.settings.selectOnFocus=a,this),serializeSpaces:a=>(this.settings.serializeSpaces=a,this),showOnlyNumbersOnFocus:a=>(this.update({showOnlyNumbersOnFocus:a}),this),showPositiveSign:a=>(this.update({showPositiveSign:a}),this),showWarnings:a=>(this.settings.showWarnings=a,this),styleRules:a=>(this.update({styleRules:a}),this),suffixText:a=>(this.update({suffixText:a}),this),unformatOnHover:a=>(this.settings.unformatOnHover=a,this),unformatOnSubmit:a=>(this.settings.unformatOnSubmit=a,this),upDownStep:a=>(this.settings.upDownStep=a,this),valuesToStrings:a=>(this.update({valuesToStrings:a}),this),watchExternalChanges:a=>(this.update({watchExternalChanges:a}),this),wheelOn:a=>(this.settings.wheelOn=a,this),wheelStep:a=>(this.settings.wheelStep=a,this)},this._triggerEvent(g.events.initialized,this.domElement,{newValue:u.getElementValue(this.domElement),newRawValue:this.rawValue,error:null,aNElement:this})}static _setArgumentsValues(e,t,n){u.isNull(e)&&u.throwError("At least one valid parameter is needed in order to initialize an AutoNumeric object");const s=u.isElement(e),r=u.isString(e),o=u.isObject(t),a=Array.isArray(t)&&t.length>0,l=u.isNumberOrArabic(t)||t==="",p=this._isPreDefinedOptionValid(t),h=u.isNull(t),b=u.isEmptyString(t),k=u.isObject(n),_=Array.isArray(n)&&n.length>0,x=u.isNull(n),C=this._isPreDefinedOptionValid(n);let A,B,D;return s&&h&&x?(A=e,D=null,B=null):s&&l&&x?(A=e,D=t,B=null):s&&o&&x?(A=e,D=null,B=t):s&&p&&x?(A=e,D=null,B=this._getOptionObject(t)):s&&a&&x?(A=e,D=null,B=this.mergeOptions(t)):s&&(h||b)&&k?(A=e,D=null,B=n):s&&(h||b)&&_?(A=e,D=null,B=this.mergeOptions(n)):r&&h&&x?(A=document.querySelector(e),D=null,B=null):r&&o&&x?(A=document.querySelector(e),D=null,B=t):r&&p&&x?(A=document.querySelector(e),D=null,B=this._getOptionObject(t)):r&&a&&x?(A=document.querySelector(e),D=null,B=this.mergeOptions(t)):r&&(h||b)&&k?(A=document.querySelector(e),D=null,B=n):r&&(h||b)&&_?(A=document.querySelector(e),D=null,B=this.mergeOptions(n)):r&&l&&x?(A=document.querySelector(e),D=t,B=null):r&&l&&k?(A=document.querySelector(e),D=t,B=n):r&&l&&C?(A=document.querySelector(e),D=t,B=this._getOptionObject(n)):r&&l&&_?(A=document.querySelector(e),D=t,B=this.mergeOptions(n)):s&&l&&k?(A=e,D=t,B=n):s&&l&&C?(A=e,D=t,B=this._getOptionObject(n)):s&&l&&_?(A=e,D=t,B=this.mergeOptions(n)):u.throwError(`The parameters given to the AutoNumeric object are not valid, '${e}', '${t}' and '${n}' given.`),u.isNull(A)&&u.throwError(`The selector '${e}' did not select any valid DOM element. Please check on which element you called AutoNumeric.`),{domElement:A,initialValue:D,userOptions:B}}static mergeOptions(e){const t={};return e.forEach(n=>{Object.assign(t,this._getOptionObject(n))}),t}static _isPreDefinedOptionValid(e){return Object.prototype.hasOwnProperty.call(g.predefinedOptions,e)}static _getOptionObject(e){let t;return u.isString(e)?(t=g.getPredefinedOptions()[e],t==null&&u.warning(`The given pre-defined option [${e}] is not recognized by autoNumeric. Please check that pre-defined option name.`,!0)):t=e,t}_saveInitialValues(e){this.initialValueHtmlAttribute=u.scientificToDecimal(this.domElement.getAttribute("value")),u.isNull(this.initialValueHtmlAttribute)&&(this.initialValueHtmlAttribute=""),this.initialValue=e,u.isNull(this.initialValue)&&(this.initialValue="")}_createEventListeners(){this.formulaMode=!1,this.compositioning=!1,this._onFocusInFunc=e=>{this._onFocusIn(e)},this._onFocusInAndMouseEnterFunc=e=>{this._onFocusInAndMouseEnter(e)},this._onFocusFunc=()=>{this._onFocus()},this._onKeydownFunc=e=>{this._onKeydown(e)},this._onKeypressFunc=e=>{this._onKeypress(e)},this._onKeyupFunc=e=>{this._onKeyup(e)},this._onFocusOutAndMouseLeaveFunc=e=>{this._onFocusOutAndMouseLeave(e)},this._onPasteFunc=e=>{this._onPaste(e)},this._onWheelFunc=e=>{this._onWheel(e)},this._onDropFunc=e=>{this._onDrop(e)},this._onKeydownGlobalFunc=e=>{this._onKeydownGlobal(e)},this._onKeyupGlobalFunc=e=>{this._onKeyupGlobal(e)},this._onCompositionstartFunc=e=>{this._onCompositionstart(e)},this._onCompositionendFunc=e=>{this._onCompositionend(e)},this.domElement.addEventListener("focusin",this._onFocusInFunc,!1),this.domElement.addEventListener("focus",this._onFocusInAndMouseEnterFunc,!1),this.domElement.addEventListener("focus",this._onFocusFunc,!1),this.domElement.addEventListener("mouseenter",this._onFocusInAndMouseEnterFunc,!1),this.domElement.addEventListener("keydown",this._onKeydownFunc,!1),this.domElement.addEventListener("keypress",this._onKeypressFunc,!1),this.domElement.addEventListener("keyup",this._onKeyupFunc,!1),this.domElement.addEventListener("blur",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.addEventListener("mouseleave",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.addEventListener("paste",this._onPasteFunc,!1),this.domElement.addEventListener("wheel",this._onWheelFunc,!1),this.domElement.addEventListener("drop",this._onDropFunc,!1),this.domElement.addEventListener("compositionstart",this._onCompositionstartFunc,!1),this.domElement.addEventListener("compositionend",this._onCompositionendFunc,!1),this._setupFormListener(),this.hasEventListeners=!0,g._doesGlobalListExists()||(document.addEventListener("keydown",this._onKeydownGlobalFunc,!1),document.addEventListener("keyup",this._onKeyupGlobalFunc,!1))}_removeEventListeners(){this.domElement.removeEventListener("focusin",this._onFocusInFunc,!1),this.domElement.removeEventListener("focus",this._onFocusInAndMouseEnterFunc,!1),this.domElement.removeEventListener("focus",this._onFocusFunc,!1),this.domElement.removeEventListener("mouseenter",this._onFocusInAndMouseEnterFunc,!1),this.domElement.removeEventListener("blur",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.removeEventListener("mouseleave",this._onFocusOutAndMouseLeaveFunc,!1),this.domElement.removeEventListener("keydown",this._onKeydownFunc,!1),this.domElement.removeEventListener("keypress",this._onKeypressFunc,!1),this.domElement.removeEventListener("keyup",this._onKeyupFunc,!1),this.domElement.removeEventListener("paste",this._onPasteFunc,!1),this.domElement.removeEventListener("wheel",this._onWheelFunc,!1),this.domElement.removeEventListener("drop",this._onDropFunc,!1),this.domElement.removeEventListener("compositionstart",this._onCompositionstartFunc,!1),this.domElement.removeEventListener("compositionend",this._onCompositionendFunc,!1),this._removeFormListener(),this.hasEventListeners=!1,document.removeEventListener("keydown",this._onKeydownGlobalFunc,!1),document.removeEventListener("keyup",this._onKeyupGlobalFunc,!1)}_updateEventListeners(){!this.settings.noEventListeners&&!this.hasEventListeners&&this._createEventListeners(),this.settings.noEventListeners&&this.hasEventListeners&&this._removeEventListeners()}_setupFormListener(){u.isNull(this.parentForm)||(this._onFormSubmitFunc=()=>{this._onFormSubmit()},this._onFormResetFunc=()=>{this._onFormReset()},this._hasParentFormCounter()?this._incrementParentFormCounter():(this._initializeFormCounterToOne(),this.parentForm.addEventListener("submit",this._onFormSubmitFunc,!1),this.parentForm.addEventListener("reset",this._onFormResetFunc,!1),this._storeFormHandlerFunction()))}_removeFormListener(){if(!u.isNull(this.parentForm)){const e=this._getParentFormCounter();e===1?(this.parentForm.removeEventListener("submit",this._getFormHandlerFunction().submitFn,!1),this.parentForm.removeEventListener("reset",this._getFormHandlerFunction().resetFn,!1),this._removeFormDataSetInfo()):e>1?this._decrementParentFormCounter():u.throwError("The AutoNumeric object count on the form is incoherent.")}}_hasParentFormCounter(){return"anCount"in this.parentForm.dataset}_getParentFormCounter(){return Number(this.parentForm.dataset.anCount)}_initializeFormCounterToOne(e=null){this._getFormElement(e).dataset.anCount=1}_incrementParentFormCounter(e=null){this._getFormElement(e).dataset.anCount++}_decrementParentFormCounter(){this.parentForm.dataset.anCount--}static _doesFormHandlerListExists(){const e=typeof window.aNFormHandlerMap;return e!=="undefined"&&e==="object"}static _createFormHandlerList(){window.aNFormHandlerMap=new Map}_hasFormHandlerFunction(e=null){return"anFormHandler"in this._getFormElement(e).dataset}_getFormElement(e=null){let t;return u.isNull(e)?t=this.parentForm:t=e,t}_storeFormHandlerFunction(e=null){this.constructor._doesFormHandlerListExists()||this.constructor._createFormHandlerList();const t=u.randomString();this._getFormElement(e).dataset.anFormHandler=t,window.aNFormHandlerMap.set(t,{submitFn:this._onFormSubmitFunc,resetFn:this._onFormResetFunc})}_getFormHandlerKey(){this._hasFormHandlerFunction()||u.throwError("Unable to retrieve the form handler name");const e=this.parentForm.dataset.anFormHandler;return e===""&&u.throwError("The form handler name is invalid"),e}_getFormHandlerFunction(){const e=this._getFormHandlerKey();return window.aNFormHandlerMap.get(e)}_removeFormDataSetInfo(){this._decrementParentFormCounter(),window.aNFormHandlerMap.delete(this._getFormHandlerKey()),this.parentForm.removeAttribute("data-an-count"),this.parentForm.removeAttribute("data-an-form-handler")}_setWritePermissions(e=!1){e&&this.domElement.readOnly||this.settings.readOnly?this._setReadOnly():this._setReadWrite()}_setReadOnly(){this.isInputElement?this.domElement.readOnly=!0:this.domElement.setAttribute("contenteditable",!1)}_setReadWrite(){this.isInputElement?this.domElement.readOnly=!1:this.domElement.setAttribute("contenteditable",!0)}_addWatcher(){if(!u.isUndefined(this.getterSetter)){const{set:e,get:t}=this.getterSetter;Object.defineProperty(this.domElement,this.attributeToWatch,{configurable:!0,get:()=>t.call(this.domElement),set:n=>{e.call(this.domElement,n),this.settings.watchExternalChanges&&!this.internalModification&&this.set(n)}})}}_removeWatcher(){if(!u.isUndefined(this.getterSetter)){const{set:e,get:t}=this.getterSetter;Object.defineProperty(this.domElement,this.attributeToWatch,{configurable:!0,get:()=>t.call(this.domElement),set:n=>{e.call(this.domElement,n)}})}}_getAttributeToWatch(){let e;if(this.isInputElement)e="value";else{const t=this.domElement.nodeType;t===Node.ELEMENT_NODE||t===Node.DOCUMENT_NODE||t===Node.DOCUMENT_FRAGMENT_NODE?e="textContent":t===Node.TEXT_NODE&&(e="nodeValue")}return e}_historyTableAdd(){const e=this.historyTable.length===0;if(e||this.rawValue!==this._historyTableCurrentValueUsed()){let t=!0;if(!e){const n=this.historyTableIndex+1;n<this.historyTable.length&&this.rawValue===this.historyTable[n].value?t=!1:u.arrayTrim(this.historyTable,this.historyTableIndex+1)}if(this.historyTableIndex++,t){const n=u.getElementSelection(this.domElement);this.selectionStart=n.start,this.selectionEnd=n.end,this.historyTable.push({value:this.rawValue,start:this.selectionStart+1,end:this.selectionEnd+1}),this.historyTable.length>1&&(this.historyTable[this.historyTableIndex-1].start=this.selectionStart,this.historyTable[this.historyTableIndex-1].end=this.selectionEnd)}this.historyTable.length>this.settings.historySize&&this._historyTableForget()}}_historyTableUndoOrRedo(e=!0){let t;if(e?(t=this.historyTableIndex>0,t&&this.historyTableIndex--):(t=this.historyTableIndex+1<this.historyTable.length,t&&this.historyTableIndex++),t){const n=this.historyTable[this.historyTableIndex];this.set(n.value,null,!1),u.setElementSelection(this.domElement,n.start,n.end)}}_historyTableUndo(){this._historyTableUndoOrRedo(!0)}_historyTableRedo(){this._historyTableUndoOrRedo(!1)}_historyTableForget(e=1){const t=[];for(let n=0;n<e;n++)t.push(this.historyTable.shift()),this.historyTableIndex--,this.historyTableIndex<0&&(this.historyTableIndex=0);return t.length===1?t[0]:t}_historyTableCurrentValueUsed(){let e=this.historyTableIndex;e<0&&(e=0);let t;return u.isUndefinedOrNullOrEmpty(this.historyTable[e])?t="":t=this.historyTable[e].value,t}_parseStyleRules(){u.isUndefinedOrNullOrEmpty(this.settings.styleRules)||this.rawValue===""||(u.isUndefinedOrNullOrEmpty(this.settings.styleRules.positive)||(this.rawValue>=0?this._addCSSClass(this.settings.styleRules.positive):this._removeCSSClass(this.settings.styleRules.positive)),u.isUndefinedOrNullOrEmpty(this.settings.styleRules.negative)||(this.rawValue<0?this._addCSSClass(this.settings.styleRules.negative):this._removeCSSClass(this.settings.styleRules.negative)),!u.isUndefinedOrNullOrEmpty(this.settings.styleRules.ranges)&&this.settings.styleRules.ranges.length!==0&&this.settings.styleRules.ranges.forEach(e=>{this.rawValue>=e.min&&this.rawValue<e.max?this._addCSSClass(e.class):this._removeCSSClass(e.class)}),!u.isUndefinedOrNullOrEmpty(this.settings.styleRules.userDefined)&&this.settings.styleRules.userDefined.length!==0&&this.settings.styleRules.userDefined.forEach(e=>{if(u.isFunction(e.callback))if(u.isString(e.classes))e.callback(this.rawValue)?this._addCSSClass(e.classes):this._removeCSSClass(e.classes);else if(u.isArray(e.classes))if(e.classes.length===2)e.callback(this.rawValue)?(this._addCSSClass(e.classes[0]),this._removeCSSClass(e.classes[1])):(this._removeCSSClass(e.classes[0]),this._addCSSClass(e.classes[1]));else if(e.classes.length>2){const t=e.callback(this.rawValue);u.isArray(t)?e.classes.forEach((n,s)=>{u.isInArray(s,t)?this._addCSSClass(n):this._removeCSSClass(n)}):u.isInt(t)?e.classes.forEach((n,s)=>{s===t?this._addCSSClass(n):this._removeCSSClass(n)}):u.isNull(t)?e.classes.forEach(n=>{this._removeCSSClass(n)}):u.throwError(`The callback result is not an array nor a valid array index, ${typeof t} given.`)}else u.throwError("The classes attribute is not valid for the `styleRules` option.");else u.isUndefinedOrNullOrEmpty(e.classes)?e.callback(this):u.throwError("The callback/classes structure is not valid for the `styleRules` option.");else u.warning(`The given \`styleRules\` callback is not a function, ${typeof e.callback} given.`,this.settings.showWarnings)}))}_addCSSClass(e){this.domElement.classList.add(e)}_removeCSSClass(e){this.domElement.classList.remove(e)}update(...e){Array.isArray(e)&&Array.isArray(e[0])&&(e=e[0]);const t=u.cloneObject(this.settings),n=this.rawValue;let s={};u.isUndefinedOrNullOrEmpty(e)||e.length===0?s=null:e.length>=1&&e.forEach(r=>{this.constructor._isPreDefinedOptionValid(r)&&(r=this.constructor._getOptionObject(r)),Object.assign(s,r)});try{this._setSettings(s,!0),this._setWritePermissions(),this._updateEventListeners(),this.set(n)}catch(r){return this._setSettings(t,!0),u.throwError(`Unable to update the settings, those are invalid: [${r}]`),this}return this}getSettings(){return this.settings}set(e,t=null,n=!0){if(u.isUndefined(e))return u.warning("You are trying to set an 'undefined' value ; an error could have occurred.",this.settings.showWarnings),this;if(u.isNull(t)||this._setSettings(t,!0),e===null&&this.settings.emptyInputBehavior!==g.options.emptyInputBehavior.null)return u.warning(`You are trying to set the \`null\` value while the \`emptyInputBehavior\` option is set to ${this.settings.emptyInputBehavior}. If you want to be able to set the \`null\` value, you need to change the 'emptyInputBehavior' option to \`'null'\`.`,this.settings.showWarnings),this;let s;if(e===null)return this._setElementAndRawValue(null,null,n),this._saveValueToPersistentStorage(),this;if(s=this.constructor._toNumericValue(e,this.settings),isNaN(Number(s)))return u.warning("The value you are trying to set results in `NaN`. The element value is set to the empty string instead.",this.settings.showWarnings),this.setValue("",n),this;if(s==="")switch(this.settings.emptyInputBehavior){case g.options.emptyInputBehavior.zero:s=0;break;case g.options.emptyInputBehavior.min:s=this.settings.minimumValue;break;case g.options.emptyInputBehavior.max:s=this.settings.maximumValue;break;default:u.isNumber(this.settings.emptyInputBehavior)&&(s=Number(this.settings.emptyInputBehavior))}if(s!==""){const[r,o]=this.constructor._checkIfInRangeWithOverrideOption(s,this.settings);if(r&&o&&this.settings.valuesToStrings&&this._checkValuesToStrings(s))return this._setElementAndRawValue(this.settings.valuesToStrings[s],s,n),this._saveValueToPersistentStorage(),this;if(u.isZeroOrHasNoValue(s)&&(s="0"),r&&o){let l=this.constructor._roundRawValue(s,this.settings);return l=this._trimLeadingAndTrailingZeros(l.replace(this.settings.decimalCharacter,".")),s=this._getRawValueToFormat(s),this.isFocused?s=this.constructor._roundFormattedValueShownOnFocus(s,this.settings):(this.settings.divisorWhenUnfocused&&(s=s/this.settings.divisorWhenUnfocused,s=s.toString()),s=this.constructor._roundFormattedValueShownOnBlur(s,this.settings)),s=this.constructor._modifyNegativeSignAndDecimalCharacterForFormattedValue(s,this.settings),s=this.constructor._addGroupSeparators(s,this.settings,this.isFocused,this.rawValue,l),!this.isFocused&&this.settings.symbolWhenUnfocused&&(s=`${s}${this.settings.symbolWhenUnfocused}`),(this.settings.decimalPlacesShownOnFocus||this.settings.divisorWhenUnfocused)&&this._saveValueToPersistentStorage(),this._setElementAndRawValue(s,l,n),this._setValidOrInvalidState(l),this}else return this._triggerRangeEvents(r,o),u.throwError(`The value [${s}] being set falls outside of the minimumValue [${this.settings.minimumValue}] and maximumValue [${this.settings.maximumValue}] range set for this element`),this._removeValueFromPersistentStorage(),this.setValue("",n),this}else{let r;return this.settings.emptyInputBehavior===g.options.emptyInputBehavior.always?r=this.settings.currencySymbol:r="",this._setElementAndRawValue(r,"",n),this}}setUnformatted(e,t=null){if(e===null||u.isUndefined(e))return this;u.isNull(t)||this._setSettings(t,!0);const n=this.constructor._removeBrackets(e,this.settings),s=this.constructor._stripAllNonNumberCharacters(n,this.settings,!0,this.isFocused);return u.isNumber(s)||u.throwError("The value is not a valid one, it's not a numeric string nor a recognized currency."),this.constructor._isWithinRangeWithOverrideOption(s,this.settings)?this.setValue(e):u.throwError(`The value is out of the range limits [${this.settings.minimumValue}, ${this.settings.maximumValue}].`),this}setValue(e,t=!0){return this._setElementAndRawValue(e,t),this}_setRawValue(e,t=!0){if(this.rawValue!==e){const n=this.rawValue;this.rawValue=e,!u.isNull(this.settings.rawValueDivisor)&&this.settings.rawValueDivisor!==0&&e!==""&&e!==null&&this._isUserManuallyEditingTheValue()&&(this.rawValue/=this.settings.rawValueDivisor),this._triggerEvent(g.events.rawValueModified,this.domElement,{oldRawValue:n,newRawValue:this.rawValue,isPristine:this.isPristine(!0),error:null,aNElement:this}),this._parseStyleRules(),t&&window.requestAnimationFrame(()=>this._historyTableAdd())}}_setElementValue(e,t=!0){const n=u.getElementValue(this.domElement);return e!==n&&(this.internalModification=!0,u.setElementValue(this.domElement,e),this.internalModification=!1,t&&this._triggerEvent(g.events.formatted,this.domElement,{oldValue:n,newValue:e,oldRawValue:this.rawValue,newRawValue:this.rawValue,isPristine:this.isPristine(!1),error:null,aNElement:this})),this}_setElementAndRawValue(e,t=null,n=!0){return u.isNull(t)?t=e:u.isBoolean(t)&&(n=t,t=e),this._setElementValue(e),this._setRawValue(t,n),this}_getRawValueToFormat(e){let t;return!u.isNull(this.settings.rawValueDivisor)&&this.settings.rawValueDivisor!==0&&e!==""&&e!==null?t=e*this.settings.rawValueDivisor:t=e,t}_checkValuesToStrings(e){return this.constructor._checkValuesToStringsArray(e,this.valuesToStringsKeys)}static _checkValuesToStringsArray(e,t){return u.isInArray(String(e),t)}static _checkValuesToStringsSettings(e,t){return this._checkValuesToStringsArray(e,Object.keys(t.valuesToStrings))}static _checkStringsToValuesSettings(e,t){return this._checkValuesToStringsArray(e,Object.values(t.valuesToStrings))}_isUserManuallyEditingTheValue(){return this.isFocused&&this.isEditing||this.isDropEvent}_executeCallback(e,t){!u.isNull(t)&&u.isFunction(t)&&t(e,this)}_triggerEvent(e,t=document,n=null){u.triggerEvent(e,t,n,this.settings.eventBubbles,this.settings.eventIsCancelable)}get(e=null){return this.getNumericString(e)}getNumericString(e=null){let t;return u.isNull(this.rawValue)?t=null:t=u.trimPaddedZerosFromDecimalPlaces(this.rawValue),this._executeCallback(t,e),t}getFormatted(e=null){"value"in this.domElement||"textContent"in this.domElement||u.throwError("Unable to get the formatted string from the element.");const t=u.getElementValue(this.domElement);return this._executeCallback(t,e),t}getNumber(e=null){let t;return this.rawValue===null?t=null:t=this.constructor._toLocale(this.getNumericString(),"number",this.settings),this._executeCallback(t,e),t}getLocalized(e=null,t=null){u.isFunction(e)&&u.isNull(t)&&(t=e,e=null);let n;u.isEmptyString(this.rawValue)?n="":n=""+Number(this.rawValue),n!==""&&Number(n)===0&&this.settings.leadingZero!==g.options.leadingZero.keep&&(n="0");let s;u.isNull(e)?s=this.settings.outputFormat:s=e;const r=this.constructor._toLocale(n,s,this.settings);return this._executeCallback(r,t),r}reformat(){return this.set(this.rawValue),this}unformat(){return this._setElementValue(this.getNumericString()),this}unformatLocalized(e=null){return this._setElementValue(this.getLocalized(e)),this}isPristine(e=!0){let t;return e?t=this.initialValue===this.getNumericString():t=this.initialValueHtmlAttribute===this.getFormatted(),t}select(){return this.settings.selectNumberOnly?this.selectNumber():this._defaultSelectAll(),this}_defaultSelectAll(){u.setElementSelection(this.domElement,0,u.getElementValue(this.domElement).length)}selectNumber(){const e=u.getElementValue(this.domElement),t=e.length,n=this.settings.currencySymbol.length,s=this.settings.currencySymbolPlacement,r=u.isNegative(e,this.settings.negativeSignCharacter)?1:0,o=this.settings.suffixText.length;let a;s===g.options.currencySymbolPlacement.suffix?a=0:this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.left&&r===1&&n>0?a=n+1:a=n;let l;if(s===g.options.currencySymbolPlacement.prefix)l=t-o;else switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.left:l=t-(o+n);break;case g.options.negativePositiveSignPlacement.right:n>0?l=t-(n+r+o):l=t-(n+o);break;default:l=t-(n+o)}return u.setElementSelection(this.domElement,a,l),this}selectInteger(){let e=0;const t=this.rawValue>=0;(this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix||this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix&&(this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.prefix||this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.none))&&(this.settings.showPositiveSign&&t||!t&&this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.left)&&(e=e+1),this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix&&(e=e+this.settings.currencySymbol.length);const n=u.getElementValue(this.domElement);let s=n.indexOf(this.settings.decimalCharacter);return s===-1&&(this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix?s=n.length-this.settings.currencySymbol.length:s=n.length,!t&&(this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.suffix||this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix)&&(s=s-1),s=s-this.settings.suffixText.length),u.setElementSelection(this.domElement,e,s),this}selectDecimal(){let e=u.getElementValue(this.domElement).indexOf(this.settings.decimalCharacter),t;if(e===-1)e=0,t=0;else{e=e+1;let n;this.isFocused?n=this.settings.decimalPlacesShownOnFocus:n=this.settings.decimalPlacesShownOnBlur,t=e+Number(n)}return u.setElementSelection(this.domElement,e,t),this}node(){return this.domElement}parent(){return this.domElement.parentNode}detach(e=null){let t;return u.isNull(e)?t=this.domElement:t=e.node(),this._removeFromLocalList(t),this}attach(e,t=!0){return this._addToLocalList(e.node()),t&&e.update(this.settings),this}formatOther(e,t=null){return this._formatOrUnformatOther(!0,e,t)}unformatOther(e,t=null){return this._formatOrUnformatOther(!1,e,t)}_formatOrUnformatOther(e,t,n=null){let s;u.isNull(n)?s=this.settings:s=this._cloneAndMergeSettings(n);let r;if(u.isElement(t)){const o=u.getElementValue(t);return e?r=g.format(o,s):r=g.unformat(o,s),u.setElementValue(t,r),null}return e?r=g.format(t,s):r=g.unformat(t,s),r}init(e,t=!0){let n=!1,s=[];if(u.isString(e)?s=[...document.querySelectorAll(e)]:u.isElement(e)?(s.push(e),n=!0):u.isArray(e)?s=e:u.throwError("The given parameters to the 'init' function are invalid."),s.length===0)return u.warning("No valid DOM elements were given hence no AutoNumeric object were instantiated.",!0),[];const r=this._getLocalList(),o=[];return s.forEach(a=>{const l=this.settings.createLocalList;t&&(this.settings.createLocalList=!1);const p=new g(a,u.getElementValue(a),this.settings);t&&(p._setLocalList(r),this._addToLocalList(a,p),this.settings.createLocalList=l),o.push(p)}),n?o[0]:o}clear(e=!1){if(e){const t={emptyInputBehavior:g.options.emptyInputBehavior.focus};this.set("",t)}else this.set("");return this}remove(){this._removeValueFromPersistentStorage(),this._removeEventListeners(),this._removeWatcher(),this._removeFromLocalList(this.domElement),this.constructor._removeFromGlobalList(this)}wipe(){this._setElementValue("",!1),this.remove()}nuke(){this.remove(),this.domElement.parentNode.removeChild(this.domElement)}form(e=!1){if(e||u.isUndefinedOrNullOrEmpty(this.parentForm)){const t=this._getParentForm();if(!u.isNull(t)&&t!==this.parentForm){const n=this._getFormAutoNumericChildren(this.parentForm);this.parentForm.dataset.anCount=n.length,this._hasFormHandlerFunction(t)?this._incrementParentFormCounter(t):(this._storeFormHandlerFunction(t),this._initializeFormCounterToOne(t))}this.parentForm=t}return this.parentForm}_getFormAutoNumericChildren(e){const t=[...e.elements],n=this._getContenteditableElements(e);return u.arrayUnique(t,n).filter(r=>this.constructor.isManagedByAutoNumeric(r))}_getContenteditableElements(e){if(u.isUndefinedOrNullOrEmpty(e)||!e.hasAttribute("id"))return[];const t=[...e.querySelectorAll("[contenteditable=true]")],n=[...document.querySelectorAll(`*:not(input)[form=${e.getAttribute("id")}][contenteditable=true]`)];return u.arrayUnique(t,n)}_getParentForm(){if(!u.isUndefined(this.domElement.form))return this.domElement.form;if(this.domElement.tagName.toLowerCase()==="body")return null;let e=this.domElement,t;do{if(e=e.parentNode,u.isNull(e))return null;if(e.tagName?t=e.tagName.toLowerCase():t="",t==="body")break}while(t!=="form");return t==="form"?e:null}formNumericString(){return this.constructor._serializeNumericString(this.form(),this.settings.serializeSpaces)}formFormatted(){return this.constructor._serializeFormatted(this.form(),this.settings.serializeSpaces)}formLocalized(e=null){let t;return u.isNull(e)?t=this.settings.outputFormat:t=e,this.constructor._serializeLocalized(this.form(),this.settings.serializeSpaces,t)}formArrayNumericString(){return this.constructor._serializeNumericStringArray(this.form(),this.settings.serializeSpaces)}formArrayFormatted(){return this.constructor._serializeFormattedArray(this.form(),this.settings.serializeSpaces)}formArrayLocalized(e=null){let t;return u.isNull(e)?t=this.settings.outputFormat:t=e,this.constructor._serializeLocalizedArray(this.form(),this.settings.serializeSpaces,t)}formJsonNumericString(){return JSON.stringify(this.formArrayNumericString())}formJsonFormatted(){return JSON.stringify(this.formArrayFormatted())}formJsonLocalized(e=null){return JSON.stringify(this.formArrayLocalized(e))}formUnformat(){return this.constructor._getChildANInputElement(this.form()).forEach(t=>{g.getAutoNumericElement(t).unformat()}),this}formUnformatLocalized(){return this.constructor._getChildANInputElement(this.form()).forEach(t=>{g.getAutoNumericElement(t).unformatLocalized()}),this}formReformat(){return this.constructor._getChildANInputElement(this.form()).forEach(t=>{g.getAutoNumericElement(t).reformat()}),this}formSubmitNumericString(e=null){return u.isNull(e)?(this.formUnformat(),this.form().submit(),this.formReformat()):u.isFunction(e)?e(this.formNumericString()):u.throwError("The given callback is not a function."),this}formSubmitFormatted(e=null){return u.isNull(e)?this.form().submit():u.isFunction(e)?e(this.formFormatted()):u.throwError("The given callback is not a function."),this}formSubmitLocalized(e=null,t=null){return u.isNull(t)?(this.formUnformatLocalized(),this.form().submit(),this.formReformat()):u.isFunction(t)?t(this.formLocalized(e)):u.throwError("The given callback is not a function."),this}formSubmitArrayNumericString(e){return u.isFunction(e)?e(this.formArrayNumericString()):u.throwError("The given callback is not a function."),this}formSubmitArrayFormatted(e){return u.isFunction(e)?e(this.formArrayFormatted()):u.throwError("The given callback is not a function."),this}formSubmitArrayLocalized(e,t=null){return u.isFunction(e)?e(this.formArrayLocalized(t)):u.throwError("The given callback is not a function."),this}formSubmitJsonNumericString(e){return u.isFunction(e)?e(this.formJsonNumericString()):u.throwError("The given callback is not a function."),this}formSubmitJsonFormatted(e){return u.isFunction(e)?e(this.formJsonFormatted()):u.throwError("The given callback is not a function."),this}formSubmitJsonLocalized(e,t=null){return u.isFunction(e)?e(this.formJsonLocalized(t)):u.throwError("The given callback is not a function."),this}static _unformatAltHovered(e){e.hoveredWithAlt=!0,e.unformat()}static _reformatAltHovered(e){e.hoveredWithAlt=!1,e.reformat()}static _getChildANInputElement(e){const t=e.getElementsByTagName("input"),n=[];return Array.prototype.slice.call(t,0).forEach(r=>{this.test(r)&&n.push(r)}),n}static test(e){return this._isInGlobalList(u.domElement(e))}static _createWeakMap(e){window[e]=new WeakMap}static _createGlobalList(){this.autoNumericGlobalListName="autoNumericGlobalList",this._createWeakMap(this.autoNumericGlobalListName)}static _doesGlobalListExists(){const e=typeof window[this.autoNumericGlobalListName];return e!=="undefined"&&e==="object"}static _addToGlobalList(e){this._doesGlobalListExists()||this._createGlobalList();const t=e.node();if(this._isInGlobalList(t)){if(this._getFromGlobalList(t)===this)return;u.warning("A reference to the DOM element you just initialized already exists in the global AutoNumeric element list. Please make sure to not initialize the same DOM element multiple times.",e.getSettings().showWarnings)}window[this.autoNumericGlobalListName].set(t,e)}static _removeFromGlobalList(e){this._doesGlobalListExists()&&window[this.autoNumericGlobalListName].delete(e.node())}static _getFromGlobalList(e){return this._doesGlobalListExists()?window[this.autoNumericGlobalListName].get(e):null}static _isInGlobalList(e){return this._doesGlobalListExists()?window[this.autoNumericGlobalListName].has(e):!1}_createLocalList(){this.autoNumericLocalList=new Map,this._addToLocalList(this.domElement)}_deleteLocalList(){delete this.autoNumericLocalList}_setLocalList(e){this.autoNumericLocalList=e}_getLocalList(){return this.autoNumericLocalList}_hasLocalList(){return this.autoNumericLocalList instanceof Map&&this.autoNumericLocalList.size!==0}_addToLocalList(e,t=null){u.isNull(t)&&(t=this),u.isUndefined(this.autoNumericLocalList)?u.throwError(`The local list provided does not exists when trying to add an element. [${this.autoNumericLocalList}] given.`):this.autoNumericLocalList.set(e,t)}_removeFromLocalList(e){u.isUndefined(this.autoNumericLocalList)?this.settings.createLocalList&&u.throwError(`The local list provided does not exists when trying to remove an element. [${this.autoNumericLocalList}] given.`):this.autoNumericLocalList.delete(e)}_mergeSettings(...e){Object.assign(this.settings,...e)}_cloneAndMergeSettings(...e){const t={};return Object.assign(t,this.settings,...e),t}static validate(e,t=!0,n=null){(u.isUndefinedOrNullOrEmpty(e)||!u.isObject(e))&&u.throwError(`The userOptions are invalid ; it should be a valid object, [${e}] given.`);const s=u.isObject(n);!s&&!u.isNull(n)&&u.throwError(`The 'originalOptions' parameter is invalid ; it should either be a valid option object or \`null\`, [${e}] given.`),u.isNull(e)||this._convertOldOptionsToNewOnes(e);let r;t?r=Object.assign({},this.getDefaultConfig(),e):r=e,!u.isTrueOrFalseString(r.showWarnings)&&!u.isBoolean(r.showWarnings)&&u.throwError(`The debug option 'showWarnings' is invalid ; it should be either 'true' or 'false', [${r.showWarnings}] given.`);const o=/^[0-9]+$/,a=/[0-9]+/,l=/^-?[0-9]+(\.?[0-9]+)?$/,p=/^[0-9]+(\.?[0-9]+)?$/;!u.isTrueOrFalseString(r.allowDecimalPadding)&&!u.isBoolean(r.allowDecimalPadding)&&r.allowDecimalPadding!==g.options.allowDecimalPadding.floats&&!(u.isNumber(r.allowDecimalPadding)&&r.allowDecimalPadding>0)&&u.throwError(`The decimal padding option 'allowDecimalPadding' is invalid ; it should either be \`false\`, \`true\`, \`'floats'\` or a positive integer superior to 0, [${r.allowDecimalPadding}] given.`),u.isNumber(r.allowDecimalPadding)&&r.allowDecimalPadding>r.decimalPlaces&&u.warning(`Setting 'allowDecimalPadding' to a number [${r.allowDecimalPadding}] superior to the current 'decimalPlaces' settings [${r.decimalPlaces}] is useless, since the padding will not be shown.`,r.showWarnings),(r.allowDecimalPadding===g.options.allowDecimalPadding.never||r.allowDecimalPadding==="false")&&(r.decimalPlaces!==g.options.decimalPlaces.none||r.decimalPlacesShownOnBlur!==g.options.decimalPlacesShownOnBlur.none||r.decimalPlacesShownOnFocus!==g.options.decimalPlacesShownOnFocus.none)&&u.warning(`Setting 'allowDecimalPadding' to [${r.allowDecimalPadding}] will override the current 'decimalPlaces*' settings [${r.decimalPlaces}, ${r.decimalPlacesShownOnBlur} and ${r.decimalPlacesShownOnFocus}].`,r.showWarnings),!u.isTrueOrFalseString(r.alwaysAllowDecimalCharacter)&&!u.isBoolean(r.alwaysAllowDecimalCharacter)&&u.throwError(`The option 'alwaysAllowDecimalCharacter' is invalid ; it should either be \`true\` or \`false\`, [${r.alwaysAllowDecimalCharacter}] given.`),!u.isNull(r.caretPositionOnFocus)&&!u.isInArray(r.caretPositionOnFocus,[g.options.caretPositionOnFocus.start,g.options.caretPositionOnFocus.end,g.options.caretPositionOnFocus.decimalLeft,g.options.caretPositionOnFocus.decimalRight])&&u.throwError(`The display on empty string option 'caretPositionOnFocus' is invalid ; it should either be \`null\`, 'focus', 'press', 'always' or 'zero', [${r.caretPositionOnFocus}] given.`);let h;s?h=n:h=this._correctCaretPositionOnFocusAndSelectOnFocusOptions(e),!u.isNull(h)&&h.caretPositionOnFocus!==g.options.caretPositionOnFocus.doNoForceCaretPosition&&h.selectOnFocus===g.options.selectOnFocus.select&&u.warning(`The 'selectOnFocus' option is set to 'select', which is in conflict with the 'caretPositionOnFocus' which is set to '${h.caretPositionOnFocus}'. As a result, if this has been called when instantiating an AutoNumeric object, the 'selectOnFocus' option is forced to 'doNotSelect'.`,r.showWarnings),u.isInArray(r.digitGroupSeparator,[g.options.digitGroupSeparator.comma,g.options.digitGroupSeparator.dot,g.options.digitGroupSeparator.normalSpace,g.options.digitGroupSeparator.thinSpace,g.options.digitGroupSeparator.narrowNoBreakSpace,g.options.digitGroupSeparator.noBreakSpace,g.options.digitGroupSeparator.noSeparator,g.options.digitGroupSeparator.apostrophe,g.options.digitGroupSeparator.arabicThousandsSeparator,g.options.digitGroupSeparator.dotAbove,g.options.digitGroupSeparator.privateUseTwo])||u.throwError(`The thousand separator character option 'digitGroupSeparator' is invalid ; it should be ',', '.', '', '', "'", '', ' ', '', '', '' or empty (''), [${r.digitGroupSeparator}] given.`),!u.isTrueOrFalseString(r.showOnlyNumbersOnFocus)&&!u.isBoolean(r.showOnlyNumbersOnFocus)&&u.throwError(`The 'showOnlyNumbersOnFocus' option is invalid ; it should be either 'true' or 'false', [${r.showOnlyNumbersOnFocus}] given.`),!u.isInArray(r.digitalGroupSpacing,[g.options.digitalGroupSpacing.two,g.options.digitalGroupSpacing.twoThree,g.options.digitalGroupSpacing.twoScaled,g.options.digitalGroupSpacing.three,g.options.digitalGroupSpacing.four])&&!(r.digitalGroupSpacing>=2&&r.digitalGroupSpacing<=4)&&u.throwError(`The grouping separator option for thousands 'digitalGroupSpacing' is invalid ; it should be '2', '2t', '2s', '3', or '4', [${r.digitalGroupSpacing}] given.`),u.isInArray(r.decimalCharacter,[g.options.decimalCharacter.comma,g.options.decimalCharacter.dot,g.options.decimalCharacter.middleDot,g.options.decimalCharacter.arabicDecimalSeparator,g.options.decimalCharacter.decimalSeparatorKeySymbol])||u.throwError(`The decimal separator character option 'decimalCharacter' is invalid ; it should be '.', ',', '', '' or '', [${r.decimalCharacter}] given.`),r.decimalCharacter===r.digitGroupSeparator&&u.throwError(`autoNumeric will not function properly when the decimal character 'decimalCharacter' [${r.decimalCharacter}] and the thousand separator 'digitGroupSeparator' [${r.digitGroupSeparator}] are the same character.`),!u.isNull(r.decimalCharacterAlternative)&&!u.isString(r.decimalCharacterAlternative)&&u.throwError(`The alternate decimal separator character option 'decimalCharacterAlternative' is invalid ; it should be a string, [${r.decimalCharacterAlternative}] given.`),r.currencySymbol!==""&&!u.isString(r.currencySymbol)&&u.throwError(`The currency symbol option 'currencySymbol' is invalid ; it should be a string, [${r.currencySymbol}] given.`),u.isInArray(r.currencySymbolPlacement,[g.options.currencySymbolPlacement.prefix,g.options.currencySymbolPlacement.suffix])||u.throwError(`The placement of the currency sign option 'currencySymbolPlacement' is invalid ; it should either be 'p' (prefix) or 's' (suffix), [${r.currencySymbolPlacement}] given.`),u.isInArray(r.negativePositiveSignPlacement,[g.options.negativePositiveSignPlacement.prefix,g.options.negativePositiveSignPlacement.suffix,g.options.negativePositiveSignPlacement.left,g.options.negativePositiveSignPlacement.right,g.options.negativePositiveSignPlacement.none])||u.throwError(`The placement of the negative sign option 'negativePositiveSignPlacement' is invalid ; it should either be 'p' (prefix), 's' (suffix), 'l' (left), 'r' (right) or 'null', [${r.negativePositiveSignPlacement}] given.`),!u.isTrueOrFalseString(r.showPositiveSign)&&!u.isBoolean(r.showPositiveSign)&&u.throwError(`The show positive sign option 'showPositiveSign' is invalid ; it should be either 'true' or 'false', [${r.showPositiveSign}] given.`),(!u.isString(r.suffixText)||r.suffixText!==""&&(u.isNegative(r.suffixText,r.negativeSignCharacter)||a.test(r.suffixText)))&&u.throwError(`The additional suffix option 'suffixText' is invalid ; it should not contains the negative sign '${r.negativeSignCharacter}' nor any numerical characters, [${r.suffixText}] given.`),(!u.isString(r.negativeSignCharacter)||r.negativeSignCharacter.length!==1||u.isUndefinedOrNullOrEmpty(r.negativeSignCharacter)||a.test(r.negativeSignCharacter))&&u.throwError(`The negative sign character option 'negativeSignCharacter' is invalid ; it should be a single character, and cannot be any numerical characters, [${r.negativeSignCharacter}] given.`),(!u.isString(r.positiveSignCharacter)||r.positiveSignCharacter.length!==1||u.isUndefinedOrNullOrEmpty(r.positiveSignCharacter)||a.test(r.positiveSignCharacter))&&u.throwError(`The positive sign character option 'positiveSignCharacter' is invalid ; it should be a single character, and cannot be any numerical characters, [${r.positiveSignCharacter}] given.
If you want to show the positive sign character, you need to set the \`showPositiveSign\` option to \`true\`.`),r.negativeSignCharacter===r.positiveSignCharacter&&u.throwError(`The positive 'positiveSignCharacter' and negative 'negativeSignCharacter' sign characters cannot be identical ; [${r.negativeSignCharacter}] given.`),!u.isTrueOrFalseString(r.negativePositiveSignBehavior)&&!u.isBoolean(r.negativePositiveSignBehavior)&&u.throwError(`The option 'negativePositiveSignBehavior' is invalid ; it should be either 'true' or 'false', [${r.negativePositiveSignBehavior}] given.`);const[b,k]=u.isNull(r.negativeBracketsTypeOnBlur)?["",""]:r.negativeBracketsTypeOnBlur.split(",");(u.contains(r.digitGroupSeparator,r.negativeSignCharacter)||u.contains(r.decimalCharacter,r.negativeSignCharacter)||u.contains(r.decimalCharacterAlternative,r.negativeSignCharacter)||u.contains(b,r.negativeSignCharacter)||u.contains(k,r.negativeSignCharacter)||u.contains(r.suffixText,r.negativeSignCharacter))&&u.throwError(`The negative sign character option 'negativeSignCharacter' is invalid ; it should not be equal or a part of the digit separator, the decimal character, the decimal character alternative, the negative brackets or the suffix text, [${r.negativeSignCharacter}] given.`),(u.contains(r.digitGroupSeparator,r.positiveSignCharacter)||u.contains(r.decimalCharacter,r.positiveSignCharacter)||u.contains(r.decimalCharacterAlternative,r.positiveSignCharacter)||u.contains(b,r.positiveSignCharacter)||u.contains(k,r.positiveSignCharacter)||u.contains(r.suffixText,r.positiveSignCharacter))&&u.throwError(`The positive sign character option 'positiveSignCharacter' is invalid ; it should not be equal or a part of the digit separator, the decimal character, the decimal character alternative, the negative brackets or the suffix text, [${r.positiveSignCharacter}] given.`),!u.isNull(r.overrideMinMaxLimits)&&!u.isInArray(r.overrideMinMaxLimits,[g.options.overrideMinMaxLimits.ceiling,g.options.overrideMinMaxLimits.floor,g.options.overrideMinMaxLimits.ignore,g.options.overrideMinMaxLimits.invalid])&&u.throwError(`The override min & max limits option 'overrideMinMaxLimits' is invalid ; it should either be 'ceiling', 'floor', 'ignore' or 'invalid', [${r.overrideMinMaxLimits}] given.`),r.overrideMinMaxLimits!==g.options.overrideMinMaxLimits.invalid&&r.overrideMinMaxLimits!==g.options.overrideMinMaxLimits.ignore&&(r.minimumValue>0||r.maximumValue<0)&&u.warning("You've set a `minimumValue` or a `maximumValue` excluding the value `0`. AutoNumeric will force the users to always have a valid value in the input, hence preventing them to clear the field. If you want to allow for temporary invalid values (i.e. out-of-range), you should use the 'invalid' option for the 'overrideMinMaxLimits' setting."),(!u.isString(r.maximumValue)||!l.test(r.maximumValue))&&u.throwError(`The maximum possible value option 'maximumValue' is invalid ; it should be a string that represents a positive or negative number, [${r.maximumValue}] given.`),(!u.isString(r.minimumValue)||!l.test(r.minimumValue))&&u.throwError(`The minimum possible value option 'minimumValue' is invalid ; it should be a string that represents a positive or negative number, [${r.minimumValue}] given.`),parseFloat(r.minimumValue)>parseFloat(r.maximumValue)&&u.throwError(`The minimum possible value option is greater than the maximum possible value option ; 'minimumValue' [${r.minimumValue}] should be smaller than 'maximumValue' [${r.maximumValue}].`),u.isInt(r.decimalPlaces)&&r.decimalPlaces>=0||u.isString(r.decimalPlaces)&&o.test(r.decimalPlaces)||u.throwError(`The number of decimal places option 'decimalPlaces' is invalid ; it should be a positive integer, [${r.decimalPlaces}] given.`),u.isNull(r.decimalPlacesRawValue)||u.isInt(r.decimalPlacesRawValue)&&r.decimalPlacesRawValue>=0||u.isString(r.decimalPlacesRawValue)&&o.test(r.decimalPlacesRawValue)||u.throwError(`The number of decimal places for the raw value option 'decimalPlacesRawValue' is invalid ; it should be a positive integer or \`null\`, [${r.decimalPlacesRawValue}] given.`),this._validateDecimalPlacesRawValue(r),!u.isNull(r.decimalPlacesShownOnFocus)&&!o.test(String(r.decimalPlacesShownOnFocus))&&u.throwError(`The number of expanded decimal places option 'decimalPlacesShownOnFocus' is invalid ; it should be a positive integer or \`null\`, [${r.decimalPlacesShownOnFocus}] given.`),!u.isNull(r.decimalPlacesShownOnFocus)&&Number(r.decimalPlaces)>Number(r.decimalPlacesShownOnFocus)&&u.warning(`The extended decimal places 'decimalPlacesShownOnFocus' [${r.decimalPlacesShownOnFocus}] should be greater than the 'decimalPlaces' [${r.decimalPlaces}] value. Currently, this will limit the ability of your user to manually change some of the decimal places. Do you really want to do that?`,r.showWarnings),(!u.isNull(r.divisorWhenUnfocused)&&!p.test(r.divisorWhenUnfocused)||r.divisorWhenUnfocused===0||r.divisorWhenUnfocused==="0"||r.divisorWhenUnfocused===1||r.divisorWhenUnfocused==="1")&&u.throwError(`The divisor option 'divisorWhenUnfocused' is invalid ; it should be a positive number higher than one, preferably an integer, [${r.divisorWhenUnfocused}] given.`),!u.isNull(r.decimalPlacesShownOnBlur)&&!o.test(r.decimalPlacesShownOnBlur)&&u.throwError(`The number of decimals shown when unfocused option 'decimalPlacesShownOnBlur' is invalid ; it should be a positive integer or \`null\`, [${r.decimalPlacesShownOnBlur}] given.`),!u.isNull(r.symbolWhenUnfocused)&&!u.isString(r.symbolWhenUnfocused)&&u.throwError(`The symbol to show when unfocused option 'symbolWhenUnfocused' is invalid ; it should be a string, [${r.symbolWhenUnfocused}] given.`),!u.isTrueOrFalseString(r.saveValueToSessionStorage)&&!u.isBoolean(r.saveValueToSessionStorage)&&u.throwError(`The save to session storage option 'saveValueToSessionStorage' is invalid ; it should be either 'true' or 'false', [${r.saveValueToSessionStorage}] given.`),u.isInArray(r.onInvalidPaste,[g.options.onInvalidPaste.error,g.options.onInvalidPaste.ignore,g.options.onInvalidPaste.clamp,g.options.onInvalidPaste.truncate,g.options.onInvalidPaste.replace])||u.throwError(`The paste behavior option 'onInvalidPaste' is invalid ; it should either be 'error', 'ignore', 'clamp', 'truncate' or 'replace' (cf. documentation), [${r.onInvalidPaste}] given.`),u.isInArray(r.roundingMethod,[g.options.roundingMethod.halfUpSymmetric,g.options.roundingMethod.halfUpAsymmetric,g.options.roundingMethod.halfDownSymmetric,g.options.roundingMethod.halfDownAsymmetric,g.options.roundingMethod.halfEvenBankersRounding,g.options.roundingMethod.upRoundAwayFromZero,g.options.roundingMethod.downRoundTowardZero,g.options.roundingMethod.toCeilingTowardPositiveInfinity,g.options.roundingMethod.toFloorTowardNegativeInfinity,g.options.roundingMethod.toNearest05,g.options.roundingMethod.toNearest05Alt,g.options.roundingMethod.upToNext05,g.options.roundingMethod.downToNext05])||u.throwError(`The rounding method option 'roundingMethod' is invalid ; it should either be 'S', 'A', 's', 'a', 'B', 'U', 'D', 'C', 'F', 'N05', 'CHF', 'U05' or 'D05' (cf. documentation), [${r.roundingMethod}] given.`),!u.isNull(r.negativeBracketsTypeOnBlur)&&!u.isInArray(r.negativeBracketsTypeOnBlur,[g.options.negativeBracketsTypeOnBlur.parentheses,g.options.negativeBracketsTypeOnBlur.brackets,g.options.negativeBracketsTypeOnBlur.chevrons,g.options.negativeBracketsTypeOnBlur.curlyBraces,g.options.negativeBracketsTypeOnBlur.angleBrackets,g.options.negativeBracketsTypeOnBlur.japaneseQuotationMarks,g.options.negativeBracketsTypeOnBlur.halfBrackets,g.options.negativeBracketsTypeOnBlur.whiteSquareBrackets,g.options.negativeBracketsTypeOnBlur.quotationMarks,g.options.negativeBracketsTypeOnBlur.guillemets])&&u.throwError(`The brackets for negative values option 'negativeBracketsTypeOnBlur' is invalid ; it should either be '(,)', '[,]', '<,>', '{,}', ',', ',', ',', ',', ',' or ',', [${r.negativeBracketsTypeOnBlur}] given.`),(!(u.isString(r.emptyInputBehavior)||u.isNumber(r.emptyInputBehavior))||!(u.isInArray(r.emptyInputBehavior,[g.options.emptyInputBehavior.focus,g.options.emptyInputBehavior.press,g.options.emptyInputBehavior.always,g.options.emptyInputBehavior.min,g.options.emptyInputBehavior.max,g.options.emptyInputBehavior.zero,g.options.emptyInputBehavior.null])||l.test(r.emptyInputBehavior)))&&u.throwError(`The display on empty string option 'emptyInputBehavior' is invalid ; it should either be 'focus', 'press', 'always', 'min', 'max', 'zero', 'null', a number, or a string that represents a number, [${r.emptyInputBehavior}] given.`),r.emptyInputBehavior===g.options.emptyInputBehavior.zero&&(r.minimumValue>0||r.maximumValue<0)&&u.throwError(`The 'emptyInputBehavior' option is set to 'zero', but this value is outside of the range defined by 'minimumValue' and 'maximumValue' [${r.minimumValue}, ${r.maximumValue}].`),l.test(String(r.emptyInputBehavior))&&(this._isWithinRangeWithOverrideOption(r.emptyInputBehavior,r)||u.throwError(`The 'emptyInputBehavior' option is set to a number or a string that represents a number, but its value [${r.emptyInputBehavior}] is outside of the range defined by the 'minimumValue' and 'maximumValue' options [${r.minimumValue}, ${r.maximumValue}].`)),!u.isTrueOrFalseString(r.eventBubbles)&&!u.isBoolean(r.eventBubbles)&&u.throwError(`The event bubbles option 'eventBubbles' is invalid ; it should be either 'true' or 'false', [${r.eventBubbles}] given.`),!u.isTrueOrFalseString(r.eventIsCancelable)&&!u.isBoolean(r.eventIsCancelable)&&u.throwError(`The event is cancelable option 'eventIsCancelable' is invalid ; it should be either 'true' or 'false', [${r.eventIsCancelable}] given.`),(u.isBoolean(r.invalidClass)||!/^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$/.test(r.invalidClass))&&u.throwError(`The name of the 'invalidClass' option is not a valid CSS class name ; it should not be empty, and should follow the '^-?[_a-zA-Z]+[_a-zA-Z0-9-]*$' regex, [${r.invalidClass}] given.`),u.isInArray(r.leadingZero,[g.options.leadingZero.allow,g.options.leadingZero.deny,g.options.leadingZero.keep])||u.throwError(`The leading zero behavior option 'leadingZero' is invalid ; it should either be 'allow', 'deny' or 'keep', [${r.leadingZero}] given.`),!u.isTrueOrFalseString(r.formatOnPageLoad)&&!u.isBoolean(r.formatOnPageLoad)&&u.throwError(`The format on initialization option 'formatOnPageLoad' is invalid ; it should be either 'true' or 'false', [${r.formatOnPageLoad}] given.`),!u.isTrueOrFalseString(r.formulaMode)&&!u.isBoolean(r.formulaMode)&&u.throwError(`The formula mode option 'formulaMode' is invalid ; it should be either 'true' or 'false', [${r.formulaMode}] given.`),(!o.test(r.historySize)||r.historySize===0)&&u.throwError(`The history size option 'historySize' is invalid ; it should be a positive integer, [${r.historySize}] given.`),!u.isTrueOrFalseString(r.selectNumberOnly)&&!u.isBoolean(r.selectNumberOnly)&&u.throwError(`The select number only option 'selectNumberOnly' is invalid ; it should be either 'true' or 'false', [${r.selectNumberOnly}] given.`),!u.isTrueOrFalseString(r.selectOnFocus)&&!u.isBoolean(r.selectOnFocus)&&u.throwError(`The select on focus option 'selectOnFocus' is invalid ; it should be either 'true' or 'false', [${r.selectOnFocus}] given.`),!u.isNull(r.defaultValueOverride)&&r.defaultValueOverride!==""&&!l.test(r.defaultValueOverride)&&u.throwError(`The unformatted default value option 'defaultValueOverride' is invalid ; it should be a string that represents a positive or negative number, [${r.defaultValueOverride}] given.`),!u.isTrueOrFalseString(r.unformatOnSubmit)&&!u.isBoolean(r.unformatOnSubmit)&&u.throwError(`The remove formatting on submit option 'unformatOnSubmit' is invalid ; it should be either 'true' or 'false', [${r.unformatOnSubmit}] given.`),!u.isNull(r.valuesToStrings)&&!u.isObject(r.valuesToStrings)&&u.throwError(`The option 'valuesToStrings' is invalid ; it should be an object, ideally with 'key -> value' entries, [${r.valuesToStrings}] given.`),!u.isNull(r.outputFormat)&&!u.isInArray(r.outputFormat,[g.options.outputFormat.string,g.options.outputFormat.number,g.options.outputFormat.dot,g.options.outputFormat.negativeDot,g.options.outputFormat.comma,g.options.outputFormat.negativeComma,g.options.outputFormat.dotNegative,g.options.outputFormat.commaNegative])&&u.throwError(`The custom locale format option 'outputFormat' is invalid ; it should either be null, 'string', 'number', '.', '-.', ',', '-,', '.-' or ',-', [${r.outputFormat}] given.`),!u.isTrueOrFalseString(r.isCancellable)&&!u.isBoolean(r.isCancellable)&&u.throwError(`The cancellable behavior option 'isCancellable' is invalid ; it should be either 'true' or 'false', [${r.isCancellable}] given.`),!u.isTrueOrFalseString(r.modifyValueOnUpDownArrow)&&!u.isBoolean(r.modifyValueOnUpDownArrow)&&u.throwError(`The increment/decrement on up and down arrow keys 'modifyValueOnUpDownArrow' is invalid ; it should be either 'true' or 'false', [${r.modifyValueOnUpDownArrow}] given.`),!u.isTrueOrFalseString(r.modifyValueOnWheel)&&!u.isBoolean(r.modifyValueOnWheel)&&u.throwError(`The increment/decrement on mouse wheel option 'modifyValueOnWheel' is invalid ; it should be either 'true' or 'false', [${r.modifyValueOnWheel}] given.`),!u.isTrueOrFalseString(r.watchExternalChanges)&&!u.isBoolean(r.watchExternalChanges)&&u.throwError(`The option 'watchExternalChanges' is invalid ; it should be either 'true' or 'false', [${r.watchExternalChanges}] given.`),u.isInArray(r.wheelOn,[g.options.wheelOn.focus,g.options.wheelOn.hover])||u.throwError(`The wheel behavior option 'wheelOn' is invalid ; it should either be 'focus' or 'hover', [${r.wheelOn}] given.`),(!(u.isString(r.upDownStep)||u.isNumber(r.upDownStep))||r.upDownStep!=="progressive"&&!p.test(r.upDownStep)||Number(r.upDownStep)===0)&&u.throwError(`The up/down arrow step value option 'upDownStep' is invalid ; it should either be the string 'progressive', or a number or a string that represents a positive number (excluding zero), [${r.upDownStep}] given.`),(!(u.isString(r.wheelStep)||u.isNumber(r.wheelStep))||r.wheelStep!=="progressive"&&!p.test(r.wheelStep)||Number(r.wheelStep)===0)&&u.throwError(`The wheel step value option 'wheelStep' is invalid ; it should either be the string 'progressive', or a number or a string that represents a positive number (excluding zero), [${r.wheelStep}] given.`),u.isInArray(r.serializeSpaces,[g.options.serializeSpaces.plus,g.options.serializeSpaces.percent])||u.throwError(`The space replacement character option 'serializeSpaces' is invalid ; it should either be '+' or '%20', [${r.serializeSpaces}] given.`),!u.isTrueOrFalseString(r.noEventListeners)&&!u.isBoolean(r.noEventListeners)&&u.throwError(`The option 'noEventListeners' that prevent the creation of event listeners is invalid ; it should be either 'true' or 'false', [${r.noEventListeners}] given.`),!u.isNull(r.styleRules)&&!(u.isObject(r.styleRules)&&(Object.prototype.hasOwnProperty.call(r.styleRules,"positive")||Object.prototype.hasOwnProperty.call(r.styleRules,"negative")||Object.prototype.hasOwnProperty.call(r.styleRules,"ranges")||Object.prototype.hasOwnProperty.call(r.styleRules,"userDefined")))&&u.throwError(`The option 'styleRules' is invalid ; it should be a correctly structured object, with one or more 'positive', 'negative', 'ranges' or 'userDefined' attributes, [${r.styleRules}] given.`),!u.isNull(r.styleRules)&&Object.prototype.hasOwnProperty.call(r.styleRules,"userDefined")&&!u.isNull(r.styleRules.userDefined)&&r.styleRules.userDefined.forEach(_=>{Object.prototype.hasOwnProperty.call(_,"callback")&&!u.isFunction(_.callback)&&u.throwError(`The callback defined in the \`userDefined\` attribute is not a function, ${typeof _.callback} given.`)}),(!u.isNull(r.rawValueDivisor)&&!p.test(r.rawValueDivisor)||r.rawValueDivisor===0||r.rawValueDivisor==="0"||r.rawValueDivisor===1||r.rawValueDivisor==="1")&&u.throwError(`The raw value divisor option 'rawValueDivisor' is invalid ; it should be a positive number higher than one, preferably an integer, [${r.rawValueDivisor}] given.`),!u.isTrueOrFalseString(r.readOnly)&&!u.isBoolean(r.readOnly)&&u.throwError(`The option 'readOnly' is invalid ; it should be either 'true' or 'false', [${r.readOnly}] given.`),!u.isTrueOrFalseString(r.unformatOnHover)&&!u.isBoolean(r.unformatOnHover)&&u.throwError(`The option 'unformatOnHover' is invalid ; it should be either 'true' or 'false', [${r.unformatOnHover}] given.`),!u.isTrueOrFalseString(r.failOnUnknownOption)&&!u.isBoolean(r.failOnUnknownOption)&&u.throwError(`The debug option 'failOnUnknownOption' is invalid ; it should be either 'true' or 'false', [${r.failOnUnknownOption}] given.`),!u.isTrueOrFalseString(r.createLocalList)&&!u.isBoolean(r.createLocalList)&&u.throwError(`The debug option 'createLocalList' is invalid ; it should be either 'true' or 'false', [${r.createLocalList}] given.`)}static _validateDecimalPlacesRawValue(e){u.isNull(e.decimalPlacesRawValue)||(e.decimalPlacesRawValue<e.decimalPlaces&&u.warning(`The number of decimal places to store in the raw value [${e.decimalPlacesRawValue}] is lower than the ones to display [${e.decimalPlaces}]. This will likely confuse your users.
To solve that, you'd need to either set \`decimalPlacesRawValue\` to \`null\`, or set a number of decimal places for the raw value equal of bigger than \`decimalPlaces\`.`,e.showWarnings),e.decimalPlacesRawValue<e.decimalPlacesShownOnFocus&&u.warning(`The number of decimal places to store in the raw value [${e.decimalPlacesRawValue}] is lower than the ones shown on focus [${e.decimalPlacesShownOnFocus}]. This will likely confuse your users.
To solve that, you'd need to either set \`decimalPlacesRawValue\` to \`null\`, or set a number of decimal places for the raw value equal of bigger than \`decimalPlacesShownOnFocus\`.`,e.showWarnings),e.decimalPlacesRawValue<e.decimalPlacesShownOnBlur&&u.warning(`The number of decimal places to store in the raw value [${e.decimalPlacesRawValue}] is lower than the ones shown when unfocused [${e.decimalPlacesShownOnBlur}]. This will likely confuse your users.
To solve that, you'd need to either set \`decimalPlacesRawValue\` to \`null\`, or set a number of decimal places for the raw value equal of bigger than \`decimalPlacesShownOnBlur\`.`,e.showWarnings))}static areSettingsValid(e){let t=!0;try{this.validate(e,!0)}catch{t=!1}return t}static getDefaultConfig(){return g.defaultSettings}static getPredefinedOptions(){return g.predefinedOptions}static _generateOptionsObjectFromOptionsArray(e){let t;return u.isUndefinedOrNullOrEmpty(e)||e.length===0?t=null:(t={},e.length===1&&Array.isArray(e[0])?e[0].forEach(n=>{Object.assign(t,this._getOptionObject(n))}):e.length>=1&&e.forEach(n=>{Object.assign(t,this._getOptionObject(n))})),t}static format(e,...t){if(u.isUndefined(e)||e===null)return null;let n;u.isElement(e)?n=u.getElementValue(e):n=e,!u.isString(n)&&!u.isNumber(n)&&u.throwError(`The value "${n}" being "set" is not numeric and therefore cannot be used appropriately.`);const s=this._generateOptionsObjectFromOptionsArray(t),r=Object.assign({},this.getDefaultConfig(),s);r.isNegativeSignAllowed=n<0,r.isPositiveSignAllowed=n>=0,this._setBrackets(r);const o={};this._cachesUsualRegularExpressions(r,o);let a=this._toNumericValue(n,r);return isNaN(Number(a))&&u.throwError(`The value [${a}] that you are trying to format is not a recognized number.`),this._isWithinRangeWithOverrideOption(a,r)||(u.triggerEvent(g.events.formatted,document,{oldValue:null,newValue:null,oldRawValue:null,newRawValue:null,isPristine:null,error:"Range test failed",aNElement:null},!0,!0),u.throwError(`The value [${a}] being set falls outside of the minimumValue [${r.minimumValue}] and maximumValue [${r.maximumValue}] range set for this element`)),r.valuesToStrings&&this._checkValuesToStringsSettings(n,r)?r.valuesToStrings[n]:(this._correctNegativePositiveSignPlacementOption(r),this._calculateDecimalPlacesOnInit(r),!u.isUndefinedOrNullOrEmpty(r.rawValueDivisor)&&r.rawValueDivisor!==0&&a!==""&&a!==null&&(a*=r.rawValueDivisor),a=this._roundFormattedValueShownOnFocus(a,r),a=this._modifyNegativeSignAndDecimalCharacterForFormattedValue(a,r),a=this._addGroupSeparators(a,r,!1,a),a)}static formatAndSet(e,t=null){const n=this.format(e,t);return u.setElementValue(e,n),n}static unformat(e,...t){if(u.isNumberStrict(e))return e;let n;if(u.isElement(e)?n=u.getElementValue(e):n=e,n==="")return"";if(u.isUndefined(n)||n===null)return null;(u.isArray(n)||u.isObject(n))&&u.throwError(`A number or a string representing a number is needed to be able to unformat it, [${n}] given.`);const s=this._generateOptionsObjectFromOptionsArray(t),r=Object.assign({},this.getDefaultConfig(),s);return r.isNegativeSignAllowed=!1,r.isPositiveSignAllowed=!0,n=n.toString(),r.valuesToStrings&&this._checkStringsToValuesSettings(n,r)?u.objectKeyLookup(r.valuesToStrings,n):(u.isNegative(n,r.negativeSignCharacter)?(r.isNegativeSignAllowed=!0,r.isPositiveSignAllowed=!1):u.isNull(r.negativeBracketsTypeOnBlur)||([r.firstBracket,r.lastBracket]=r.negativeBracketsTypeOnBlur.split(","),n.charAt(0)===r.firstBracket&&n.charAt(n.length-1)===r.lastBracket&&(r.isNegativeSignAllowed=!0,r.isPositiveSignAllowed=!1,n=this._removeBrackets(n,r,!1))),n=this._convertToNumericString(n,r),u.isNumber(Number(n))&&(n=u.scientificToDecimal(n)),new RegExp("[^+-0123456789.]","gi").test(n)?NaN:(this._correctNegativePositiveSignPlacementOption(r),r.decimalPlacesRawValue?r.originalDecimalPlacesRawValue=r.decimalPlacesRawValue:r.originalDecimalPlacesRawValue=r.decimalPlaces,this._calculateDecimalPlacesOnInit(r),!u.isUndefinedOrNullOrEmpty(r.rawValueDivisor)&&r.rawValueDivisor!==0&&n!==""&&n!==null&&(n/=r.rawValueDivisor),n=this._roundRawValue(n,r),n=n.replace(r.decimalCharacter,"."),n=this._toLocale(n,r.outputFormat,r),n))}static unformatAndSet(e,t=null){const n=this.unformat(e,t);return u.setElementValue(e,n),n}static localize(e,t=null){let n;if(u.isElement(e)?n=u.getElementValue(e):n=e,n==="")return"";u.isNull(t)&&(t=g.defaultSettings),n=this.unformat(n,t),Number(n)===0&&t.leadingZero!==g.options.leadingZero.keep&&(n="0");let s;return u.isNull(t)?s=t.outputFormat:s=g.defaultSettings.outputFormat,this._toLocale(n,s,t)}static localizeAndSet(e,t=null){const n=this.localize(e,t);return u.setElementValue(e,n),n}static isManagedByAutoNumeric(e){return this._isInGlobalList(u.domElement(e))}static getAutoNumericElement(e){const t=u.domElement(e);return this.isManagedByAutoNumeric(t)?this._getFromGlobalList(t):null}static set(e,t,n=null,s=!0){const r=u.domElement(e);if(!this.isManagedByAutoNumeric(r)){let o;return!u.isNull(n)&&Object.prototype.hasOwnProperty.call(n,"showWarnings")?o=n.showWarnings:o=!0,u.warning("Impossible to find an AutoNumeric object for the given DOM element or selector.",o),null}return this.getAutoNumericElement(r).set(t,n,s)}static getNumericString(e,t=null){return this._get(e,"getNumericString",t)}static getFormatted(e,t=null){return this._get(e,"getFormatted",t)}static getNumber(e,t=null){return this._get(e,"getNumber",t)}static _get(e,t,n=null){const s=u.domElement(e);return this.isManagedByAutoNumeric(s)||u.throwError("Impossible to find an AutoNumeric object for the given DOM element or selector."),this.getAutoNumericElement(s)[t](n)}static getLocalized(e,t=null,n=null){const s=u.domElement(e);return this.isManagedByAutoNumeric(s)||u.throwError("Impossible to find an AutoNumeric object for the given DOM element or selector."),this.getAutoNumericElement(s).getLocalized(t,n)}_updatePredefinedOptions(e,t=null){return u.isNull(t)?this.update(e):(this._mergeSettings(e,t),this.update(this.settings)),this}french(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().French,e),this}northAmerican(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().NorthAmerican,e),this}british(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().British,e),this}swiss(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().Swiss,e),this}japanese(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().Japanese,e),this}spanish(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().Spanish,e),this}chinese(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().Chinese,e),this}brazilian(e=null){return this._updatePredefinedOptions(g.getPredefinedOptions().Brazilian,e),this}_runCallbacksFoundInTheSettingsObject(){for(const e in this.settings)if(Object.prototype.hasOwnProperty.call(this.settings,e)){const t=this.settings[e];if(typeof t=="function")this.settings[e]=t(this,e);else{let n="";e in this.domElement.dataset&&(n=this.domElement.dataset[e]),n=u.camelize(n),typeof this.settings[n]=="function"&&(this.settings[e]=n(this,e))}}}_setTrailingNegativeSignInfo(){this.isTrailingNegative=this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.suffix||this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix&&(this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.left||this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.right)}static _stripAllNonNumberCharacters(e,t,n,s){return this._stripAllNonNumberCharactersExceptCustomDecimalChar(e,t,n,s).replace(t.decimalCharacter,".")}static _stripAllNonNumberCharactersExceptCustomDecimalChar(e,t,n,s){e=this._normalizeCurrencySuffixAndNegativeSignCharacters(e,t),e=e.replace(t.allowedAutoStrip,"");const r=e.match(t.numRegAutoStrip);if(e=r?[r[1],r[2],r[3]].join(""):"",t.leadingZero===g.options.leadingZero.allow||t.leadingZero===g.options.leadingZero.keep){let o="";const[a,l]=e.split(t.decimalCharacter);let p=a;u.contains(p,t.negativeSignCharacter)&&(o=t.negativeSignCharacter,p=p.replace(t.negativeSignCharacter,"")),o===""&&p.length>t.mIntPos&&p.charAt(0)==="0"&&(p=p.slice(1)),o!==""&&p.length>t.mIntNeg&&p.charAt(0)==="0"&&(p=p.slice(1)),e=`${o}${p}${u.isUndefined(l)?"":t.decimalCharacter+l}`}return(n&&t.leadingZero===g.options.leadingZero.deny||!s&&t.leadingZero===g.options.leadingZero.allow)&&(e=e.replace(t.stripReg,"$1$2")),e}static _toggleNegativeBracket(e,t,n){let s;return n?s=this._removeBrackets(e,t):s=this._addBrackets(e,t),s}static _addBrackets(e,t){return u.isNull(t.negativeBracketsTypeOnBlur)?e:`${t.firstBracket}${e.replace(t.negativeSignCharacter,"")}${t.lastBracket}`}static _removeBrackets(e,t,n=!0){let s;return!u.isNull(t.negativeBracketsTypeOnBlur)&&e.charAt(0)===t.firstBracket?(s=e.replace(t.firstBracket,""),s=s.replace(t.lastBracket,""),n?(s=s.replace(t.currencySymbol,""),s=this._mergeCurrencySignNegativePositiveSignAndValue(s,t,!0,!1)):s=`${t.negativeSignCharacter}${s}`):s=e,s}static _setBrackets(e){if(u.isNull(e.negativeBracketsTypeOnBlur))e.firstBracket="",e.lastBracket="";else{const[t,n]=e.negativeBracketsTypeOnBlur.split(",");e.firstBracket=t,e.lastBracket=n}}static _convertToNumericString(e,t){e=this._removeBrackets(e,t,!1),e=this._normalizeCurrencySuffixAndNegativeSignCharacters(e,t),e=e.replace(new RegExp(`[${t.digitGroupSeparator}]`,"g"),""),t.decimalCharacter!=="."&&(e=e.replace(t.decimalCharacter,".")),u.isNegative(e)&&e.lastIndexOf("-")===e.length-1&&(e=e.replace("-",""),e=`-${e}`),t.showPositiveSign&&(e=e.replace(t.positiveSignCharacter,""));const n=t.leadingZero!==g.options.leadingZero.keep,s=u.arabicToLatinNumbers(e,n,!1,!1);return isNaN(s)||(e=s.toString()),e}static _normalizeCurrencySuffixAndNegativeSignCharacters(e,t){return e=String(e),t.currencySymbol!==g.options.currencySymbol.none&&(e=e.replace(t.currencySymbol,"")),t.suffixText!==g.options.suffixText.none&&(e=e.replace(t.suffixText,"")),t.negativeSignCharacter!==g.options.negativeSignCharacter.hyphen&&(e=e.replace(t.negativeSignCharacter,"-")),e}static _toLocale(e,t,n){if(u.isNull(t)||t===g.options.outputFormat.string)return e;let s;switch(t){case g.options.outputFormat.number:s=Number(e);break;case g.options.outputFormat.dotNegative:s=u.isNegative(e)?e.replace("-","")+"-":e;break;case g.options.outputFormat.comma:case g.options.outputFormat.negativeComma:s=e.replace(".",",");break;case g.options.outputFormat.commaNegative:s=e.replace(".",","),s=u.isNegative(s)?s.replace("-","")+"-":s;break;case g.options.outputFormat.dot:case g.options.outputFormat.negativeDot:s=e;break;default:u.throwError(`The given outputFormat [${t}] option is not recognized.`)}return t!==g.options.outputFormat.number&&n.negativeSignCharacter!=="-"&&(s=s.replace("-",n.negativeSignCharacter)),s}_modifyNegativeSignAndDecimalCharacterForRawValue(e){return this.settings.decimalCharacter!=="."&&(e=e.replace(this.settings.decimalCharacter,".")),this.settings.negativeSignCharacter!=="-"&&this.settings.isNegativeSignAllowed&&(e=e.replace(this.settings.negativeSignCharacter,"-")),e.match(/\d/)||(e+="0"),e}static _modifyNegativeSignAndDecimalCharacterForFormattedValue(e,t){return t.negativeSignCharacter!=="-"&&(e=e.replace("-",t.negativeSignCharacter)),t.decimalCharacter!=="."&&(e=e.replace(".",t.decimalCharacter)),e}static _isElementValueEmptyOrOnlyTheNegativeSign(e,t){return e===""||e===t.negativeSignCharacter}static _orderValueCurrencySymbolAndSuffixText(e,t,n){let s;if(t.emptyInputBehavior===g.options.emptyInputBehavior.always||n)switch(t.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.left:case g.options.negativePositiveSignPlacement.prefix:case g.options.negativePositiveSignPlacement.none:s=e+t.currencySymbol+t.suffixText;break;default:s=t.currencySymbol+e+t.suffixText}else s=e;return s}static _addGroupSeparators(e,t,n,s,r=null){let o;if(u.isNull(r)?o=u.isNegative(e,t.negativeSignCharacter)||u.isNegativeWithBrackets(e,t.firstBracket,t.lastBracket):o=r<0,e=this._stripAllNonNumberCharactersExceptCustomDecimalChar(e,t,!1,n),this._isElementValueEmptyOrOnlyTheNegativeSign(e,t))return this._orderValueCurrencySymbolAndSuffixText(e,t,!0);const a=u.isZeroOrHasNoValue(e);o&&(e=e.replace("-",""));let[l,p]=e.split(t.decimalCharacter);if(t.decimalCharacterAlternative&&u.isUndefined(p)&&([l,p]=e.split(t.decimalCharacterAlternative)),t.digitGroupSeparator!==""){t.digitalGroupSpacing=t.digitalGroupSpacing.toString();let k;switch(t.digitalGroupSpacing){case g.options.digitalGroupSpacing.twoThree:k=/(\d)((\d)(\d{2}?)+)$/;break;case g.options.digitalGroupSpacing.twoScaled:k=/(\d)((?:\d{2}){0,2}\d{3}(?:(?:\d{2}){2}\d{3})*?)$/;break;case g.options.digitalGroupSpacing.two:case g.options.digitalGroupSpacing.three:case g.options.digitalGroupSpacing.four:default:k=new RegExp(`(\\d)((\\d{${t.digitalGroupSpacing}}?)+)$`)}for(;k.test(l);)l=l.replace(k,`$1${t.digitGroupSeparator}$2`)}let h;n?h=t.decimalPlacesShownOnFocus:h=t.decimalPlacesShownOnBlur,h!==0&&!u.isUndefined(p)?(p.length>h&&(p=p.substring(0,h)),e=`${l}${t.decimalCharacter}${p}`):e=l,e=g._mergeCurrencySignNegativePositiveSignAndValue(e,t,o,a),u.isNull(r)&&(r=s),t.negativeBracketsTypeOnBlur!==null&&(r<0||u.isNegativeStrict(e,t.negativeSignCharacter))&&(e=this._toggleNegativeBracket(e,t,n));let b;return t.suffixText?b=`${e}${t.suffixText}`:b=e,b}static _mergeCurrencySignNegativePositiveSignAndValue(e,t,n,s){let r="";n?r=t.negativeSignCharacter:t.showPositiveSign&&!s&&(r=t.positiveSignCharacter);let o;if(t.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix)if(t.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(n||!n&&t.showPositiveSign&&!s))switch(t.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.prefix:case g.options.negativePositiveSignPlacement.left:o=`${r}${t.currencySymbol}${e}`;break;case g.options.negativePositiveSignPlacement.right:o=`${t.currencySymbol}${r}${e}`;break;case g.options.negativePositiveSignPlacement.suffix:o=`${t.currencySymbol}${e}${r}`;break}else o=t.currencySymbol+e;else if(t.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix)if(t.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(n||!n&&t.showPositiveSign&&!s))switch(t.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.suffix:case g.options.negativePositiveSignPlacement.right:o=`${e}${t.currencySymbol}${r}`;break;case g.options.negativePositiveSignPlacement.left:o=`${e}${r}${t.currencySymbol}`;break;case g.options.negativePositiveSignPlacement.prefix:o=`${r}${e}${t.currencySymbol}`;break}else o=e+t.currencySymbol;return o}_initialCaretPosition(e){u.isNull(this.settings.caretPositionOnFocus)&&this.settings.selectOnFocus===g.options.selectOnFocus.doNotSelect&&u.throwError("`_initialCaretPosition()` should never be called when the `caretPositionOnFocus` option is `null`.");const t=this.rawValue<0,n=u.isZeroOrHasNoValue(e),s=e.length;let r=0,o=0,a=!1,l=0;this.settings.caretPositionOnFocus!==g.options.caretPositionOnFocus.start&&(e=e.replace(this.settings.negativeSignCharacter,""),e=e.replace(this.settings.positiveSignCharacter,""),e=e.replace(this.settings.currencySymbol,""),r=e.length,a=u.contains(e,this.settings.decimalCharacter),(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.decimalLeft||this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.decimalRight)&&(a?(o=e.indexOf(this.settings.decimalCharacter),l=this.settings.decimalCharacter.length):(o=r,l=0)));let p="";t?p=this.settings.negativeSignCharacter:this.settings.showPositiveSign&&!n&&(p=this.settings.positiveSignCharacter);const h=p.length,b=this.settings.currencySymbol.length;let k;if(this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix){if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.start)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.prefix:case g.options.negativePositiveSignPlacement.left:case g.options.negativePositiveSignPlacement.right:k=h+b;break;case g.options.negativePositiveSignPlacement.suffix:k=b;break}else k=b;else if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.end)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.prefix:case g.options.negativePositiveSignPlacement.left:case g.options.negativePositiveSignPlacement.right:k=s;break;case g.options.negativePositiveSignPlacement.suffix:k=b+r;break}else k=s;else if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.decimalLeft)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.prefix:case g.options.negativePositiveSignPlacement.left:case g.options.negativePositiveSignPlacement.right:k=h+b+o;break;case g.options.negativePositiveSignPlacement.suffix:k=b+o;break}else k=b+o;else if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.decimalRight)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.prefix:case g.options.negativePositiveSignPlacement.left:case g.options.negativePositiveSignPlacement.right:k=h+b+o+l;break;case g.options.negativePositiveSignPlacement.suffix:k=b+o+l;break}else k=b+o+l}else if(this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix){if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.start)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.suffix:case g.options.negativePositiveSignPlacement.right:case g.options.negativePositiveSignPlacement.left:k=0;break;case g.options.negativePositiveSignPlacement.prefix:k=h;break}else k=0;else if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.end)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.suffix:case g.options.negativePositiveSignPlacement.right:case g.options.negativePositiveSignPlacement.left:k=r;break;case g.options.negativePositiveSignPlacement.prefix:k=h+r;break}else k=r;else if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.decimalLeft)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.suffix:case g.options.negativePositiveSignPlacement.right:case g.options.negativePositiveSignPlacement.left:k=o;break;case g.options.negativePositiveSignPlacement.prefix:k=h+o;break}else k=o;else if(this.settings.caretPositionOnFocus===g.options.caretPositionOnFocus.decimalRight)if(this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.none&&(t||!t&&this.settings.showPositiveSign&&!n))switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.suffix:case g.options.negativePositiveSignPlacement.right:case g.options.negativePositiveSignPlacement.left:k=o+l;break;case g.options.negativePositiveSignPlacement.prefix:k=h+o+l;break}else k=o+l}return k}static _truncateZeros(e,t){let n;switch(t){case 0:n=/(\.(?:\d*[1-9])?)0*$/;break;case 1:n=/(\.\d(?:\d*[1-9])?)0*$/;break;default:n=new RegExp(`(\\.\\d{${t}}(?:\\d*[1-9])?)0*`)}return e=e.replace(n,"$1"),t===0&&(e=e.replace(/\.$/,"")),e}static _roundRawValue(e,t){return this._roundValue(e,t,t.decimalPlacesRawValue)}static _roundFormattedValueShownOnFocus(e,t){return this._roundValue(e,t,Number(t.decimalPlacesShownOnFocus))}static _roundFormattedValueShownOnBlur(e,t){return this._roundValue(e,t,Number(t.decimalPlacesShownOnBlur))}static _roundFormattedValueShownOnFocusOrBlur(e,t,n){return n?this._roundFormattedValueShownOnFocus(e,t):this._roundFormattedValueShownOnBlur(e,t)}static _roundValue(e,t,n){if(u.isNull(e))return e;if(e=e===""?"0":e.toString(),t.roundingMethod===g.options.roundingMethod.toNearest05||t.roundingMethod===g.options.roundingMethod.toNearest05Alt||t.roundingMethod===g.options.roundingMethod.upToNext05||t.roundingMethod===g.options.roundingMethod.downToNext05)return this._roundCloseTo05(e,t);const[s,r]=g._prepareValueForRounding(e,t);e=r;const o=e.lastIndexOf("."),a=o===-1,[l,p]=e.split(".");if(!(p>0)&&(t.allowDecimalPadding===g.options.allowDecimalPadding.never||t.allowDecimalPadding===g.options.allowDecimalPadding.floats))return Number(e)===0?l:`${s}${l}`;let b;t.allowDecimalPadding===g.options.allowDecimalPadding.always||t.allowDecimalPadding===g.options.allowDecimalPadding.floats?b=n:t.allowDecimalPadding>0?b=t.allowDecimalPadding:b=0;const k=a?e.length-1:o;let _=e.length-1-k,x="";if(_<=n){if(x=e,_<b){a&&(x=`${x}${t.decimalCharacter}`);let L="000000";for(;_<b;)L=L.substring(0,b-_),x+=L,_+=L.length}else _>b?x=this._truncateZeros(x,b):_===0&&b===0&&(x=x.replace(/\.$/,""));return Number(x)===0?x:`${s}${x}`}let C;a?C=n-1:C=Number(n)+Number(o);const A=Number(e.charAt(C+1));let B=e.substring(0,C+1).split(""),D;if(e.charAt(C)==="."?D=e.charAt(C-1)%2:D=e.charAt(C)%2,this._shouldRoundUp(A,t,s,D)){for(let L=B.length-1;L>=0;L-=1)if(B[L]!=="."){if(B[L]=+B[L]+1,B[L]<10)break;L>0&&(B[L]="0")}}return B=B.slice(0,C+1),x=this._truncateZeros(B.join(""),b),Number(x)===0?x:`${s}${x}`}static _roundCloseTo05(e,t){switch(t.roundingMethod){case g.options.roundingMethod.toNearest05:case g.options.roundingMethod.toNearest05Alt:e=(Math.round(e*20)/20).toString();break;case g.options.roundingMethod.upToNext05:e=(Math.ceil(e*20)/20).toString();break;default:e=(Math.floor(e*20)/20).toString()}let n;return u.contains(e,".")?e.length-e.indexOf(".")<3?n=e+"0":n=e:n=e+".00",n}static _prepareValueForRounding(e,t){let n="";return u.isNegativeStrict(e,"-")&&(n="-",e=e.replace("-","")),e.match(/^\d/)||(e=`0${e}`),Number(e)===0&&(n=""),(Number(e)>0&&t.leadingZero!==g.options.leadingZero.keep||e.length>0&&t.leadingZero===g.options.leadingZero.allow)&&(e=e.replace(/^0*(\d)/,"$1")),[n,e]}static _shouldRoundUp(e,t,n,s){return e>4&&t.roundingMethod===g.options.roundingMethod.halfUpSymmetric||e>4&&t.roundingMethod===g.options.roundingMethod.halfUpAsymmetric&&n===""||e>5&&t.roundingMethod===g.options.roundingMethod.halfUpAsymmetric&&n==="-"||e>5&&t.roundingMethod===g.options.roundingMethod.halfDownSymmetric||e>5&&t.roundingMethod===g.options.roundingMethod.halfDownAsymmetric&&n===""||e>4&&t.roundingMethod===g.options.roundingMethod.halfDownAsymmetric&&n==="-"||e>5&&t.roundingMethod===g.options.roundingMethod.halfEvenBankersRounding||e===5&&t.roundingMethod===g.options.roundingMethod.halfEvenBankersRounding&&s===1||e>0&&t.roundingMethod===g.options.roundingMethod.toCeilingTowardPositiveInfinity&&n===""||e>0&&t.roundingMethod===g.options.roundingMethod.toFloorTowardNegativeInfinity&&n==="-"||e>0&&t.roundingMethod===g.options.roundingMethod.upRoundAwayFromZero}static _truncateDecimalPlaces(e,t,n,s){n&&(e=this._roundFormattedValueShownOnFocus(e,t));const[r,o]=e.split(t.decimalCharacter);if(o&&o.length>s)if(s>0){const a=o.substring(0,s);e=`${r}${t.decimalCharacter}${a}`}else e=r;return e}static _checkIfInRangeWithOverrideOption(e,t){if(u.isNull(e)&&t.emptyInputBehavior===g.options.emptyInputBehavior.null||t.overrideMinMaxLimits===g.options.overrideMinMaxLimits.ignore||t.overrideMinMaxLimits===g.options.overrideMinMaxLimits.invalid)return[!0,!0];e=e.toString(),e=e.replace(",",".");const n=u.parseStr(t.minimumValue),s=u.parseStr(t.maximumValue),r=u.parseStr(e);let o;switch(t.overrideMinMaxLimits){case g.options.overrideMinMaxLimits.floor:o=[u.testMinMax(n,r)>-1,!0];break;case g.options.overrideMinMaxLimits.ceiling:o=[!0,u.testMinMax(s,r)<1];break;default:o=[u.testMinMax(n,r)>-1,u.testMinMax(s,r)<1]}return o}static _isWithinRangeWithOverrideOption(e,t){const[n,s]=this._checkIfInRangeWithOverrideOption(e,t);return n&&s}static _cleanValueForRangeParse(e){return e=e.toString().replace(",","."),u.parseStr(e)}static _isMinimumRangeRespected(e,t){return u.testMinMax(u.parseStr(t.minimumValue),this._cleanValueForRangeParse(e))>-1}static _isMaximumRangeRespected(e,t){return u.testMinMax(u.parseStr(t.maximumValue),this._cleanValueForRangeParse(e))<1}_triggerRangeEvents(e,t){e||this._triggerEvent(g.events.minRangeExceeded,this.domElement),t||this._triggerEvent(g.events.maxRangeExceeded,this.domElement)}_setInvalidState(){this.isInputElement?u.setInvalidState(this.domElement):this._addCSSClass(this.settings.invalidClass),this._triggerEvent(g.events.invalidValue,this.domElement),this.validState=!1}_setValidState(){this.isInputElement?u.setValidState(this.domElement):this._removeCSSClass(this.settings.invalidClass),this.validState||this._triggerEvent(g.events.correctedValue,this.domElement),this.validState=!0}_setValidOrInvalidState(e){if(this.settings.overrideMinMaxLimits===g.options.overrideMinMaxLimits.invalid){const t=this.constructor._isMinimumRangeRespected(e,this.settings),n=this.constructor._isMaximumRangeRespected(e,this.settings);t&&n?this._setValidState():this._setInvalidState(),this._triggerRangeEvents(t,n)}}_keepAnOriginalSettingsCopy(){this.originalDigitGroupSeparator=this.settings.digitGroupSeparator,this.originalCurrencySymbol=this.settings.currencySymbol,this.originalSuffixText=this.settings.suffixText}_trimLeadingAndTrailingZeros(e){if(e===""||e===null)return e;if(this.settings.leadingZero!==g.options.leadingZero.keep){if(Number(e)===0)return"0";e=e.replace(/^(-)?0+(?=\d)/g,"$1")}return u.contains(e,".")&&(e=e.replace(/(\.[0-9]*?)0+$/,"$1")),e=e.replace(/\.$/,""),e}_setPersistentStorageName(){this.settings.saveValueToSessionStorage&&(this.domElement.name!==""&&!u.isUndefined(this.domElement.name)?this.rawValueStorageName=`${this.storageNamePrefix}${decodeURIComponent(this.domElement.name)}`:this.rawValueStorageName=`${this.storageNamePrefix}${this.domElement.id}`)}_saveValueToPersistentStorage(){this.settings.saveValueToSessionStorage&&sessionStorage.setItem(this.rawValueStorageName,this.rawValue)}_getValueFromPersistentStorage(){return this.settings.saveValueToSessionStorage?sessionStorage.getItem(this.rawValueStorageName):(u.warning("`_getValueFromPersistentStorage()` is called but `settings.saveValueToSessionStorage` is false. There must be an error that needs fixing.",this.settings.showWarnings),null)}_removeValueFromPersistentStorage(){this.settings.saveValueToSessionStorage&&sessionStorage.removeItem(this.rawValueStorageName)}_getDefaultValue(e){const t=e.getAttribute("value");return u.isNull(t)?"":t}_onFocusInAndMouseEnter(e){if(this.isEditing=!1,!this.formulaMode&&this.settings.unformatOnHover&&e.type==="mouseenter"&&e.altKey){this.constructor._unformatAltHovered(this);return}if(e.type==="focus"&&(this.isFocused=!0,this.rawValueOnFocus=this.rawValue),e.type==="focus"&&this.settings.unformatOnHover&&this.hoveredWithAlt&&this.constructor._reformatAltHovered(this),e.type==="focus"||e.type==="mouseenter"&&!this.isFocused){let t=null;this.settings.emptyInputBehavior===g.options.emptyInputBehavior.focus&&this.rawValue<0&&this.settings.negativeBracketsTypeOnBlur!==null&&this.settings.isNegativeSignAllowed&&(t=this.constructor._removeBrackets(u.getElementValue(this.domElement),this.settings));const n=this._getRawValueToFormat(this.rawValue);if(n!==""){const a=this.constructor._roundFormattedValueShownOnFocusOrBlur(n,this.settings,this.isFocused);if(this.settings.showOnlyNumbersOnFocus===g.options.showOnlyNumbersOnFocus.onlyNumbers)this.settings.digitGroupSeparator="",this.settings.currencySymbol="",this.settings.suffixText="",t=a.replace(".",this.settings.decimalCharacter);else{let l;u.isNull(a)?l="":l=this.constructor._addGroupSeparators(a.replace(".",this.settings.decimalCharacter),this.settings,this.isFocused,n),t=l}}u.isNull(t)?this.valueOnFocus="":this.valueOnFocus=t,this.lastVal=this.valueOnFocus;const s=this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(this.valueOnFocus,this.settings),r=this.constructor._orderValueCurrencySymbolAndSuffixText(this.valueOnFocus,this.settings,!0),o=s&&r!==""&&this.settings.emptyInputBehavior===g.options.emptyInputBehavior.focus;o&&(t=r),u.isNull(t)||this._setElementValue(t),o&&r===this.settings.currencySymbol&&this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix&&u.setElementSelection(e.target,0)}}_onFocus(){this.settings.isCancellable&&this._saveCancellableValue()}_onFocusIn(e){this.settings.selectOnFocus?this.select():u.isNull(this.settings.caretPositionOnFocus)||u.setElementSelection(e.target,this._initialCaretPosition(u.getElementValue(this.domElement)))}_enterFormulaMode(){this.settings.formulaMode&&(this.formulaMode=!0,u.setElementValue(this.domElement,"="),u.setElementSelection(this.domElement,1))}_exitFormulaMode(){let e=u.getElementValue(this.domElement);e=e.replace(/^\s*=/,"");let t;try{const n=new Ew(e,this.settings.decimalCharacter);t=new bw().evaluate(n)}catch{this._triggerEvent(g.events.invalidFormula,this.domElement,{formula:e,aNElement:this}),this.reformat(),this.formulaMode=!1;return}this._triggerEvent(g.events.validFormula,this.domElement,{formula:e,result:t,aNElement:this}),this.set(t),this.formulaMode=!1}_acceptNonPrintableKeysInFormulaMode(){return this.eventKey===G.keyName.Backspace||this.eventKey===G.keyName.Delete||this.eventKey===G.keyName.LeftArrow||this.eventKey===G.keyName.RightArrow||this.eventKey===G.keyName.Home||this.eventKey===G.keyName.End}_onKeydown(e){if(this.compositioning)return;if(this.formatted=!1,this.isEditing=!0,!this.formulaMode&&!this.isFocused&&this.settings.unformatOnHover&&e.altKey&&this.domElement===u.getHoveredElement()){this.constructor._unformatAltHovered(this);return}if(this._updateEventKeyInfo(e),this.keydownEventCounter+=1,this.keydownEventCounter===1&&(this.initialValueOnFirstKeydown=u.getElementValue(e.target),this.initialRawValueOnFirstKeydown=this.rawValue),this.formulaMode){if(this.eventKey===G.keyName.Esc){this.formulaMode=!1,this.reformat();return}if(this.eventKey===G.keyName.Enter){this._exitFormulaMode();return}if(this._acceptNonPrintableKeysInFormulaMode())return}else{if(this.eventKey===G.keyName.Equal){this._enterFormulaMode();return}if(this.settings.modifyValueOnUpDownArrow&&(this.eventKey===G.keyName.UpArrow||this.eventKey===G.keyName.DownArrow)){this.upDownArrowAction(e);return}}if(this.domElement.readOnly||this.settings.readOnly||this.domElement.disabled){this.processed=!0;return}this.eventKey===G.keyName.Esc&&(e.preventDefault(),this.settings.isCancellable&&this.rawValue!==this.savedCancellableValue&&(this.set(this.savedCancellableValue),this._triggerEvent(g.events.native.input,e.target)),this.select());let t=u.getElementValue(e.target);if(this.eventKey===G.keyName.Enter&&this.rawValue!==this.rawValueOnFocus&&(this._triggerEvent(g.events.native.change,e.target),this.valueOnFocus=t,this.rawValueOnFocus=this.rawValue,this.settings.isCancellable&&this._saveCancellableValue()),this._updateInternalProperties(e),this._processNonPrintableKeysAndShortcuts(e)){this.processed=!0;return}if(this.eventKey===G.keyName.Backspace||this.eventKey===G.keyName.Delete){const n=this._processCharacterDeletion(e);if(this.processed=!0,!n){e.preventDefault();return}this._formatValue(e),t=u.getElementValue(e.target),t!==this.lastVal&&this.throwInput&&(this._triggerEvent(g.events.native.input,e.target),e.preventDefault()),this.lastVal=t,this.throwInput=!0}}_onKeypress(e){if(this.compositioning)return;if(this.formulaMode){if(this._acceptNonPrintableKeysInFormulaMode()||this.settings.formulaChars.test(this.eventKey))return;e.preventDefault();return}if(this.eventKey===G.keyName.Insert)return;const t=this.processed;if(this._updateInternalProperties(e),this._processNonPrintableKeysAndShortcuts(e))return;if(t){e.preventDefault();return}if(this._processCharacterInsertion()){this._formatValue(e);const s=u.getElementValue(e.target);if(s!==this.lastVal&&this.throwInput)this._triggerEvent(g.events.native.input,e.target),e.preventDefault();else{if((this.eventKey===this.settings.decimalCharacter||this.eventKey===this.settings.decimalCharacterAlternative)&&u.getElementSelection(e.target).start===u.getElementSelection(e.target).end&&u.getElementSelection(e.target).start===s.indexOf(this.settings.decimalCharacter)){const r=u.getElementSelection(e.target).start+1;u.setElementSelection(e.target,r)}e.preventDefault()}this.lastVal=u.getElementValue(e.target),this.throwInput=!0,this._setValidOrInvalidState(this.rawValue);return}e.preventDefault()}_onKeyup(e){if(this.compositioning||(this.isEditing=!1,this.keydownEventCounter=0,this.formulaMode))return;if(this.settings.isCancellable&&this.eventKey===G.keyName.Esc){e.preventDefault();return}if(this._updateEventKeyInfo(e),this.eventKey===G.keyName.Z||this.eventKey===G.keyName.z){if(e.ctrlKey&&e.shiftKey){e.preventDefault(),this._historyTableRedo(),this._triggerEvent(g.events.native.input,e.target),this.onGoingRedo=!0;return}else if(e.ctrlKey&&!e.shiftKey)if(this.onGoingRedo)this.onGoingRedo=!1;else{e.preventDefault(),this._historyTableUndo(),this._triggerEvent(g.events.native.input,e.target);return}}else if((this.eventKey===G.keyName.Y||this.eventKey===G.keyName.y)&&e.ctrlKey){e.preventDefault(),this._historyTableRedo(),this._triggerEvent(g.events.native.input,e.target),this.onGoingRedo=!0;return}if(this.onGoingRedo&&(e.ctrlKey||e.shiftKey)&&(this.onGoingRedo=!1),(e.ctrlKey||e.metaKey)&&(this.eventKey===G.keyName.X||this.eventKey===G.keyName.x)){const s=u.getElementSelection(this.domElement).start,r=this.constructor._toNumericValue(u.getElementValue(e.target),this.settings);this.set(r),this._setCaretPosition(s)}if(this.eventKey===G.keyName.Alt&&this.settings.unformatOnHover&&this.hoveredWithAlt){this.constructor._reformatAltHovered(this);return}if((e.ctrlKey||e.metaKey)&&(this.eventKey===G.keyName.Backspace||this.eventKey===G.keyName.Delete)){const s=u.getElementValue(e.target);this._setRawValue(this._formatOrUnformatOther(!1,s));return}this._updateInternalProperties(e);const t=this._processNonPrintableKeysAndShortcuts(e);delete this.valuePartsBeforePaste;const n=u.getElementValue(e.target);if(!(t||n===""&&this.initialValueOnFirstKeydown==="")&&(n===this.settings.currencySymbol?this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix?u.setElementSelection(e.target,0):u.setElementSelection(e.target,this.settings.currencySymbol.length):this.eventKey===G.keyName.Tab&&u.setElementSelection(e.target,0,n.length),(n===this.settings.suffixText||this.rawValue===""&&this.settings.currencySymbol!==""&&this.settings.suffixText!=="")&&u.setElementSelection(e.target,0),this.settings.decimalPlacesShownOnFocus!==null&&this._saveValueToPersistentStorage(),this.formatted||this._formatValue(e),this._setValidOrInvalidState(this.rawValue),this._saveRawValueForAndroid(),n!==this.initialValueOnFirstKeydown&&this._triggerEvent(g.events.formatted,e.target,{oldValue:this.initialValueOnFirstKeydown,newValue:n,oldRawValue:this.initialRawValueOnFirstKeydown,newRawValue:this.rawValue,isPristine:this.isPristine(!1),error:null,aNElement:this}),this.historyTable.length>1)){const s=u.getElementSelection(this.domElement);this.selectionStart=s.start,this.selectionEnd=s.end,this.historyTable[this.historyTableIndex].start=this.selectionStart,this.historyTable[this.historyTableIndex].end=this.selectionEnd}}_saveRawValueForAndroid(){if(this.eventKey===G.keyName.AndroidDefault){let e=this.constructor._stripAllNonNumberCharactersExceptCustomDecimalChar(this.getFormatted(),this.settings,!0,this.isFocused);e=this.constructor._convertToNumericString(e,this.settings),this._setRawValue(e)}}_onFocusOutAndMouseLeave(e){if(this.isEditing=!1,!(e.type==="mouseleave"&&this.formulaMode)){if(this.settings.unformatOnHover&&e.type==="mouseleave"&&this.hoveredWithAlt){this.constructor._reformatAltHovered(this);return}if(e.type==="mouseleave"&&!this.isFocused||e.type==="blur"){e.type==="blur"&&this.formulaMode&&this._exitFormulaMode(),this._saveValueToPersistentStorage(),this.settings.showOnlyNumbersOnFocus===g.options.showOnlyNumbersOnFocus.onlyNumbers&&(this.settings.digitGroupSeparator=this.originalDigitGroupSeparator,this.settings.currencySymbol=this.originalCurrencySymbol,this.settings.suffixText=this.originalSuffixText);const t=this._getRawValueToFormat(this.rawValue),n=u.isNull(t),[s,r]=this.constructor._checkIfInRangeWithOverrideOption(t,this.settings);let o=!1;if(t!==""&&!n&&(this._triggerRangeEvents(s,r),this.settings.valuesToStrings&&this._checkValuesToStrings(t)&&(this._setElementValue(this.settings.valuesToStrings[t]),o=!0)),!o){let a;if(n||t===""?a=t:a=String(t),t!==""&&!n)s&&r&&!this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(t,this.settings)?(a=this._modifyNegativeSignAndDecimalCharacterForRawValue(a),this.settings.divisorWhenUnfocused&&!u.isNull(a)&&(a=a/this.settings.divisorWhenUnfocused,a=a.toString()),a=this.constructor._roundFormattedValueShownOnBlur(a,this.settings),a=this.constructor._modifyNegativeSignAndDecimalCharacterForFormattedValue(a,this.settings)):this._triggerRangeEvents(s,r);else if(t==="")switch(this.settings.emptyInputBehavior){case g.options.emptyInputBehavior.zero:this._setRawValue("0"),a=this.constructor._roundValue("0",this.settings,0);break;case g.options.emptyInputBehavior.min:this._setRawValue(this.settings.minimumValue),a=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.minimumValue,this.settings,this.isFocused);break;case g.options.emptyInputBehavior.max:this._setRawValue(this.settings.maximumValue),a=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.maximumValue,this.settings,this.isFocused);break;default:u.isNumber(this.settings.emptyInputBehavior)&&(this._setRawValue(this.settings.emptyInputBehavior),a=this.constructor._roundFormattedValueShownOnFocusOrBlur(this.settings.emptyInputBehavior,this.settings,this.isFocused))}let l=this.constructor._orderValueCurrencySymbolAndSuffixText(a,this.settings,!1);this.constructor._isElementValueEmptyOrOnlyTheNegativeSign(a,this.settings)||n&&this.settings.emptyInputBehavior===g.options.emptyInputBehavior.null||(l=this.constructor._addGroupSeparators(a,this.settings,!1,t)),(l!==t||t===""||this.settings.allowDecimalPadding===g.options.allowDecimalPadding.never||this.settings.allowDecimalPadding===g.options.allowDecimalPadding.floats)&&(this.settings.symbolWhenUnfocused&&t!==""&&t!==null&&(l=`${l}${this.settings.symbolWhenUnfocused}`),this._setElementValue(l))}this._setValidOrInvalidState(this.rawValue),e.type==="blur"&&this._onBlur(e)}}}_onPaste(e){if(e.preventDefault(),this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled)return;let t;e.clipboardData&&e.clipboardData.getData?t=e.clipboardData.getData("text/plain"):u.throwError("Unable to retrieve the pasted value. Please use a modern browser (i.e. Firefox or Chromium).");let n;e.target.tagName?n=e.target:n=e.explicitOriginalTarget;const s=u.getElementValue(n),r=n.selectionStart||0,o=n.selectionEnd||0,a=o-r;if(a===s.length){const oe=this._preparePastedText(t),de=u.arabicToLatinNumbers(oe,!1,!1,!1);if(de==="."||de===""||de!=="."&&!u.isNumber(de)){this.formatted=!0,this.settings.onInvalidPaste===g.options.onInvalidPaste.error&&u.throwError(`The pasted value '${t}' is not a valid paste content.`);return}this.set(de),this.formatted=!0,this._triggerEvent(g.events.native.input,n);return}const l=u.isNegativeStrict(t,this.settings.negativeSignCharacter);l&&(t=t.slice(1,t.length));const p=this._preparePastedText(t);let h;if(p==="."?h=".":h=u.arabicToLatinNumbers(p,!1,!1,!1),h!=="."&&(!u.isNumber(h)||h==="")){this.formatted=!0,this.settings.onInvalidPaste===g.options.onInvalidPaste.error&&u.throwError(`The pasted value '${t}' is not a valid paste content.`);return}let b,k=u.isNegativeStrict(this.getNumericString(),this.settings.negativeSignCharacter),_,x;l&&!k?(k=!0,_=!0):_=!1;const C=s.slice(0,r),A=s.slice(o,s.length);r!==o?x=this._preparePastedText(C+A):x=this._preparePastedText(s),k&&(x=u.setRawNegativeSign(x)),b=u.convertCharacterCountToIndexPosition(u.countNumberCharactersOnTheCaretLeftSide(s,r,this.settings.decimalCharacter)),_&&b++;let B=x.slice(0,b),D=x.slice(b,x.length),L=!1;h==="."&&(u.contains(B,".")&&(L=!0,B=B.replace(".","")),D=D.replace(".",""));let W=!1;switch(B===""&&D==="-"&&(B="-",D="",W=!0),this.settings.onInvalidPaste){case g.options.onInvalidPaste.truncate:case g.options.onInvalidPaste.replace:const oe=u.parseStr(this.settings.minimumValue),de=u.parseStr(this.settings.maximumValue);let ie=x,K=0,R=B;for(;K<h.length&&(R+=h[K],x=R+D,!!this.constructor._checkIfInRange(x,oe,de));)ie=x,K++;if(b+=K,W&&b++,this.settings.onInvalidPaste===g.options.onInvalidPaste.truncate){x=ie,L&&b--;break}let c=b;const d=ie.length;for(;K<h.length&&c<d;){if(ie[c]==="."){c++;continue}if(x=u.replaceCharAt(ie,c,h[K]),!this.constructor._checkIfInRange(x,oe,de))break;ie=x,K++,c++}b=c,L&&b--,x=ie;break;case g.options.onInvalidPaste.error:case g.options.onInvalidPaste.ignore:case g.options.onInvalidPaste.clamp:default:if(x=`${B}${h}${D}`,r===o)b=u.convertCharacterCountToIndexPosition(u.countNumberCharactersOnTheCaretLeftSide(s,r,this.settings.decimalCharacter))+h.length;else if(D==="")b=u.convertCharacterCountToIndexPosition(u.countNumberCharactersOnTheCaretLeftSide(s,r,this.settings.decimalCharacter))+h.length,W&&b++;else{const w=u.convertCharacterCountToIndexPosition(u.countNumberCharactersOnTheCaretLeftSide(s,o,this.settings.decimalCharacter)),S=u.getElementValue(n).slice(r,o);b=w-a+u.countCharInText(this.settings.digitGroupSeparator,S)+h.length}_&&b++,L&&b--}if(!u.isNumber(x)||x===""){this.settings.onInvalidPaste===g.options.onInvalidPaste.error&&u.throwError(`The pasted value '${t}' would result into an invalid content '${x}'.`);return}let Y=!1,J=!1;try{this.set(x),Y=!0}catch{let de;switch(this.settings.onInvalidPaste){case g.options.onInvalidPaste.clamp:de=u.clampToRangeLimits(x,this.settings);try{this.set(de)}catch{u.throwError(`Fatal error: Unable to set the clamped value '${de}'.`)}J=!0,Y=!0,x=de;break;case g.options.onInvalidPaste.error:case g.options.onInvalidPaste.truncate:case g.options.onInvalidPaste.replace:u.throwError(`The pasted value '${t}' results in a value '${x}' that is outside of the minimum [${this.settings.minimumValue}] and maximum [${this.settings.maximumValue}] value range.`);case g.options.onInvalidPaste.ignore:default:return}}const Q=u.getElementValue(n);let ee;if(Y)switch(this.settings.onInvalidPaste){case g.options.onInvalidPaste.clamp:if(J){this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix?u.setElementSelection(n,Q.length-this.settings.currencySymbol.length):u.setElementSelection(n,Q.length);break}case g.options.onInvalidPaste.error:case g.options.onInvalidPaste.ignore:case g.options.onInvalidPaste.truncate:case g.options.onInvalidPaste.replace:default:ee=u.findCaretPositionInFormattedNumber(x,b,Q,this.settings.decimalCharacter),u.setElementSelection(n,ee)}Y&&s!==Q&&this._triggerEvent(g.events.native.input,n)}_onBlur(e){this.isFocused=!1,this.isEditing=!1,u.trimPaddedZerosFromDecimalPlaces(this.rawValue)!==u.trimPaddedZerosFromDecimalPlaces(this.rawValueOnFocus)&&this._triggerEvent(g.events.native.change,e.target),this.rawValueOnFocus=void 0}_wheelAndUpDownActions(e,t,n,s){const r=e.target.selectionStart||0,o=e.target.selectionEnd||0,a=this.rawValue;let l;if(u.isUndefinedOrNullOrEmpty(a)?this.settings.minimumValue>0||this.settings.maximumValue<0?t?l=this.settings.minimumValue:l=this.settings.maximumValue:l=0:l=a,l=+l,u.isNumber(s)){const p=+s;t?l+=p:n&&(l-=p)}else t?l=u.addAndRoundToNearestAuto(l,this.settings.decimalPlacesRawValue):n&&(l=u.subtractAndRoundToNearestAuto(l,this.settings.decimalPlacesRawValue));l=u.clampToRangeLimits(l,this.settings),l!==+a&&(this.set(l),this._triggerEvent(g.events.native.input,e.target)),e.preventDefault(),this._setSelection(r,o)}upDownArrowAction(e){if(this.formulaMode||this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled)return;let t=!1,n=!1;this.eventKey===G.keyName.UpArrow?t=!0:this.eventKey===G.keyName.DownArrow?n=!0:u.throwError("Something has gone wrong since neither an Up or Down arrow key is detected, but the function was still called!"),this._wheelAndUpDownActions(e,t,n,this.settings.upDownStep)}_onWheel(e){this.formulaMode||this.settings.readOnly||this.domElement.readOnly||this.domElement.disabled||this.settings.modifyValueOnWheel&&(this.settings.wheelOn===g.options.wheelOn.focus?this.isFocused?e.shiftKey||this.wheelAction(e):e.shiftKey&&this.wheelAction(e):this.settings.wheelOn===g.options.wheelOn.hover?e.shiftKey?(e.preventDefault(),window.scrollBy(0,u.isNegativeStrict(String(e.deltaY))?-50:50)):this.wheelAction(e):u.throwError("Unknown `wheelOn` option."))}wheelAction(e){this.isWheelEvent=!0;let t=!1,n=!1,s=!1;u.isWheelUpEvent(e)?t=!0:u.isWheelDownEvent(e)?n=!0:u.isWheelEventWithZeroDeltaY(e)?s=!0:u.throwError("The event is not a 'wheel' event."),s||this._wheelAndUpDownActions(e,t,n,this.settings.wheelStep),this.isWheelEvent=!1}_onDrop(e){if(this.formulaMode)return;this.isDropEvent=!0,e.preventDefault();const t=e.dataTransfer.getData("text/plain"),n=this.unformatOther(t),s=this.rawValue;this.set(n),this.isDropEvent=!1;const r=this.constructor._toNumericValue(n,this.settings);isNaN(Number(r))||u.trimPaddedZerosFromDecimalPlaces(s)!==u.trimPaddedZerosFromDecimalPlaces(r)&&this._triggerEvent(g.events.native.change,this.domElement)}_onFormSubmit(){return this._getFormAutoNumericChildren(this.parentForm).map(n=>this.constructor.getAutoNumericElement(n)).forEach(n=>n._unformatOnSubmit()),!0}_onFormReset(){this._getFormAutoNumericChildren(this.parentForm).map(n=>this.constructor.getAutoNumericElement(n)).forEach(n=>{const s=this._getDefaultValue(n.node());setTimeout(()=>n.set(s),0)})}_unformatOnSubmit(){this.settings.unformatOnSubmit&&this._setElementValue(this.rawValue)}_onKeydownGlobal(e){if(u.character(e)===G.keyName.Alt){const t=u.getHoveredElement();if(g.isManagedByAutoNumeric(t)){const n=g.getAutoNumericElement(t);!n.formulaMode&&n.settings.unformatOnHover&&this.constructor._unformatAltHovered(n)}}}_onKeyupGlobal(e){if(u.character(e)===G.keyName.Alt){const t=u.getHoveredElement();if(g.isManagedByAutoNumeric(t)){const n=g.getAutoNumericElement(t);if(n.formulaMode||!n.settings.unformatOnHover)return;this.constructor._reformatAltHovered(n)}}}_onCompositionstart(e){const t={key:G.keyName.Space,which:"32",keyCode:"32"},n=new KeyboardEvent("keydown",t);e.target.dispatchEvent(n),this.compositioning=!0}_onCompositionend(e){this.compositioning=!1;const t={key:G.keyName.Space,which:"32",keyCode:"32"},n=new KeyboardEvent("keypress",t);e.target.dispatchEvent(n);const s=new KeyboardEvent("keyup",t);e.target.dispatchEvent(s)}_isElementTagSupported(){return u.isElement(this.domElement)||u.throwError(`The DOM element is not valid, ${this.domElement} given.`),u.isInArray(this.domElement.tagName.toLowerCase(),this.allowedTagList)}_isInputElement(){return this.domElement.tagName.toLowerCase()==="input"}_isInputTypeSupported(){return this.domElement.type==="text"||this.domElement.type==="hidden"||this.domElement.type==="tel"||u.isUndefinedOrNullOrEmpty(this.domElement.type)}_checkElement(){const e=this.domElement.tagName.toLowerCase();this._isElementTagSupported()||u.throwError(`The <${e}> tag is not supported by autoNumeric`),this._isInputElement()?(this._isInputTypeSupported()||u.throwError(`The input type "${this.domElement.type}" is not supported by autoNumeric`),this.isInputElement=!0):(this.isInputElement=!1,this.isContentEditable=this._isContentEditable(this.domElement))}_isContentEditable(e){return e.hasAttribute("contenteditable")&&e.getAttribute("contenteditable")==="true"}_formatDefaultValueOnPageLoad(e=null){let t=!0,n;if(u.isNull(e)?(n=u.getElementValue(this.domElement).trim(),this.domElement.setAttribute("value",n)):n=e,this.isInputElement||this.isContentEditable){const s=this.constructor._toNumericValue(n,this.settings);if(!this.domElement.hasAttribute("value")||this.domElement.getAttribute("value")==="")!isNaN(Number(s))&&s!==1/0?(this.set(s),t=!1):u.throwError(`The value [${n}] used in the input is not a valid value autoNumeric can work with.`);else if(this.settings.defaultValueOverride!==null&&this.settings.defaultValueOverride.toString()!==n||this.settings.defaultValueOverride===null&&n!==""&&n!==this.domElement.getAttribute("value")||n!==""&&this.domElement.getAttribute("type")==="hidden"&&!u.isNumber(s)){if(this.settings.saveValueToSessionStorage&&(this.settings.decimalPlacesShownOnFocus!==null||this.settings.divisorWhenUnfocused)&&this._setRawValue(this._getValueFromPersistentStorage()),!this.settings.saveValueToSessionStorage){const r=this.constructor._removeBrackets(n,this.settings);(this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.suffix||this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.prefix&&this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix)&&this.settings.negativeSignCharacter!==""&&u.isNegative(n,this.settings.negativeSignCharacter)?this._setRawValue(`-${this.constructor._stripAllNonNumberCharacters(r,this.settings,!0,this.isFocused)}`):this._setRawValue(this.constructor._stripAllNonNumberCharacters(r,this.settings,!0,this.isFocused))}t=!1}if(n==="")switch(this.settings.emptyInputBehavior){case g.options.emptyInputBehavior.focus:case g.options.emptyInputBehavior.press:break;case g.options.emptyInputBehavior.always:this._setElementValue(this.settings.currencySymbol);break;case g.options.emptyInputBehavior.min:this.set(this.settings.minimumValue);break;case g.options.emptyInputBehavior.max:this.set(this.settings.maximumValue);break;case g.options.emptyInputBehavior.zero:this.set("0");break;case g.options.emptyInputBehavior.null:this.set(null);break;default:this.set(this.settings.emptyInputBehavior)}else t&&n===this.domElement.getAttribute("value")&&this.set(n)}else(this.settings.defaultValueOverride===null||this.settings.defaultValueOverride===n)&&this.set(n)}static _correctNegativePositiveSignPlacementOption(e){if(u.isNull(e.negativePositiveSignPlacement))if(!u.isUndefined(e)&&u.isUndefinedOrNullOrEmpty(e.negativePositiveSignPlacement)&&!u.isUndefinedOrNullOrEmpty(e.currencySymbol))switch(e.currencySymbolPlacement){case g.options.currencySymbolPlacement.suffix:e.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.prefix;break;case g.options.currencySymbolPlacement.prefix:e.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.left;break}else e.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.left}static _correctCaretPositionOnFocusAndSelectOnFocusOptions(e){return u.isNull(e)?null:(!u.isUndefinedOrNullOrEmpty(e.caretPositionOnFocus)&&u.isUndefinedOrNullOrEmpty(e.selectOnFocus)&&(e.selectOnFocus=g.options.selectOnFocus.doNotSelect),u.isUndefinedOrNullOrEmpty(e.caretPositionOnFocus)&&!u.isUndefinedOrNullOrEmpty(e.selectOnFocus)&&e.selectOnFocus===g.options.selectOnFocus.select&&(e.caretPositionOnFocus=g.options.caretPositionOnFocus.doNoForceCaretPosition),e)}static _calculateDecimalPlacesOnInit(e){this._validateDecimalPlacesRawValue(e),e.decimalPlacesShownOnFocus===g.options.decimalPlacesShownOnFocus.useDefault&&(e.decimalPlacesShownOnFocus=e.decimalPlaces),e.decimalPlacesShownOnBlur===g.options.decimalPlacesShownOnBlur.useDefault&&(e.decimalPlacesShownOnBlur=e.decimalPlaces),e.decimalPlacesRawValue===g.options.decimalPlacesRawValue.useDefault&&(e.decimalPlacesRawValue=e.decimalPlaces);let t=0;e.rawValueDivisor&&e.rawValueDivisor!==g.options.rawValueDivisor.none&&(t=String(e.rawValueDivisor).length-1,t<0&&(t=0)),e.decimalPlacesRawValue=Math.max(Math.max(e.decimalPlacesShownOnBlur,e.decimalPlacesShownOnFocus)+t,Number(e.originalDecimalPlacesRawValue)+t)}static _calculateDecimalPlacesOnUpdate(e,t=null){this._validateDecimalPlacesRawValue(e),u.isNull(t)&&u.throwError("When updating the settings, the previous ones should be passed as an argument.");const n="decimalPlaces"in e;if(!(n||"decimalPlacesRawValue"in e||"decimalPlacesShownOnFocus"in e||"decimalPlacesShownOnBlur"in e||"rawValueDivisor"in e))return;n?((!("decimalPlacesShownOnFocus"in e)||e.decimalPlacesShownOnFocus===g.options.decimalPlacesShownOnFocus.useDefault)&&(e.decimalPlacesShownOnFocus=e.decimalPlaces),(!("decimalPlacesShownOnBlur"in e)||e.decimalPlacesShownOnBlur===g.options.decimalPlacesShownOnBlur.useDefault)&&(e.decimalPlacesShownOnBlur=e.decimalPlaces),(!("decimalPlacesRawValue"in e)||e.decimalPlacesRawValue===g.options.decimalPlacesRawValue.useDefault)&&(e.decimalPlacesRawValue=e.decimalPlaces)):(u.isUndefined(e.decimalPlacesShownOnFocus)&&(e.decimalPlacesShownOnFocus=t.decimalPlacesShownOnFocus),u.isUndefined(e.decimalPlacesShownOnBlur)&&(e.decimalPlacesShownOnBlur=t.decimalPlacesShownOnBlur));let s=0;e.rawValueDivisor&&e.rawValueDivisor!==g.options.rawValueDivisor.none&&(s=String(e.rawValueDivisor).length-1,s<0&&(s=0)),!e.decimalPlaces&&!e.decimalPlacesRawValue?e.decimalPlacesRawValue=Math.max(Math.max(e.decimalPlacesShownOnBlur,e.decimalPlacesShownOnFocus)+s,Number(t.originalDecimalPlacesRawValue)+s):e.decimalPlacesRawValue=Math.max(Math.max(e.decimalPlacesShownOnBlur,e.decimalPlacesShownOnFocus)+s,Number(e.decimalPlacesRawValue)+s)}_calculateVMinAndVMaxIntegerSizes(){let[e]=this.settings.maximumValue.toString().split("."),[t]=!this.settings.minimumValue&&this.settings.minimumValue!==0?[]:this.settings.minimumValue.toString().split(".");e=e.replace(this.settings.negativeSignCharacter,""),t=t.replace(this.settings.negativeSignCharacter,""),this.settings.mIntPos=Math.max(e.length,1),this.settings.mIntNeg=Math.max(t.length,1)}_calculateValuesToStringsKeys(){this.settings.valuesToStrings?this.valuesToStringsKeys=Object.keys(this.settings.valuesToStrings):this.valuesToStringsKeys=[]}static _cachesUsualRegularExpressions(e,t){let n;e.negativeSignCharacter!==g.options.negativeSignCharacter.hyphen?n=`([-\\${e.negativeSignCharacter}]?)`:n="(-?)",t.aNegRegAutoStrip=n,e.allowedAutoStrip=new RegExp(`[^-0123456789\\${e.decimalCharacter}]`,"g"),e.numRegAutoStrip=new RegExp(`${n}(?:\\${e.decimalCharacter}?([0-9]+\\${e.decimalCharacter}[0-9]+)|([0-9]*(?:\\${e.decimalCharacter}[0-9]*)?))`),e.stripReg=new RegExp(`^${t.aNegRegAutoStrip}0*([0-9])`),e.formulaChars=new RegExp(`[0-9${e.decimalCharacter}+\\-*/() ]`)}_transformOptionsValuesToDefaultTypes(){for(const e in this.settings)if(Object.prototype.hasOwnProperty.call(this.settings,e)){const t=this.settings[e];(t==="true"||t==="false")&&(this.settings[e]=t==="true"),typeof t=="number"&&(this.settings[e]=t.toString())}}static _convertOldOptionsToNewOnes(e){const t={aSep:"digitGroupSeparator",nSep:"showOnlyNumbersOnFocus",dGroup:"digitalGroupSpacing",aDec:"decimalCharacter",altDec:"decimalCharacterAlternative",aSign:"currencySymbol",pSign:"currencySymbolPlacement",pNeg:"negativePositiveSignPlacement",aSuffix:"suffixText",oLimits:"overrideMinMaxLimits",vMax:"maximumValue",vMin:"minimumValue",mDec:"decimalPlacesOverride",eDec:"decimalPlacesShownOnFocus",scaleDecimal:"decimalPlacesShownOnBlur",aStor:"saveValueToSessionStorage",mRound:"roundingMethod",aPad:"allowDecimalPadding",nBracket:"negativeBracketsTypeOnBlur",wEmpty:"emptyInputBehavior",lZero:"leadingZero",aForm:"formatOnPageLoad",sNumber:"selectNumberOnly",anDefault:"defaultValueOverride",unSetOnSubmit:"unformatOnSubmit",outputType:"outputFormat",debug:"showWarnings",allowDecimalPadding:!0,alwaysAllowDecimalCharacter:!0,caretPositionOnFocus:!0,createLocalList:!0,currencySymbol:!0,currencySymbolPlacement:!0,decimalCharacter:!0,decimalCharacterAlternative:!0,decimalPlaces:!0,decimalPlacesRawValue:!0,decimalPlacesShownOnBlur:!0,decimalPlacesShownOnFocus:!0,defaultValueOverride:!0,digitalGroupSpacing:!0,digitGroupSeparator:!0,divisorWhenUnfocused:!0,emptyInputBehavior:!0,eventBubbles:!0,eventIsCancelable:!0,failOnUnknownOption:!0,formatOnPageLoad:!0,formulaMode:!0,historySize:!0,isCancellable:!0,leadingZero:!0,maximumValue:!0,minimumValue:!0,modifyValueOnUpDownArrow:!0,modifyValueOnWheel:!0,negativeBracketsTypeOnBlur:!0,negativePositiveSignPlacement:!0,negativeSignCharacter:!0,negativePositiveSignBehavior:!0,noEventListeners:!0,onInvalidPaste:!0,outputFormat:!0,overrideMinMaxLimits:!0,positiveSignCharacter:!0,rawValueDivisor:!0,readOnly:!0,roundingMethod:!0,saveValueToSessionStorage:!0,selectNumberOnly:!0,selectOnFocus:!0,serializeSpaces:!0,showOnlyNumbersOnFocus:!0,showPositiveSign:!0,showWarnings:!0,styleRules:!0,suffixText:!0,symbolWhenUnfocused:!0,upDownStep:!0,unformatOnHover:!0,unformatOnSubmit:!0,valuesToStrings:!0,watchExternalChanges:!0,wheelOn:!0,wheelStep:!0,allowedAutoStrip:!0,formulaChars:!0,isNegativeSignAllowed:!0,isPositiveSignAllowed:!0,mIntNeg:!0,mIntPos:!0,numRegAutoStrip:!0,originalDecimalPlaces:!0,originalDecimalPlacesRawValue:!0,stripReg:!0};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t[n]===!0)continue;Object.prototype.hasOwnProperty.call(t,n)?(u.warning(`You are using the deprecated option name '${n}'. Please use '${t[n]}' instead from now on. The old option name will be dropped very soon.`,!0),e[t[n]]=e[n],delete e[n]):e.failOnUnknownOption&&u.throwError(`Option name '${n}' is unknown. Please fix the options passed to autoNumeric`)}"mDec"in e&&u.warning("The old `mDec` option has been deprecated in favor of more accurate options ; `decimalPlaces`, `decimalPlacesRawValue`, `decimalPlacesShownOnFocus` and `decimalPlacesShownOnBlur`.",!0)}_setSettings(e,t=!1){(t||!u.isNull(e))&&this.constructor._convertOldOptionsToNewOnes(e),t?("decimalPlacesRawValue"in e&&(this.settings.originalDecimalPlacesRawValue=e.decimalPlacesRawValue),"decimalPlaces"in e&&(this.settings.originalDecimalPlaces=e.decimalPlaces),this.constructor._calculateDecimalPlacesOnUpdate(e,this.settings),this._mergeSettings(e)):(this.settings={},this._mergeSettings(this.constructor.getDefaultConfig(),this.domElement.dataset,e,{rawValue:this.defaultRawValue}),this.caretFix=!1,this.throwInput=!0,this.allowedTagList=G.allowedTagList,this.runOnce=!1,this.hoveredWithAlt=!1),this._transformOptionsValuesToDefaultTypes(),this._runCallbacksFoundInTheSettingsObject(),this.constructor._correctNegativePositiveSignPlacementOption(this.settings),this.constructor._correctCaretPositionOnFocusAndSelectOnFocusOptions(this.settings),this.constructor._setNegativePositiveSignPermissions(this.settings),t||(u.isNull(e)||!e.decimalPlaces?this.settings.originalDecimalPlaces=null:this.settings.originalDecimalPlaces=e.decimalPlaces,this.settings.originalDecimalPlacesRawValue=this.settings.decimalPlacesRawValue,this.constructor._calculateDecimalPlacesOnInit(this.settings)),this._calculateVMinAndVMaxIntegerSizes(),this._setTrailingNegativeSignInfo(),this.regex={},this.constructor._cachesUsualRegularExpressions(this.settings,this.regex),this.constructor._setBrackets(this.settings),this._calculateValuesToStringsKeys(),u.isEmptyObj(this.settings)&&u.throwError("Unable to set the settings, those are invalid ; an empty object was given."),this.constructor.validate(this.settings,!1,e),this._keepAnOriginalSettingsCopy()}static _setNegativePositiveSignPermissions(e){e.isNegativeSignAllowed=e.minimumValue<0,e.isPositiveSignAllowed=e.maximumValue>=0}static _toNumericValue(e,t){let n;return u.isNumber(Number(e))?(u.isNumberStrict(e)||(e=String(e).trim()),n=u.scientificToDecimal(e)):(n=this._convertToNumericString(e.toString(),t),u.isNumber(Number(n))||(u.warning(`The given value "${e}" cannot be converted to a numeric one and therefore cannot be used appropriately.`,t.showWarnings),n=NaN)),n}_preparePastedText(e){return this.constructor._stripAllNonNumberCharacters(e,this.settings,!0,this.isFocused)}static _checkIfInRange(e,t,n){const s=u.parseStr(e);return u.testMinMax(t,s)>-1&&u.testMinMax(n,s)<1}_updateInternalProperties(){this.selection=u.getElementSelection(this.domElement),this.processed=!1}_updateEventKeyInfo(e){this.eventKey=u.character(e)}_saveCancellableValue(){this.savedCancellableValue=this.rawValue}_setSelection(e,t){e=Math.max(e,0),t=Math.min(t,u.getElementValue(this.domElement).length),this.selection={start:e,end:t,length:t-e},u.setElementSelection(this.domElement,e,t)}_setCaretPosition(e){this._setSelection(e,e)}_getLeftAndRightPartAroundTheSelection(){const e=u.getElementValue(this.domElement),t=e.substring(0,this.selection.start),n=e.substring(this.selection.end,e.length);return[t,n]}_getUnformattedLeftAndRightPartAroundTheSelection(){let[e,t]=this._getLeftAndRightPartAroundTheSelection();if(e===""&&t==="")return["",""];let n=!0;return(this.eventKey===G.keyName.Hyphen||this.eventKey===G.keyName.Minus)&&Number(e)===0&&(n=!1),this.isTrailingNegative&&(u.isNegative(t,this.settings.negativeSignCharacter)&&!u.isNegative(e,this.settings.negativeSignCharacter)||t===""&&u.isNegative(e,this.settings.negativeSignCharacter,!0))&&(e=e.replace(this.settings.negativeSignCharacter,""),t=t.replace(this.settings.negativeSignCharacter,""),e=e.replace("-",""),t=t.replace("-",""),e=`-${e}`),e=g._stripAllNonNumberCharactersExceptCustomDecimalChar(e,this.settings,n,this.isFocused),t=g._stripAllNonNumberCharactersExceptCustomDecimalChar(t,this.settings,!1,this.isFocused),[e,t]}_normalizeParts(e,t){let n=!0;(this.eventKey===G.keyName.Hyphen||this.eventKey===G.keyName.Minus)&&Number(e)===0&&(n=!1),this.isTrailingNegative&&u.isNegative(t,this.settings.negativeSignCharacter)&&!u.isNegative(e,this.settings.negativeSignCharacter)&&(e=`-${e}`,t=t.replace(this.settings.negativeSignCharacter,"")),e=g._stripAllNonNumberCharactersExceptCustomDecimalChar(e,this.settings,n,this.isFocused),t=g._stripAllNonNumberCharactersExceptCustomDecimalChar(t,this.settings,!1,this.isFocused),this.settings.leadingZero===g.options.leadingZero.deny&&(this.eventKey===G.keyName.num0||this.eventKey===G.keyName.numpad0)&&Number(e)===0&&!u.contains(e,this.settings.decimalCharacter)&&t!==""&&(e=e.substring(0,e.length-1));let s=e+t;if(this.settings.decimalCharacter){const r=s.match(new RegExp(`^${this.regex.aNegRegAutoStrip}\\${this.settings.decimalCharacter}`));r&&(e=e.replace(r[1],r[1]+"0"),s=e+t)}return[e,t,s]}_setValueParts(e,t,n=!1){const[s,r,o]=this._normalizeParts(e,t),[a,l]=g._checkIfInRangeWithOverrideOption(o,this.settings);if(a&&l){const h=g._truncateDecimalPlaces(o,this.settings,n,this.settings.decimalPlacesRawValue).replace(this.settings.decimalCharacter,".");if(h===""||h===this.settings.negativeSignCharacter){let _;switch(this.settings.emptyInputBehavior){case g.options.emptyInputBehavior.focus:case g.options.emptyInputBehavior.press:case g.options.emptyInputBehavior.always:_="";break;case g.options.emptyInputBehavior.min:_=this.settings.minimumValue;break;case g.options.emptyInputBehavior.max:_=this.settings.maximumValue;break;case g.options.emptyInputBehavior.zero:_="0";break;case g.options.emptyInputBehavior.null:_=null;break;default:_=this.settings.emptyInputBehavior}this._setRawValue(_)}else this._setRawValue(this._trimLeadingAndTrailingZeros(h));const b=g._truncateDecimalPlaces(o,this.settings,n,this.settings.decimalPlacesShownOnFocus);let k=s.length;return k>b.length&&(k=b.length),k===1&&s==="0"&&this.settings.leadingZero===g.options.leadingZero.deny&&(r===""||s==="0"&&r!==""?k=1:k=0),this._setElementValue(b,!1),this._setCaretPosition(k),!0}return this._triggerRangeEvents(a,l),!1}_getSignPosition(){let e;if(this.settings.currencySymbol){const t=this.settings.currencySymbol.length,n=u.getElementValue(this.domElement);if(this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix)this.settings.negativeSignCharacter&&n&&n.charAt(0)===this.settings.negativeSignCharacter?e=[1,t+1]:e=[0,t];else{const s=n.length;e=[s-t,s]}}else e=[1e3,-1];return e}_expandSelectionOnSign(){const[e,t]=this._getSignPosition(),n=this.selection;n.start<t&&n.end>e&&((n.start<e||n.end>t)&&u.getElementValue(this.domElement).substring(Math.max(n.start,e),Math.min(n.end,t)).match(/^\s*$/)?n.start<e?this._setSelection(n.start,e):this._setSelection(t,n.end):this._setSelection(Math.min(n.start,e),Math.max(n.end,t)))}_checkPaste(){if(!this.formatted&&!u.isUndefined(this.valuePartsBeforePaste)){const e=this.valuePartsBeforePaste,[t,n]=this._getLeftAndRightPartAroundTheSelection();delete this.valuePartsBeforePaste;const s=t.substr(0,e[0].length)+g._stripAllNonNumberCharactersExceptCustomDecimalChar(t.substr(e[0].length),this.settings,!0,this.isFocused);this._setValueParts(s,n,!0)||(this._setElementValue(e.join(""),!1),this._setCaretPosition(e[0].length))}}static _shouldSkipEventKey(e){const t=u.isInArray(e,G.keyName._allFnKeys),n=e===G.keyName.OSLeft||e===G.keyName.OSRight,s=e===G.keyName.ContextMenu,r=u.isInArray(e,G.keyName._someNonPrintableKeys),o=e===G.keyName.NumLock||e===G.keyName.ScrollLock||e===G.keyName.Insert||e===G.keyName.Command,a=e===G.keyName.Unidentified;return t||n||s||r||a||o}_processNonPrintableKeysAndShortcuts(e){if((e.ctrlKey||e.metaKey)&&e.type==="keyup"&&!u.isUndefined(this.valuePartsBeforePaste)||e.shiftKey&&this.eventKey===G.keyName.Insert)return this._checkPaste(),!1;if(this.constructor._shouldSkipEventKey(this.eventKey))return!0;if((e.ctrlKey||e.metaKey)&&this.eventKey===G.keyName.a)return this.settings.selectNumberOnly&&(e.preventDefault(),this.selectNumber()),!0;if((e.ctrlKey||e.metaKey)&&(this.eventKey===G.keyName.c||this.eventKey===G.keyName.v||this.eventKey===G.keyName.x))return e.type==="keydown"&&this._expandSelectionOnSign(),(this.eventKey===G.keyName.v||this.eventKey===G.keyName.Insert)&&(e.type==="keydown"||e.type==="keypress"?u.isUndefined(this.valuePartsBeforePaste)&&(this.valuePartsBeforePaste=this._getLeftAndRightPartAroundTheSelection()):this._checkPaste()),e.type==="keydown"||e.type==="keypress"||this.eventKey===G.keyName.c;if(e.ctrlKey||e.metaKey)return!(this.eventKey===G.keyName.Z||this.eventKey===G.keyName.z);if(this.eventKey===G.keyName.LeftArrow||this.eventKey===G.keyName.RightArrow){if(e.type==="keydown"&&!e.shiftKey){const t=u.getElementValue(this.domElement);this.eventKey===G.keyName.LeftArrow&&(t.charAt(this.selection.start-2)===this.settings.digitGroupSeparator||t.charAt(this.selection.start-2)===this.settings.decimalCharacter)?this._setCaretPosition(this.selection.start-1):this.eventKey===G.keyName.RightArrow&&(t.charAt(this.selection.start+1)===this.settings.digitGroupSeparator||t.charAt(this.selection.start+1)===this.settings.decimalCharacter)&&this._setCaretPosition(this.selection.start+1)}return!0}return u.isInArray(this.eventKey,G.keyName._directionKeys)}_processCharacterDeletionIfTrailingNegativeSign([e,t]){const n=u.getElementValue(this.domElement),s=u.isNegative(n,this.settings.negativeSignCharacter);if(this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.suffix&&(this.eventKey===G.keyName.Backspace?(this.caretFix=this.selection.start>=n.indexOf(this.settings.suffixText)&&this.settings.suffixText!=="",n.charAt(this.selection.start-1)==="-"?e=e.substring(1):this.selection.start<=n.length-this.settings.suffixText.length&&(e=e.substring(0,e.length-1))):(this.caretFix=this.selection.start>=n.indexOf(this.settings.suffixText)&&this.settings.suffixText!=="",this.selection.start>=n.indexOf(this.settings.currencySymbol)+this.settings.currencySymbol.length&&(t=t.substring(1,t.length)),u.isNegative(e,this.settings.negativeSignCharacter)&&n.charAt(this.selection.start)==="-"&&(e=e.substring(1)))),this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix)switch(this.settings.negativePositiveSignPlacement){case g.options.negativePositiveSignPlacement.left:this.caretFix=this.selection.start>=n.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length,this.eventKey===G.keyName.Backspace?this.selection.start===n.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length&&s?e=e.substring(1):e!=="-"&&(this.selection.start<=n.indexOf(this.settings.negativeSignCharacter)||!s)&&(e=e.substring(0,e.length-1)):(e[0]==="-"&&(t=t.substring(1)),this.selection.start===n.indexOf(this.settings.negativeSignCharacter)&&s&&(e=e.substring(1)));break;case g.options.negativePositiveSignPlacement.right:this.caretFix=this.selection.start>=n.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length,this.eventKey===G.keyName.Backspace?this.selection.start===n.indexOf(this.settings.negativeSignCharacter)+this.settings.negativeSignCharacter.length?e=e.substring(1):(e!=="-"&&this.selection.start<=n.indexOf(this.settings.negativeSignCharacter)-this.settings.currencySymbol.length||e!==""&&!s)&&(e=e.substring(0,e.length-1)):(this.caretFix=this.selection.start>=n.indexOf(this.settings.currencySymbol)&&this.settings.currencySymbol!=="",this.selection.start===n.indexOf(this.settings.negativeSignCharacter)&&(e=e.substring(1)),t=t.substring(1));break}return[e,t]}_processCharacterDeletion(e){let t,n;return this.selection.length?(this._expandSelectionOnSign(),[t,n]=this._getUnformattedLeftAndRightPartAroundTheSelection()):([t,n]=this._getUnformattedLeftAndRightPartAroundTheSelection(),t===""&&n===""&&(this.throwInput=!1),this.isTrailingNegative&&u.isNegative(u.getElementValue(this.domElement),this.settings.negativeSignCharacter)?[t,n]=this._processCharacterDeletionIfTrailingNegativeSign([t,n]):this.eventKey===G.keyName.Backspace?t=t.substring(0,t.length-1):n=n.substring(1,n.length)),!this.constructor._isWithinRangeWithOverrideOption(`${t}${n}`,this.settings)||u.getElementValue(e.target)===this.settings.currencySymbol?!1:(this._setValueParts(t,n),!0)}_isDecimalCharacterInsertionAllowed(){return String(this.settings.decimalPlacesShownOnFocus)!==String(g.options.decimalPlacesShownOnFocus.none)&&String(this.settings.decimalPlaces)!==String(g.options.decimalPlaces.none)}_processCharacterInsertion(){let[e,t]=this._getUnformattedLeftAndRightPartAroundTheSelection();if(this.eventKey!==G.keyName.AndroidDefault&&(this.throwInput=!0),this.eventKey===this.settings.decimalCharacter||this.settings.decimalCharacterAlternative&&this.eventKey===this.settings.decimalCharacterAlternative){if(!this._isDecimalCharacterInsertionAllowed()||!this.settings.decimalCharacter)return!1;if(this.settings.alwaysAllowDecimalCharacter)e=e.replace(this.settings.decimalCharacter,""),t=t.replace(this.settings.decimalCharacter,"");else{if(u.contains(e,this.settings.decimalCharacter)||t.indexOf(this.settings.decimalCharacter)>0)return!0;t.indexOf(this.settings.decimalCharacter)===0&&(t=t.substr(1))}return this.settings.negativeSignCharacter&&u.contains(t,this.settings.negativeSignCharacter)&&(e=`${this.settings.negativeSignCharacter}${e}`,t=t.replace(this.settings.negativeSignCharacter,"")),this._setValueParts(e+this.settings.decimalCharacter,t),!0}if((this.eventKey==="-"||this.eventKey==="+")&&this.settings.isNegativeSignAllowed)return e===""&&u.contains(t,"-")?(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="+")&&(t=t.replace("-","")):u.isNegativeStrict(e,"-")?(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="+")&&(e=e.replace("-","")):(this.settings.negativePositiveSignBehavior||!this.settings.negativePositiveSignBehavior&&this.eventKey==="-")&&(e=`${this.settings.negativeSignCharacter}${e}`),this._setValueParts(e,t),!0;const n=Number(this.eventKey);return n>=0&&n<=9?(this.settings.isNegativeSignAllowed&&e===""&&u.contains(t,"-")&&(e="-",t=t.substring(1,t.length)),this.settings.maximumValue<=0&&this.settings.minimumValue<this.settings.maximumValue&&!u.contains(u.getElementValue(this.domElement),this.settings.negativeSignCharacter)&&this.eventKey!=="0"&&(e=`-${e}`),this._setValueParts(`${e}${this.eventKey}`,t),!0):(this.throwInput=!1,!1)}_formatValue(e){const t=u.getElementValue(this.domElement);let[n]=this._getUnformattedLeftAndRightPartAroundTheSelection();if((this.settings.digitGroupSeparator===""||this.settings.digitGroupSeparator!==""&&!u.contains(t,this.settings.digitGroupSeparator))&&(this.settings.currencySymbol===""||this.settings.currencySymbol!==""&&!u.contains(t,this.settings.currencySymbol))){let[o]=t.split(this.settings.decimalCharacter),a="";u.isNegative(o,this.settings.negativeSignCharacter)&&(a=this.settings.negativeSignCharacter,o=o.replace(this.settings.negativeSignCharacter,""),n=n.replace("-","")),a===""&&o.length>this.settings.mIntPos&&n.charAt(0)==="0"&&(n=n.slice(1)),a===this.settings.negativeSignCharacter&&o.length>this.settings.mIntNeg&&n.charAt(0)==="0"&&(n=n.slice(1)),this.isTrailingNegative||(n=`${a}${n}`)}const s=this.constructor._addGroupSeparators(t,this.settings,this.isFocused,this.rawValue);let r=s.length;if(s){const o=n.split("");if((this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.suffix||this.settings.negativePositiveSignPlacement!==g.options.negativePositiveSignPlacement.prefix&&this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix)&&o[0]===this.settings.negativeSignCharacter&&!this.settings.isNegativeSignAllowed&&(o.shift(),(this.eventKey===G.keyName.Backspace||this.eventKey===G.keyName.Delete)&&this.caretFix&&((this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix&&this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.left||this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix&&this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.suffix)&&(o.push(this.settings.negativeSignCharacter),this.caretFix=e.type==="keydown"),this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix&&this.settings.negativePositiveSignPlacement===g.options.negativePositiveSignPlacement.right))){const p=this.settings.currencySymbol.split(""),h=["\\","^","$",".","|","?","*","+","(",")","["],b=[];p.forEach((k,_)=>{_=p[k],u.isInArray(_,h)?b.push("\\"+_):b.push(_)}),this.eventKey===G.keyName.Backspace&&this.settings.negativeSignCharacter==="-"&&b.push("-"),o.push(b.join("")),this.caretFix=e.type==="keydown"}for(let p=0;p<o.length;p++)o[p].match("\\d")||(o[p]="\\"+o[p]);let a;this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix?a=new RegExp(`^.*?${o.join(".*?")}`):a=new RegExp(`^.*?[${this.settings.currencySymbol}]*${o.join(".*?")}`);const l=s.match(a);l?(r=l[0].length,this.settings.showPositiveSign&&(r===0&&l.input.charAt(0)===this.settings.positiveSignCharacter&&(r=l.input.indexOf(this.settings.currencySymbol)===1?this.settings.currencySymbol.length+1:1),r===0&&l.input.charAt(this.settings.currencySymbol.length)===this.settings.positiveSignCharacter&&(r=this.settings.currencySymbol.length+1)),(r===0&&s.charAt(0)!==this.settings.negativeSignCharacter||r===1&&s.charAt(0)===this.settings.negativeSignCharacter)&&this.settings.currencySymbol&&this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.prefix&&(r=this.settings.currencySymbol.length+(u.isNegativeStrict(s,this.settings.negativeSignCharacter)?1:0))):(this.settings.currencySymbol&&this.settings.currencySymbolPlacement===g.options.currencySymbolPlacement.suffix&&(r-=this.settings.currencySymbol.length),this.settings.suffixText&&(r-=this.settings.suffixText.length))}s!==t&&(this._setElementValue(s,!1),this._setCaretPosition(r)),this.formatted=!0}static _serialize(e,t=!1,n="unformatted",s="+",r=null){const o=[];typeof e=="object"&&e.nodeName.toLowerCase()==="form"&&Array.prototype.slice.call(e.elements).forEach(l=>{if(l.name&&!l.disabled&&["file","reset","submit","button"].indexOf(l.type)===-1){if(l.type==="select-multiple")Array.prototype.slice.call(l.options).forEach(p=>{p.selected&&(t?o.push({name:l.name,value:p.value}):o.push(`${encodeURIComponent(l.name)}=${encodeURIComponent(p.value)}`))});else if(["checkbox","radio"].indexOf(l.type)===-1||l.checked){let p;if(this.isManagedByAutoNumeric(l)){let h;switch(n){case"unformatted":h=this.getAutoNumericElement(l),u.isNull(h)||(p=this.unformat(l,h.getSettings()));break;case"localized":if(h=this.getAutoNumericElement(l),!u.isNull(h)){const b=u.cloneObject(h.getSettings());u.isNull(r)||(b.outputFormat=r),p=this.localize(l,b)}break;case"formatted":default:p=l.value}}else p=l.value;u.isUndefined(p)&&u.throwError("This error should never be hit. If it has, something really wrong happened!"),t?o.push({name:l.name,value:p}):o.push(`${encodeURIComponent(l.name)}=${encodeURIComponent(p)}`)}}});let a;return t?a=o:(a=o.join("&"),s==="+"&&(a=a.replace(/%20/g,"+"))),a}static _serializeNumericString(e,t="+"){return this._serialize(e,!1,"unformatted",t)}static _serializeFormatted(e,t="+"){return this._serialize(e,!1,"formatted",t)}static _serializeLocalized(e,t="+",n=null){return this._serialize(e,!1,"localized",t,n)}static _serializeNumericStringArray(e,t="+"){return this._serialize(e,!0,"unformatted",t)}static _serializeFormattedArray(e,t="+"){return this._serialize(e,!0,"formatted",t)}static _serializeLocalizedArray(e,t="+",n=null){return this._serialize(e,!0,"localized",t,n)}}g.multiple=(i,e=null,t=null)=>{const n=[];if(u.isObject(e)&&(t=e,e=null),u.isString(i))i=[...document.querySelectorAll(i)];else if(u.isObject(i)){Object.prototype.hasOwnProperty.call(i,"rootElement")||u.throwError("The object passed to the 'multiple' function is invalid ; no 'rootElement' attribute found.");const _=[...i.rootElement.querySelectorAll("input")];Object.prototype.hasOwnProperty.call(i,"exclude")?(Array.isArray(i.exclude)||u.throwError("The 'exclude' array passed to the 'multiple' function is invalid."),i=u.filterOut(_,i.exclude)):i=_}else u.isArray(i)||u.throwError("The given parameters to the 'multiple' function are invalid.");if(i.length===0){let _=!0;return!u.isNull(t)&&u.isBoolean(t.showWarnings)&&(_=t.showWarnings),u.warning("No valid DOM elements were given hence no AutoNumeric objects were instantiated.",_),[]}const r=u.isArray(e)&&e.length>=1;let o=!1,a=!1;if(r){const _=typeof Number(e[0]);o=_==="number"&&!isNaN(Number(e[0])),o||(_==="string"||isNaN(_)||_==="object")&&(a=!0)}const l=u.isArray(t)&&t.length>=1;let p=!1;if(l){const _=typeof t[0];(_==="string"||_==="object")&&(p=!0)}let h;a?h=g.mergeOptions(e):p?h=g.mergeOptions(t):h=t;const b=u.isNumber(e);let k;return o&&(k=e.length),i.forEach((_,x)=>{b?n.push(new g(_,e,h)):o&&x<=k?n.push(new g(_,e[x],h)):n.push(new g(_,null,h))}),n};g.events={correctedValue:"autoNumeric:correctedValue",initialized:"autoNumeric:initialized",invalidFormula:"autoNumeric:invalidFormula",invalidValue:"autoNumeric:invalidValue",formatted:"autoNumeric:formatted",rawValueModified:"autoNumeric:rawValueModified",minRangeExceeded:"autoNumeric:minExceeded",maxRangeExceeded:"autoNumeric:maxExceeded",native:{input:"input",change:"change"},validFormula:"autoNumeric:validFormula"};Object.freeze(g.events.native);Object.freeze(g.events);Object.defineProperty(g,"events",{configurable:!1,writable:!1});g.options={allowDecimalPadding:{always:!0,never:!1,floats:"floats"},alwaysAllowDecimalCharacter:{alwaysAllow:!0,doNotAllow:!1},caretPositionOnFocus:{start:"start",end:"end",decimalLeft:"decimalLeft",decimalRight:"decimalRight",doNoForceCaretPosition:null},createLocalList:{createList:!0,doNotCreateList:!1},currencySymbol:{none:"",currencySign:"",austral:"",australCentavo:"",baht:"",cedi:"",cent:"",colon:"",cruzeiro:"",dollar:"$",dong:"",drachma:"",dram:"",european:"",euro:"",florin:"",franc:"",guarani:"",hryvnia:"",kip:"",att:"",lepton:".",lira:"",liraOld:"",lari:"",mark:"",mill:"",naira:"",peseta:"",peso:"",pfennig:"",pound:"",real:"R$ ",riel:"",ruble:"",rupee:"",rupeeOld:"",shekel:"",shekelAlt:"",taka:"",tenge:"",togrog:"",won:"",yen:""},currencySymbolPlacement:{prefix:"p",suffix:"s"},decimalCharacter:{comma:",",dot:".",middleDot:"",arabicDecimalSeparator:"",decimalSeparatorKeySymbol:""},decimalCharacterAlternative:{none:null,comma:",",dot:"."},decimalPlaces:{none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesRawValue:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesShownOnBlur:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},decimalPlacesShownOnFocus:{useDefault:null,none:0,one:1,two:2,three:3,four:4,five:5,six:6},defaultValueOverride:{doNotOverride:null},digitalGroupSpacing:{two:"2",twoThree:"2t",twoScaled:"2s",three:"3",four:"4"},digitGroupSeparator:{comma:",",dot:".",normalSpace:" ",thinSpace:"",narrowNoBreakSpace:"",noBreakSpace:"",noSeparator:"",apostrophe:"'",arabicThousandsSeparator:"",dotAbove:"",privateUseTwo:""},divisorWhenUnfocused:{none:null,percentage:100,permille:1e3,basisPoint:1e4},emptyInputBehavior:{focus:"focus",press:"press",always:"always",zero:"zero",min:"min",max:"max",null:"null"},eventBubbles:{bubbles:!0,doesNotBubble:!1},eventIsCancelable:{isCancelable:!0,isNotCancelable:!1},failOnUnknownOption:{fail:!0,ignore:!1},formatOnPageLoad:{format:!0,doNotFormat:!1},formulaMode:{enabled:!0,disabled:!1},historySize:{verySmall:5,small:10,medium:20,large:50,veryLarge:100,insane:Number.MAX_SAFE_INTEGER},invalidClass:"an-invalid",isCancellable:{cancellable:!0,notCancellable:!1},leadingZero:{allow:"allow",deny:"deny",keep:"keep"},maximumValue:{tenTrillions:"10000000000000",oneBillion:"1000000000",zero:"0"},minimumValue:{tenTrillions:"-10000000000000",oneBillion:"-1000000000",zero:"0"},modifyValueOnUpDownArrow:{modifyValue:!0,doNothing:!1},modifyValueOnWheel:{modifyValue:!0,doNothing:!1},negativeBracketsTypeOnBlur:{parentheses:"(,)",brackets:"[,]",chevrons:"<,>",curlyBraces:"{,}",angleBrackets:",",japaneseQuotationMarks:",",halfBrackets:",",whiteSquareBrackets:",",quotationMarks:",",guillemets:",",none:null},negativePositiveSignPlacement:{prefix:"p",suffix:"s",left:"l",right:"r",none:null},negativeSignCharacter:{hyphen:"-",minus:"",heavyMinus:"",fullWidthHyphen:"",circledMinus:"",squaredMinus:"",triangleMinus:"",plusMinus:"",minusPlus:"",dotMinus:"",minusTilde:"",not:""},negativePositiveSignBehavior:{toggle:!0,doNotToggle:!1},noEventListeners:{noEvents:!0,addEvents:!1},onInvalidPaste:{error:"error",ignore:"ignore",clamp:"clamp",truncate:"truncate",replace:"replace"},outputFormat:{string:"string",number:"number",dot:".",negativeDot:"-.",comma:",",negativeComma:"-,",dotNegative:".-",commaNegative:",-",none:null},overrideMinMaxLimits:{ceiling:"ceiling",floor:"floor",ignore:"ignore",invalid:"invalid",doNotOverride:null},positiveSignCharacter:{plus:"+",fullWidthPlus:"",heavyPlus:"",doublePlus:"",triplePlus:"",circledPlus:"",squaredPlus:"",trianglePlus:"",plusMinus:"",minusPlus:"",dotPlus:"",altHebrewPlus:"",normalSpace:" ",thinSpace:"",narrowNoBreakSpace:"",noBreakSpace:""},rawValueDivisor:{none:null,percentage:100,permille:1e3,basisPoint:1e4},readOnly:{readOnly:!0,readWrite:!1},roundingMethod:{halfUpSymmetric:"S",halfUpAsymmetric:"A",halfDownSymmetric:"s",halfDownAsymmetric:"a",halfEvenBankersRounding:"B",upRoundAwayFromZero:"U",downRoundTowardZero:"D",toCeilingTowardPositiveInfinity:"C",toFloorTowardNegativeInfinity:"F",toNearest05:"N05",toNearest05Alt:"CHF",upToNext05:"U05",downToNext05:"D05"},saveValueToSessionStorage:{save:!0,doNotSave:!1},selectNumberOnly:{selectNumbersOnly:!0,selectAll:!1},selectOnFocus:{select:!0,doNotSelect:!1},serializeSpaces:{plus:"+",percent:"%20"},showOnlyNumbersOnFocus:{onlyNumbers:!0,showAll:!1},showPositiveSign:{show:!0,hide:!1},showWarnings:{show:!0,hide:!1},styleRules:{none:null,positiveNegative:{positive:"autoNumeric-positive",negative:"autoNumeric-negative"},range0To100With4Steps:{ranges:[{min:0,max:25,class:"autoNumeric-red"},{min:25,max:50,class:"autoNumeric-orange"},{min:50,max:75,class:"autoNumeric-yellow"},{min:75,max:100,class:"autoNumeric-green"}]},evenOdd:{userDefined:[{callback:i=>i%2===0,classes:["autoNumeric-even","autoNumeric-odd"]}]},rangeSmallAndZero:{userDefined:[{callback:i=>i>=-1&&i<0?0:Number(i)===0?1:i>0&&i<=1?2:null,classes:["autoNumeric-small-negative","autoNumeric-zero","autoNumeric-small-positive"]}]}},suffixText:{none:"",percentage:"%",permille:"",basisPoint:""},symbolWhenUnfocused:{none:null,percentage:"%",permille:"",basisPoint:""},unformatOnHover:{unformat:!0,doNotUnformat:!1},unformatOnSubmit:{unformat:!0,keepCurrentValue:!1},upDownStep:{progressive:"progressive"},valuesToStrings:{none:null,zeroDash:{0:"-"},oneAroundZero:{"-1":"Min",1:"Max"}},watchExternalChanges:{watch:!0,doNotWatch:!1},wheelOn:{focus:"focus",hover:"hover"},wheelStep:{progressive:"progressive"}};function _w(i){return Object.getOwnPropertyNames(i).forEach(e=>{e==="valuesToStrings"?Object.getOwnPropertyNames(i.valuesToStrings).forEach(n=>{i.valuesToStrings[n]!==null&&Object.freeze(i.valuesToStrings[n])}):e!=="styleRules"&&i[e]!==null&&Object.freeze(i[e])}),Object.freeze(i)}_w(g.options);Object.defineProperty(g,"options",{configurable:!1,writable:!1});g.defaultSettings={allowDecimalPadding:g.options.allowDecimalPadding.always,alwaysAllowDecimalCharacter:g.options.alwaysAllowDecimalCharacter.doNotAllow,caretPositionOnFocus:g.options.caretPositionOnFocus.doNoForceCaretPosition,createLocalList:g.options.createLocalList.createList,currencySymbol:g.options.currencySymbol.none,currencySymbolPlacement:g.options.currencySymbolPlacement.prefix,decimalCharacter:g.options.decimalCharacter.dot,decimalCharacterAlternative:g.options.decimalCharacterAlternative.none,decimalPlaces:g.options.decimalPlaces.two,decimalPlacesRawValue:g.options.decimalPlacesRawValue.useDefault,decimalPlacesShownOnBlur:g.options.decimalPlacesShownOnBlur.useDefault,decimalPlacesShownOnFocus:g.options.decimalPlacesShownOnFocus.useDefault,defaultValueOverride:g.options.defaultValueOverride.doNotOverride,digitalGroupSpacing:g.options.digitalGroupSpacing.three,digitGroupSeparator:g.options.digitGroupSeparator.comma,divisorWhenUnfocused:g.options.divisorWhenUnfocused.none,emptyInputBehavior:g.options.emptyInputBehavior.focus,eventBubbles:g.options.eventBubbles.bubbles,eventIsCancelable:g.options.eventIsCancelable.isCancelable,failOnUnknownOption:g.options.failOnUnknownOption.ignore,formatOnPageLoad:g.options.formatOnPageLoad.format,formulaMode:g.options.formulaMode.disabled,historySize:g.options.historySize.medium,invalidClass:g.options.invalidClass,isCancellable:g.options.isCancellable.cancellable,leadingZero:g.options.leadingZero.deny,maximumValue:g.options.maximumValue.tenTrillions,minimumValue:g.options.minimumValue.tenTrillions,modifyValueOnUpDownArrow:g.options.modifyValueOnUpDownArrow.modifyValue,modifyValueOnWheel:g.options.modifyValueOnWheel.modifyValue,negativeBracketsTypeOnBlur:g.options.negativeBracketsTypeOnBlur.none,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.none,negativeSignCharacter:g.options.negativeSignCharacter.hyphen,negativePositiveSignBehavior:g.options.negativePositiveSignBehavior.doNotToggle,noEventListeners:g.options.noEventListeners.addEvents,onInvalidPaste:g.options.onInvalidPaste.error,outputFormat:g.options.outputFormat.none,overrideMinMaxLimits:g.options.overrideMinMaxLimits.doNotOverride,positiveSignCharacter:g.options.positiveSignCharacter.plus,rawValueDivisor:g.options.rawValueDivisor.none,readOnly:g.options.readOnly.readWrite,roundingMethod:g.options.roundingMethod.halfUpSymmetric,saveValueToSessionStorage:g.options.saveValueToSessionStorage.doNotSave,selectNumberOnly:g.options.selectNumberOnly.selectNumbersOnly,selectOnFocus:g.options.selectOnFocus.select,serializeSpaces:g.options.serializeSpaces.plus,showOnlyNumbersOnFocus:g.options.showOnlyNumbersOnFocus.showAll,showPositiveSign:g.options.showPositiveSign.hide,showWarnings:g.options.showWarnings.show,styleRules:g.options.styleRules.none,suffixText:g.options.suffixText.none,symbolWhenUnfocused:g.options.symbolWhenUnfocused.none,unformatOnHover:g.options.unformatOnHover.unformat,unformatOnSubmit:g.options.unformatOnSubmit.keepCurrentValue,upDownStep:"1",valuesToStrings:g.options.valuesToStrings.none,watchExternalChanges:g.options.watchExternalChanges.doNotWatch,wheelOn:g.options.wheelOn.focus,wheelStep:g.options.wheelStep.progressive};Object.freeze(g.defaultSettings);Object.defineProperty(g,"defaultSettings",{configurable:!1,writable:!1});const zn={digitGroupSeparator:g.options.digitGroupSeparator.dot,decimalCharacter:g.options.decimalCharacter.comma,decimalCharacterAlternative:g.options.decimalCharacterAlternative.dot,currencySymbol:"",currencySymbolPlacement:g.options.currencySymbolPlacement.suffix,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.prefix},ji={digitGroupSeparator:g.options.digitGroupSeparator.comma,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:g.options.currencySymbol.dollar,currencySymbolPlacement:g.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.right},gl={digitGroupSeparator:g.options.digitGroupSeparator.comma,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:g.options.currencySymbol.yen,currencySymbolPlacement:g.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.right},Rw=u.cloneObject(zn);Rw.formulaMode=g.options.formulaMode.enabled;const Lh=u.cloneObject(zn);Lh.minimumValue=0;const Xa=u.cloneObject(zn);Xa.maximumValue=0;Xa.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.prefix;const Us=u.cloneObject(zn);Us.digitGroupSeparator=g.options.digitGroupSeparator.normalSpace;const Mh=u.cloneObject(Us);Mh.minimumValue=0;const Ja=u.cloneObject(Us);Ja.maximumValue=0;Ja.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.prefix;const li=u.cloneObject(zn);li.currencySymbol=g.options.currencySymbol.none;li.suffixText=`${g.options.suffixText.percentage}`;li.wheelStep=1e-4;li.rawValueDivisor=g.options.rawValueDivisor.percentage;const Qa=u.cloneObject(li);Qa.minimumValue=0;const Ds=u.cloneObject(li);Ds.maximumValue=0;Ds.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.prefix;const Fh=u.cloneObject(li);Fh.decimalPlaces=3;const Uh=u.cloneObject(Qa);Uh.decimalPlaces=3;const Dh=u.cloneObject(Ds);Dh.decimalPlaces=3;const kw=u.cloneObject(ji);kw.formulaMode=g.options.formulaMode.enabled;const Vh=u.cloneObject(ji);Vh.minimumValue=0;const Vs=u.cloneObject(ji);Vs.maximumValue=0;Vs.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.prefix;const $h=u.cloneObject(Vs);$h.negativeBracketsTypeOnBlur=g.options.negativeBracketsTypeOnBlur.parentheses;const ui=u.cloneObject(ji);ui.currencySymbol=g.options.currencySymbol.none;ui.suffixText=g.options.suffixText.percentage;ui.wheelStep=1e-4;ui.rawValueDivisor=g.options.rawValueDivisor.percentage;const ec=u.cloneObject(ui);ec.minimumValue=0;const $s=u.cloneObject(ui);$s.maximumValue=0;$s.negativePositiveSignPlacement=g.options.negativePositiveSignPlacement.prefix;const zh=u.cloneObject(ui);zh.decimalPlaces=3;const Hh=u.cloneObject(ec);Hh.decimalPlaces=3;const Kh=u.cloneObject($s);Kh.decimalPlaces=3;const Wh=u.cloneObject(zn);Wh.currencySymbol=g.options.currencySymbol.lira;g.predefinedOptions={euro:zn,euroPos:Lh,euroNeg:Xa,euroSpace:Us,euroSpacePos:Mh,euroSpaceNeg:Ja,percentageEU2dec:li,percentageEU2decPos:Qa,percentageEU2decNeg:Ds,percentageEU3dec:Fh,percentageEU3decPos:Uh,percentageEU3decNeg:Dh,dollar:ji,dollarPos:Vh,dollarNeg:Vs,dollarNegBrackets:$h,percentageUS2dec:ui,percentageUS2decPos:ec,percentageUS2decNeg:$s,percentageUS3dec:zh,percentageUS3decPos:Hh,percentageUS3decNeg:Kh,French:zn,Spanish:zn,NorthAmerican:ji,British:{digitGroupSeparator:g.options.digitGroupSeparator.comma,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:g.options.currencySymbol.pound,currencySymbolPlacement:g.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.right},Swiss:{digitGroupSeparator:g.options.digitGroupSeparator.apostrophe,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:"CHF",currencySymbolPlacement:g.options.currencySymbolPlacement.suffix,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.prefix},Japanese:gl,Chinese:gl,Brazilian:{digitGroupSeparator:g.options.digitGroupSeparator.dot,decimalCharacter:g.options.decimalCharacter.comma,currencySymbol:g.options.currencySymbol.real,currencySymbolPlacement:g.options.currencySymbolPlacement.prefix,negativePositiveSignPlacement:g.options.negativePositiveSignPlacement.right},Turkish:Wh,dotDecimalCharCommaSeparator:{digitGroupSeparator:g.options.digitGroupSeparator.comma,decimalCharacter:g.options.decimalCharacter.dot},commaDecimalCharDotSeparator:{digitGroupSeparator:g.options.digitGroupSeparator.dot,decimalCharacter:g.options.decimalCharacter.comma,decimalCharacterAlternative:g.options.decimalCharacterAlternative.dot},integer:{decimalPlaces:0},integerPos:{minimumValue:g.options.minimumValue.zero,decimalPlaces:0},integerNeg:{maximumValue:g.options.maximumValue.zero,decimalPlaces:0},float:{allowDecimalPadding:g.options.allowDecimalPadding.never},floatPos:{allowDecimalPadding:g.options.allowDecimalPadding.never,minimumValue:g.options.minimumValue.zero,maximumValue:g.options.maximumValue.tenTrillions},floatNeg:{allowDecimalPadding:g.options.allowDecimalPadding.never,minimumValue:g.options.minimumValue.tenTrillions,maximumValue:g.options.maximumValue.zero},numeric:{digitGroupSeparator:g.options.digitGroupSeparator.noSeparator,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:g.options.currencySymbol.none},numericPos:{digitGroupSeparator:g.options.digitGroupSeparator.noSeparator,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:g.options.currencySymbol.none,minimumValue:g.options.minimumValue.zero,maximumValue:g.options.maximumValue.tenTrillions},numericNeg:{digitGroupSeparator:g.options.digitGroupSeparator.noSeparator,decimalCharacter:g.options.decimalCharacter.dot,currencySymbol:g.options.currencySymbol.none,minimumValue:g.options.minimumValue.tenTrillions,maximumValue:g.options.maximumValue.zero}};Object.getOwnPropertyNames(g.predefinedOptions).forEach(i=>{Object.freeze(g.predefinedOptions[i])});Object.freeze(g.predefinedOptions);Object.defineProperty(g,"predefinedOptions",{configurable:!1,writable:!1});const Pw="6H22uizWr1Pjd7T3vSExzXegdMsbTuDnLnTF4SPmWuqU",Aw={name:"mock_price_feed",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},Ow=[{name:"initialize_mock",discriminator:[64,137,170,116,11,111,97,92],accounts:[{name:"mock_feed",writable:!0,pda:{seeds:[{kind:"const",value:[109,111,99,107,95,102,101,101,100]},{kind:"arg",path:"symbol"}]}},{name:"payer",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"symbol",type:"string"},{name:"initial_price",type:"i64"},{name:"initial_expo",type:"i32"}]},{name:"set_status",discriminator:[181,184,224,203,193,29,177,224],accounts:[{name:"mock_feed",writable:!0,pda:{seeds:[{kind:"const",value:[109,111,99,107,95,102,101,101,100]},{kind:"account",path:"mock_feed.symbol",account:"MockPriceFeed"}]}}],args:[{name:"new_status",type:"u8"}]},{name:"update_price",discriminator:[61,34,117,155,75,34,123,208],accounts:[{name:"mock_feed",writable:!0,pda:{seeds:[{kind:"const",value:[109,111,99,107,95,102,101,101,100]},{kind:"account",path:"mock_feed.symbol",account:"MockPriceFeed"}]}}],args:[{name:"new_price",type:"i64"},{name:"new_expo",type:"i32"}]}],Tw=[{name:"MockPriceFeed",discriminator:[73,0,218,41,7,202,200,152]}],xw=[{code:6e3,name:"InvalidStatusValue",msg:"Invalid status value provided."}],Iw=[{name:"MockPriceFeed",type:{kind:"struct",fields:[{name:"price",type:"i64"},{name:"expo",type:"i32"},{name:"symbol",type:"string"},{name:"status",type:"u8"},{name:"last_updated_timestamp",type:"i64"},{name:"bump",type:"u8"}]}}],tc={address:Pw,metadata:Aw,instructions:Ow,accounts:Tw,errors:xw,types:Iw},Cw="CrwNkUYZSED59auQxhMn9vgjT3VZudEEwYEgBSuxNbNY",Nw="JDvFU6ozU8QLSsuhBa8QZB6fXxnjZuZKMUnWrmkS1PTx",Bw="CRJa1dfNn1vzmfg47RZk4z1AM6CMYD2HCv6SmZ481e1w",Lw="9Zw2VYxePvDcy5me5LSiwQnUgRocQXXXXEPgFBjytdm",Mw="7EqfNSvgTPmc7WxqTvKqJbgkSajXX6GM2gEAhNXi5HZG",Fw="DPV2BA5psSrg6S4D9oJ2hLNQ41apXJYexHncbLdUcrWS",Uw="G9N8PQgpAP4fC2R3bvZc2zdfwm6VorVPz3vkNSzG4d24",Dw="8A13HWXtRWEYDpdZt7fh2jbzK3YreZdtcJ2aSC7k1GtJ",Vw="FFngKQq5qyeFb8y9DFxXzJfiU3kqJJiCSWrpZoQXEEe",$w="22EtfMQiNqsrPQYxoXuHP7xz9kshtoMAzefnsCWGy62w",zw="FESNMSXqRgCJW7oaV4rNmhKGHceTp8BnNfvt5eASzpEB",Hw="46Q7deCNhdVbBjmqtXPtb1yHo2PLchGgCMtiwXrYLkQM",Kw="9jrDwoJpcM83CfUw3XdVUSbtxmGGaGQRHHnaiPeZpDN8",Ww="2FxpWvuCRJ4ULL45itxeYbTdNPCcqNnEiGBh2Mp3PeZM",Gw="83gFJdeD3XPcKbyGQxjqsXKc3NqYXcVBVP8UwZZHDg33",qw="4GpCZPkAzNvS6b1sku9KLzbDfaSyVtT4TD6n473bSxjN",jw="98pRG32s7t1bdhx4NohLCmd85aXu6rroojn18JETU7EA",Zw="GzzUeZcjVMZfk6ZqNfLA8RZxW391L4LbszvTWd8kgRMs",Yw="9LK2cp7ieU8CGRGCpWHphoZMK9FQahwVbGttgyKrJvRi",Xw="DcdnjGZUtUJFX3JAHFcxEoKWooxPuFvUHaXKYUr9bEVg",Jw="7ZPgPZDjFsLJwZpMrPfuNwuGhQabNi77SvvA7ZVkE7ga",Qw="EX7yhzuVsvqc8T68fFZje7JumcH9ByusZikzFJz7pFL5",eb="4REsMgwprFgKSKLg1jdHmfbkgXxyKFozxHz37waWuTyS",tb="B1wLPMPRhysQca7iMQiBRJiZd5uzgogqaaHaTadBPeAk",nb="FN8tNCGYzhBjYaG3JEM28pceYFAmgZpN4Hp8PY9iA8Wt",ib="94iQjTGWSQhuaFQrnD4BbiNMQ8oqww4TjRDgrTHttKP1",rb="78LugcW6GCmYhSPqhExAYSMrHa5B9MSqJz6GsWd3xNAR",sb="FRzML92Ayk23xhRqVQYotuiEnUPs3mSpC553MnxHYVjr",ob="J4PoRxv2fCJy2NsJGoRRLaqCgTt8CdfcUjXh3nAdSsZT",ab="9vJ3v6cE3KBZHhfC23aReyspwykt27FFMTDuyqDep1Po",cb="8WCXgx4YMdGwPbuwe6DCRZNjaoDGKMRg5thxYQiu31Sa",lb="z2fvfBmjghM7S9Y6g4EQMmv7e7UUp9jYeUsUHhYEYib",ub="6RBowUKx6Apxm1jJ2Zc2pSPeHjsQ5JeotJyfFiG7gZer",hb="2naLNaQySqu5nzXDybS5ko2fGv5WKnGjquEP5XCphrdp",db="3LcVEJ7hRE32xZJ2vLdRP1b1mGJrDGyvBkJg9rdkXzv6",fb="9gC48ea8o95kCVkLnn48fP8QegiaCRWkKRib2aVpRvUh",pb="44rswNGSWPwDwANrxDvMt1kJBR3GS2bTuL6vtCCZA4U4",gb="2Wrn2VgZK7sPkpXAHtuKRDhXBtpYCF3D6bz5rVbja19m",mb="2aMwYa8CwGVSHxLvgGKA1G23fSye7B3jdQgaL6yJgDTC",yb="B5wRMMKFYkHjt6SRNrNp3vc47TyuYTGCyedyamqQjqp2",wb="2bmJDuZLHLHukYDofHFpiswn716spDFj5H42eceEd7e3",bb="HwyW4BxWzHh9BCCkV8UNFCNKTzGuQE8SxHSE6tatYip",vb="9V724xokPVzc8iwYembZRD6r3vw9U6drNCc4cRZxQTqU",Sb="DVPNk6CVTQWZYZByTBFjJcCRC72mA9qGxJB4mBwXxDvP",Eb="GGjDcAkAmzEvbzKwEz8kWnN8zBt4zgR4ZxYNxykzCNA8",_b="AGsBU9JLh2ka4QgMuUqwpSffFdHC3euXvMcYgo3yM2U4",Rb="6sg55BXndd2hCaze7X8MTvQCqtKuYNXCmi9XaGSWwp8o",kb="8Nv1y27cdm4T4Utmiti4g1JMZyL2CWDdfdn4D42xeUnj",Pb="HtLTxoqLn9kKcbKg3YepwaiZPxdk1qocu3djSKYKqhkY",Ab="4bVrjSVWNWAdfHvSChpmbyvrctkyWKoWAEC8bvyuE3xX",Ob="6PDFHStW6UBfGJQ5aEz5bV6AUXa47cF6W25EM4FCJUQz",Tb="BWAhy9AqYsvqgnM9emKwSqFzYQFU9MUqn3wVKARnnH4G",xb="4CNwGap4N4Q6n1ZYTvUx6wJczvL6H7RJTg3DrJPMLCLw",Ib="5yTJRsaHjLoj4hog2KY2gvYbbc8hLXaMg4PwpRfCuLZq",Cb="5bEs8h4d1R2i3rnKSH7Sxv72MHbtNjLTYXknuvJsKJBg",Nb="9VRNXqZsKKbyoZVMpRj8jQQupjJB17X4bLAcQskZur4A",Bb="ExEEhHbTbxGvhbCN2iqkyQ8pNwzYHTEs7PBa4biD6Hmx",Lb="HXEjW4GVfu6pzYacwc13MzRDnsdQ1sX8KLnBEHbEhpN3",Mb="KnBtRGjfgLU1RYtvfxkRiXECxmgoY3PBEdvbxWvYDQ2",Fb="XCparosjfgnio261ELMe53vDBXtGYMKZo4h7aFgRX64",Ub="9mq2STyYa24eK4zvFoY2ftLhNeNHpCGnBTt7s8HA9R2o",Db="Bo1jTLUbYGhDiKPdTyYer18rq6o9ht2xwSy6hoRLkXzH",Vb="EuYoQHHrjYDNSApMuX2P8zo7nqjpJcVPX5rqD12eTbab",$b="5icXuuQihTi9XsX5Q2PAFdZ5MA995ZJV5Uwd1DNktqS8",zb="2gdPnA4rWiHgrpcadJygrdSEDFV6ZZjdXMbSsJ1m37aA",Hb="G6dqQgRYHPB33smhGvkcsvnDCkcQdRi3rU3LuUaJMRKe",Kb="EKuMK6bY2vUrm8LYaJkMErY54uJDK43kojsnGUuXVuH",Wb="5gEmwh5WUe3axzU4iDHoNJ3RAr44n7VivHXADZ9GdHBZ",Gb="2KsP6zEKT6hrhHhA1rhJ6gM2zzVrp21Mu15TPLiSaUPz",qb="6sLYxAVK6ctwPHwtckVmHcTUcXGbt9pJznN3aNFMKSQj",jb="3M1GozTZenXoFQWm5CT8erzQnGkCpoUQdcqP8jaixUdc",Zb="HzNAQUwjvN3SooZsecHdk8hAauQGoaMVD9e16xEaW9ru",Yb="4uJG1jkLMo4do7QErqLVUxd451dGP2RDiTv4zBGUM7sY",Xb="fd5KkUUTA3ZfCTMx8TtdpqBBG9Zoz6j913u2sz84vcF",Jb="HCHUHU99RZrnGUT99fMRAwz1MhfDuA64mjqYpb2J7zf8",Qb="2kUjv4hw17r7SLAduQXjBtNendEjUbwFcz16YwFb7CnT",ev="D7rNtGobnyScgZaaPFKKRisHRXJjxVMn2CsMLgG16V1k",tv="2XBKqdZ55GjmDqioPLnZbBifUi584e5ey4VqqHZVhu2Q",nv="6YQro8mVQXHQWortRgNjTJfLy3JqQ9TTrioQUW4ynCLp",iv="9Job4H1dnjtvXfb4agjw4U8GstE9mhKEmWwvGKwUP1xJ",rv="FTDW9XXWxhiusfVbr9VCXyMsFGMkBcH8qHUG9AYJTgqN",sv="9ZQjzJgtbUboHsEKe99cApCGoKb1Ha2EjGAky9BXW5BL",ov="4qR6hy9Lsh5SAvMD9mVV2bwLGrvpeGvmUAPLdJ6v4kmx",av="VZET9Wny5yfFCppttAGebEwmahcaZXbb7C9676QYdZY",cv="FXw8RpXECBirdzHpNep6Ysb1YxHUAExi19p6N1hF8RUC",lv="59ZeXLPgNumoGVdSbZTM1t7wD7dw7PJZ6hgXwH8BZ33F",uv="F4beJWq4GnMVHpqi1auJ7LYBhjsHdap4xvgorYAAjQTY",hv="GrfwGfTe5kyscVDfPbzfdzoLBjCpgn4dTMZtCpstQDZr",dv="AbEWT6Nyj4fpZdsBRNLduprttPKqi7U3exDmvxiymP3g",fv="GGQNndpLx8R6Lae9Vw2dwZXaNjXFx9jSfZc585pk2poL",pv="4KGrEkPJs1ox3D2KLgnognrSymMDX9HPbHxqZqoNitsG",gv="68Zm9t2UfrdQwh6L4z6QeAhCPba8Hn8Jb5dhsAHBf28N",mv="CWCo67fuQb6Ts8mMaDW3tGd2LeTsUMrsH2fHjHHJiGmS",yv="9zCQHUJsofq4waK2XwozyoUx44YPPd7KNMdQqJcHnWQT",wv="A5us3zdBjXXjCWEB8PcYG53zDuCCi7WbfN2CgvJuvoN1",bv="2qX3Vdr7YmqM7uKMbC7Q6HhmRDHop6WqZGKmCLWw9Yu3",vv="6RSvqJjWhdYNkZMknNKe4TDzVNr5aBpWPB9rq9oUhSSR",Sv="CiavPP4sGUwX4qgMX5vTm5Uu32umav6YJJbQBuiiBxNN",Ev="6Q4JpDwG2RLXeEnQiVwECuYmR6oJQTpQVcjB75BJUzV1",_v="CEbFtQH9FJ8Ep5y9irqFE7qxEUto58u2tzZydWih8kSs",Rv="HTotcFZdxG3KhdYmVnikGLC2Yg34pbqkxEYrxKHahfjN",kv="8nm2fKYgLjeWi98XEfBssJVTmZ3J5aXX86ymwnpJ2JdG",Pv="8GNCfuu2p3zCgJBx1adt4kJ8Z4GVuNbgQ4QpRtXs67qW",Av="7rAevByCiuK7LUGfCFsrMVvs6tzAPbusKLqeQd1QjuFu",Ov="2nbPZQx5g2FJEKuF8sMgdQhquX3xqBiRtYM2HmfUetcs",Tv="2oruJQyxPdygECHVsYVPoZ7oix8ceB7QJWEL36mMg82Q",xv="2sBeusL5Sva5NHWoJBUV7jMxCeorbarr2T7AJZFrq9C6",Iv="Bsap3etSMix8kyHb76gvfsmDPkKmQid4XnDk68JD8VBi",Cv="Gvrfp6W8WnjQ58nDUawXFKBPgrEqcT7xPemV2rxrdu76",Nv="Ax66YaP2FDEQmr68U2dS7FzfgJPZPyXpbJZwKL9u6jsV",Bv="3ehx1fFMCysQSRzZdxCXkwAiWuqFswA199Ejo1Ucd9nn",Lv="2x43A8p2ThGdX7eMZuh5iok51W5feH3RrEmZdLb84eUX",Mv="5PLQztWCUTKFfvGH3V37jxcgkW8nA1vpG4QCTAbiheEj",Fv={BTC:Cw,ETH:Nw,XRP:Bw,SOL:Lw,ADA:Mw,DOGE:Fw,LINK:Uw,SUI:Dw,AVAX:Vw,SHIB:$w,LTC:zw,DOT:Hw,UNI:Kw,ONDO:Ww,AAVE:Gw,PEPE:qw,TRUMP:jw,POL:Zw,FIL:Yw,RENDER:Xw,ARB:Jw,JUP:Qw,OP:eb,S:tb,FET:nb,INJ:ib,IMX:rb,WLD:sb,LDO:ob,GRT:ab,QNT:cb,BONK:lb,JTO:ub,SAND:hb,ENS:db,GALA:fb,PYTH:pb,RAY:gb,HNT:mb,AXS:yb,MANA:wb,CRV:bb,WIF:vb,GRASS:Sb,CAKE:Eb,VIRTUAL:_b,AERO:Rb,CHZ:kb,COMP:Pb,APE:Ab,FARTCOIN:Ob,PENGU:Tb,POPCAT:xb,LAYER:Ib,W:Cb,AI16Z:Nb,DOG:Bb,MEW:Lb,JLP:Mb,SAROS:Fb,NEXO:Ub,SPX:Db,TURBO:Vb,AMP:$b,TWT:zb,CVX:Hb,"1INCH":"BhJRcWbkCqBZB4MrbeZmAa6EKKwb9mYqTXG8xymrRPBG",MOG:Kb,TAO:Wb,TRX:Gb,TON:qb,BCH:jb,APT:Zb,NEAR:Yb,MNT:Xb,ATOM:Jb,ENA:Qb,DEXE:ev,MKR:tv,JASMY:nv,FLOKI:iv,WAL:rv,BTT:sv,DEEP:ov,XCN:av,PENDLE:cv,BRETT:lv,RSR:uv,AIOZ:hv,MOVE:dv,NFT:fv,STRK:pv,SUPER:gv,OM:mv,MORPHO:yv,BEAM:wv,AXL:bv,CTC:vv,GNO:Sv,CHEEMS:Ev,SAFE:_v,ZRO:Rv,SFP:kv,ATH:Pv,GLM:Av,ZIL:Ov,FTN:Tv,TEL:xv,OHM:Iv,PLUME:Cv,EGLD:Nv,BERA:Bv,EOS:Lv,XTZ:Mv},Uv="4ovn9S1EhPzmdyk5sR6cd2Pzg3U3KCmdyyE43xaTAb2N",Dv="DzNeGGRGvFf2EcaMbu28CBHygZjhmKnDABgMEHb1B7bi",Vv="xVeyP2wKRk7k1SN3oH6pgDXSboan6sCdhxgeTAjFLBq",$v="BEXDkcCZTdSKmt1TRPjBSRCVXf6gc5k5JcMVnAXN8Nqd",zv="BFiXALMkEsezYZvoXQLWZ7oGjCJHQ2tFiXLe7Lny9knc",Hv="5hyAaJbvGwj9yeMETN1xCdHPkJx6N5YZmWD182a53r7U",Kv="8yhmVZ58Lm3Y9BciukEDbAWrUKovgDCu6tm7qR6PNAzB",Wv="CZA5R6L648aX9oJBPJPkdauktSm7bp38iG1vTNxCX6b3",Gv="DMsHt3DW6FJZZDxecpWzTRc8k6tg7vp31SazGo5Bg9Vf",qv="2Ytwwvr3SCHhVgcQ5XkxwjpDpE5jTU7DM2EgxRVztu1o",jv="HF7nDQHTZPZidDmMJHAmtVazaMbhLW2VKhNkkETZgTXA",Zv="BhSRr1pM61U9LSFrTuH2tAs7nbYCeDXxV6z56MEWMta2",Yv="6qKwdf6VugghCjKsZRCBkYKQVGefRHTeVzhwEsFpv7kW",Xv="A3Db7izT9pUJoHKu8FtewtB5g8jf4UQS73y99132QKd2",Jv="FyTQsdEoTc9imMwnx9b6rzZ4c7MftD6ST8fF3p2LWZUy",Qv="BWp5RpzZbHwK7Jfo41eG6VfvfszNBhXoJhbS4PLhvCvk",eS="4kG2e7hDrPbSRsMVnxp4qPjhsjJcZwnLq4HZprYfM1hX",tS="2h6MBwREwKPRZ6BGrJofHcRjnMrfRZ3scxv8aJHhVqKf",nS="KraqALZ9U4T123Mmh8amSZ7YcWU8XDAWdrbA9vrNHYj",iS="4hdP9x7cCGf9nfgqsEgNL1vg2svBYUq1wJvTKaQi8sW2",rS="7BeseUnwWQP3j6Ca4CmpckcWB8hGmvorCTE7KUaqnb7G",sS="AAVfn7SxKLBY1cMUwrQgA1rnZJNZKyxEgXd7fzKLZArP",oS="EX3Kthuoeg35niDzgSLBuYYrtWWXNhfeAi1ehGhLY1ro",aS="CSwjenAAHJWEp4YeDn3286XvtFxUiZXyHWPU3JWqPiSx",cS="32GBiJbu5azYZYV7GK7pauXBcB6FgYiBk4NHWEShGtS5",lS="CSQg97QLihMv8jSNLpqxRkG48BxnpYLXgiy9sN28u8xa",uS="DkDJiTjtnb33HZgbjPUrvBGA5oQiedYZTLiCT3KC1gkm",hS="GU1Vni8rkk51fEswSrVQVBVx6MmvcwDbGg77RXwh6AfT",dS="5SWZha5sGSFVaPLCkHj1jK7hegV2b5SUX7esTX49CZnK",fS="GdaatbSqnV15xceWHa2bbPwJp4jFZJjaMSkLURuN4uuM",pS="HGaeNccnKZ4eGFAcKtepTmu2JdLhSt2utqtTTFBCQL1d",gS="9jrYXVUTeL6DvfbKssj9aRWSnRmNPdLEDFEpTeLtkhqC",mS="7vX6gVfmZbatpB8HYF68ZxvqqXWRVH577birkuMY6KsT",yS="H3nU8T4dXxK46fQf3uGjckkU2s7A2HPj1tzpXfRaL932",wS="GoH8SB28mQbS35jxDMUNU1tCCFgSzVcLMbr1J6ot13fF",bS="7m3QFxKcBMRyMPhierCC8mxS2mkjJVrUY4oXQkM4hsNF",vS="GZUpQtBwJKE6RmhfLPujhz9f6uCi7QLM1V3t2UwcDu1e",SS="4wxLcFEryPzk9sJUbPGivwUHidzWYvwDUfZCJqB8fJ6V",ES="5kCYYCE8yFFyHCYs3i2LfDgmHBL3gE2rdrf7PhzefyWm",_S="95tDjGWRQB1eDNQhSDFMen6pS2DvvofbLo75eBLRRBqn",RS="2frnZtACd3WigqnwDrbtYBAfum4VuGyZGDDeweWHtSjY",kS="3YNFdyNMTHXscMprPGANo3c1eTmAJMJRbQU2Ht9F2jEw",PS="D5aP3T1mGcYAjbSti3jtC7t9wBfaspmGp4tJtFjFZMrs",AS="JBhGEFNAnk43paipGv1NcyFmbzukF1PdCAuQUzLfKQmX",OS="24uNAA8pZSG5hW2aUsT8CjSzgYvBE5d1CjtarzLrmsKN",TS="DHPdqW7bJVVCLhaiyGKforgbHqd7CAHibZSUcUjFZCdJ",xS="GySGs7s5zT5kGvBWjfLUvShXLcv3v5CBxpadz5NLhhAu",IS="DsFGMiti4a3t6oQwhkfTxwwWLYRz2TTM1oD9cpAuDmHD",CS="GvBYfxfYdpwHrp1BgWkbrwGGgVBVdzdvcocsvaGyijyw",NS="29WRDwVxXCbk4YsjPRC4kDx7YcSRRXcwFasHxGkL3G3h",BS="DtChzGv2xmj5xZkFmBXqkW8fk1n2iAJJSkTq23KdD8sC",LS="6wCZmp2o5RqMHqK6kGv9g48gsETt1PbhyLNupZYVJrwe",MS="CekwFNcZDuBYEaDBv6cmzcCWZ7UCLTDDs9nKk9WKAB1J",FS="Ey653Qg5FiJFiTe4SaiQGa8FeBjY1fAL6FgGsz8oQTNX",US="J1RD8nULfLMDdGLZjszHbBX1CXE9HHkYFWJpECxhc9oJ",DS="AAtHhCgPjUM792rea5reUV66Sh2fmcKLVghWsoGZME5w",VS="AmqwkYBkWc1z7hWFBcGfkrz5wfBwwWcvBUqcVDcGDtJs",$S="Dsum38baE2WMXn7WZikKZkYF9JuSSK27yjZw18a4U4F1",zS="8EivmrgPSCS5jq9doAcMdUs6tsuxAPeZpdYKzfozE4H9",HS="CyziYVcjBZTto8vYBu61TzfedCXzNS38WWAHdVnSUKLe",KS="8tGgMceaQGbHNDyzXWpEoeouNToW4wK7r1B3wkkTEjvG",WS="2Suqf1tpMTkA6wdUVTyx3U2MakHgUuSaSUVYEv68ZsTS",GS="BU1s4Lx37j76MGVYHNpdzKGeyWFYeoeAaDGVbJCV6PZK",qS="D52DZk73CNzbwa8JTwE5zuSoPuiCM9ccJ4hiinJ2ptZr",jS="DYrbqPcqhF1rtR8g6A41CLmTMGAoZvVxYwjHUK4mz4ch",ZS="Hsgi9nkr1kN35KW85ygPQwbp4HgpGwGtMtaqZ6RQvhHQ",YS="HNnVMdyuk5gPspcbAD9G1Rx58Enb7tahwchcs5Lw5FJQ",XS="EHLmNLmVgx8WacowVUosvVYyqZrG2xM3zwRu2ZSeFasS",JS="EXm1UgE8wjA2kYMmcAkBdTqXYcfS2qF1NWga8wE7YcaH",QS="FvMQdfXzrMGPidbyJMkBVN4tHeBvBjarfZUg3YVpJN43",e1="D3owUHW6WwW9wC3Jf51Qc6yoEfqQv4wTak4cdgdexH9z",t1="78NTFCxsFDKdcx53XEHsL9S34Yo9XFsnEBFdvgzrgMXs",n1="ATm3hLdgdmeJxQdUKrWh2Emc2fg9fbjbvxuVdR5SYwcJ",i1="AovPgHoBFvZ18tXjMEqk6RziiUrzksM55zYmqfrDkUX5",r1="BrAW3qyBu8cF81sSbHwN4roFGzTrDE4wK4MZYpHxQG9b",s1="Be9deWBdSwaYmNTDAnmydVYq2dY8P1pkvVngsG2BCK1P",o1="2BoRmBzCyuyXupW4vFNP1v4DmMxLZxshqfQZy1SaDxEe",a1="2wpBBNBjia5yg2XXDS2RPvn7TVtBgbVGGn5F6MxVjuYz",c1="BpzWRnPWQTAQaX8xeKqg7GmqEfqySw7iQg4obpNJtV3t",l1="FXAYnrTB4Z6VKkg9G1kjQfQ8BESJoPtQ7AkxhALY5ABL",u1="HSN1NQds61u3S9ewYGL4hqEWEQzHg6GKQaJKawT4Uf1s",h1="FSw1LXDih1Qqm9FmAZF2NCLyj4STKqKZf3SFXWdnZtpL",d1="5GNttTRAgZfWCZciq7ugsppFpABT5FPskAZzrV8snoNe",f1="C6CzkM8c6qq7PV55AMYjNWLWJh8qCeGqpQhnhbNoh3JT",p1="HVJypCAxH6u74PCgqEmQmuDRHeLj6hSmKTYwNyTNcKyB",g1="EWoTYG5nK3Jitn7nWXZZs7mRDx98bQdFJkq4zgN9j5oU",m1="6HVPv2zM4n5zseLR8PSrg1x5xu9SGgRyXYFzG4PEsGs6",y1="4Sf9KYJjvLh9SzfggRUjLenVyz5cKdSd3ymyppf6cb2q",w1="fUN4Hc7jfgWYh34Y3J8SCpvpCBaszyAAhSH1QwPRmQd",b1="2JZmRxQJBhPEeEM4iZ1BXChmN3XqC7rBdsEh5d22ktvn",v1="XxjsTZQziPEgdtisMKM2FFHM88WL5ssPcAMe9LdDW98",S1="EAbM9TniWn6VETK6MpLQGDoxwXEYdceGP4S8Tpun1fej",E1="BH3WnrLWb7BHeKabLQxNTJ4YACcUWeEVHSEsVmUXVrU",_1="GYfC3ZZBLibR2zYW7fUbrZMiQhxoWSAKqknQgiQWCSa8",R1="2AYBqiitSDNo5A9seNGeh5JJWRshQswcBDKrx2VxzGNW",k1="HutQWAorZ53u7P7Zz1uTFZgd11TdHwhhYAiX4ef4pN5C",P1="6w27gKGfCaCoMiRm1ak4PvSSPecPL9Az8fPG4KoeanFe",A1="HQCDkGfB9f6xZ6u97B3x9c38mHhDEyCZGnEAseseUtqW",O1="71qfLYEpppZgtBtcCafJwQmVZxLXmBDCNu1otgNEc6CE",T1="GfpBjMg9S1pHPWoJS9ea5VNVkKtrZTrUkN3WuGoRK7bi",x1="HaiSkyt14N4WNB4cN2j9CRXRnwAFTJjFMhg8G7a7iFPU",I1="Dq7KYYzoEeHzwPGNE7DjYSLRFVefPn1JvybKeDPF1d9S",C1="CcABUHcammTTvLdo93DK5TKh7CHhmKNWVvsSaKAbZDHr",N1="FWnfmFfHqRZcvHzBvy5qYNukYy178pnuJgM2r91L6RqS",B1="AtovZejMwRFZB7jPPWqLfPhurY3iHHPPkEHqe6AxKrDS",L1="E7TTYF3qwjaYUiZCJEgy3HaZZCMzaF6YGcyaqF85xYu8",M1="4e5dhhTViydeqv52ZwPjj8D922sWt5JEmjH2LkjZH9uZ",F1="5yNm3NNS2TCStwsEtTcpYrjD3m5DEPZy1hjnJBrjkYej",U1="HgPxN3SMs5y1vv36W2qRzwQGTKXZLfUTWNvs4MhNTVYA",D1="72p3jbBqHPPA5iRiQnkxDoJumwnNsHj3NazmQVh7RNsv",V1="7pDx4gTAeTFLEsKzHJ7QRYsMDNMMvLqCquLeXeg1TE9B",$1="HD4gTFsW5JwMq5eWiaMF2Pej1K2yf71mkq1MpPmWNtRR",z1="5RzKSvh94tGCD6Mtmt23Z2zCmGo772B7hQTxkduJec7g",H1={ETH:Uv,BTC:Dv,SOL:Vv,XRP:$v,ADA:zv,DOGE:Hv,AVAX:Kv,LTC:Wv,DOT:Gv,LINK:qv,SHIB:jv,UNI:Zv,FIL:Yv,SUI:Xv,INJ:Jv,OP:Qv,ARB:eS,HNT:tS,GRT:nS,PYTH:iS,RAY:rS,QNT:sS,JUP:oS,JTO:aS,BONK:cS,WIF:lS,AAVE:uS,LDO:hS,ONDO:dS,RENDER:fS,FET:pS,IMX:gS,WLD:mS,SAND:yS,MANA:wS,GALA:bS,AXS:vS,ENS:SS,CRV:ES,CAKE:_S,CHZ:RS,COMP:kS,APE:PS,AERO:AS,POL:OS,PEPE:TS,TRUMP:xS,S:IS,GRASS:CS,VIRTUAL:NS,FARTCOIN:BS,PENGU:LS,POPCAT:MS,LAYER:FS,W:US,AI16Z:DS,DOG:VS,MEW:$S,JLP:zS,SAROS:HS,NEXO:KS,SPX:WS,TURBO:GS,AMP:qS,TWT:jS,CVX:ZS,"1INCH":"57EqM2u3Tk6X2m1n5HhoEB1Pvz53hZLAbxj6CAcFuSZQ",MOG:YS,TAO:XS,TRX:JS,TON:QS,BCH:e1,APT:t1,NEAR:n1,MNT:i1,ATOM:r1,ENA:s1,MKR:o1,DEXE:a1,JASMY:c1,FLOKI:l1,BTT:u1,WAL:h1,DEEP:d1,XCN:f1,PENDLE:p1,RSR:g1,BRETT:m1,AIOZ:y1,MOVE:w1,NFT:b1,STRK:v1,SUPER:S1,OM:E1,MORPHO:_1,BEAM:R1,AXL:k1,CTC:P1,GNO:A1,CHEEMS:O1,SAFE:T1,ZRO:x1,SFP:I1,ATH:C1,GLM:N1,ZIL:B1,TEL:L1,FTN:M1,OHM:F1,PLUME:U1,EGLD:D1,BERA:V1,EOS:$1,XTZ:z1},K1=ke.from([61,34,117,155,75,34,123,208]),nc=1e4,ic=2e5,W1=-8,ia=1e-6,lr=new Uint8Array([108,33,192,134,193,113,214,240,173,244,13,28,245,31,248,45,178,55,192,61,67,193,121,67,45,153,223,144,229,12,200,162,182,253,241,230,123,255,221,138,58,97,0,8,26,10,89,227,156,135,223,237,72,14,242,106,79,101,79,123,137,209,139,134]),_i=Fv,Gn=H1,Fi="https://api.devnet.solana.com";let Pt,Kt,un;const ls=document.getElementById("recipient-address"),An=document.getElementById("token-select"),us=document.getElementById("mint-amount"),$n=document.getElementById("mint-button"),ur=document.getElementById("mint-all-checkbox"),Bo=document.getElementById("status-message"),ai=document.getElementById("tx-signature"),Zi=document.getElementById("recipient-links-area"),gr=document.getElementById("price-feed-select"),ra=document.getElementById("new-price"),mr=document.getElementById("update-price-button"),ml=document.getElementById("set-min-price-button"),Lo=document.getElementById("update-status-message"),hs=document.getElementById("update-tx-signature"),Yi=document.getElementById("feed-account-link-area"),cn=document.getElementById("price-table-container"),hi=document.getElementById("price-table-status"),Mo=document.getElementById("bulk-percentage-input"),Hn=document.getElementById("bulk-update-button");let $i=null,Fo=null;function $e(i,e=!1){console.log(`Mint Status: ${i}`),Bo&&(Bo.textContent=`Mint Status: ${i}`,Bo.className=e?"error":""),ai&&(ai.innerHTML=""),Zi&&(Zi.innerHTML="")}function Ve(i,e=!1){console.log(`Price Update Status: ${i}`),Lo&&(Lo.textContent=`Update Status: ${i}`,Lo.className=e?"error":""),hs&&(hs.innerHTML=""),Yi&&(Yi.innerHTML="")}function rc(){if(Fi.includes("devnet"))return{explorerClusterParam:"devnet",solscanClusterParam:"devnet"};if(Fi.includes("testnet"))return{explorerClusterParam:"testnet",solscanClusterParam:"testnet"};if(Fi.includes("mainnet"))return{explorerClusterParam:"mainnet-beta",solscanClusterParam:"mainnet-beta"};const i=`custom&customUrl=${encodeURIComponent(Fi)}`;return{explorerClusterParam:i,solscanClusterParam:i}}function zs(i,e,t){return`https://solscan.io/${i==="account"?"account":i}/${e}?cluster=${t.solscanClusterParam}`}function G1(i){if(un||(un=rc()),!ai)return;const e=zs("tx",i,un);ai.innerHTML=`Mint Transaction: <a href="${e}" target="_blank" title="View on Solscan">${i}</a>`}function Gh(i){if(!Zi||!un)return;const e=zs("account",i,un),t=`${i.substring(0,4)}...${i.substring(i.length-4)}`;Zi.innerHTML=`<a href="${e}" target="_blank" title="View Recipient on Solscan">Recipient (${t})</a>`}function qh(i){if(un||(un=rc()),!hs)return;const e=zs("tx",i,un);hs.innerHTML=`Update Transaction: <a href="${e}" target="_blank" title="View on Solscan">${i}</a>`}function jh(i){if(!Yi||!un)return;const e=zs("account",i,un),t=`${i.substring(0,4)}...${i.substring(i.length-4)}`;Yi.innerHTML=`Price Feed Account: <a href="${e}" target="_blank" title="View Price Feed Account on Solscan">${t}</a>`}function q1(){if(!An)return;if(An.innerHTML='<option value="">-- Select Token --</option>',Object.keys(_i).length===0){console.warn("MINT_ADDRESSES not populated yet for dropdown.");return}const i=Object.keys(_i).sort();for(const e of i){const t=document.createElement("option");t.value=e,t.textContent=e,An.appendChild(t)}}function j1(){if(!gr)return;if(gr.innerHTML='<option value="">-- Select Feed --</option>',Object.keys(Gn).length===0){console.warn("MOCK_PRICE_FEEDS not populated yet for dropdown."),Ve("Error: Price feed list not loaded. Did you run `anchor test` in mockPriceFeed?",!0);return}const i=Object.keys(Gn).sort();for(const e of i){const t=document.createElement("option");t.value=e,t.textContent=e,gr.appendChild(t)}}const sc=i=>new Promise(e=>setTimeout(e,i));function oc(i,e){const t=ke.alloc(20);K1.copy(t,0),i.toArrayLike(ke,"le",8).copy(t,8);const s=ke.alloc(4);return s.writeInt32LE(e,0),s.copy(t,16),t}async function ac(i,e,t,n=3,s=2e3,r="confirmed"){let o=null;for(let a=0;a<n;a++)try{const l=await i.getLatestBlockhash(r);e.recentBlockhash=l.blockhash,e.lastValidBlockHeight=l.lastValidBlockHeight,e.feePayer=t.publicKey,e.sign(t);const p=e.serialize(),h={skipPreflight:!0,commitment:r,maxRetries:0},b=await i.sendRawTransaction(p,h);console.log(`    Transaction sent (Attempt ${a+1}/${n}): ${b}`);const k=await i.confirmTransaction({signature:b,blockhash:e.recentBlockhash,lastValidBlockHeight:e.lastValidBlockHeight},r);if(k.value.err)throw console.error(`    Transaction confirmation failed (Attempt ${a+1}/${n}):`,k.value.err),new Error(`Transaction failed confirmation: ${JSON.stringify(k.value.err)}`);return console.log(`    Transaction confirmed successfully: ${b}`),b}catch(l){o=l;const p=l.message||"";if(p.includes("Blockhash not found")||p.includes("block height exceeded")||p.includes("TransactionExpiredTimeoutError")||p.includes("timed out")||p.includes("Node is behind")||p.includes("Network request failed")||p.includes("failed confirmation"))a<n-1?(console.warn(`    Transaction failed (Attempt ${a+1}/${n}): ${p}. Retrying in ${s}ms...`),await sc(s)):console.error(`    Transaction failed after ${n} attempts.`);else throw console.error("    Non-retryable transaction error:",l),l}throw console.error("Send and confirm failed after all retries.",o),o}async function Z1(){if(!Pt||!Kt||!ls||!An||!us||!$n){$e("Initialization error. Check console.",!0);return}const i=ls.value.trim(),e=An.value,t=us.value.trim();if(!i){$e("Please enter a recipient address.",!0);return}if(!e){$e("Please select a token to mint.",!0);return}if(!t){$e("Please enter an amount to mint.",!0);return}let n;try{n=new H(i)}catch(o){$e("Invalid recipient address.",!0),console.error(o);return}const s=_i[e];if(!s){$e(`Mint address not found for ${e}. Check configuration.`,!0);return}const r=new H(s);$n.disabled=!0,$e(`Minting ${t} ${e} to ${i}...`),Zi&&(Zi.innerHTML=""),ai&&(ai.innerHTML="");try{const o=await Pt.getParsedAccountInfo(r);if(!o||!o.value||!("parsed"in o.value.data))throw new Error("Could not fetch mint info or data is not parsed");const a=o.value.data.parsed.info.decimals,l=10n**BigInt(a),h=18446744073709551615n/l,b=parseInt(t,10);if(isNaN(b)||b<=0)throw new Error("Please enter a valid positive amount.");if(BigInt(b)>h)throw new Error(`Amount too large for ${a} decimals. Max: ${h}`);const k=BigInt(b)*l;$e(`Fetching/creating token account for ${e}...`);const _=await nh(Pt,Kt,r,n,!1,"confirmed",void 0,hn,ir);$e(`Minting ${k} (raw) ${e}...`);const x=await ih(Pt,Kt,r,_.address,Kt,k,[],{commitment:"confirmed"},hn);$e(`Successfully minted ${b} ${e}!`),G1(x),Gh(i)}catch(o){$e(`Minting ${e} failed: ${o.message||o}`,!0),console.error(`Minting error (${e}):`,o)}finally{$n.disabled=!1}}async function Y1(){if(!Pt||!Kt||!ls||!us||!$n){$e("Initialization error. Check console.",!0);return}const i=ls.value.trim(),e=us.value.trim();if(!i){$e("Please enter a recipient address.",!0);return}if(!e){$e("Please enter an amount to mint.",!0);return}let t;try{t=new H(i)}catch(a){$e("Invalid recipient address.",!0),console.error(a);return}$n.disabled=!0,ai&&(ai.innerHTML=""),$e(`Starting bulk mint of ${e} for each token...`),Gh(i);const n=parseInt(e,10);if(isNaN(n)||n<=0){$e("Please enter a valid positive amount.",!0),$n.disabled=!1;return}const s=Object.keys(_i).sort(),r={succeeded:[],failed:[]};let o="";for(const a of s){const l=_i[a],p=new H(l);$e(`Processing ${a}...`);try{const h=await Pt.getParsedAccountInfo(p);if(!h||!h.value||!("parsed"in h.value.data))throw new Error("Could not fetch mint info");const b=h.value.data.parsed.info.decimals,k=10n**BigInt(b),x=18446744073709551615n/k;if(BigInt(n)>x)throw new Error(`Amount too large for ${b} decimals. Max: ${x}`);const C=BigInt(n)*k;$e(`Fetching/creating token account for ${a}...`);const A=await nh(Pt,Kt,p,t,!1,"confirmed",void 0,hn,ir);$e(`Minting ${C} (raw) ${a}...`);const B=await ih(Pt,Kt,p,A.address,Kt,C,[],{commitment:"confirmed"},hn);console.log(`Minted ${a}, Tx: ${B}`),r.succeeded.push(a)}catch(h){const b=h.message||String(h);console.error(`Failed to mint ${a}:`,h),r.failed.push({symbol:a,error:b})}await sc(500)}o=`Bulk Mint Complete. Success: ${r.succeeded.length}. Failed: ${r.failed.length}.`,r.failed.length>0&&(o+=` Failures: ${r.failed.map(a=>`${a.symbol} (${a.error.substring(0,30)}...)`).join(", ")}`),$e(o,r.failed.length>0),$n.disabled=!1}async function X1(){if(!Pt||!Kt||!gr||!ra||!mr||!$i){Ve("Initialization error (AutoNumeric). Check console.",!0);return}const i=gr.value,e=$i.getNumber();if(!i){Ve("Please select a price feed symbol.",!0);return}if(e===null||typeof e>"u"||e<ia){Ve(`Please enter a valid price greater than or equal to ${ia}.`,!0);return}let t;const n=W1,s=String(e);try{const p=s.split("."),h=p[0],b=p[1]||"",k=Math.abs(n);if(b.length>k)throw new Error(`Input precision (${b.length} decimals) exceeds exponent precision (${k}).`);const _=b.padEnd(k,"0"),x=h+_;t=new mn(x)}catch(p){Ve(`Invalid price input/calculation: ${p.message||"Error processing price."}`,!0),console.error(p);return}const r=$i.getFormatted(),o=Gn[i];if(!o){Ve(`Mock feed address not found for ${i}. Check mockPriceFeeds.json.`,!0);return}const a=new H(o),l=new H(tc.address);mr.disabled=!0,Hn.disabled=!0,Ve(`Building transaction for ${i} to ${r} (raw: ${t.toString()}, exponent: ${n})...`),Yi&&(Yi.innerHTML="");try{const p=oc(t,n),h=[{pubkey:a,isSigner:!1,isWritable:!0}],b=new Ne({keys:h,programId:l,data:p}),k=new Te().add(Kn.setComputeUnitPrice({microLamports:nc})).add(Kn.setComputeUnitLimit({units:ic})).add(b);Ve(`Sending transaction for ${i}...`);const _=await ac(Pt,k,Kt);Ve(`Successfully updated price for ${i}!`),qh(_),jh(a.toBase58())}catch(p){Ve(`Update failed: ${p.message||p}`,!0),console.error("Price update error:",p)}finally{mr.disabled=!1,Hn.disabled=!1}}function cc(i){console.log(`[parsePriceFeedData] Raw buffer length: ${i?.length}`);const t=8,s=t+8,o=s+4,a=4,l=o+a;if(!i||i.length<l)return console.error(`Account data too short to read symbol length. Len: ${i?.length}, Min Required: ${l}`),null;try{const p=i.readUInt32LE(o),h=o+a,k=h+p,x=k+1,A=x+8,D=A+1;if(console.log(`  Symbol Length Prefix = ${p}`),console.log(`  Calculated Offsets: PRICE=${t}, EXPO=${s}, SYMBOL_LEN=${o}, SYMBOL_DATA=${h}, STATUS=${k}, TIMESTAMP=${x}, BUMP=${A}, ACTUAL_MIN_LEN=${D}`),i.length<D)return console.error(`Account data too short for all fields based on actual symbol length. Len: ${i.length}, Min Required: ${D}`),null;const L=i.readBigInt64LE(t),W=new mn(L.toString()),Y=i.readInt32LE(s),J=i.readBigInt64LE(x),Q=new mn(J.toString());return console.log(`  Parsed: PriceBN=${W.toString()}, Expo=${Y}, TimestampBigInt=${J.toString()}, TimestampBN=${Q.toString()}`),{price:W,exponent:Y,lastUpdatedTimestamp:Q}}catch(p){return console.error("Error parsing price feed data:",p),null}}async function ds(){if(!hi||!Pt)return;hi.textContent="Fetching current prices...";const i=Object.entries(Gn),e=i.map(([,n])=>new H(n)),t={};i.forEach(([n,s])=>{t[n]={symbol:n,address:s}});try{let n=[];for(let r=0;r<e.length;r+=100){const o=e.slice(r,r+100);if(o.length>0){console.log(`Fetching chunk ${r/100+1}: ${o.length} accounts`);const a=await Pt.getMultipleAccountsInfo(o);n=n.concat(a)}}n.forEach((r,o)=>{const a=i[o][0];if(r){const l=cc(r.data);l&&(t[a].price=l.price,t[a].exponent=l.exponent,t[a].lastUpdatedTimestamp=l.lastUpdatedTimestamp)}else console.warn(`Could not fetch account info for ${a}`)}),Q1(t),hi.classList.contains("error")||(hi.textContent="Current prices loaded."),hi.classList.remove("error")}catch(n){console.error("Error fetching multiple price feed accounts:",n),hi.textContent=`Error loading prices: ${n instanceof Error?n.message:n}`,hi.classList.add("error")}}function J1(i,e){try{let t=i.toString();const n=t.startsWith("-");n&&(t=t.substring(1));const s=Math.abs(e)+1;t.length<s&&(t=t.padStart(s,"0"));const r=t.length+e;let o="";r<=0?o="0."+"0".repeat(Math.abs(r))+t:o=t.substring(0,r)+"."+t.substring(r),o.includes(".")&&(o=o.replace(/0+$/,""),o.endsWith(".")&&(o=o.slice(0,-1))),o.startsWith(".")&&(o="0"+o),n&&(o="-"+o);const a=(o.split(".")[1]||"").length;return g.format(o,{digitGroupSeparator:" ",decimalCharacter:".",decimalPlaces:a,allowDecimalPadding:!1})}catch(t){return console.error("Error formatting display price:",t),"Error"}}function Q1(i){if(!cn)return;const e=new Map;cn.querySelectorAll("input.percentage-input").forEach(r=>{r.value&&r.dataset.symbol&&e.set(r.dataset.symbol,r.value)}),cn.innerHTML="";const n=Object.keys(i).sort();if(n.length===0){cn.innerHTML="<div>No price feed data available.</div>";return}const s=document.createElement("div");s.style.fontWeight="bold",s.style.borderBottom="1px solid #555",s.style.marginBottom="0.5em",s.style.paddingBottom="0.5em",s.innerHTML=`
        <span>Symbol</span>
        <span>Price $</span>
        <span>Last Updated</span> 
        <span>Change %</span>
        <span>Action</span>
    `,cn.appendChild(s);for(const r of n){const o=i[r],a=o.price&&typeof o.exponent<"u"?J1(o.price,o.exponent):"N/A";let l="N/A";if(o.lastUpdatedTimestamp)try{const h=o.lastUpdatedTimestamp.toNumber()*1e3;l=new Date(h).toLocaleString()}catch{console.warn(`Timestamp BN too large for ${r}, showing raw: ${o.lastUpdatedTimestamp.toString()}`),l=o.lastUpdatedTimestamp.toString()+" (raw)"}const p=document.createElement("div");p.innerHTML=`
            <span>${r}</span>
            <span>${a}</span>
            <span>${l}</span>
            <span><input type="number" class="percentage-input" placeholder="+/-%" data-symbol="${r}" step="any" /></span>
            <span><button class="update-percentage-button" data-symbol="${r}" ${a==="N/A"?"disabled":""}>Update</button></span>
        `,cn.appendChild(p)}e.forEach((r,o)=>{const a=cn.querySelector(`input.percentage-input[data-symbol="${o}"]`);a&&(a.value=r)})}async function eE(i){const e=i.target;if(!e||!e.classList.contains("update-percentage-button"))return;const t=e,n=t.dataset.symbol;if(!n){console.error("Update button missing symbol data attribute.");return}const s=cn?.querySelector(`input.percentage-input[data-symbol="${n}"]`);if(!s){console.error(`Percentage input not found for symbol ${n}.`);return}const r=s.value;if(!r){Ve(`Please enter a percentage change for ${n}.`,!0);return}const o=parseFloat(r);if(isNaN(o)){Ve(`Invalid percentage format for ${n}.`,!0);return}t.disabled=!0,Hn.disabled=!0,Ve(`Updating ${n} by ${o}%...`);try{const a=Gn[n];if(!a)throw new Error(`Address not found for ${n}`);const l=new H(a),p=await Pt.getAccountInfo(l);if(!p)throw new Error(`Could not fetch latest account info for ${n}`);const h=cc(p.data);if(!h)throw new Error(`Could not parse latest account info for ${n}`);const{price:b,exponent:k}=h,_=1e4,x=Math.round(o*(_/100)),C=_+x,A=b.mul(new mn(C)).div(new mn(_)),B=oc(A,k),D=[{pubkey:l,isSigner:!1,isWritable:!0}],L=new Ne({keys:D,programId:new H(tc.address),data:B}),W=new Te().add(Kn.setComputeUnitPrice({microLamports:nc})).add(Kn.setComputeUnitLimit({units:ic})).add(L),Y=await ac(Pt,W,Kt);Ve(`Successfully updated ${n} by ${o}%!`),qh(Y),jh(l.toBase58()),s.value="",await ds()}catch(a){console.error(`Error updating ${n} by percentage:`,a),Ve(`Failed to update ${n}: ${a.message||a}`,!0)}finally{t.disabled=!1,Hn.disabled=!1}}async function tE(){if(!Pt||!Kt||!Mo||!Hn||!cn){Ve("Initialization error (Bulk Update). Check console.",!0);return}const i=Mo.value.trim();if(!i){Ve("Please enter a percentage change for bulk update.",!0);return}const e=parseFloat(i);if(isNaN(e)){Ve("Invalid percentage format for bulk update.",!0);return}Hn.disabled=!0,cn.querySelectorAll(".update-percentage-button").forEach(o=>o.disabled=!0),Ve(`Starting bulk update by ${e}% for all feeds...`);const n=Object.keys(Gn).sort(),s={succeeded:[],failed:[]};for(const o of n){Ve(`Bulk Update: Processing ${o}...`);const a=Gn[o],l=new H(a);try{const p=await Pt.getAccountInfo(l);if(!p)throw new Error("Could not fetch latest account info");const h=cc(p.data);if(!h)throw new Error("Could not parse latest account info");const{price:b,exponent:k}=h,_=1e4,x=Math.round(e*(_/100)),C=_+x,A=b.mul(new mn(C)).div(new mn(_)),B=oc(A,k),D=[{pubkey:l,isSigner:!1,isWritable:!0}],L=new Ne({keys:D,programId:new H(tc.address),data:B}),W=new Te().add(Kn.setComputeUnitPrice({microLamports:nc})).add(Kn.setComputeUnitLimit({units:ic})).add(L),Y=await ac(Pt,W,Kt);console.log(`Bulk Update: ${o} updated by ${e}%, Tx: ${Y}`),s.succeeded.push(o)}catch(p){const h=p.message||String(p);console.error(`Bulk Update Error (${o}):`,p),s.failed.push({symbol:o,error:h})}await sc(500)}let r=`Bulk Update Complete. Success: ${s.succeeded.length}. Failed: ${s.failed.length}.`;s.failed.length>0&&(r+=` Failures: ${s.failed.map(o=>`${o.symbol} (${o.error.substring(0,30)}...)`).join(", ")}`),Ve(r,s.failed.length>0),Mo.value="",Hn.disabled=!1,await ds()}async function nE(){if($e("Initializing..."),Ve("Initializing..."),lr.length!==64){const i="ERROR: Invalid MINT_AUTHORITY_SECRET_KEY length. Paste the 64-byte array.";$e(i,!0),Ve(i,!0);return}if(lr[0]===1&&lr[1]===2&&lr[2]===3){const i="ERROR: Placeholder MINT_AUTHORITY_SECRET_KEY found. Paste your actual key.";$e(i,!0),Ve(i,!0);return}try{if(un=rc(),console.log("Cluster Info:",un),Kt=vi.fromSecretKey(lr),console.log("Authority/Payer Key:",Kt.publicKey.toBase58()),Pt=new Gu(Fi,"confirmed"),console.log("Connected to:",Fi),await Pt.getVersion(),console.log("Connection successful."),Object.keys(_i).length===0)throw new Error("Mint addresses data is empty after import.");console.log("Successfully loaded MINT_ADDRESSES via import:",_i),Object.keys(Gn).length===0?(console.warn("Mock price feed addresses data is empty after import. Ensure `anchor test` was run in mockPriceFeed project."),Ve("Warning: Price feed list empty. Run `anchor test` in mockPriceFeed?",!0)):console.log("Successfully loaded MOCK_PRICE_FEEDS via import:",Gn),q1(),j1(),ra?($i=new g(ra,{digitGroupSeparator:" ",decimalCharacter:".",decimalPlaces:8,minimumValue:"0.000001",allowDecimalPadding:!1,emptyInputBehavior:"null",overrideMinMaxLimits:"invalid"}),console.log("AutoNumeric initialized on price input.")):(console.error("Price input element not found for AutoNumeric."),Ve("Initialization error: Price input field missing.",!0)),$n&&$n.addEventListener("click",()=>{ur?.checked?Y1():An?.value?Z1():$e('Please select a specific token or check "Mint All Tokens Instead".',!0)}),mr&&mr.addEventListener("click",X1),ml&&$i&&ml.addEventListener("click",()=>{$i?.set(ia)}),ur&&An&&(ur.addEventListener("change",()=>{ur.checked&&(An.value="")}),An.addEventListener("change",()=>{An.value!==""&&(ur.checked=!1)})),cn&&cn.addEventListener("click",eE),Hn&&Hn.addEventListener("click",tE),await ds(),Fo&&clearInterval(Fo),Fo=setInterval(ds,5e3),$e("Ready. Enter address, select token, and click Mint."),Ve("Ready. Select feed, enter price, and click Update.")}catch(i){const e=`Initialization failed: ${i.message||i}`;$e(e,!0),Ve(e,!0),console.error("Initialization error:",i)}}document.addEventListener("DOMContentLoaded",nE);
