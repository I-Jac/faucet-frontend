(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();var _e={},ji={};ji.byteLength=Ql;ji.toByteArray=eh;ji.fromByteArray=ih;var dr=[],Qe=[],Xl=typeof Uint8Array<"u"?Uint8Array:Array,Hs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var pn=0,Jl=Hs.length;pn<Jl;++pn)dr[pn]=Hs[pn],Qe[Hs.charCodeAt(pn)]=pn;Qe[45]=62;Qe[95]=63;function Uc(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function Ql(n){var t=Uc(n),e=t[0],r=t[1];return(e+r)*3/4-r}function th(n,t,e){return(t+e)*3/4-e}function eh(n){var t,e=Uc(n),r=e[0],s=e[1],i=new Xl(th(n,r,s)),o=0,c=s>0?r-4:r,u;for(u=0;u<c;u+=4)t=Qe[n.charCodeAt(u)]<<18|Qe[n.charCodeAt(u+1)]<<12|Qe[n.charCodeAt(u+2)]<<6|Qe[n.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Qe[n.charCodeAt(u)]<<2|Qe[n.charCodeAt(u+1)]>>4,i[o++]=t&255),s===1&&(t=Qe[n.charCodeAt(u)]<<10|Qe[n.charCodeAt(u+1)]<<4|Qe[n.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function rh(n){return dr[n>>18&63]+dr[n>>12&63]+dr[n>>6&63]+dr[n&63]}function nh(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(rh(r));return s.join("")}function ih(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,c=e-r;o<c;o+=i)s.push(nh(n,o,o+i>c?c:o+i));return r===1?(t=n[e-1],s.push(dr[t>>2]+dr[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push(dr[t>>10]+dr[t>>4&63]+dr[t<<2&63]+"=")),s.join("")}var Co={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Co.read=function(n,t,e,r,s){var i,o,c=s*8-r-1,u=(1<<c)-1,y=u>>1,p=-7,E=e?s-1:0,x=e?-1:1,k=n[t+E];for(E+=x,i=k&(1<<-p)-1,k>>=-p,p+=c;p>0;i=i*256+n[t+E],E+=x,p-=8);for(o=i&(1<<-p)-1,i>>=-p,p+=r;p>0;o=o*256+n[t+E],E+=x,p-=8);if(i===0)i=1-y;else{if(i===u)return o?NaN:(k?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-y}return(k?-1:1)*o*Math.pow(2,i-r)};Co.write=function(n,t,e,r,s,i){var o,c,u,y=i*8-s-1,p=(1<<y)-1,E=p>>1,x=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=r?0:i-1,O=r?1:-1,N=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=p):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+E>=1?t+=x/u:t+=x*Math.pow(2,1-E),t*u>=2&&(o++,u/=2),o+E>=p?(c=0,o=p):o+E>=1?(c=(t*u-1)*Math.pow(2,s),o=o+E):(c=t*Math.pow(2,E-1)*Math.pow(2,s),o=0));s>=8;n[e+k]=c&255,k+=O,c/=256,s-=8);for(o=o<<s|c,y+=s;y>0;n[e+k]=o&255,k+=O,o/=256,y-=8);n[e+k-O]|=N*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=ji,e=Co,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=p,n.SlowBuffer=Q,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:c}=globalThis;p.TYPED_ARRAY_SUPPORT=u(),!p.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const m=new i(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,i.prototype),Object.setPrototypeOf(m,h),m.foo()===42}catch{return!1}}Object.defineProperty(p.prototype,"parent",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.buffer}}),Object.defineProperty(p.prototype,"offset",{enumerable:!0,get:function(){if(p.isBuffer(this))return this.byteOffset}});function y(m){if(m>s)throw new RangeError('The value "'+m+'" is invalid for option "size"');const h=new i(m);return Object.setPrototypeOf(h,p.prototype),h}function p(m,h,f){if(typeof m=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return O(m)}return E(m,h,f)}p.poolSize=8192;function E(m,h,f){if(typeof m=="string")return N(m,h);if(o.isView(m))return U(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(qe(m,o)||m&&qe(m.buffer,o)||typeof c<"u"&&(qe(m,c)||m&&qe(m.buffer,c)))return F(m,h,f);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=m.valueOf&&m.valueOf();if(S!=null&&S!==m)return p.from(S,h,f);const B=C(m);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return p.from(m[Symbol.toPrimitive]("string"),h,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}p.from=function(m,h,f){return E(m,h,f)},Object.setPrototypeOf(p.prototype,i.prototype),Object.setPrototypeOf(p,i);function x(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function k(m,h,f){return x(m),m<=0?y(m):h!==void 0?typeof f=="string"?y(m).fill(h,f):y(m).fill(h):y(m)}p.alloc=function(m,h,f){return k(m,h,f)};function O(m){return x(m),y(m<0?0:V(m)|0)}p.allocUnsafe=function(m){return O(m)},p.allocUnsafeSlow=function(m){return O(m)};function N(m,h){if((typeof h!="string"||h==="")&&(h="utf8"),!p.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const f=Y(m,h)|0;let S=y(f);const B=S.write(m,h);return B!==f&&(S=S.slice(0,B)),S}function I(m){const h=m.length<0?0:V(m.length)|0,f=y(h);for(let S=0;S<h;S+=1)f[S]=m[S]&255;return f}function U(m){if(qe(m,i)){const h=new i(m);return F(h.buffer,h.byteOffset,h.byteLength)}return I(m)}function F(m,h,f){if(h<0||m.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<h+(f||0))throw new RangeError('"length" is outside of buffer bounds');let S;return h===void 0&&f===void 0?S=new i(m):f===void 0?S=new i(m,h):S=new i(m,h,f),Object.setPrototypeOf(S,p.prototype),S}function C(m){if(p.isBuffer(m)){const h=V(m.length)|0,f=y(h);return f.length===0||m.copy(f,0,0,h),f}if(m.length!==void 0)return typeof m.length!="number"||Wt(m.length)?y(0):I(m);if(m.type==="Buffer"&&Array.isArray(m.data))return I(m.data)}function V(m){if(m>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return m|0}function Q(m){return+m!=m&&(m=0),p.alloc(+m)}p.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==p.prototype},p.compare=function(h,f){if(qe(h,i)&&(h=p.from(h,h.offset,h.byteLength)),qe(f,i)&&(f=p.from(f,f.offset,f.byteLength)),!p.isBuffer(h)||!p.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===f)return 0;let S=h.length,B=f.length;for(let M=0,H=Math.min(S,B);M<H;++M)if(h[M]!==f[M]){S=h[M],B=f[M];break}return S<B?-1:B<S?1:0},p.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(h,f){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return p.alloc(0);let S;if(f===void 0)for(f=0,S=0;S<h.length;++S)f+=h[S].length;const B=p.allocUnsafe(f);let M=0;for(S=0;S<h.length;++S){let H=h[S];if(qe(H,i))M+H.length>B.length?(p.isBuffer(H)||(H=p.from(H)),H.copy(B,M)):i.prototype.set.call(B,H,M);else if(p.isBuffer(H))H.copy(B,M);else throw new TypeError('"list" argument must be an Array of Buffers');M+=H.length}return B};function Y(m,h){if(p.isBuffer(m))return m.length;if(o.isView(m)||qe(m,o))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const f=m.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&f===0)return 0;let B=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return Dt(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return qt(m).length;default:if(B)return S?-1:Dt(m).length;h=(""+h).toLowerCase(),B=!0}}p.byteLength=Y;function tt(m,h,f){let S=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,h>>>=0,f<=h))return"";for(m||(m="utf8");;)switch(m){case"hex":return d(this,h,f);case"utf8":case"utf-8":return w(this,h,f);case"ascii":return T(this,h,f);case"latin1":case"binary":return _(this,h,f);case"base64":return g(this,h,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,h,f);default:if(S)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),S=!0}}p.prototype._isBuffer=!0;function Z(m,h,f){const S=m[h];m[h]=m[f],m[f]=S}p.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<h;f+=2)Z(this,f,f+1);return this},p.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<h;f+=4)Z(this,f,f+3),Z(this,f+1,f+2);return this},p.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<h;f+=8)Z(this,f,f+7),Z(this,f+1,f+6),Z(this,f+2,f+5),Z(this,f+3,f+4);return this},p.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?w(this,0,h):tt.apply(this,arguments)},p.prototype.toLocaleString=p.prototype.toString,p.prototype.equals=function(h){if(!p.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:p.compare(this,h)===0},p.prototype.inspect=function(){let h="";const f=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(h+=" ... "),"<Buffer "+h+">"},r&&(p.prototype[r]=p.prototype.inspect),p.prototype.compare=function(h,f,S,B,M){if(qe(h,i)&&(h=p.from(h,h.offset,h.byteLength)),!p.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(f===void 0&&(f=0),S===void 0&&(S=h?h.length:0),B===void 0&&(B=0),M===void 0&&(M=this.length),f<0||S>h.length||B<0||M>this.length)throw new RangeError("out of range index");if(B>=M&&f>=S)return 0;if(B>=M)return-1;if(f>=S)return 1;if(f>>>=0,S>>>=0,B>>>=0,M>>>=0,this===h)return 0;let H=M-B,wt=S-f;const yt=Math.min(H,wt),dt=this.slice(B,M),Kt=h.slice(f,S);for(let ht=0;ht<yt;++ht)if(dt[ht]!==Kt[ht]){H=dt[ht],wt=Kt[ht];break}return H<wt?-1:wt<H?1:0};function ot(m,h,f,S,B){if(m.length===0)return-1;if(typeof f=="string"?(S=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Wt(f)&&(f=B?0:m.length-1),f<0&&(f=m.length+f),f>=m.length){if(B)return-1;f=m.length-1}else if(f<0)if(B)f=0;else return-1;if(typeof h=="string"&&(h=p.from(h,S)),p.isBuffer(h))return h.length===0?-1:St(m,h,f,S,B);if(typeof h=="number")return h=h&255,typeof i.prototype.indexOf=="function"?B?i.prototype.indexOf.call(m,h,f):i.prototype.lastIndexOf.call(m,h,f):St(m,[h],f,S,B);throw new TypeError("val must be string, number or Buffer")}function St(m,h,f,S,B){let M=1,H=m.length,wt=h.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(m.length<2||h.length<2)return-1;M=2,H/=2,wt/=2,f/=2}function yt(Kt,ht){return M===1?Kt[ht]:Kt.readUInt16BE(ht*M)}let dt;if(B){let Kt=-1;for(dt=f;dt<H;dt++)if(yt(m,dt)===yt(h,Kt===-1?0:dt-Kt)){if(Kt===-1&&(Kt=dt),dt-Kt+1===wt)return Kt*M}else Kt!==-1&&(dt-=dt-Kt),Kt=-1}else for(f+wt>H&&(f=H-wt),dt=f;dt>=0;dt--){let Kt=!0;for(let ht=0;ht<wt;ht++)if(yt(m,dt+ht)!==yt(h,ht)){Kt=!1;break}if(Kt)return dt}return-1}p.prototype.includes=function(h,f,S){return this.indexOf(h,f,S)!==-1},p.prototype.indexOf=function(h,f,S){return ot(this,h,f,S,!0)},p.prototype.lastIndexOf=function(h,f,S){return ot(this,h,f,S,!1)};function it(m,h,f,S){f=Number(f)||0;const B=m.length-f;S?(S=Number(S),S>B&&(S=B)):S=B;const M=h.length;S>M/2&&(S=M/2);let H;for(H=0;H<S;++H){const wt=parseInt(h.substr(H*2,2),16);if(Wt(wt))return H;m[f+H]=wt}return H}function W(m,h,f,S){return zt(Dt(h,m.length-f),m,f,S)}function A(m,h,f,S){return zt(Zt(h),m,f,S)}function a(m,h,f,S){return zt(qt(h),m,f,S)}function l(m,h,f,S){return zt(yi(h,m.length-f),m,f,S)}p.prototype.write=function(h,f,S,B){if(f===void 0)B="utf8",S=this.length,f=0;else if(S===void 0&&typeof f=="string")B=f,S=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(S)?(S=S>>>0,B===void 0&&(B="utf8")):(B=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const M=this.length-f;if((S===void 0||S>M)&&(S=M),h.length>0&&(S<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let H=!1;for(;;)switch(B){case"hex":return it(this,h,f,S);case"utf8":case"utf-8":return W(this,h,f,S);case"ascii":case"latin1":case"binary":return A(this,h,f,S);case"base64":return a(this,h,f,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l(this,h,f,S);default:if(H)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),H=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function g(m,h,f){return h===0&&f===m.length?t.fromByteArray(m):t.fromByteArray(m.slice(h,f))}function w(m,h,f){f=Math.min(m.length,f);const S=[];let B=h;for(;B<f;){const M=m[B];let H=null,wt=M>239?4:M>223?3:M>191?2:1;if(B+wt<=f){let yt,dt,Kt,ht;switch(wt){case 1:M<128&&(H=M);break;case 2:yt=m[B+1],(yt&192)===128&&(ht=(M&31)<<6|yt&63,ht>127&&(H=ht));break;case 3:yt=m[B+1],dt=m[B+2],(yt&192)===128&&(dt&192)===128&&(ht=(M&15)<<12|(yt&63)<<6|dt&63,ht>2047&&(ht<55296||ht>57343)&&(H=ht));break;case 4:yt=m[B+1],dt=m[B+2],Kt=m[B+3],(yt&192)===128&&(dt&192)===128&&(Kt&192)===128&&(ht=(M&15)<<18|(yt&63)<<12|(dt&63)<<6|Kt&63,ht>65535&&ht<1114112&&(H=ht))}}H===null?(H=65533,wt=1):H>65535&&(H-=65536,S.push(H>>>10&1023|55296),H=56320|H&1023),S.push(H),B+=wt}return R(S)}const b=4096;function R(m){const h=m.length;if(h<=b)return String.fromCharCode.apply(String,m);let f="",S=0;for(;S<h;)f+=String.fromCharCode.apply(String,m.slice(S,S+=b));return f}function T(m,h,f){let S="";f=Math.min(m.length,f);for(let B=h;B<f;++B)S+=String.fromCharCode(m[B]&127);return S}function _(m,h,f){let S="";f=Math.min(m.length,f);for(let B=h;B<f;++B)S+=String.fromCharCode(m[B]);return S}function d(m,h,f){const S=m.length;(!h||h<0)&&(h=0),(!f||f<0||f>S)&&(f=S);let B="";for(let M=h;M<f;++M)B+=Xt[m[M]];return B}function v(m,h,f){const S=m.slice(h,f);let B="";for(let M=0;M<S.length-1;M+=2)B+=String.fromCharCode(S[M]+S[M+1]*256);return B}p.prototype.slice=function(h,f){const S=this.length;h=~~h,f=f===void 0?S:~~f,h<0?(h+=S,h<0&&(h=0)):h>S&&(h=S),f<0?(f+=S,f<0&&(f=0)):f>S&&(f=S),f<h&&(f=h);const B=this.subarray(h,f);return Object.setPrototypeOf(B,p.prototype),B};function $(m,h,f){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+h>f)throw new RangeError("Trying to access beyond buffer length")}p.prototype.readUintLE=p.prototype.readUIntLE=function(h,f,S){h=h>>>0,f=f>>>0,S||$(h,f,this.length);let B=this[h],M=1,H=0;for(;++H<f&&(M*=256);)B+=this[h+H]*M;return B},p.prototype.readUintBE=p.prototype.readUIntBE=function(h,f,S){h=h>>>0,f=f>>>0,S||$(h,f,this.length);let B=this[h+--f],M=1;for(;f>0&&(M*=256);)B+=this[h+--f]*M;return B},p.prototype.readUint8=p.prototype.readUInt8=function(h,f){return h=h>>>0,f||$(h,1,this.length),this[h]},p.prototype.readUint16LE=p.prototype.readUInt16LE=function(h,f){return h=h>>>0,f||$(h,2,this.length),this[h]|this[h+1]<<8},p.prototype.readUint16BE=p.prototype.readUInt16BE=function(h,f){return h=h>>>0,f||$(h,2,this.length),this[h]<<8|this[h+1]},p.prototype.readUint32LE=p.prototype.readUInt32LE=function(h,f){return h=h>>>0,f||$(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},p.prototype.readUint32BE=p.prototype.readUInt32BE=function(h,f){return h=h>>>0,f||$(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},p.prototype.readBigUInt64LE=ir(function(h){h=h>>>0,Je(h,"offset");const f=this[h],S=this[h+7];(f===void 0||S===void 0)&&Pt(h,this.length-8);const B=f+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,M=this[++h]+this[++h]*2**8+this[++h]*2**16+S*2**24;return BigInt(B)+(BigInt(M)<<BigInt(32))}),p.prototype.readBigUInt64BE=ir(function(h){h=h>>>0,Je(h,"offset");const f=this[h],S=this[h+7];(f===void 0||S===void 0)&&Pt(h,this.length-8);const B=f*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],M=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+S;return(BigInt(B)<<BigInt(32))+BigInt(M)}),p.prototype.readIntLE=function(h,f,S){h=h>>>0,f=f>>>0,S||$(h,f,this.length);let B=this[h],M=1,H=0;for(;++H<f&&(M*=256);)B+=this[h+H]*M;return M*=128,B>=M&&(B-=Math.pow(2,8*f)),B},p.prototype.readIntBE=function(h,f,S){h=h>>>0,f=f>>>0,S||$(h,f,this.length);let B=f,M=1,H=this[h+--B];for(;B>0&&(M*=256);)H+=this[h+--B]*M;return M*=128,H>=M&&(H-=Math.pow(2,8*f)),H},p.prototype.readInt8=function(h,f){return h=h>>>0,f||$(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},p.prototype.readInt16LE=function(h,f){h=h>>>0,f||$(h,2,this.length);const S=this[h]|this[h+1]<<8;return S&32768?S|4294901760:S},p.prototype.readInt16BE=function(h,f){h=h>>>0,f||$(h,2,this.length);const S=this[h+1]|this[h]<<8;return S&32768?S|4294901760:S},p.prototype.readInt32LE=function(h,f){return h=h>>>0,f||$(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},p.prototype.readInt32BE=function(h,f){return h=h>>>0,f||$(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},p.prototype.readBigInt64LE=ir(function(h){h=h>>>0,Je(h,"offset");const f=this[h],S=this[h+7];(f===void 0||S===void 0)&&Pt(h,this.length-8);const B=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(S<<24);return(BigInt(B)<<BigInt(32))+BigInt(f+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),p.prototype.readBigInt64BE=ir(function(h){h=h>>>0,Je(h,"offset");const f=this[h],S=this[h+7];(f===void 0||S===void 0)&&Pt(h,this.length-8);const B=(f<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(B)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+S)}),p.prototype.readFloatLE=function(h,f){return h=h>>>0,f||$(h,4,this.length),e.read(this,h,!0,23,4)},p.prototype.readFloatBE=function(h,f){return h=h>>>0,f||$(h,4,this.length),e.read(this,h,!1,23,4)},p.prototype.readDoubleLE=function(h,f){return h=h>>>0,f||$(h,8,this.length),e.read(this,h,!0,52,8)},p.prototype.readDoubleBE=function(h,f){return h=h>>>0,f||$(h,8,this.length),e.read(this,h,!1,52,8)};function q(m,h,f,S,B,M){if(!p.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>B||h<M)throw new RangeError('"value" argument is out of bounds');if(f+S>m.length)throw new RangeError("Index out of range")}p.prototype.writeUintLE=p.prototype.writeUIntLE=function(h,f,S,B){if(h=+h,f=f>>>0,S=S>>>0,!B){const wt=Math.pow(2,8*S)-1;q(this,h,f,S,wt,0)}let M=1,H=0;for(this[f]=h&255;++H<S&&(M*=256);)this[f+H]=h/M&255;return f+S},p.prototype.writeUintBE=p.prototype.writeUIntBE=function(h,f,S,B){if(h=+h,f=f>>>0,S=S>>>0,!B){const wt=Math.pow(2,8*S)-1;q(this,h,f,S,wt,0)}let M=S-1,H=1;for(this[f+M]=h&255;--M>=0&&(H*=256);)this[f+M]=h/H&255;return f+S},p.prototype.writeUint8=p.prototype.writeUInt8=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,1,255,0),this[f]=h&255,f+1},p.prototype.writeUint16LE=p.prototype.writeUInt16LE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,2,65535,0),this[f]=h&255,this[f+1]=h>>>8,f+2},p.prototype.writeUint16BE=p.prototype.writeUInt16BE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,2,65535,0),this[f]=h>>>8,this[f+1]=h&255,f+2},p.prototype.writeUint32LE=p.prototype.writeUInt32LE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,4,4294967295,0),this[f+3]=h>>>24,this[f+2]=h>>>16,this[f+1]=h>>>8,this[f]=h&255,f+4},p.prototype.writeUint32BE=p.prototype.writeUInt32BE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,4,4294967295,0),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4};function X(m,h,f,S,B){Ct(h,S,B,m,f,7);let M=Number(h&BigInt(4294967295));m[f++]=M,M=M>>8,m[f++]=M,M=M>>8,m[f++]=M,M=M>>8,m[f++]=M;let H=Number(h>>BigInt(32)&BigInt(4294967295));return m[f++]=H,H=H>>8,m[f++]=H,H=H>>8,m[f++]=H,H=H>>8,m[f++]=H,f}function mt(m,h,f,S,B){Ct(h,S,B,m,f,7);let M=Number(h&BigInt(4294967295));m[f+7]=M,M=M>>8,m[f+6]=M,M=M>>8,m[f+5]=M,M=M>>8,m[f+4]=M;let H=Number(h>>BigInt(32)&BigInt(4294967295));return m[f+3]=H,H=H>>8,m[f+2]=H,H=H>>8,m[f+1]=H,H=H>>8,m[f]=H,f+8}p.prototype.writeBigUInt64LE=ir(function(h,f=0){return X(this,h,f,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeBigUInt64BE=ir(function(h,f=0){return mt(this,h,f,BigInt(0),BigInt("0xffffffffffffffff"))}),p.prototype.writeIntLE=function(h,f,S,B){if(h=+h,f=f>>>0,!B){const yt=Math.pow(2,8*S-1);q(this,h,f,S,yt-1,-yt)}let M=0,H=1,wt=0;for(this[f]=h&255;++M<S&&(H*=256);)h<0&&wt===0&&this[f+M-1]!==0&&(wt=1),this[f+M]=(h/H>>0)-wt&255;return f+S},p.prototype.writeIntBE=function(h,f,S,B){if(h=+h,f=f>>>0,!B){const yt=Math.pow(2,8*S-1);q(this,h,f,S,yt-1,-yt)}let M=S-1,H=1,wt=0;for(this[f+M]=h&255;--M>=0&&(H*=256);)h<0&&wt===0&&this[f+M+1]!==0&&(wt=1),this[f+M]=(h/H>>0)-wt&255;return f+S},p.prototype.writeInt8=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,1,127,-128),h<0&&(h=255+h+1),this[f]=h&255,f+1},p.prototype.writeInt16LE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,2,32767,-32768),this[f]=h&255,this[f+1]=h>>>8,f+2},p.prototype.writeInt16BE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,2,32767,-32768),this[f]=h>>>8,this[f+1]=h&255,f+2},p.prototype.writeInt32LE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,4,2147483647,-2147483648),this[f]=h&255,this[f+1]=h>>>8,this[f+2]=h>>>16,this[f+3]=h>>>24,f+4},p.prototype.writeInt32BE=function(h,f,S){return h=+h,f=f>>>0,S||q(this,h,f,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[f]=h>>>24,this[f+1]=h>>>16,this[f+2]=h>>>8,this[f+3]=h&255,f+4},p.prototype.writeBigInt64LE=ir(function(h,f=0){return X(this,h,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),p.prototype.writeBigInt64BE=ir(function(h,f=0){return mt(this,h,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function lt(m,h,f,S,B,M){if(f+S>m.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function pt(m,h,f,S,B){return h=+h,f=f>>>0,B||lt(m,h,f,4),e.write(m,h,f,S,23,4),f+4}p.prototype.writeFloatLE=function(h,f,S){return pt(this,h,f,!0,S)},p.prototype.writeFloatBE=function(h,f,S){return pt(this,h,f,!1,S)};function ee(m,h,f,S,B){return h=+h,f=f>>>0,B||lt(m,h,f,8),e.write(m,h,f,S,52,8),f+8}p.prototype.writeDoubleLE=function(h,f,S){return ee(this,h,f,!0,S)},p.prototype.writeDoubleBE=function(h,f,S){return ee(this,h,f,!1,S)},p.prototype.copy=function(h,f,S,B){if(!p.isBuffer(h))throw new TypeError("argument should be a Buffer");if(S||(S=0),!B&&B!==0&&(B=this.length),f>=h.length&&(f=h.length),f||(f=0),B>0&&B<S&&(B=S),B===S||h.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),h.length-f<B-S&&(B=h.length-f+S);const M=B-S;return this===h&&typeof i.prototype.copyWithin=="function"?this.copyWithin(f,S,B):i.prototype.set.call(h,this.subarray(S,B),f),M},p.prototype.fill=function(h,f,S,B){if(typeof h=="string"){if(typeof f=="string"?(B=f,f=0,S=this.length):typeof S=="string"&&(B=S,S=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!p.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(h.length===1){const H=h.charCodeAt(0);(B==="utf8"&&H<128||B==="latin1")&&(h=H)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(f<0||this.length<f||this.length<S)throw new RangeError("Out of range index");if(S<=f)return this;f=f>>>0,S=S===void 0?this.length:S>>>0,h||(h=0);let M;if(typeof h=="number")for(M=f;M<S;++M)this[M]=h;else{const H=p.isBuffer(h)?h:p.from(h,B),wt=H.length;if(wt===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(M=0;M<S-f;++M)this[M+f]=H[M%wt]}return this};const ft={};function gt(m,h,f){ft[m]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}gt("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),gt("ERR_INVALID_ARG_TYPE",function(m,h){return`The "${m}" argument must be of type number. Received type ${typeof h}`},TypeError),gt("ERR_OUT_OF_RANGE",function(m,h,f){let S=`The value of "${m}" is out of range.`,B=f;return Number.isInteger(f)&&Math.abs(f)>2**32?B=we(String(f)):typeof f=="bigint"&&(B=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(B=we(B)),B+="n"),S+=` It must be ${h}. Received ${B}`,S},RangeError);function we(m){let h="",f=m.length;const S=m[0]==="-"?1:0;for(;f>=S+4;f-=3)h=`_${m.slice(f-3,f)}${h}`;return`${m.slice(0,f)}${h}`}function It(m,h,f){Je(h,"offset"),(m[h]===void 0||m[h+f]===void 0)&&Pt(h,m.length-(f+1))}function Ct(m,h,f,S,B,M){if(m>f||m<h){const H=typeof h=="bigint"?"n":"";let wt;throw h===0||h===BigInt(0)?wt=`>= 0${H} and < 2${H} ** ${(M+1)*8}${H}`:wt=`>= -(2${H} ** ${(M+1)*8-1}${H}) and < 2 ** ${(M+1)*8-1}${H}`,new ft.ERR_OUT_OF_RANGE("value",wt,m)}It(S,B,M)}function Je(m,h){if(typeof m!="number")throw new ft.ERR_INVALID_ARG_TYPE(h,"number",m)}function Pt(m,h,f){throw Math.floor(m)!==m?(Je(m,f),new ft.ERR_OUT_OF_RANGE("offset","an integer",m)):h<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,m)}const $t=/[^+/0-9A-Za-z-_]/g;function dn(m){if(m=m.split("=")[0],m=m.trim().replace($t,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Dt(m,h){h=h||1/0;let f;const S=m.length;let B=null;const M=[];for(let H=0;H<S;++H){if(f=m.charCodeAt(H),f>55295&&f<57344){if(!B){if(f>56319){(h-=3)>-1&&M.push(239,191,189);continue}else if(H+1===S){(h-=3)>-1&&M.push(239,191,189);continue}B=f;continue}if(f<56320){(h-=3)>-1&&M.push(239,191,189),B=f;continue}f=(B-55296<<10|f-56320)+65536}else B&&(h-=3)>-1&&M.push(239,191,189);if(B=null,f<128){if((h-=1)<0)break;M.push(f)}else if(f<2048){if((h-=2)<0)break;M.push(f>>6|192,f&63|128)}else if(f<65536){if((h-=3)<0)break;M.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((h-=4)<0)break;M.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return M}function Zt(m){const h=[];for(let f=0;f<m.length;++f)h.push(m.charCodeAt(f)&255);return h}function yi(m,h){let f,S,B;const M=[];for(let H=0;H<m.length&&!((h-=2)<0);++H)f=m.charCodeAt(H),S=f>>8,B=f%256,M.push(B),M.push(S);return M}function qt(m){return t.toByteArray(dn(m))}function zt(m,h,f,S){let B;for(B=0;B<S&&!(B+f>=h.length||B>=m.length);++B)h[B+f]=m[B];return B}function qe(m,h){return m instanceof h||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===h.name}function Wt(m){return m!==m}const Xt=function(){const m="0123456789abcdef",h=new Array(256);for(let f=0;f<16;++f){const S=f*16;for(let B=0;B<16;++B)h[S+B]=m[f]+m[B]}return h}();function ir(m){return typeof BigInt>"u"?Jt:m}function Jt(){throw new Error("BigInt not supported")}})(_e);const _t=_e.Buffer,sh=_e.Blob,oh=_e.BlobOptions,ct=_e.Buffer,ah=_e.File,ch=_e.FileOptions,uh=_e.INSPECT_MAX_BYTES,lh=_e.SlowBuffer,hh=_e.TranscodeEncoding,fh=_e.atob,dh=_e.btoa,ph=_e.constants,yh=_e.isAscii,gh=_e.isUtf8,mh=_e.kMaxLength,wh=_e.kStringMaxLength,bh=_e.resolveObjectURL,Eh=_e.transcode,_h=Object.freeze(Object.defineProperty({__proto__:null,Blob:sh,BlobOptions:oh,Buffer:ct,File:ah,FileOptions:ch,INSPECT_MAX_BYTES:uh,SlowBuffer:lh,TranscodeEncoding:hh,atob:fh,btoa:dh,constants:ph,default:_t,isAscii:yh,isUtf8:gh,kMaxLength:mh,kStringMaxLength:wh,resolveObjectURL:bh,transcode:Eh},Symbol.toStringTag,{value:"Module"}));function Ma(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Ah(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Yi(n,...t){if(!Ah(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Rh(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Ma(n.outputLen),Ma(n.blockLen)}function xi(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Sh(n,t){Yi(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}const yn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Fs(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function ur(n,t){return n<<32-t|n>>>t}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function vh(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function Mo(n){return typeof n=="string"&&(n=vh(n)),Yi(n),n}function Ih(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];Yi(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}let Dc=class{clone(){return this._cloneInto()}};function Hc(n){const t=r=>n().update(Mo(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function Fc(n=32){if(yn&&typeof yn.getRandomValues=="function")return yn.getRandomValues(new Uint8Array(n));if(yn&&typeof yn.randomBytes=="function")return Uint8Array.from(yn.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function kh(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),u=r?4:0,y=r?0:4;n.setUint32(t+u,o,r),n.setUint32(t+y,c,r)}function xh(n,t,e){return n&t^~n&e}function Th(n,t,e){return n&t^n&e^t&e}let zc=class extends Dc{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Fs(this.buffer)}update(t){xi(this);const{view:e,buffer:r,blockLen:s}=this;t=Mo(t);const i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const u=Fs(t);for(;s<=i-o;o+=s)this.process(u,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){xi(this),Sh(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let E=o;E<s;E++)e[E]=0;kh(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=Fs(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=u/4,p=this.get();if(y>p.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<y;E++)c.setUint32(4*E,p[E],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.length=s,t.pos=c,t.finished=i,t.destroyed=o,s%e&&t.buffer.set(r),t}};const Oh=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Mr=new Uint32Array(64);let Nh=class extends zc{constructor(t=32){super(64,t,8,!1),this.A=Cr[0]|0,this.B=Cr[1]|0,this.C=Cr[2]|0,this.D=Cr[3]|0,this.E=Cr[4]|0,this.F=Cr[5]|0,this.G=Cr[6]|0,this.H=Cr[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:u}=this;return[t,e,r,s,i,o,c,u]}set(t,e,r,s,i,o,c,u){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=u|0}process(t,e){for(let E=0;E<16;E++,e+=4)Mr[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const x=Mr[E-15],k=Mr[E-2],O=ur(x,7)^ur(x,18)^x>>>3,N=ur(k,17)^ur(k,19)^k>>>10;Mr[E]=N+Mr[E-7]+O+Mr[E-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:u,G:y,H:p}=this;for(let E=0;E<64;E++){const x=ur(c,6)^ur(c,11)^ur(c,25),k=p+x+xh(c,u,y)+Oh[E]+Mr[E]|0,N=(ur(r,2)^ur(r,13)^ur(r,22))+Th(r,s,i)|0;p=y,y=u,u=c,c=o+k|0,o=i,i=s,s=r,r=k+N|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,y=y+this.G|0,p=p+this.H|0,this.set(r,s,i,o,c,u,y,p)}roundClean(){Mr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const Bh=Hc(()=>new Nh),gi=BigInt(2**32-1),fo=BigInt(32);function Kc(n,t=!1){return t?{h:Number(n&gi),l:Number(n>>fo&gi)}:{h:Number(n>>fo&gi)|0,l:Number(n&gi)|0}}function Ch(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let s=0;s<n.length;s++){const{h:i,l:o}=Kc(n[s],t);[e[s],r[s]]=[i,o]}return[e,r]}const Mh=(n,t)=>BigInt(n>>>0)<<fo|BigInt(t>>>0),Lh=(n,t,e)=>n>>>e,Ph=(n,t,e)=>n<<32-e|t>>>e,Uh=(n,t,e)=>n>>>e|t<<32-e,Dh=(n,t,e)=>n<<32-e|t>>>e,Hh=(n,t,e)=>n<<64-e|t>>>e-32,Fh=(n,t,e)=>n>>>e-32|t<<64-e,zh=(n,t)=>t,Kh=(n,t)=>n,$h=(n,t,e)=>n<<e|t>>>32-e,Wh=(n,t,e)=>t<<e|n>>>32-e,Vh=(n,t,e)=>t<<e-32|n>>>64-e,qh=(n,t,e)=>n<<e-32|t>>>64-e;function Gh(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const jh=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Yh=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Zh=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Xh=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Jh=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Qh=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,bt={fromBig:Kc,split:Ch,toBig:Mh,shrSH:Lh,shrSL:Ph,rotrSH:Uh,rotrSL:Dh,rotrBH:Hh,rotrBL:Fh,rotr32H:zh,rotr32L:Kh,rotlSH:$h,rotlSL:Wh,rotlBH:Vh,rotlBL:qh,add:Gh,add3L:jh,add3H:Yh,add4L:Zh,add4H:Xh,add5H:Qh,add5L:Jh},[tf,ef]=bt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Lr=new Uint32Array(80),Pr=new Uint32Array(80);class rf extends zc{constructor(t=64){super(128,t,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:u,Eh:y,El:p,Fh:E,Fl:x,Gh:k,Gl:O,Hh:N,Hl:I}=this;return[t,e,r,s,i,o,c,u,y,p,E,x,k,O,N,I]}set(t,e,r,s,i,o,c,u,y,p,E,x,k,O,N,I){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=u|0,this.Eh=y|0,this.El=p|0,this.Fh=E|0,this.Fl=x|0,this.Gh=k|0,this.Gl=O|0,this.Hh=N|0,this.Hl=I|0}process(t,e){for(let C=0;C<16;C++,e+=4)Lr[C]=t.getUint32(e),Pr[C]=t.getUint32(e+=4);for(let C=16;C<80;C++){const V=Lr[C-15]|0,Q=Pr[C-15]|0,Y=bt.rotrSH(V,Q,1)^bt.rotrSH(V,Q,8)^bt.shrSH(V,Q,7),tt=bt.rotrSL(V,Q,1)^bt.rotrSL(V,Q,8)^bt.shrSL(V,Q,7),Z=Lr[C-2]|0,ot=Pr[C-2]|0,St=bt.rotrSH(Z,ot,19)^bt.rotrBH(Z,ot,61)^bt.shrSH(Z,ot,6),it=bt.rotrSL(Z,ot,19)^bt.rotrBL(Z,ot,61)^bt.shrSL(Z,ot,6),W=bt.add4L(tt,it,Pr[C-7],Pr[C-16]),A=bt.add4H(W,Y,St,Lr[C-7],Lr[C-16]);Lr[C]=A|0,Pr[C]=W|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:u,Dh:y,Dl:p,Eh:E,El:x,Fh:k,Fl:O,Gh:N,Gl:I,Hh:U,Hl:F}=this;for(let C=0;C<80;C++){const V=bt.rotrSH(E,x,14)^bt.rotrSH(E,x,18)^bt.rotrBH(E,x,41),Q=bt.rotrSL(E,x,14)^bt.rotrSL(E,x,18)^bt.rotrBL(E,x,41),Y=E&k^~E&N,tt=x&O^~x&I,Z=bt.add5L(F,Q,tt,ef[C],Pr[C]),ot=bt.add5H(Z,U,V,Y,tf[C],Lr[C]),St=Z|0,it=bt.rotrSH(r,s,28)^bt.rotrBH(r,s,34)^bt.rotrBH(r,s,39),W=bt.rotrSL(r,s,28)^bt.rotrBL(r,s,34)^bt.rotrBL(r,s,39),A=r&i^r&c^i&c,a=s&o^s&u^o&u;U=N|0,F=I|0,N=k|0,I=O|0,k=E|0,O=x|0,{h:E,l:x}=bt.add(y|0,p|0,ot|0,St|0),y=c|0,p=u|0,c=i|0,u=o|0,i=r|0,o=s|0;const l=bt.add3L(St,W,a);r=bt.add3H(l,ot,it,A),s=l|0}({h:r,l:s}=bt.add(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=bt.add(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:u}=bt.add(this.Ch|0,this.Cl|0,c|0,u|0),{h:y,l:p}=bt.add(this.Dh|0,this.Dl|0,y|0,p|0),{h:E,l:x}=bt.add(this.Eh|0,this.El|0,E|0,x|0),{h:k,l:O}=bt.add(this.Fh|0,this.Fl|0,k|0,O|0),{h:N,l:I}=bt.add(this.Gh|0,this.Gl|0,N|0,I|0),{h:U,l:F}=bt.add(this.Hh|0,this.Hl|0,U|0,F|0),this.set(r,s,i,o,c,u,y,p,E,x,k,O,N,I,U,F)}roundClean(){Lr.fill(0),Pr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const nf=Hc(()=>new rf);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Lo=BigInt(0),po=BigInt(1);function An(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Po(n){if(!An(n))throw new Error("Uint8Array expected")}function $r(n,t){if(typeof t!="boolean")throw new Error(n+" boolean expected, got "+t)}function mi(n){const t=n.toString(16);return t.length&1?"0"+t:t}function $c(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?Lo:BigInt("0x"+n)}const Wc=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",sf=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Rn(n){if(Po(n),Wc)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=sf[n[e]];return t}const Sr={_0:48,_9:57,A:65,F:70,a:97,f:102};function La(n){if(n>=Sr._0&&n<=Sr._9)return n-Sr._0;if(n>=Sr.A&&n<=Sr.F)return n-(Sr.A-10);if(n>=Sr.a&&n<=Sr.f)return n-(Sr.a-10)}function Ti(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Wc)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=La(n.charCodeAt(i)),c=La(n.charCodeAt(i+1));if(o===void 0||c===void 0){const u=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}r[s]=o*16+c}return r}function rn(n){return $c(Rn(n))}function Fn(n){return Po(n),$c(Rn(Uint8Array.from(n).reverse()))}function jn(n,t){return Ti(n.toString(16).padStart(t*2,"0"))}function Oi(n,t){return jn(n,t).reverse()}function me(n,t,e){let r;if(typeof t=="string")try{r=Ti(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(An(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Sn(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];Po(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}const zs=n=>typeof n=="bigint"&&Lo<=n;function Uo(n,t,e){return zs(n)&&zs(t)&&zs(e)&&t<=n&&n<e}function sr(n,t,e,r){if(!Uo(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function of(n){let t;for(t=0;n>Lo;n>>=po,t+=1);return t}const Zi=n=>(po<<BigInt(n))-po,Ks=n=>new Uint8Array(n),Pa=n=>Uint8Array.from(n);function af(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Ks(n),s=Ks(n),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},c=(...E)=>e(s,r,...E),u=(E=Ks(0))=>{s=c(Pa([0]),E),r=c(),E.length!==0&&(s=c(Pa([1]),E),r=c())},y=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const x=[];for(;E<t;){r=c();const k=r.slice();x.push(k),E+=r.length}return Sn(...x)};return(E,x)=>{o(),u(E);let k;for(;!(k=x(y()));)u();return o(),k}}const cf={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||An(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function si(n,t,e={}){const r=(s,i,o)=>{const c=cf[i];if(typeof c!="function")throw new Error("invalid validator function");const u=n[s];if(!(o&&u===void 0)&&!c(u,n))throw new Error("param "+String(s)+" is invalid. Expected "+i+", got "+u)};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(e))r(s,i,!0);return n}function Ni(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Se=BigInt(0),jt=BigInt(1),Yr=BigInt(2),uf=BigInt(3),yo=BigInt(4),Ua=BigInt(5),Da=BigInt(8);function Vt(n,t){const e=n%t;return e>=Se?e:t+e}function lf(n,t,e){if(t<Se)throw new Error("invalid exponent, negatives unsupported");if(e<=Se)throw new Error("invalid modulus");if(e===jt)return Se;let r=jt;for(;t>Se;)t&jt&&(r=r*n%e),n=n*n%e,t>>=jt;return r}function Qt(n,t,e){let r=n;for(;t-- >Se;)r*=r,r%=e;return r}function go(n,t){if(n===Se)throw new Error("invert: expected non-zero number");if(t<=Se)throw new Error("invert: expected positive modulus, got "+t);let e=Vt(n,t),r=t,s=Se,i=jt;for(;e!==Se;){const c=r/e,u=r%e,y=s-i*c;r=e,e=u,s=i,i=y}if(r!==jt)throw new Error("invert: does not exist");return Vt(s,t)}function hf(n){const t=(n-jt)/Yr;let e,r,s;for(e=n-jt,r=0;e%Yr===Se;e/=Yr,r++);for(s=Yr;s<n&&lf(s,t,n)!==n-jt;s++)if(s>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){const o=(n+jt)/yo;return function(u,y){const p=u.pow(y,o);if(!u.eql(u.sqr(p),y))throw new Error("Cannot find square root");return p}}const i=(e+jt)/Yr;return function(c,u){if(c.pow(u,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let y=r,p=c.pow(c.mul(c.ONE,s),e),E=c.pow(u,i),x=c.pow(u,e);for(;!c.eql(x,c.ONE);){if(c.eql(x,c.ZERO))return c.ZERO;let k=1;for(let N=c.sqr(x);k<y&&!c.eql(N,c.ONE);k++)N=c.sqr(N);const O=c.pow(p,jt<<BigInt(y-k-1));p=c.sqr(O),E=c.mul(E,O),x=c.mul(x,p),y=k}return E}}function ff(n){if(n%yo===uf){const t=(n+jt)/yo;return function(r,s){const i=r.pow(s,t);if(!r.eql(r.sqr(i),s))throw new Error("Cannot find square root");return i}}if(n%Da===Ua){const t=(n-Ua)/Da;return function(r,s){const i=r.mul(s,Yr),o=r.pow(i,t),c=r.mul(s,o),u=r.mul(r.mul(c,Yr),o),y=r.mul(c,r.sub(u,r.ONE));if(!r.eql(r.sqr(y),s))throw new Error("Cannot find square root");return y}}return hf(n)}const df=(n,t)=>(Vt(n,t)&jt)===jt,pf=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function yf(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=pf.reduce((r,s)=>(r[s]="function",r),t);return si(n,e)}function gf(n,t,e){if(e<Se)throw new Error("invalid exponent, negatives unsupported");if(e===Se)return n.ONE;if(e===jt)return t;let r=n.ONE,s=t;for(;e>Se;)e&jt&&(r=n.mul(r,s)),s=n.sqr(s),e>>=jt;return r}function mf(n,t){const e=new Array(t.length),r=t.reduce((i,o,c)=>n.is0(o)?i:(e[c]=i,n.mul(i,o)),n.ONE),s=n.inv(r);return t.reduceRight((i,o,c)=>n.is0(o)?i:(e[c]=n.mul(i,e[c]),n.mul(i,o)),s),e}function Vc(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Xi(n,t,e=!1,r={}){if(n<=Se)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:s,nByteLength:i}=Vc(n,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const c=Object.freeze({ORDER:n,isLE:e,BITS:s,BYTES:i,MASK:Zi(s),ZERO:Se,ONE:jt,create:u=>Vt(u,n),isValid:u=>{if(typeof u!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof u);return Se<=u&&u<n},is0:u=>u===Se,isOdd:u=>(u&jt)===jt,neg:u=>Vt(-u,n),eql:(u,y)=>u===y,sqr:u=>Vt(u*u,n),add:(u,y)=>Vt(u+y,n),sub:(u,y)=>Vt(u-y,n),mul:(u,y)=>Vt(u*y,n),pow:(u,y)=>gf(c,u,y),div:(u,y)=>Vt(u*go(y,n),n),sqrN:u=>u*u,addN:(u,y)=>u+y,subN:(u,y)=>u-y,mulN:(u,y)=>u*y,inv:u=>go(u,n),sqrt:r.sqrt||(u=>(o||(o=ff(n)),o(c,u))),invertBatch:u=>mf(c,u),cmov:(u,y,p)=>p?y:u,toBytes:u=>e?Oi(u,i):jn(u,i),fromBytes:u=>{if(u.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+u.length);return e?Fn(u):rn(u)}});return Object.freeze(c)}function qc(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Gc(n){const t=qc(n);return t+Math.ceil(t/2)}function wf(n,t,e=!1){const r=n.length,s=qc(t),i=Gc(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?Fn(n):rn(n),c=Vt(o,t-jt)+jt;return e?Oi(c,s):jn(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ha=BigInt(0),mo=BigInt(1);function $s(n,t){const e=t.negate();return n?e:t}function jc(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function Ws(n,t){jc(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=Zi(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Fa(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(n&s),u=n>>o;c>r&&(c-=i,u+=mo);const y=t*r,p=y+Math.abs(c)-1,E=c===0,x=c<0,k=t%2!==0;return{nextN:u,offset:p,isZero:E,isNeg:x,isNegF:k,offsetF:y}}function bf(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Ef(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Vs=new WeakMap,Yc=new WeakMap;function qs(n){return Yc.get(n)||1}function Zc(n,t){return{constTimeNegate:$s,hasPrecomputes(e){return qs(e)!==1},unsafeLadder(e,r,s=n.ZERO){let i=e;for(;r>Ha;)r&mo&&(s=s.add(i)),i=i.double(),r>>=mo;return s},precomputeWindow(e,r){const{windows:s,windowSize:i}=Ws(r,t),o=[];let c=e,u=c;for(let y=0;y<s;y++){u=c,o.push(u);for(let p=1;p<i;p++)u=u.add(c),o.push(u);c=u.double()}return o},wNAF(e,r,s){let i=n.ZERO,o=n.BASE;const c=Ws(e,t);for(let u=0;u<c.windows;u++){const{nextN:y,offset:p,isZero:E,isNeg:x,isNegF:k,offsetF:O}=Fa(s,u,c);s=y,E?o=o.add($s(k,r[O])):i=i.add($s(x,r[p]))}return{p:i,f:o}},wNAFUnsafe(e,r,s,i=n.ZERO){const o=Ws(e,t);for(let c=0;c<o.windows&&s!==Ha;c++){const{nextN:u,offset:y,isZero:p,isNeg:E}=Fa(s,c,o);if(s=u,!p){const x=r[y];i=i.add(E?x.negate():x)}}return i},getPrecomputes(e,r,s){let i=Vs.get(r);return i||(i=this.precomputeWindow(r,e),e!==1&&Vs.set(r,s(i))),i},wNAFCached(e,r,s){const i=qs(e);return this.wNAF(i,this.getPrecomputes(i,e,s),r)},wNAFCachedUnsafe(e,r,s,i){const o=qs(e);return o===1?this.unsafeLadder(e,r,i):this.wNAFUnsafe(o,this.getPrecomputes(o,e,s),r,i)},setWindowSize(e,r){jc(r,t),Yc.set(e,r),Vs.delete(e)}}}function Xc(n,t,e,r){if(bf(e,n),Ef(r,t),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const s=n.ZERO,i=of(BigInt(e.length)),o=i>12?i-3:i>4?i-2:i?2:1,c=Zi(o),u=new Array(Number(c)+1).fill(s),y=Math.floor((t.BITS-1)/o)*o;let p=s;for(let E=y;E>=0;E-=o){u.fill(s);for(let k=0;k<r.length;k++){const O=r[k],N=Number(O>>BigInt(E)&c);u[N]=u[N].add(e[k])}let x=s;for(let k=u.length-1,O=s;k>0;k--)O=O.add(u[k]),x=x.add(O);if(p=p.add(x),E!==0)for(let k=0;k<o;k++)p=p.double()}return p}function Do(n){return yf(n.Fp),si(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Vc(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const lr=BigInt(0),Ue=BigInt(1),za=BigInt(2),_f=BigInt(8),Af={zip215:!0};function Rf(n){const t=Do(n);return si(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function Sf(n){const t=Rf(n),{Fp:e,n:r,prehash:s,hash:i,randomBytes:o,nByteLength:c,h:u}=t,y=za<<BigInt(c*8)-Ue,p=e.create,E=Xi(t.n,t.nBitLength),x=t.uvRatio||((w,b)=>{try{return{isValid:!0,value:e.sqrt(w*e.inv(b))}}catch{return{isValid:!1,value:lr}}}),k=t.adjustScalarBytes||(w=>w),O=t.domain||((w,b,R)=>{if($r("phflag",R),b.length||R)throw new Error("Contexts/pre-hash are not supported");return w});function N(w,b,R=!1){const T=R?Ue:lr;sr("coordinate "+w,b,T,y)}function I(w){if(!(w instanceof C))throw new Error("ExtendedPoint expected")}const U=Ni((w,b)=>{const{ex:R,ey:T,ez:_}=w,d=w.is0();b==null&&(b=d?_f:e.inv(_));const v=p(R*b),$=p(T*b),q=p(_*b);if(d)return{x:lr,y:Ue};if(q!==Ue)throw new Error("invZ was invalid");return{x:v,y:$}}),F=Ni(w=>{const{a:b,d:R}=t;if(w.is0())throw new Error("bad point: ZERO");const{ex:T,ey:_,ez:d,et:v}=w,$=p(T*T),q=p(_*_),X=p(d*d),mt=p(X*X),lt=p($*b),pt=p(X*p(lt+q)),ee=p(mt+p(R*p($*q)));if(pt!==ee)throw new Error("bad point: equation left != right (1)");const ft=p(T*_),gt=p(d*v);if(ft!==gt)throw new Error("bad point: equation left != right (2)");return!0});class C{constructor(b,R,T,_){N("x",b),N("y",R),N("z",T,!0),N("t",_),this.ex=b,this.ey=R,this.ez=T,this.et=_,Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(b){if(b instanceof C)throw new Error("extended point not allowed");const{x:R,y:T}=b||{};return N("x",R),N("y",T),new C(R,T,Ue,p(R*T))}static normalizeZ(b){const R=e.invertBatch(b.map(T=>T.ez));return b.map((T,_)=>T.toAffine(R[_])).map(C.fromAffine)}static msm(b,R){return Xc(C,E,b,R)}_setWindowSize(b){Y.setWindowSize(this,b)}assertValidity(){F(this)}equals(b){I(b);const{ex:R,ey:T,ez:_}=this,{ex:d,ey:v,ez:$}=b,q=p(R*$),X=p(d*_),mt=p(T*$),lt=p(v*_);return q===X&&mt===lt}is0(){return this.equals(C.ZERO)}negate(){return new C(p(-this.ex),this.ey,this.ez,p(-this.et))}double(){const{a:b}=t,{ex:R,ey:T,ez:_}=this,d=p(R*R),v=p(T*T),$=p(za*p(_*_)),q=p(b*d),X=R+T,mt=p(p(X*X)-d-v),lt=q+v,pt=lt-$,ee=q-v,ft=p(mt*pt),gt=p(lt*ee),we=p(mt*ee),It=p(pt*lt);return new C(ft,gt,It,we)}add(b){I(b);const{a:R,d:T}=t,{ex:_,ey:d,ez:v,et:$}=this,{ex:q,ey:X,ez:mt,et:lt}=b,pt=p(_*q),ee=p(d*X),ft=p($*T*lt),gt=p(v*mt),we=p((_+d)*(q+X)-pt-ee),It=gt-ft,Ct=gt+ft,Je=p(ee-R*pt),Pt=p(we*It),$t=p(Ct*Je),dn=p(we*Je),Dt=p(It*Ct);return new C(Pt,$t,Dt,dn)}subtract(b){return this.add(b.negate())}wNAF(b){return Y.wNAFCached(this,b,C.normalizeZ)}multiply(b){const R=b;sr("scalar",R,Ue,r);const{p:T,f:_}=this.wNAF(R);return C.normalizeZ([T,_])[0]}multiplyUnsafe(b,R=C.ZERO){const T=b;return sr("scalar",T,lr,r),T===lr?Q:this.is0()||T===Ue?this:Y.wNAFCachedUnsafe(this,T,C.normalizeZ,R)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return Y.unsafeLadder(this,r).is0()}toAffine(b){return U(this,b)}clearCofactor(){const{h:b}=t;return b===Ue?this:this.multiplyUnsafe(b)}static fromHex(b,R=!1){const{d:T,a:_}=t,d=e.BYTES;b=me("pointHex",b,d),$r("zip215",R);const v=b.slice(),$=b[d-1];v[d-1]=$&-129;const q=Fn(v),X=R?y:e.ORDER;sr("pointHex.y",q,lr,X);const mt=p(q*q),lt=p(mt-Ue),pt=p(T*mt-_);let{isValid:ee,value:ft}=x(lt,pt);if(!ee)throw new Error("Point.fromHex: invalid y coordinate");const gt=(ft&Ue)===Ue,we=($&128)!==0;if(!R&&ft===lr&&we)throw new Error("Point.fromHex: x=0 and x_0=1");return we!==gt&&(ft=p(-ft)),C.fromAffine({x:ft,y:q})}static fromPrivateKey(b){const{scalar:R}=ot(b);return V.multiply(R)}toRawBytes(){const{x:b,y:R}=this.toAffine(),T=Oi(R,e.BYTES);return T[T.length-1]|=b&Ue?128:0,T}toHex(){return Rn(this.toRawBytes())}}C.BASE=new C(t.Gx,t.Gy,Ue,p(t.Gx*t.Gy)),C.ZERO=new C(lr,Ue,Ue,lr);const{BASE:V,ZERO:Q}=C,Y=Zc(C,c*8);function tt(w){return Vt(w,r)}function Z(w){return tt(Fn(w))}function ot(w){const b=e.BYTES;w=me("private key",w,b);const R=me("hashed private key",i(w),2*b),T=k(R.slice(0,b)),_=R.slice(b,2*b),d=Z(T);return{head:T,prefix:_,scalar:d}}function St(w){const{head:b,prefix:R,scalar:T}=ot(w),_=V.multiply(T),d=_.toRawBytes();return{head:b,prefix:R,scalar:T,point:_,pointBytes:d}}function it(w){return St(w).pointBytes}function W(w=new Uint8Array,...b){const R=Sn(...b);return Z(i(O(R,me("context",w),!!s)))}function A(w,b,R={}){w=me("message",w),s&&(w=s(w));const{prefix:T,scalar:_,pointBytes:d}=St(b),v=W(R.context,T,w),$=V.multiply(v).toRawBytes(),q=W(R.context,$,d,w),X=tt(v+q*_);sr("signature.s",X,lr,r);const mt=Sn($,Oi(X,e.BYTES));return me("result",mt,e.BYTES*2)}const a=Af;function l(w,b,R,T=a){const{context:_,zip215:d}=T,v=e.BYTES;w=me("signature",w,2*v),b=me("message",b),R=me("publicKey",R,v),d!==void 0&&$r("zip215",d),s&&(b=s(b));const $=Fn(w.slice(v,2*v));let q,X,mt;try{q=C.fromHex(R,d),X=C.fromHex(w.slice(0,v),d),mt=V.multiplyUnsafe($)}catch{return!1}if(!d&&q.isSmallOrder())return!1;const lt=W(_,X.toRawBytes(),q.toRawBytes(),b);return X.add(q.multiplyUnsafe(lt)).subtract(mt).clearCofactor().equals(C.ZERO)}return V._setWindowSize(8),{CURVE:t,getPublicKey:it,sign:A,verify:l,ExtendedPoint:C,utils:{getExtendedPublicKey:St,randomPrivateKey:()=>o(e.BYTES),precompute(w=8,b=C.BASE){return b._setWindowSize(w),b.multiply(BigInt(3)),b}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ho=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ka=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const vf=BigInt(1),$a=BigInt(2);BigInt(3);const If=BigInt(5),kf=BigInt(8);function xf(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=Ho,c=n*n%i*n%i,u=Qt(c,$a,i)*c%i,y=Qt(u,vf,i)*n%i,p=Qt(y,If,i)*y%i,E=Qt(p,t,i)*p%i,x=Qt(E,e,i)*E%i,k=Qt(x,r,i)*x%i,O=Qt(k,s,i)*k%i,N=Qt(O,s,i)*k%i,I=Qt(N,t,i)*p%i;return{pow_p_5_8:Qt(I,$a,i)*n%i,b2:c}}function Tf(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function Of(n,t){const e=Ho,r=Vt(t*t*t,e),s=Vt(r*r*t,e),i=xf(n*s).pow_p_5_8;let o=Vt(n*r*i,e);const c=Vt(t*o*o,e),u=o,y=Vt(o*Ka,e),p=c===n,E=c===Vt(-n,e),x=c===Vt(-n*Ka,e);return p&&(o=u),(E||x)&&(o=y),df(o,e)&&(o=Vt(-o,e)),{isValid:p||E,value:o}}const Wa=Xi(Ho,void 0,!0),Nf={a:Wa.create(BigInt(-1)),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Wa,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:kf,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:nf,randomBytes:Fc,adjustScalarBytes:Tf,uvRatio:Of},Tn=Sf(Nf);var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Ji(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Qi(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var Fo={exports:{}};const zo=Qi(_h);Fo.exports;(function(n){(function(t,e){function r(A,a){if(!A)throw new Error(a||"Assertion failed")}function s(A,a){A.super_=a;var l=function(){};l.prototype=a.prototype,A.prototype=new l,A.prototype.constructor=A}function i(A,a,l){if(i.isBN(A))return A;this.negative=0,this.words=null,this.length=0,this.red=null,A!==null&&((a==="le"||a==="be")&&(l=a,a=10),this._init(A||0,a||10,l||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=zo.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,l){return a.cmp(l)>0?a:l},i.min=function(a,l){return a.cmp(l)<0?a:l},i.prototype._init=function(a,l,g){if(typeof a=="number")return this._initNumber(a,l,g);if(typeof a=="object")return this._initArray(a,l,g);l==="hex"&&(l=16),r(l===(l|0)&&l>=2&&l<=36),a=a.toString().replace(/\s+/g,"");var w=0;a[0]==="-"&&(w++,this.negative=1),w<a.length&&(l===16?this._parseHex(a,w,g):(this._parseBase(a,l,w),g==="le"&&this._initArray(this.toArray(),l,g)))},i.prototype._initNumber=function(a,l,g){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),g==="le"&&this._initArray(this.toArray(),l,g)},i.prototype._initArray=function(a,l,g){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b,R,T=0;if(g==="be")for(w=a.length-1,b=0;w>=0;w-=3)R=a[w]|a[w-1]<<8|a[w-2]<<16,this.words[b]|=R<<T&67108863,this.words[b+1]=R>>>26-T&67108863,T+=24,T>=26&&(T-=26,b++);else if(g==="le")for(w=0,b=0;w<a.length;w+=3)R=a[w]|a[w+1]<<8|a[w+2]<<16,this.words[b]|=R<<T&67108863,this.words[b+1]=R>>>26-T&67108863,T+=24,T>=26&&(T-=26,b++);return this._strip()};function c(A,a){var l=A.charCodeAt(a);if(l>=48&&l<=57)return l-48;if(l>=65&&l<=70)return l-55;if(l>=97&&l<=102)return l-87;r(!1,"Invalid character in "+A)}function u(A,a,l){var g=c(A,l);return l-1>=a&&(g|=c(A,l-1)<<4),g}i.prototype._parseHex=function(a,l,g){this.length=Math.ceil((a.length-l)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var b=0,R=0,T;if(g==="be")for(w=a.length-1;w>=l;w-=2)T=u(a,l,w)<<b,this.words[R]|=T&67108863,b>=18?(b-=18,R+=1,this.words[R]|=T>>>26):b+=8;else{var _=a.length-l;for(w=_%2===0?l+1:l;w<a.length;w+=2)T=u(a,l,w)<<b,this.words[R]|=T&67108863,b>=18?(b-=18,R+=1,this.words[R]|=T>>>26):b+=8}this._strip()};function y(A,a,l,g){for(var w=0,b=0,R=Math.min(A.length,l),T=a;T<R;T++){var _=A.charCodeAt(T)-48;w*=g,_>=49?b=_-49+10:_>=17?b=_-17+10:b=_,r(_>=0&&b<g,"Invalid character"),w+=b}return w}i.prototype._parseBase=function(a,l,g){this.words=[0],this.length=1;for(var w=0,b=1;b<=67108863;b*=l)w++;w--,b=b/l|0;for(var R=a.length-g,T=R%w,_=Math.min(R,R-T)+g,d=0,v=g;v<_;v+=w)d=y(a,v,v+w,l),this.imuln(b),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d);if(T!==0){var $=1;for(d=y(a,v,a.length,l),v=0;v<T;v++)$*=l;this.imuln($),this.words[0]+d<67108864?this.words[0]+=d:this._iaddn(d)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var l=0;l<this.length;l++)a.words[l]=this.words[l];a.length=this.length,a.negative=this.negative,a.red=this.red};function p(A,a){A.words=a.words,A.length=a.length,A.negative=a.negative,A.red=a.red}if(i.prototype._move=function(a){p(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=E}catch{i.prototype.inspect=E}else i.prototype.inspect=E;function E(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var x=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],k=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,l){a=a||10,l=l|0||1;var g;if(a===16||a==="hex"){g="";for(var w=0,b=0,R=0;R<this.length;R++){var T=this.words[R],_=((T<<w|b)&16777215).toString(16);b=T>>>24-w&16777215,w+=2,w>=26&&(w-=26,R--),b!==0||R!==this.length-1?g=x[6-_.length]+_+g:g=_+g}for(b!==0&&(g=b.toString(16)+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}if(a===(a|0)&&a>=2&&a<=36){var d=k[a],v=O[a];g="";var $=this.clone();for($.negative=0;!$.isZero();){var q=$.modrn(v).toString(a);$=$.idivn(v),$.isZero()?g=q+g:g=x[d-q.length]+q+g}for(this.isZero()&&(g="0"+g);g.length%l!==0;)g="0"+g;return this.negative!==0&&(g="-"+g),g}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,l){return this.toArrayLike(o,a,l)}),i.prototype.toArray=function(a,l){return this.toArrayLike(Array,a,l)};var N=function(a,l){return a.allocUnsafe?a.allocUnsafe(l):new a(l)};i.prototype.toArrayLike=function(a,l,g){this._strip();var w=this.byteLength(),b=g||Math.max(1,w);r(w<=b,"byte array longer than desired length"),r(b>0,"Requested array length <= 0");var R=N(a,b),T=l==="le"?"LE":"BE";return this["_toArrayLike"+T](R,w),R},i.prototype._toArrayLikeLE=function(a,l){for(var g=0,w=0,b=0,R=0;b<this.length;b++){var T=this.words[b]<<R|w;a[g++]=T&255,g<a.length&&(a[g++]=T>>8&255),g<a.length&&(a[g++]=T>>16&255),R===6?(g<a.length&&(a[g++]=T>>24&255),w=0,R=0):(w=T>>>24,R+=2)}if(g<a.length)for(a[g++]=w;g<a.length;)a[g++]=0},i.prototype._toArrayLikeBE=function(a,l){for(var g=a.length-1,w=0,b=0,R=0;b<this.length;b++){var T=this.words[b]<<R|w;a[g--]=T&255,g>=0&&(a[g--]=T>>8&255),g>=0&&(a[g--]=T>>16&255),R===6?(g>=0&&(a[g--]=T>>24&255),w=0,R=0):(w=T>>>24,R+=2)}if(g>=0)for(a[g--]=w;g>=0;)a[g--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var l=a,g=0;return l>=4096&&(g+=13,l>>>=13),l>=64&&(g+=7,l>>>=7),l>=8&&(g+=4,l>>>=4),l>=2&&(g+=2,l>>>=2),g+l},i.prototype._zeroBits=function(a){if(a===0)return 26;var l=a,g=0;return l&8191||(g+=13,l>>>=13),l&127||(g+=7,l>>>=7),l&15||(g+=4,l>>>=4),l&3||(g+=2,l>>>=2),l&1||g++,g},i.prototype.bitLength=function(){var a=this.words[this.length-1],l=this._countBits(a);return(this.length-1)*26+l};function I(A){for(var a=new Array(A.bitLength()),l=0;l<a.length;l++){var g=l/26|0,w=l%26;a[l]=A.words[g]>>>w&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,l=0;l<this.length;l++){var g=this._zeroBits(this.words[l]);if(a+=g,g!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var l=0;l<a.length;l++)this.words[l]=this.words[l]|a.words[l];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var l;this.length>a.length?l=a:l=this;for(var g=0;g<l.length;g++)this.words[g]=this.words[g]&a.words[g];return this.length=l.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var l,g;this.length>a.length?(l=this,g=a):(l=a,g=this);for(var w=0;w<g.length;w++)this.words[w]=l.words[w]^g.words[w];if(this!==l)for(;w<l.length;w++)this.words[w]=l.words[w];return this.length=l.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var l=Math.ceil(a/26)|0,g=a%26;this._expand(l),g>0&&l--;for(var w=0;w<l;w++)this.words[w]=~this.words[w]&67108863;return g>0&&(this.words[w]=~this.words[w]&67108863>>26-g),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,l){r(typeof a=="number"&&a>=0);var g=a/26|0,w=a%26;return this._expand(g+1),l?this.words[g]=this.words[g]|1<<w:this.words[g]=this.words[g]&~(1<<w),this._strip()},i.prototype.iadd=function(a){var l;if(this.negative!==0&&a.negative===0)return this.negative=0,l=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,l=this.isub(a),a.negative=1,l._normSign();var g,w;this.length>a.length?(g=this,w=a):(g=a,w=this);for(var b=0,R=0;R<w.length;R++)l=(g.words[R]|0)+(w.words[R]|0)+b,this.words[R]=l&67108863,b=l>>>26;for(;b!==0&&R<g.length;R++)l=(g.words[R]|0)+b,this.words[R]=l&67108863,b=l>>>26;if(this.length=g.length,b!==0)this.words[this.length]=b,this.length++;else if(g!==this)for(;R<g.length;R++)this.words[R]=g.words[R];return this},i.prototype.add=function(a){var l;return a.negative!==0&&this.negative===0?(a.negative=0,l=this.sub(a),a.negative^=1,l):a.negative===0&&this.negative!==0?(this.negative=0,l=a.sub(this),this.negative=1,l):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var l=this.iadd(a);return a.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var g=this.cmp(a);if(g===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,b;g>0?(w=this,b=a):(w=a,b=this);for(var R=0,T=0;T<b.length;T++)l=(w.words[T]|0)-(b.words[T]|0)+R,R=l>>26,this.words[T]=l&67108863;for(;R!==0&&T<w.length;T++)l=(w.words[T]|0)+R,R=l>>26,this.words[T]=l&67108863;if(R===0&&T<w.length&&w!==this)for(;T<w.length;T++)this.words[T]=w.words[T];return this.length=Math.max(this.length,T),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function U(A,a,l){l.negative=a.negative^A.negative;var g=A.length+a.length|0;l.length=g,g=g-1|0;var w=A.words[0]|0,b=a.words[0]|0,R=w*b,T=R&67108863,_=R/67108864|0;l.words[0]=T;for(var d=1;d<g;d++){for(var v=_>>>26,$=_&67108863,q=Math.min(d,a.length-1),X=Math.max(0,d-A.length+1);X<=q;X++){var mt=d-X|0;w=A.words[mt]|0,b=a.words[X]|0,R=w*b+$,v+=R/67108864|0,$=R&67108863}l.words[d]=$|0,_=v|0}return _!==0?l.words[d]=_|0:l.length--,l._strip()}var F=function(a,l,g){var w=a.words,b=l.words,R=g.words,T=0,_,d,v,$=w[0]|0,q=$&8191,X=$>>>13,mt=w[1]|0,lt=mt&8191,pt=mt>>>13,ee=w[2]|0,ft=ee&8191,gt=ee>>>13,we=w[3]|0,It=we&8191,Ct=we>>>13,Je=w[4]|0,Pt=Je&8191,$t=Je>>>13,dn=w[5]|0,Dt=dn&8191,Zt=dn>>>13,yi=w[6]|0,qt=yi&8191,zt=yi>>>13,qe=w[7]|0,Wt=qe&8191,Xt=qe>>>13,ir=w[8]|0,Jt=ir&8191,m=ir>>>13,h=w[9]|0,f=h&8191,S=h>>>13,B=b[0]|0,M=B&8191,H=B>>>13,wt=b[1]|0,yt=wt&8191,dt=wt>>>13,Kt=b[2]|0,ht=Kt&8191,re=Kt>>>13,ka=b[3]|0,ne=ka&8191,ie=ka>>>13,xa=b[4]|0,se=xa&8191,oe=xa>>>13,Ta=b[5]|0,ae=Ta&8191,ce=Ta>>>13,Oa=b[6]|0,ue=Oa&8191,le=Oa>>>13,Na=b[7]|0,he=Na&8191,fe=Na>>>13,Ba=b[8]|0,de=Ba&8191,pe=Ba>>>13,Ca=b[9]|0,ye=Ca&8191,ge=Ca>>>13;g.negative=a.negative^l.negative,g.length=19,_=Math.imul(q,M),d=Math.imul(q,H),d=d+Math.imul(X,M)|0,v=Math.imul(X,H);var Es=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Es>>>26)|0,Es&=67108863,_=Math.imul(lt,M),d=Math.imul(lt,H),d=d+Math.imul(pt,M)|0,v=Math.imul(pt,H),_=_+Math.imul(q,yt)|0,d=d+Math.imul(q,dt)|0,d=d+Math.imul(X,yt)|0,v=v+Math.imul(X,dt)|0;var _s=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(_s>>>26)|0,_s&=67108863,_=Math.imul(ft,M),d=Math.imul(ft,H),d=d+Math.imul(gt,M)|0,v=Math.imul(gt,H),_=_+Math.imul(lt,yt)|0,d=d+Math.imul(lt,dt)|0,d=d+Math.imul(pt,yt)|0,v=v+Math.imul(pt,dt)|0,_=_+Math.imul(q,ht)|0,d=d+Math.imul(q,re)|0,d=d+Math.imul(X,ht)|0,v=v+Math.imul(X,re)|0;var As=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(As>>>26)|0,As&=67108863,_=Math.imul(It,M),d=Math.imul(It,H),d=d+Math.imul(Ct,M)|0,v=Math.imul(Ct,H),_=_+Math.imul(ft,yt)|0,d=d+Math.imul(ft,dt)|0,d=d+Math.imul(gt,yt)|0,v=v+Math.imul(gt,dt)|0,_=_+Math.imul(lt,ht)|0,d=d+Math.imul(lt,re)|0,d=d+Math.imul(pt,ht)|0,v=v+Math.imul(pt,re)|0,_=_+Math.imul(q,ne)|0,d=d+Math.imul(q,ie)|0,d=d+Math.imul(X,ne)|0,v=v+Math.imul(X,ie)|0;var Rs=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Rs>>>26)|0,Rs&=67108863,_=Math.imul(Pt,M),d=Math.imul(Pt,H),d=d+Math.imul($t,M)|0,v=Math.imul($t,H),_=_+Math.imul(It,yt)|0,d=d+Math.imul(It,dt)|0,d=d+Math.imul(Ct,yt)|0,v=v+Math.imul(Ct,dt)|0,_=_+Math.imul(ft,ht)|0,d=d+Math.imul(ft,re)|0,d=d+Math.imul(gt,ht)|0,v=v+Math.imul(gt,re)|0,_=_+Math.imul(lt,ne)|0,d=d+Math.imul(lt,ie)|0,d=d+Math.imul(pt,ne)|0,v=v+Math.imul(pt,ie)|0,_=_+Math.imul(q,se)|0,d=d+Math.imul(q,oe)|0,d=d+Math.imul(X,se)|0,v=v+Math.imul(X,oe)|0;var Ss=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Ss>>>26)|0,Ss&=67108863,_=Math.imul(Dt,M),d=Math.imul(Dt,H),d=d+Math.imul(Zt,M)|0,v=Math.imul(Zt,H),_=_+Math.imul(Pt,yt)|0,d=d+Math.imul(Pt,dt)|0,d=d+Math.imul($t,yt)|0,v=v+Math.imul($t,dt)|0,_=_+Math.imul(It,ht)|0,d=d+Math.imul(It,re)|0,d=d+Math.imul(Ct,ht)|0,v=v+Math.imul(Ct,re)|0,_=_+Math.imul(ft,ne)|0,d=d+Math.imul(ft,ie)|0,d=d+Math.imul(gt,ne)|0,v=v+Math.imul(gt,ie)|0,_=_+Math.imul(lt,se)|0,d=d+Math.imul(lt,oe)|0,d=d+Math.imul(pt,se)|0,v=v+Math.imul(pt,oe)|0,_=_+Math.imul(q,ae)|0,d=d+Math.imul(q,ce)|0,d=d+Math.imul(X,ae)|0,v=v+Math.imul(X,ce)|0;var vs=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(vs>>>26)|0,vs&=67108863,_=Math.imul(qt,M),d=Math.imul(qt,H),d=d+Math.imul(zt,M)|0,v=Math.imul(zt,H),_=_+Math.imul(Dt,yt)|0,d=d+Math.imul(Dt,dt)|0,d=d+Math.imul(Zt,yt)|0,v=v+Math.imul(Zt,dt)|0,_=_+Math.imul(Pt,ht)|0,d=d+Math.imul(Pt,re)|0,d=d+Math.imul($t,ht)|0,v=v+Math.imul($t,re)|0,_=_+Math.imul(It,ne)|0,d=d+Math.imul(It,ie)|0,d=d+Math.imul(Ct,ne)|0,v=v+Math.imul(Ct,ie)|0,_=_+Math.imul(ft,se)|0,d=d+Math.imul(ft,oe)|0,d=d+Math.imul(gt,se)|0,v=v+Math.imul(gt,oe)|0,_=_+Math.imul(lt,ae)|0,d=d+Math.imul(lt,ce)|0,d=d+Math.imul(pt,ae)|0,v=v+Math.imul(pt,ce)|0,_=_+Math.imul(q,ue)|0,d=d+Math.imul(q,le)|0,d=d+Math.imul(X,ue)|0,v=v+Math.imul(X,le)|0;var Is=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Is>>>26)|0,Is&=67108863,_=Math.imul(Wt,M),d=Math.imul(Wt,H),d=d+Math.imul(Xt,M)|0,v=Math.imul(Xt,H),_=_+Math.imul(qt,yt)|0,d=d+Math.imul(qt,dt)|0,d=d+Math.imul(zt,yt)|0,v=v+Math.imul(zt,dt)|0,_=_+Math.imul(Dt,ht)|0,d=d+Math.imul(Dt,re)|0,d=d+Math.imul(Zt,ht)|0,v=v+Math.imul(Zt,re)|0,_=_+Math.imul(Pt,ne)|0,d=d+Math.imul(Pt,ie)|0,d=d+Math.imul($t,ne)|0,v=v+Math.imul($t,ie)|0,_=_+Math.imul(It,se)|0,d=d+Math.imul(It,oe)|0,d=d+Math.imul(Ct,se)|0,v=v+Math.imul(Ct,oe)|0,_=_+Math.imul(ft,ae)|0,d=d+Math.imul(ft,ce)|0,d=d+Math.imul(gt,ae)|0,v=v+Math.imul(gt,ce)|0,_=_+Math.imul(lt,ue)|0,d=d+Math.imul(lt,le)|0,d=d+Math.imul(pt,ue)|0,v=v+Math.imul(pt,le)|0,_=_+Math.imul(q,he)|0,d=d+Math.imul(q,fe)|0,d=d+Math.imul(X,he)|0,v=v+Math.imul(X,fe)|0;var ks=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(ks>>>26)|0,ks&=67108863,_=Math.imul(Jt,M),d=Math.imul(Jt,H),d=d+Math.imul(m,M)|0,v=Math.imul(m,H),_=_+Math.imul(Wt,yt)|0,d=d+Math.imul(Wt,dt)|0,d=d+Math.imul(Xt,yt)|0,v=v+Math.imul(Xt,dt)|0,_=_+Math.imul(qt,ht)|0,d=d+Math.imul(qt,re)|0,d=d+Math.imul(zt,ht)|0,v=v+Math.imul(zt,re)|0,_=_+Math.imul(Dt,ne)|0,d=d+Math.imul(Dt,ie)|0,d=d+Math.imul(Zt,ne)|0,v=v+Math.imul(Zt,ie)|0,_=_+Math.imul(Pt,se)|0,d=d+Math.imul(Pt,oe)|0,d=d+Math.imul($t,se)|0,v=v+Math.imul($t,oe)|0,_=_+Math.imul(It,ae)|0,d=d+Math.imul(It,ce)|0,d=d+Math.imul(Ct,ae)|0,v=v+Math.imul(Ct,ce)|0,_=_+Math.imul(ft,ue)|0,d=d+Math.imul(ft,le)|0,d=d+Math.imul(gt,ue)|0,v=v+Math.imul(gt,le)|0,_=_+Math.imul(lt,he)|0,d=d+Math.imul(lt,fe)|0,d=d+Math.imul(pt,he)|0,v=v+Math.imul(pt,fe)|0,_=_+Math.imul(q,de)|0,d=d+Math.imul(q,pe)|0,d=d+Math.imul(X,de)|0,v=v+Math.imul(X,pe)|0;var xs=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(xs>>>26)|0,xs&=67108863,_=Math.imul(f,M),d=Math.imul(f,H),d=d+Math.imul(S,M)|0,v=Math.imul(S,H),_=_+Math.imul(Jt,yt)|0,d=d+Math.imul(Jt,dt)|0,d=d+Math.imul(m,yt)|0,v=v+Math.imul(m,dt)|0,_=_+Math.imul(Wt,ht)|0,d=d+Math.imul(Wt,re)|0,d=d+Math.imul(Xt,ht)|0,v=v+Math.imul(Xt,re)|0,_=_+Math.imul(qt,ne)|0,d=d+Math.imul(qt,ie)|0,d=d+Math.imul(zt,ne)|0,v=v+Math.imul(zt,ie)|0,_=_+Math.imul(Dt,se)|0,d=d+Math.imul(Dt,oe)|0,d=d+Math.imul(Zt,se)|0,v=v+Math.imul(Zt,oe)|0,_=_+Math.imul(Pt,ae)|0,d=d+Math.imul(Pt,ce)|0,d=d+Math.imul($t,ae)|0,v=v+Math.imul($t,ce)|0,_=_+Math.imul(It,ue)|0,d=d+Math.imul(It,le)|0,d=d+Math.imul(Ct,ue)|0,v=v+Math.imul(Ct,le)|0,_=_+Math.imul(ft,he)|0,d=d+Math.imul(ft,fe)|0,d=d+Math.imul(gt,he)|0,v=v+Math.imul(gt,fe)|0,_=_+Math.imul(lt,de)|0,d=d+Math.imul(lt,pe)|0,d=d+Math.imul(pt,de)|0,v=v+Math.imul(pt,pe)|0,_=_+Math.imul(q,ye)|0,d=d+Math.imul(q,ge)|0,d=d+Math.imul(X,ye)|0,v=v+Math.imul(X,ge)|0;var Ts=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Ts>>>26)|0,Ts&=67108863,_=Math.imul(f,yt),d=Math.imul(f,dt),d=d+Math.imul(S,yt)|0,v=Math.imul(S,dt),_=_+Math.imul(Jt,ht)|0,d=d+Math.imul(Jt,re)|0,d=d+Math.imul(m,ht)|0,v=v+Math.imul(m,re)|0,_=_+Math.imul(Wt,ne)|0,d=d+Math.imul(Wt,ie)|0,d=d+Math.imul(Xt,ne)|0,v=v+Math.imul(Xt,ie)|0,_=_+Math.imul(qt,se)|0,d=d+Math.imul(qt,oe)|0,d=d+Math.imul(zt,se)|0,v=v+Math.imul(zt,oe)|0,_=_+Math.imul(Dt,ae)|0,d=d+Math.imul(Dt,ce)|0,d=d+Math.imul(Zt,ae)|0,v=v+Math.imul(Zt,ce)|0,_=_+Math.imul(Pt,ue)|0,d=d+Math.imul(Pt,le)|0,d=d+Math.imul($t,ue)|0,v=v+Math.imul($t,le)|0,_=_+Math.imul(It,he)|0,d=d+Math.imul(It,fe)|0,d=d+Math.imul(Ct,he)|0,v=v+Math.imul(Ct,fe)|0,_=_+Math.imul(ft,de)|0,d=d+Math.imul(ft,pe)|0,d=d+Math.imul(gt,de)|0,v=v+Math.imul(gt,pe)|0,_=_+Math.imul(lt,ye)|0,d=d+Math.imul(lt,ge)|0,d=d+Math.imul(pt,ye)|0,v=v+Math.imul(pt,ge)|0;var Os=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Os>>>26)|0,Os&=67108863,_=Math.imul(f,ht),d=Math.imul(f,re),d=d+Math.imul(S,ht)|0,v=Math.imul(S,re),_=_+Math.imul(Jt,ne)|0,d=d+Math.imul(Jt,ie)|0,d=d+Math.imul(m,ne)|0,v=v+Math.imul(m,ie)|0,_=_+Math.imul(Wt,se)|0,d=d+Math.imul(Wt,oe)|0,d=d+Math.imul(Xt,se)|0,v=v+Math.imul(Xt,oe)|0,_=_+Math.imul(qt,ae)|0,d=d+Math.imul(qt,ce)|0,d=d+Math.imul(zt,ae)|0,v=v+Math.imul(zt,ce)|0,_=_+Math.imul(Dt,ue)|0,d=d+Math.imul(Dt,le)|0,d=d+Math.imul(Zt,ue)|0,v=v+Math.imul(Zt,le)|0,_=_+Math.imul(Pt,he)|0,d=d+Math.imul(Pt,fe)|0,d=d+Math.imul($t,he)|0,v=v+Math.imul($t,fe)|0,_=_+Math.imul(It,de)|0,d=d+Math.imul(It,pe)|0,d=d+Math.imul(Ct,de)|0,v=v+Math.imul(Ct,pe)|0,_=_+Math.imul(ft,ye)|0,d=d+Math.imul(ft,ge)|0,d=d+Math.imul(gt,ye)|0,v=v+Math.imul(gt,ge)|0;var Ns=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Ns>>>26)|0,Ns&=67108863,_=Math.imul(f,ne),d=Math.imul(f,ie),d=d+Math.imul(S,ne)|0,v=Math.imul(S,ie),_=_+Math.imul(Jt,se)|0,d=d+Math.imul(Jt,oe)|0,d=d+Math.imul(m,se)|0,v=v+Math.imul(m,oe)|0,_=_+Math.imul(Wt,ae)|0,d=d+Math.imul(Wt,ce)|0,d=d+Math.imul(Xt,ae)|0,v=v+Math.imul(Xt,ce)|0,_=_+Math.imul(qt,ue)|0,d=d+Math.imul(qt,le)|0,d=d+Math.imul(zt,ue)|0,v=v+Math.imul(zt,le)|0,_=_+Math.imul(Dt,he)|0,d=d+Math.imul(Dt,fe)|0,d=d+Math.imul(Zt,he)|0,v=v+Math.imul(Zt,fe)|0,_=_+Math.imul(Pt,de)|0,d=d+Math.imul(Pt,pe)|0,d=d+Math.imul($t,de)|0,v=v+Math.imul($t,pe)|0,_=_+Math.imul(It,ye)|0,d=d+Math.imul(It,ge)|0,d=d+Math.imul(Ct,ye)|0,v=v+Math.imul(Ct,ge)|0;var Bs=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Bs>>>26)|0,Bs&=67108863,_=Math.imul(f,se),d=Math.imul(f,oe),d=d+Math.imul(S,se)|0,v=Math.imul(S,oe),_=_+Math.imul(Jt,ae)|0,d=d+Math.imul(Jt,ce)|0,d=d+Math.imul(m,ae)|0,v=v+Math.imul(m,ce)|0,_=_+Math.imul(Wt,ue)|0,d=d+Math.imul(Wt,le)|0,d=d+Math.imul(Xt,ue)|0,v=v+Math.imul(Xt,le)|0,_=_+Math.imul(qt,he)|0,d=d+Math.imul(qt,fe)|0,d=d+Math.imul(zt,he)|0,v=v+Math.imul(zt,fe)|0,_=_+Math.imul(Dt,de)|0,d=d+Math.imul(Dt,pe)|0,d=d+Math.imul(Zt,de)|0,v=v+Math.imul(Zt,pe)|0,_=_+Math.imul(Pt,ye)|0,d=d+Math.imul(Pt,ge)|0,d=d+Math.imul($t,ye)|0,v=v+Math.imul($t,ge)|0;var Cs=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Cs>>>26)|0,Cs&=67108863,_=Math.imul(f,ae),d=Math.imul(f,ce),d=d+Math.imul(S,ae)|0,v=Math.imul(S,ce),_=_+Math.imul(Jt,ue)|0,d=d+Math.imul(Jt,le)|0,d=d+Math.imul(m,ue)|0,v=v+Math.imul(m,le)|0,_=_+Math.imul(Wt,he)|0,d=d+Math.imul(Wt,fe)|0,d=d+Math.imul(Xt,he)|0,v=v+Math.imul(Xt,fe)|0,_=_+Math.imul(qt,de)|0,d=d+Math.imul(qt,pe)|0,d=d+Math.imul(zt,de)|0,v=v+Math.imul(zt,pe)|0,_=_+Math.imul(Dt,ye)|0,d=d+Math.imul(Dt,ge)|0,d=d+Math.imul(Zt,ye)|0,v=v+Math.imul(Zt,ge)|0;var Ms=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Ms>>>26)|0,Ms&=67108863,_=Math.imul(f,ue),d=Math.imul(f,le),d=d+Math.imul(S,ue)|0,v=Math.imul(S,le),_=_+Math.imul(Jt,he)|0,d=d+Math.imul(Jt,fe)|0,d=d+Math.imul(m,he)|0,v=v+Math.imul(m,fe)|0,_=_+Math.imul(Wt,de)|0,d=d+Math.imul(Wt,pe)|0,d=d+Math.imul(Xt,de)|0,v=v+Math.imul(Xt,pe)|0,_=_+Math.imul(qt,ye)|0,d=d+Math.imul(qt,ge)|0,d=d+Math.imul(zt,ye)|0,v=v+Math.imul(zt,ge)|0;var Ls=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Ls>>>26)|0,Ls&=67108863,_=Math.imul(f,he),d=Math.imul(f,fe),d=d+Math.imul(S,he)|0,v=Math.imul(S,fe),_=_+Math.imul(Jt,de)|0,d=d+Math.imul(Jt,pe)|0,d=d+Math.imul(m,de)|0,v=v+Math.imul(m,pe)|0,_=_+Math.imul(Wt,ye)|0,d=d+Math.imul(Wt,ge)|0,d=d+Math.imul(Xt,ye)|0,v=v+Math.imul(Xt,ge)|0;var Ps=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Ps>>>26)|0,Ps&=67108863,_=Math.imul(f,de),d=Math.imul(f,pe),d=d+Math.imul(S,de)|0,v=Math.imul(S,pe),_=_+Math.imul(Jt,ye)|0,d=d+Math.imul(Jt,ge)|0,d=d+Math.imul(m,ye)|0,v=v+Math.imul(m,ge)|0;var Us=(T+_|0)+((d&8191)<<13)|0;T=(v+(d>>>13)|0)+(Us>>>26)|0,Us&=67108863,_=Math.imul(f,ye),d=Math.imul(f,ge),d=d+Math.imul(S,ye)|0,v=Math.imul(S,ge);var Ds=(T+_|0)+((d&8191)<<13)|0;return T=(v+(d>>>13)|0)+(Ds>>>26)|0,Ds&=67108863,R[0]=Es,R[1]=_s,R[2]=As,R[3]=Rs,R[4]=Ss,R[5]=vs,R[6]=Is,R[7]=ks,R[8]=xs,R[9]=Ts,R[10]=Os,R[11]=Ns,R[12]=Bs,R[13]=Cs,R[14]=Ms,R[15]=Ls,R[16]=Ps,R[17]=Us,R[18]=Ds,T!==0&&(R[19]=T,g.length++),g};Math.imul||(F=U);function C(A,a,l){l.negative=a.negative^A.negative,l.length=A.length+a.length;for(var g=0,w=0,b=0;b<l.length-1;b++){var R=w;w=0;for(var T=g&67108863,_=Math.min(b,a.length-1),d=Math.max(0,b-A.length+1);d<=_;d++){var v=b-d,$=A.words[v]|0,q=a.words[d]|0,X=$*q,mt=X&67108863;R=R+(X/67108864|0)|0,mt=mt+T|0,T=mt&67108863,R=R+(mt>>>26)|0,w+=R>>>26,R&=67108863}l.words[b]=T,g=R,R=w}return g!==0?l.words[b]=g:l.length--,l._strip()}function V(A,a,l){return C(A,a,l)}i.prototype.mulTo=function(a,l){var g,w=this.length+a.length;return this.length===10&&a.length===10?g=F(this,a,l):w<63?g=U(this,a,l):w<1024?g=C(this,a,l):g=V(this,a,l),g},i.prototype.mul=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),this.mulTo(a,l)},i.prototype.mulf=function(a){var l=new i(null);return l.words=new Array(this.length+a.length),V(this,a,l)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var l=a<0;l&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var g=0,w=0;w<this.length;w++){var b=(this.words[w]|0)*a,R=(b&67108863)+(g&67108863);g>>=26,g+=b/67108864|0,g+=R>>>26,this.words[w]=R&67108863}return g!==0&&(this.words[w]=g,this.length++),l?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var l=I(a);if(l.length===0)return new i(1);for(var g=this,w=0;w<l.length&&l[w]===0;w++,g=g.sqr());if(++w<l.length)for(var b=g.sqr();w<l.length;w++,b=b.sqr())l[w]!==0&&(g=g.mul(b));return g},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,w=67108863>>>26-l<<26-l,b;if(l!==0){var R=0;for(b=0;b<this.length;b++){var T=this.words[b]&w,_=(this.words[b]|0)-T<<l;this.words[b]=_|R,R=T>>>26-l}R&&(this.words[b]=R,this.length++)}if(g!==0){for(b=this.length-1;b>=0;b--)this.words[b+g]=this.words[b];for(b=0;b<g;b++)this.words[b]=0;this.length+=g}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,l,g){r(typeof a=="number"&&a>=0);var w;l?w=(l-l%26)/26:w=0;var b=a%26,R=Math.min((a-b)/26,this.length),T=67108863^67108863>>>b<<b,_=g;if(w-=R,w=Math.max(0,w),_){for(var d=0;d<R;d++)_.words[d]=this.words[d];_.length=R}if(R!==0)if(this.length>R)for(this.length-=R,d=0;d<this.length;d++)this.words[d]=this.words[d+R];else this.words[0]=0,this.length=1;var v=0;for(d=this.length-1;d>=0&&(v!==0||d>=w);d--){var $=this.words[d]|0;this.words[d]=v<<26-b|$>>>b,v=$&T}return _&&v!==0&&(_.words[_.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,l,g){return r(this.negative===0),this.iushrn(a,l,g)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26,w=1<<l;if(this.length<=g)return!1;var b=this.words[g];return!!(b&w)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var l=a%26,g=(a-l)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=g)return this;if(l!==0&&g++,this.length=Math.min(g,this.length),l!==0){var w=67108863^67108863>>>l<<l;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,l,g){var w=a.length+g,b;this._expand(w);var R,T=0;for(b=0;b<a.length;b++){R=(this.words[b+g]|0)+T;var _=(a.words[b]|0)*l;R-=_&67108863,T=(R>>26)-(_/67108864|0),this.words[b+g]=R&67108863}for(;b<this.length-g;b++)R=(this.words[b+g]|0)+T,T=R>>26,this.words[b+g]=R&67108863;if(T===0)return this._strip();for(r(T===-1),T=0,b=0;b<this.length;b++)R=-(this.words[b]|0)+T,T=R>>26,this.words[b]=R&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,l){var g=this.length-a.length,w=this.clone(),b=a,R=b.words[b.length-1]|0,T=this._countBits(R);g=26-T,g!==0&&(b=b.ushln(g),w.iushln(g),R=b.words[b.length-1]|0);var _=w.length-b.length,d;if(l!=="mod"){d=new i(null),d.length=_+1,d.words=new Array(d.length);for(var v=0;v<d.length;v++)d.words[v]=0}var $=w.clone()._ishlnsubmul(b,1,_);$.negative===0&&(w=$,d&&(d.words[_]=1));for(var q=_-1;q>=0;q--){var X=(w.words[b.length+q]|0)*67108864+(w.words[b.length+q-1]|0);for(X=Math.min(X/R|0,67108863),w._ishlnsubmul(b,X,q);w.negative!==0;)X--,w.negative=0,w._ishlnsubmul(b,1,q),w.isZero()||(w.negative^=1);d&&(d.words[q]=X)}return d&&d._strip(),w._strip(),l!=="div"&&g!==0&&w.iushrn(g),{div:d||null,mod:w}},i.prototype.divmod=function(a,l,g){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,b,R;return this.negative!==0&&a.negative===0?(R=this.neg().divmod(a,l),l!=="mod"&&(w=R.div.neg()),l!=="div"&&(b=R.mod.neg(),g&&b.negative!==0&&b.iadd(a)),{div:w,mod:b}):this.negative===0&&a.negative!==0?(R=this.divmod(a.neg(),l),l!=="mod"&&(w=R.div.neg()),{div:w,mod:R.mod}):this.negative&a.negative?(R=this.neg().divmod(a.neg(),l),l!=="div"&&(b=R.mod.neg(),g&&b.negative!==0&&b.isub(a)),{div:R.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?l==="div"?{div:this.divn(a.words[0]),mod:null}:l==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,l)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var l=this.divmod(a);if(l.mod.isZero())return l.div;var g=l.div.negative!==0?l.mod.isub(a):l.mod,w=a.ushrn(1),b=a.andln(1),R=g.cmp(w);return R<0||b===1&&R===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},i.prototype.modrn=function(a){var l=a<0;l&&(a=-a),r(a<=67108863);for(var g=(1<<26)%a,w=0,b=this.length-1;b>=0;b--)w=(g*w+(this.words[b]|0))%a;return l?-w:w},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var l=a<0;l&&(a=-a),r(a<=67108863);for(var g=0,w=this.length-1;w>=0;w--){var b=(this.words[w]|0)+g*67108864;this.words[w]=b/a|0,g=b%a}return this._strip(),l?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var w=new i(1),b=new i(0),R=new i(0),T=new i(1),_=0;l.isEven()&&g.isEven();)l.iushrn(1),g.iushrn(1),++_;for(var d=g.clone(),v=l.clone();!l.isZero();){for(var $=0,q=1;!(l.words[0]&q)&&$<26;++$,q<<=1);if($>0)for(l.iushrn($);$-- >0;)(w.isOdd()||b.isOdd())&&(w.iadd(d),b.isub(v)),w.iushrn(1),b.iushrn(1);for(var X=0,mt=1;!(g.words[0]&mt)&&X<26;++X,mt<<=1);if(X>0)for(g.iushrn(X);X-- >0;)(R.isOdd()||T.isOdd())&&(R.iadd(d),T.isub(v)),R.iushrn(1),T.iushrn(1);l.cmp(g)>=0?(l.isub(g),w.isub(R),b.isub(T)):(g.isub(l),R.isub(w),T.isub(b))}return{a:R,b:T,gcd:g.iushln(_)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var l=this,g=a.clone();l.negative!==0?l=l.umod(a):l=l.clone();for(var w=new i(1),b=new i(0),R=g.clone();l.cmpn(1)>0&&g.cmpn(1)>0;){for(var T=0,_=1;!(l.words[0]&_)&&T<26;++T,_<<=1);if(T>0)for(l.iushrn(T);T-- >0;)w.isOdd()&&w.iadd(R),w.iushrn(1);for(var d=0,v=1;!(g.words[0]&v)&&d<26;++d,v<<=1);if(d>0)for(g.iushrn(d);d-- >0;)b.isOdd()&&b.iadd(R),b.iushrn(1);l.cmp(g)>=0?(l.isub(g),w.isub(b)):(g.isub(l),b.isub(w))}var $;return l.cmpn(1)===0?$=w:$=b,$.cmpn(0)<0&&$.iadd(a),$},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var l=this.clone(),g=a.clone();l.negative=0,g.negative=0;for(var w=0;l.isEven()&&g.isEven();w++)l.iushrn(1),g.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;g.isEven();)g.iushrn(1);var b=l.cmp(g);if(b<0){var R=l;l=g,g=R}else if(b===0||g.cmpn(1)===0)break;l.isub(g)}while(!0);return g.iushln(w)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var l=a%26,g=(a-l)/26,w=1<<l;if(this.length<=g)return this._expand(g+1),this.words[g]|=w,this;for(var b=w,R=g;b!==0&&R<this.length;R++){var T=this.words[R]|0;T+=b,b=T>>>26,T&=67108863,this.words[R]=T}return b!==0&&(this.words[R]=b,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var l=a<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this._strip();var g;if(this.length>1)g=1;else{l&&(a=-a),r(a<=67108863,"Number is too big");var w=this.words[0]|0;g=w===a?0:w<a?-1:1}return this.negative!==0?-g|0:g},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var l=this.ucmp(a);return this.negative!==0?-l|0:l},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var l=0,g=this.length-1;g>=0;g--){var w=this.words[g]|0,b=a.words[g]|0;if(w!==b){w<b?l=-1:w>b&&(l=1);break}}return l},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new it(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Q={k256:null,p224:null,p192:null,p25519:null};function Y(A,a){this.name=A,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},Y.prototype.ireduce=function(a){var l=a,g;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),g=l.bitLength();while(g>this.n);var w=g<this.n?-1:l.ucmp(this.p);return w===0?(l.words[0]=0,l.length=1):w>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},Y.prototype.split=function(a,l){a.iushrn(this.n,0,l)},Y.prototype.imulK=function(a){return a.imul(this.k)};function tt(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(tt,Y),tt.prototype.split=function(a,l){for(var g=4194303,w=Math.min(a.length,9),b=0;b<w;b++)l.words[b]=a.words[b];if(l.length=w,a.length<=9){a.words[0]=0,a.length=1;return}var R=a.words[9];for(l.words[l.length++]=R&g,b=10;b<a.length;b++){var T=a.words[b]|0;a.words[b-10]=(T&g)<<4|R>>>22,R=T}R>>>=22,a.words[b-10]=R,R===0&&a.length>10?a.length-=10:a.length-=9},tt.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var l=0,g=0;g<a.length;g++){var w=a.words[g]|0;l+=w*977,a.words[g]=l&67108863,l=w*64+(l/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function Z(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(Z,Y);function ot(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ot,Y);function St(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(St,Y),St.prototype.imulK=function(a){for(var l=0,g=0;g<a.length;g++){var w=(a.words[g]|0)*19+l,b=w&67108863;w>>>=26,a.words[g]=b,l=w}return l!==0&&(a.words[a.length++]=l),a},i._prime=function(a){if(Q[a])return Q[a];var l;if(a==="k256")l=new tt;else if(a==="p224")l=new Z;else if(a==="p192")l=new ot;else if(a==="p25519")l=new St;else throw new Error("Unknown prime "+a);return Q[a]=l,l};function it(A){if(typeof A=="string"){var a=i._prime(A);this.m=a.p,this.prime=a}else r(A.gtn(1),"modulus must be greater than 1"),this.m=A,this.prime=null}it.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},it.prototype._verify2=function(a,l){r((a.negative|l.negative)===0,"red works only with positives"),r(a.red&&a.red===l.red,"red works only with red numbers")},it.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(p(a,a.umod(this.m)._forceRed(this)),a)},it.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},it.prototype.add=function(a,l){this._verify2(a,l);var g=a.add(l);return g.cmp(this.m)>=0&&g.isub(this.m),g._forceRed(this)},it.prototype.iadd=function(a,l){this._verify2(a,l);var g=a.iadd(l);return g.cmp(this.m)>=0&&g.isub(this.m),g},it.prototype.sub=function(a,l){this._verify2(a,l);var g=a.sub(l);return g.cmpn(0)<0&&g.iadd(this.m),g._forceRed(this)},it.prototype.isub=function(a,l){this._verify2(a,l);var g=a.isub(l);return g.cmpn(0)<0&&g.iadd(this.m),g},it.prototype.shl=function(a,l){return this._verify1(a),this.imod(a.ushln(l))},it.prototype.imul=function(a,l){return this._verify2(a,l),this.imod(a.imul(l))},it.prototype.mul=function(a,l){return this._verify2(a,l),this.imod(a.mul(l))},it.prototype.isqr=function(a){return this.imul(a,a.clone())},it.prototype.sqr=function(a){return this.mul(a,a)},it.prototype.sqrt=function(a){if(a.isZero())return a.clone();var l=this.m.andln(3);if(r(l%2===1),l===3){var g=this.m.add(new i(1)).iushrn(2);return this.pow(a,g)}for(var w=this.m.subn(1),b=0;!w.isZero()&&w.andln(1)===0;)b++,w.iushrn(1);r(!w.isZero());var R=new i(1).toRed(this),T=R.redNeg(),_=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new i(2*d*d).toRed(this);this.pow(d,_).cmp(T)!==0;)d.redIAdd(T);for(var v=this.pow(d,w),$=this.pow(a,w.addn(1).iushrn(1)),q=this.pow(a,w),X=b;q.cmp(R)!==0;){for(var mt=q,lt=0;mt.cmp(R)!==0;lt++)mt=mt.redSqr();r(lt<X);var pt=this.pow(v,new i(1).iushln(X-lt-1));$=$.redMul(pt),v=pt.redSqr(),q=q.redMul(v),X=lt}return $},it.prototype.invm=function(a){var l=a._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},it.prototype.pow=function(a,l){if(l.isZero())return new i(1).toRed(this);if(l.cmpn(1)===0)return a.clone();var g=4,w=new Array(1<<g);w[0]=new i(1).toRed(this),w[1]=a;for(var b=2;b<w.length;b++)w[b]=this.mul(w[b-1],a);var R=w[0],T=0,_=0,d=l.bitLength()%26;for(d===0&&(d=26),b=l.length-1;b>=0;b--){for(var v=l.words[b],$=d-1;$>=0;$--){var q=v>>$&1;if(R!==w[0]&&(R=this.sqr(R)),q===0&&T===0){_=0;continue}T<<=1,T|=q,_++,!(_!==g&&(b!==0||$!==0))&&(R=this.mul(R,w[T]),_=0,T=0)}d=26}return R},it.prototype.convertTo=function(a){var l=a.umod(this.m);return l===a?l.clone():l},it.prototype.convertFrom=function(a){var l=a.clone();return l.red=null,l},i.mont=function(a){return new W(a)};function W(A){it.call(this,A),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(W,it),W.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},W.prototype.convertFrom=function(a){var l=this.imod(a.mul(this.rinv));return l.red=null,l},W.prototype.imul=function(a,l){if(a.isZero()||l.isZero())return a.words[0]=0,a.length=1,a;var g=a.imul(l),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(w).iushrn(this.shift),R=b;return b.cmp(this.m)>=0?R=b.isub(this.m):b.cmpn(0)<0&&(R=b.iadd(this.m)),R._forceRed(this)},W.prototype.mul=function(a,l){if(a.isZero()||l.isZero())return new i(0)._forceRed(this);var g=a.mul(l),w=g.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=g.isub(w).iushrn(this.shift),R=b;return b.cmp(this.m)>=0?R=b.isub(this.m):b.cmpn(0)<0&&(R=b.iadd(this.m)),R._forceRed(this)},W.prototype.invm=function(a){var l=this.imod(a._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(n,Ye)})(Fo);var Ko=Fo.exports;const Yn=Ji(Ko);var wo={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=zo,r=e.Buffer;function s(o,c){for(var u in o)c[u]=o[u]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,c,u){return r(o,c,u)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,c,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,u)},i.alloc=function(o,c,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var y=r(o);return c!==void 0?typeof u=="string"?y.fill(c,u):y.fill(c):y.fill(0),y},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(wo,wo.exports);var Bf=wo.exports,wi=Bf.Buffer;function Cf(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,c=n.charAt(0),u=Math.log(o)/Math.log(256),y=Math.log(256)/Math.log(o);function p(k){if((Array.isArray(k)||k instanceof Uint8Array)&&(k=wi.from(k)),!wi.isBuffer(k))throw new TypeError("Expected Buffer");if(k.length===0)return"";for(var O=0,N=0,I=0,U=k.length;I!==U&&k[I]===0;)I++,O++;for(var F=(U-I)*y+1>>>0,C=new Uint8Array(F);I!==U;){for(var V=k[I],Q=0,Y=F-1;(V!==0||Q<N)&&Y!==-1;Y--,Q++)V+=256*C[Y]>>>0,C[Y]=V%o>>>0,V=V/o>>>0;if(V!==0)throw new Error("Non-zero carry");N=Q,I++}for(var tt=F-N;tt!==F&&C[tt]===0;)tt++;for(var Z=c.repeat(O);tt<F;++tt)Z+=n.charAt(C[tt]);return Z}function E(k){if(typeof k!="string")throw new TypeError("Expected String");if(k.length===0)return wi.alloc(0);for(var O=0,N=0,I=0;k[O]===c;)N++,O++;for(var U=(k.length-O)*u+1>>>0,F=new Uint8Array(U);O<k.length;){var C=k.charCodeAt(O);if(C>255)return;var V=t[C];if(V===255)return;for(var Q=0,Y=U-1;(V!==0||Q<I)&&Y!==-1;Y--,Q++)V+=o*F[Y]>>>0,F[Y]=V%256>>>0,V=V/256>>>0;if(V!==0)throw new Error("Non-zero carry");I=Q,O++}for(var tt=U-I;tt!==U&&F[tt]===0;)tt++;var Z=wi.allocUnsafe(N+(U-tt));Z.fill(0,0,N);for(var ot=N;tt!==U;)Z[ot++]=F[tt++];return Z}function x(k){var O=E(k);if(O)return O;throw new Error("Non-base"+o+" character")}return{encode:p,decodeUnsafe:E,decode:x}}var Mf=Cf,Lf=Mf,Pf="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Jc=Lf(Pf);const Te=Ji(Jc);/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Uf(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Va(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Zn(n,...t){if(!Uf(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function Bi(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Qc(n,t){Zn(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function Df(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}function Xn(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function Gs(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function hr(n,t){return n<<32-t|n>>>t}const Hf=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Ff(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function zf(n){for(let t=0;t<n.length;t++)n[t]=Ff(n[t]);return n}const qa=Hf?n=>n:zf;function Kf(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function $o(n){return typeof n=="string"&&(n=Kf(n)),Zn(n),n}class tu{}function eu(n){const t=r=>n().update($o(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function $f(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),u=r?4:0,y=r?0:4;n.setUint32(t+u,o,r),n.setUint32(t+y,c,r)}function Wf(n,t,e){return n&t^~n&e}function Vf(n,t,e){return n&t^n&e^t&e}class qf extends tu{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Gs(this.buffer)}update(t){Bi(this),t=$o(t),Zn(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const u=Gs(t);for(;s<=i-o;o+=s)this.process(u,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Bi(this),Qc(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Xn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let E=o;E<s;E++)e[E]=0;$f(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=Gs(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const y=u/4,p=this.get();if(y>p.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<y;E++)c.setUint32(4*E,p[E],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Ur=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bi=BigInt(2**32-1),Ga=BigInt(32);function Gf(n,t=!1){return t?{h:Number(n&bi),l:Number(n>>Ga&bi)}:{h:Number(n>>Ga&bi)|0,l:Number(n&bi)|0}}function jf(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=Gf(n[i],t);[r[i],s[i]]=[o,c]}return[r,s]}const Yf=(n,t,e)=>n<<e|t>>>32-e,Zf=(n,t,e)=>t<<e|n>>>32-e,Xf=(n,t,e)=>t<<e-32|n>>>64-e,Jf=(n,t,e)=>n<<e-32|t>>>64-e,Qf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Dr=new Uint32Array(64);class td extends qf{constructor(t=32){super(64,t,8,!1),this.A=Ur[0]|0,this.B=Ur[1]|0,this.C=Ur[2]|0,this.D=Ur[3]|0,this.E=Ur[4]|0,this.F=Ur[5]|0,this.G=Ur[6]|0,this.H=Ur[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:u}=this;return[t,e,r,s,i,o,c,u]}set(t,e,r,s,i,o,c,u){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=u|0}process(t,e){for(let E=0;E<16;E++,e+=4)Dr[E]=t.getUint32(e,!1);for(let E=16;E<64;E++){const x=Dr[E-15],k=Dr[E-2],O=hr(x,7)^hr(x,18)^x>>>3,N=hr(k,17)^hr(k,19)^k>>>10;Dr[E]=N+Dr[E-7]+O+Dr[E-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:u,G:y,H:p}=this;for(let E=0;E<64;E++){const x=hr(c,6)^hr(c,11)^hr(c,25),k=p+x+Wf(c,u,y)+Qf[E]+Dr[E]|0,N=(hr(r,2)^hr(r,13)^hr(r,22))+Vf(r,s,i)|0;p=y,y=u,u=c,c=o+k|0,o=i,i=s,s=r,r=k+N|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,u=u+this.F|0,y=y+this.G|0,p=p+this.H|0,this.set(r,s,i,o,c,u,y,p)}roundClean(){Xn(Dr)}destroy(){this.set(0,0,0,0,0,0,0,0),Xn(this.buffer)}}const ed=eu(()=>new td),ja=ed;var xe={};function kr(n,t,e){return t<=n&&n<=e}function ts(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function rd(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,u=o&1023;s.push(65536+(c<<10)+u),r+=1}else s.push(65533)}r+=1}return s}function nd(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Ci=-1;function Wo(n){this.tokens=[].slice.call(n)}Wo.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Ci},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var vn=-1;function js(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Mi="utf-8";function Li(n,t){if(!(this instanceof Li))return new Li(n,t);if(n=n!==void 0?String(n).toLowerCase():Mi,n!==Mi)throw new Error("Encoding not supported. Only utf-8 is supported");t=ts(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Li.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=ts(e),this._streaming||(this._decoder=new id({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Wo(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==vn);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===vn)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),nd(i)}};function Pi(n,t){if(!(this instanceof Pi))return new Pi(n,t);if(n=n!==void 0?String(n).toLowerCase():Mi,n!==Mi)throw new Error("Encoding not supported. Only utf-8 is supported");t=ts(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Pi.prototype={encode:function(t,e){t=t?String(t):"",e=ts(e),this._streaming||(this._encoder=new sd(this._options)),this._streaming=!!e.stream;for(var r=[],s=new Wo(rd(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==vn);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==vn;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function id(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(c,u){if(u===Ci&&s!==0)return s=0,js(t);if(u===Ci)return vn;if(s===0){if(kr(u,0,127))return u;if(kr(u,194,223))s=1,e=u-192;else if(kr(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,e=u-224;else if(kr(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,e=u-240;else return js(t);return e=e<<6*s,null}if(!kr(u,i,o))return e=s=r=0,i=128,o=191,c.prepend(u),js(t);if(i=128,o=191,r+=1,e+=u-128<<6*(s-r),r!==s)return null;var y=e;return e=s=r=0,y}}function sd(n){n.fatal,this.handler=function(t,e){if(e===Ci)return vn;if(kr(e,0,127))return e;var r,s;kr(e,128,2047)?(r=1,s=192):kr(e,2048,65535)?(r=2,s=224):kr(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const od=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Li,TextEncoder:Pi},Symbol.toStringTag,{value:"Module"})),ad=Qi(od);var cd=Ye&&Ye.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),ud=Ye&&Ye.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Er=Ye&&Ye.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},ld=Ye&&Ye.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&cd(t,n,e);return ud(t,n),t},ru=Ye&&Ye.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(xe,"__esModule",{value:!0});var nu=xe.deserializeUnchecked=uu=xe.deserialize=cu=xe.serialize=xe.BinaryReader=xe.BinaryWriter=xe.BorshError=xe.baseDecode=xe.baseEncode=void 0;const Hr=ru(Ko),iu=ru(Jc),hd=ld(ad),fd=typeof TextDecoder!="function"?hd.TextDecoder:TextDecoder,dd=new fd("utf-8",{fatal:!0});function pd(n){return typeof n=="string"&&(n=_t.from(n,"utf8")),iu.default.encode(_t.from(n))}xe.baseEncode=pd;function yd(n){return _t.from(iu.default.decode(n))}xe.baseDecode=yd;const Ys=1024;class De extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xe.BorshError=De;class su{constructor(){this.buf=_t.alloc(Ys),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=_t.concat([this.buf,_t.alloc(Ys)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(_t.from(new Hr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(_t.from(new Hr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(_t.from(new Hr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(_t.from(new Hr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=_t.concat([_t.from(this.buf.subarray(0,this.length)),t,_t.alloc(Ys)]),this.length+=t.length}writeString(t){this.maybeResize();const e=_t.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(_t.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}xe.BinaryWriter=su;function _r(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new De("Reached the end of buffer when deserializing")}throw i}}}class Ze{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Hr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Hr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Hr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Hr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new De(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return dd.decode(e)}catch(r){throw new De(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}Er([_r],Ze.prototype,"readU8",null);Er([_r],Ze.prototype,"readU16",null);Er([_r],Ze.prototype,"readU32",null);Er([_r],Ze.prototype,"readU64",null);Er([_r],Ze.prototype,"readU128",null);Er([_r],Ze.prototype,"readU256",null);Er([_r],Ze.prototype,"readU512",null);Er([_r],Ze.prototype,"readString",null);Er([_r],Ze.prototype,"readFixedArray",null);Er([_r],Ze.prototype,"readArray",null);xe.BinaryReader=Ze;function ou(n){return n.charAt(0).toUpperCase()+n.slice(1)}function Zr(n,t,e,r,s){try{if(typeof r=="string")s[`write${ou(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new De(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new De(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)Zr(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{Zr(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),Zr(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{Zr(n,t,o,r.key,s),Zr(n,t,i,r.value,s)});break}default:throw new De(`FieldType ${r} unrecognized`)}else au(n,e,s)}catch(i){throw i instanceof De&&i.addToFieldPath(t),i}}function au(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new De(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{Zr(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[o,c]=r.values[i];if(o===s){e.writeU8(i),Zr(n,o,t[o],c,e);break}}}else throw new De(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function gd(n,t,e=su){const r=new e;return au(n,t,r),r.toArray()}var cu=xe.serialize=gd;function Xr(n,t,e,r){try{if(typeof e=="string")return r[`read${ou(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(Xr(n,null,e[0],r));return s}else return r.readArray(()=>Xr(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?Xr(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const c=Xr(n,t,e.key,r),u=Xr(n,t,e.value,r);s.set(c,u)}return s}return Vo(n,e,r)}catch(s){throw s instanceof De&&s.addToFieldPath(t),s}}function Vo(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new De(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of n.get(t).fields)s[i]=Xr(n,i,o,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new De(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],c=Xr(n,i,o,e);return new t({[i]:c})}throw new De(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function md(n,t,e,r=Ze){const s=new r(e),i=Vo(n,t,s);if(s.offset<e.length)throw new De(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var uu=xe.deserialize=md;function wd(n,t,e,r=Ze){const s=new r(e);return Vo(n,t,s)}nu=xe.deserializeUnchecked=wd;var D={};Object.defineProperty(D,"__esModule",{value:!0});D.s16=D.s8=D.nu64be=D.u48be=D.u40be=D.u32be=D.u24be=D.u16be=Ie=D.nu64=D.u48=D.u40=nt=D.u32=D.u24=tr=D.u16=Rt=D.u8=Wr=D.offset=D.greedy=D.Constant=D.UTF8=D.CString=D.Blob=D.Boolean=D.BitField=D.BitStructure=D.VariantLayout=D.Union=D.UnionLayoutDiscriminator=D.UnionDiscriminator=D.Structure=D.Sequence=D.DoubleBE=D.Double=D.FloatBE=D.Float=D.NearInt64BE=D.NearInt64=D.NearUInt64BE=D.NearUInt64=D.IntBE=D.Int=D.UIntBE=D.UInt=D.OffsetLayout=D.GreedyCount=D.ExternalLayout=D.bindConstructorLayout=D.nameWithProperty=D.Layout=D.uint8ArrayToBuffer=D.checkUint8Array=void 0;D.constant=D.utf8=D.cstr=Ut=D.blob=D.unionLayoutDiscriminator=D.union=Oe=D.seq=D.bits=st=D.struct=D.f64be=D.f64=D.f32be=D.f32=D.ns64be=D.s48be=D.s40be=D.s32be=D.s24be=D.s16be=Ge=D.ns64=D.s48=D.s40=D.s32=D.s24=void 0;const qo=zo;function On(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}D.checkUint8Array=On;function Ot(n){return On(n),qo.Buffer.from(n.buffer,n.byteOffset,n.length)}D.uint8ArrayToBuffer=Ot;let Mt=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};D.Layout=Mt;function Go(n,t){return t.property?n+"["+t.property+"]":n}D.nameWithProperty=Go;function bd(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Mt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}D.bindConstructorLayout=bd;let $e=class extends Mt{isCount(){throw new Error("ExternalLayout is abstract")}};D.ExternalLayout=$e;let lu=class extends $e{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){On(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}};D.GreedyCount=lu;let jo=class extends $e{constructor(t,e=0,r){if(!(t instanceof Mt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof er||this.layout instanceof or}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}};D.OffsetLayout=jo;let er=class extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ot(t).readUIntLE(e,this.span)}encode(t,e,r=0){return Ot(e).writeUIntLE(t,r,this.span),this.span}};D.UInt=er;let or=class extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ot(t).readUIntBE(e,this.span)}encode(t,e,r=0){return Ot(e).writeUIntBE(t,r,this.span),this.span}};D.UIntBE=or;let an=class extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ot(t).readIntLE(e,this.span)}encode(t,e,r=0){return Ot(e).writeIntLE(t,r,this.span),this.span}};D.Int=an;let Nn=class extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return Ot(t).readIntBE(e,this.span)}encode(t,e,r=0){return Ot(e).writeIntBE(t,r,this.span),this.span}};D.IntBE=Nn;const bo=Math.pow(2,32);function es(n){const t=Math.floor(n/bo),e=n-t*bo;return{hi32:t,lo32:e}}function rs(n,t){return n*bo+t}let hu=class extends Mt{constructor(t){super(8,t)}decode(t,e=0){const r=Ot(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return rs(i,s)}encode(t,e,r=0){const s=es(t),i=Ot(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}};D.NearUInt64=hu;let fu=class extends Mt{constructor(t){super(8,t)}decode(t,e=0){const r=Ot(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return rs(s,i)}encode(t,e,r=0){const s=es(t),i=Ot(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}};D.NearUInt64BE=fu;let du=class extends Mt{constructor(t){super(8,t)}decode(t,e=0){const r=Ot(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return rs(i,s)}encode(t,e,r=0){const s=es(t),i=Ot(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}};D.NearInt64=du;let pu=class extends Mt{constructor(t){super(8,t)}decode(t,e=0){const r=Ot(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return rs(s,i)}encode(t,e,r=0){const s=es(t),i=Ot(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}};D.NearInt64BE=pu;let yu=class extends Mt{constructor(t){super(4,t)}decode(t,e=0){return Ot(t).readFloatLE(e)}encode(t,e,r=0){return Ot(e).writeFloatLE(t,r),4}};D.Float=yu;let gu=class extends Mt{constructor(t){super(4,t)}decode(t,e=0){return Ot(t).readFloatBE(e)}encode(t,e,r=0){return Ot(e).writeFloatBE(t,r),4}};D.FloatBE=gu;let mu=class extends Mt{constructor(t){super(8,t)}decode(t,e=0){return Ot(t).readDoubleLE(e)}encode(t,e,r=0){return Ot(e).writeDoubleLE(t,r),8}};D.Double=mu;let wu=class extends Mt{constructor(t){super(8,t)}decode(t,e=0){return Ot(t).readDoubleBE(e)}encode(t,e,r=0){return Ot(e).writeDoubleBE(t,r),8}};D.DoubleBE=wu;let bu=class extends Mt{constructor(t,e,r){if(!(t instanceof Mt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof $e&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof $e)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof $e&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof $e&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,r+o),0);return this.count instanceof $e&&this.count.encode(t.length,e,r),i}};D.Sequence=bu;let Eu=class extends Mt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Mt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){On(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,o=0;for(const c of this.fields){let u=c.span;if(o=0<u?u:0,c.property!==void 0){const y=t[c.property];y!==void 0&&(o=c.encode(y,e,r),0>u&&(u=c.getSpan(e,r)))}i=r,r+=u}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}};D.Structure=Eu;let Yo=class{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}};D.UnionDiscriminator=Yo;let Ui=class extends Yo{constructor(t,e){if(!(t instanceof $e&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}};D.UnionLayoutDiscriminator=Ui;let Zo=class extends Mt{constructor(t,e,r){let s;if(t instanceof er||t instanceof or)s=new Ui(new jo(t));else if(t instanceof $e&&t.isCount())s=new Ui(t);else if(t instanceof Yo)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Mt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof er||t instanceof or)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof er||t instanceof or,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[c.property]=c.decode(t,e+u)}else r=o.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+o.encode(t[o.property],e,r+c)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new _u(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}};D.Union=Zo;let _u=class extends Mt{constructor(t,e,r,s){if(!(t instanceof Zo))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Mt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};D.VariantLayout=_u;function gn(n){return 0>n&&(n+=4294967296),n}let Xo=class extends Mt{constructor(t,e,r){if(!(t instanceof er||t instanceof or))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=gn(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new Jo(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Au(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}};D.BitStructure=Xo;let Jo=class{constructor(t,e,r){if(!(t instanceof Xo))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=gn(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return gn(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==gn(t&this.valueMask))throw new TypeError(Go("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=gn(t<<this.start);this.container._packedSetValue(gn(e&~this.wordMask)|r)}};D.BitField=Jo;let Au=class extends Jo{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};D.Boolean=Au;let Ru=class extends Mt{constructor(t,e){if(!(t instanceof $e&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof $e||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),Ot(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof $e&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Go("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=Ot(t);return Ot(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof $e&&this.length.encode(s,e,r),s}};D.Blob=Ru;let Su=class extends Mt{constructor(t){super(-1,t)}getSpan(t,e=0){On(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return Ot(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=qo.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=Ot(e);return s.copy(o,r),o[r+i]=0,i+1}};D.CString=Su;let vu=class extends Mt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return On(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return Ot(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=qo.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(Ot(e),r),i}};D.UTF8=vu;let Iu=class extends Mt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}};D.Constant=Iu;D.greedy=(n,t)=>new lu(n,t);var Wr=D.offset=(n,t,e)=>new jo(n,t,e),Rt=D.u8=n=>new er(1,n),tr=D.u16=n=>new er(2,n);D.u24=n=>new er(3,n);var nt=D.u32=n=>new er(4,n);D.u40=n=>new er(5,n);D.u48=n=>new er(6,n);var Ie=D.nu64=n=>new hu(n);D.u16be=n=>new or(2,n);D.u24be=n=>new or(3,n);D.u32be=n=>new or(4,n);D.u40be=n=>new or(5,n);D.u48be=n=>new or(6,n);D.nu64be=n=>new fu(n);D.s8=n=>new an(1,n);D.s16=n=>new an(2,n);D.s24=n=>new an(3,n);D.s32=n=>new an(4,n);D.s40=n=>new an(5,n);D.s48=n=>new an(6,n);var Ge=D.ns64=n=>new du(n);D.s16be=n=>new Nn(2,n);D.s24be=n=>new Nn(3,n);D.s32be=n=>new Nn(4,n);D.s40be=n=>new Nn(5,n);D.s48be=n=>new Nn(6,n);D.ns64be=n=>new pu(n);D.f32=n=>new yu(n);D.f32be=n=>new gu(n);D.f64=n=>new mu(n);D.f64be=n=>new wu(n);var st=D.struct=(n,t,e)=>new Eu(n,t,e);D.bits=(n,t,e)=>new Xo(n,t,e);var Oe=D.seq=(n,t,e)=>new bu(n,t,e);D.union=(n,t,e)=>new Zo(n,t,e);D.unionLayoutDiscriminator=(n,t)=>new Ui(n,t);var Ut=D.blob=(n,t)=>new Ru(n,t);D.cstr=n=>new Su(n);D.utf8=(n,t)=>new vu(n,t);D.constant=(n,t)=>new Iu(n,t);var oi={};Object.defineProperty(oi,"__esModule",{value:!0});function Ed(n){{const t=_t.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var ku=oi.toBigIntLE=Ed;function _d(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}oi.toBigIntBE=_d;function Ad(n,t){{const e=n.toString(16),r=_t.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Qo=oi.toBufferLE=Ad;function Rd(n,t){{const e=n.toString(16);return _t.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}oi.toBufferBE=Rd;let Sd=class extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:c}=t,u=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}};function vd(n){return ai(n)&&typeof n[Symbol.iterator]=="function"}function ai(n){return typeof n=="object"&&n!=null}function Di(n){return ai(n)&&!Array.isArray(n)}function ar(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Id(n){const{done:t,value:e}=n.next();return t?void 0:e}function kd(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:u=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${ar(r)}\``}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:u}}function*Ya(n,t,e,r){vd(n)||(n=[n]);for(const s of n){const i=kd(s,t,e,r);i&&(yield i)}}function*ta(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s,mask:o};i&&(n=t.coercer(n,c));let u="valid";for(const y of t.validator(n,c))y.explanation=e.message,u="not_valid",yield[y,void 0];for(let[y,p,E]of t.entries(n,c)){const x=ta(p,E,{path:y===void 0?r:[...r,y],branch:y===void 0?s:[...s,p],coerce:i,mask:o,message:e.message});for(const k of x)k[0]?(u=k[0].refinement!=null?"not_refined":"not_valid",yield[k[0],void 0]):i&&(p=k[1],y===void 0?n=p:n instanceof Map?n.set(y,p):n instanceof Set?n.add(p):ai(n)&&(p!==void 0||y in n)&&(n[y]=p))}if(u!=="not_valid")for(const y of t.refiner(n,c))y.explanation=e.message,u="not_refined",yield[y,void 0];u==="valid"&&(yield[void 0,n])}let Ar=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=u=>u,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(u,y)=>{const p=s(u,y);return Ya(p,y,this,u)}:this.validator=()=>[],i?this.refiner=(u,y)=>{const p=i(u,y);return Ya(p,y,this,u)}:this.refiner=()=>[]}assert(t,e){return xu(t,this,e)}create(t,e){return j(t,this,e)}is(t){return Tu(t,this)}mask(t,e){return xd(t,this,e)}validate(t,e={}){return ci(t,this,e)}};function xu(n,t,e){const r=ci(n,t,{message:e});if(r[0])throw r[0]}function j(n,t,e){const r=ci(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function xd(n,t,e){const r=ci(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Tu(n,t){return!ci(n,t)[0]}function ci(n,t,e={}){const r=ta(n,t,e),s=Id(r);return s[0]?[new Sd(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function cn(n,t){return new Ar({type:n,schema:null,validator:t})}function Td(){return cn("any",()=>!0)}function J(n){return new Ar({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${ar(t)}`}})}function wr(){return cn("boolean",n=>typeof n=="boolean")}function ea(n){return cn("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${ar(t)}`)}function Gt(n){const t=ar(n),e=typeof n;return new Ar({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${ar(r)}`}})}function Od(){return cn("never",()=>!1)}function et(n){return new Ar({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function L(){return cn("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${ar(n)}`)}function ut(n){return new Ar({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Ou(n,t){return new Ar({type:"record",schema:null,*entries(e){if(ai(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Di(e)||`Expected an object, but received: ${ar(e)}`},coercer(e){return Di(e)?{...e}:e}})}function G(){return cn("string",n=>typeof n=="string"||`Expected a string, but received: ${ar(n)}`)}function ra(n){const t=Od();return new Ar({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${ar(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function z(n){const t=Object.keys(n);return new Ar({type:"type",schema:n,*entries(e){if(ai(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Di(e)||`Expected an object, but received: ${ar(e)}`},coercer(e){return Di(e)?{...e}:e}})}function He(n){const t=n.map(e=>e.type).join(" | ");return new Ar({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=ta(e,i,r),[c]=o;if(c[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${ar(e)}`,...s]}})}function Bn(){return cn("unknown",()=>!0)}function ui(n,t,e){return new Ar({...n,coercer:(r,s)=>Tu(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Ei,Nd=new Uint8Array(16);function Nu(){if(!Ei&&(Ei=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Ei))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Ei(Nd)}const Bd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ns(n){return typeof n=="string"&&Bd.test(n)}var ve=[];for(var Zs=0;Zs<256;++Zs)ve.push((Zs+256).toString(16).substr(1));function is(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ve[n[t+0]]+ve[n[t+1]]+ve[n[t+2]]+ve[n[t+3]]+"-"+ve[n[t+4]]+ve[n[t+5]]+"-"+ve[n[t+6]]+ve[n[t+7]]+"-"+ve[n[t+8]]+ve[n[t+9]]+"-"+ve[n[t+10]]+ve[n[t+11]]+ve[n[t+12]]+ve[n[t+13]]+ve[n[t+14]]+ve[n[t+15]]).toLowerCase();if(!ns(e))throw TypeError("Stringified UUID is invalid");return e}var Za,Xs,Js=0,Qs=0;function Cd(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||Za,o=n.clockseq!==void 0?n.clockseq:Xs;if(i==null||o==null){var c=n.random||(n.rng||Nu)();i==null&&(i=Za=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Xs=(c[6]<<8|c[7])&16383)}var u=n.msecs!==void 0?n.msecs:Date.now(),y=n.nsecs!==void 0?n.nsecs:Qs+1,p=u-Js+(y-Qs)/1e4;if(p<0&&n.clockseq===void 0&&(o=o+1&16383),(p<0||u>Js)&&n.nsecs===void 0&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Js=u,Qs=y,Xs=o,u+=122192928e5;var E=((u&268435455)*1e4+y)%4294967296;s[r++]=E>>>24&255,s[r++]=E>>>16&255,s[r++]=E>>>8&255,s[r++]=E&255;var x=u/4294967296*1e4&268435455;s[r++]=x>>>8&255,s[r++]=x&255,s[r++]=x>>>24&15|16,s[r++]=x>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var k=0;k<6;++k)s[r+k]=i[k];return t||is(s)}function Bu(n){if(!ns(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Md(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Ld="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Pd="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Cu(n,t,e){function r(s,i,o,c){if(typeof s=="string"&&(s=Md(s)),typeof i=="string"&&(i=Bu(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){c=c||0;for(var y=0;y<16;++y)o[c+y]=u[y];return o}return is(u)}try{r.name=n}catch{}return r.DNS=Ld,r.URL=Pd,r}function Ud(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Dd(Hd(Fd(n),n.length*8))}function Dd(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Mu(n){return(n+64>>>9<<4)+14+1}function Hd(n,t){n[t>>5]|=128<<t%32,n[Mu(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=e,u=r,y=s,p=i;e=Ne(e,r,s,i,n[o],7,-680876936),i=Ne(i,e,r,s,n[o+1],12,-389564586),s=Ne(s,i,e,r,n[o+2],17,606105819),r=Ne(r,s,i,e,n[o+3],22,-1044525330),e=Ne(e,r,s,i,n[o+4],7,-176418897),i=Ne(i,e,r,s,n[o+5],12,1200080426),s=Ne(s,i,e,r,n[o+6],17,-1473231341),r=Ne(r,s,i,e,n[o+7],22,-45705983),e=Ne(e,r,s,i,n[o+8],7,1770035416),i=Ne(i,e,r,s,n[o+9],12,-1958414417),s=Ne(s,i,e,r,n[o+10],17,-42063),r=Ne(r,s,i,e,n[o+11],22,-1990404162),e=Ne(e,r,s,i,n[o+12],7,1804603682),i=Ne(i,e,r,s,n[o+13],12,-40341101),s=Ne(s,i,e,r,n[o+14],17,-1502002290),r=Ne(r,s,i,e,n[o+15],22,1236535329),e=Be(e,r,s,i,n[o+1],5,-165796510),i=Be(i,e,r,s,n[o+6],9,-1069501632),s=Be(s,i,e,r,n[o+11],14,643717713),r=Be(r,s,i,e,n[o],20,-373897302),e=Be(e,r,s,i,n[o+5],5,-701558691),i=Be(i,e,r,s,n[o+10],9,38016083),s=Be(s,i,e,r,n[o+15],14,-660478335),r=Be(r,s,i,e,n[o+4],20,-405537848),e=Be(e,r,s,i,n[o+9],5,568446438),i=Be(i,e,r,s,n[o+14],9,-1019803690),s=Be(s,i,e,r,n[o+3],14,-187363961),r=Be(r,s,i,e,n[o+8],20,1163531501),e=Be(e,r,s,i,n[o+13],5,-1444681467),i=Be(i,e,r,s,n[o+2],9,-51403784),s=Be(s,i,e,r,n[o+7],14,1735328473),r=Be(r,s,i,e,n[o+12],20,-1926607734),e=Ce(e,r,s,i,n[o+5],4,-378558),i=Ce(i,e,r,s,n[o+8],11,-2022574463),s=Ce(s,i,e,r,n[o+11],16,1839030562),r=Ce(r,s,i,e,n[o+14],23,-35309556),e=Ce(e,r,s,i,n[o+1],4,-1530992060),i=Ce(i,e,r,s,n[o+4],11,1272893353),s=Ce(s,i,e,r,n[o+7],16,-155497632),r=Ce(r,s,i,e,n[o+10],23,-1094730640),e=Ce(e,r,s,i,n[o+13],4,681279174),i=Ce(i,e,r,s,n[o],11,-358537222),s=Ce(s,i,e,r,n[o+3],16,-722521979),r=Ce(r,s,i,e,n[o+6],23,76029189),e=Ce(e,r,s,i,n[o+9],4,-640364487),i=Ce(i,e,r,s,n[o+12],11,-421815835),s=Ce(s,i,e,r,n[o+15],16,530742520),r=Ce(r,s,i,e,n[o+2],23,-995338651),e=Me(e,r,s,i,n[o],6,-198630844),i=Me(i,e,r,s,n[o+7],10,1126891415),s=Me(s,i,e,r,n[o+14],15,-1416354905),r=Me(r,s,i,e,n[o+5],21,-57434055),e=Me(e,r,s,i,n[o+12],6,1700485571),i=Me(i,e,r,s,n[o+3],10,-1894986606),s=Me(s,i,e,r,n[o+10],15,-1051523),r=Me(r,s,i,e,n[o+1],21,-2054922799),e=Me(e,r,s,i,n[o+8],6,1873313359),i=Me(i,e,r,s,n[o+15],10,-30611744),s=Me(s,i,e,r,n[o+6],15,-1560198380),r=Me(r,s,i,e,n[o+13],21,1309151649),e=Me(e,r,s,i,n[o+4],6,-145523070),i=Me(i,e,r,s,n[o+11],10,-1120210379),s=Me(s,i,e,r,n[o+2],15,718787259),r=Me(r,s,i,e,n[o+9],21,-343485551),e=Fr(e,c),r=Fr(r,u),s=Fr(s,y),i=Fr(i,p)}return[e,r,s,i]}function Fd(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Mu(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function Fr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function zd(n,t){return n<<t|n>>>32-t}function ss(n,t,e,r,s,i){return Fr(zd(Fr(Fr(t,n),Fr(r,i)),s),e)}function Ne(n,t,e,r,s,i,o){return ss(t&e|~t&r,n,t,s,i,o)}function Be(n,t,e,r,s,i,o){return ss(t&r|e&~r,n,t,s,i,o)}function Ce(n,t,e,r,s,i,o){return ss(t^e^r,n,t,s,i,o)}function Me(n,t,e,r,s,i,o){return ss(e^(t|~r),n,t,s,i,o)}var Kd=Cu("v3",48,Ud);function $d(n,t,e){n=n||{};var r=n.random||(n.rng||Nu)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return is(r)}function Wd(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function to(n,t){return n<<t|n>>>32-t}function Vd(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),u=0;u<o;++u){for(var y=new Uint32Array(16),p=0;p<16;++p)y[p]=n[u*64+p*4]<<24|n[u*64+p*4+1]<<16|n[u*64+p*4+2]<<8|n[u*64+p*4+3];c[u]=y}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var E=0;E<o;++E){for(var x=new Uint32Array(80),k=0;k<16;++k)x[k]=c[E][k];for(var O=16;O<80;++O)x[O]=to(x[O-3]^x[O-8]^x[O-14]^x[O-16],1);for(var N=e[0],I=e[1],U=e[2],F=e[3],C=e[4],V=0;V<80;++V){var Q=Math.floor(V/20),Y=to(N,5)+Wd(Q,I,U,F)+C+t[Q]+x[V]>>>0;C=F,F=U,U=to(I,30)>>>0,I=N,N=Y}e[0]=e[0]+N>>>0,e[1]=e[1]+I>>>0,e[2]=e[2]+U>>>0,e[3]=e[3]+F>>>0,e[4]=e[4]+C>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var qd=Cu("v5",80,Vd);const Gd="00000000-0000-0000-0000-000000000000";function jd(n){if(!ns(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Yd=Object.freeze(Object.defineProperty({__proto__:null,NIL:Gd,parse:Bu,stringify:is,v1:Cd,v3:Kd,v4:$d,v5:qd,validate:ns,version:jd},Symbol.toStringTag,{value:"Module"})),Lu=Qi(Yd),Zd=Lu.v4,Xd=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return Zd()};i.id=o(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Jd=Xd;const Qd=Lu.v4,t0=Jd,Jn=function(n,t){if(!(this instanceof Jn))return new Jn(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Qd()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var e0=Jn;Jn.prototype.request=function(n,t,e,r){const s=this;let i=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const y=typeof r=="function";try{i=t0(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(p){if(y)return r(p);throw p}if(!y)return i}let u;try{u=JSON.stringify(i,this.options.replacer)}catch(y){return r(y)}return this.callServer(u,function(y,p){s._parseResponse(y,p,r)}),i};Jn.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,r.filter(s),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const r0=Ji(e0);var Pu={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(u,y,p){this.fn=u,this.context=y,this.once=p||!1}function i(u,y,p,E,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var k=new s(p,E||u,x),O=e?e+y:y;return u._events[O]?u._events[O].fn?u._events[O]=[u._events[O],k]:u._events[O].push(k):(u._events[O]=k,u._eventsCount++),u}function o(u,y){--u._eventsCount===0?u._events=new r:delete u._events[y]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var y=[],p,E;if(this._eventsCount===0)return y;for(E in p=this._events)t.call(p,E)&&y.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(p)):y},c.prototype.listeners=function(y){var p=e?e+y:y,E=this._events[p];if(!E)return[];if(E.fn)return[E.fn];for(var x=0,k=E.length,O=new Array(k);x<k;x++)O[x]=E[x].fn;return O},c.prototype.listenerCount=function(y){var p=e?e+y:y,E=this._events[p];return E?E.fn?1:E.length:0},c.prototype.emit=function(y,p,E,x,k,O){var N=e?e+y:y;if(!this._events[N])return!1;var I=this._events[N],U=arguments.length,F,C;if(I.fn){switch(I.once&&this.removeListener(y,I.fn,void 0,!0),U){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,p),!0;case 3:return I.fn.call(I.context,p,E),!0;case 4:return I.fn.call(I.context,p,E,x),!0;case 5:return I.fn.call(I.context,p,E,x,k),!0;case 6:return I.fn.call(I.context,p,E,x,k,O),!0}for(C=1,F=new Array(U-1);C<U;C++)F[C-1]=arguments[C];I.fn.apply(I.context,F)}else{var V=I.length,Q;for(C=0;C<V;C++)switch(I[C].once&&this.removeListener(y,I[C].fn,void 0,!0),U){case 1:I[C].fn.call(I[C].context);break;case 2:I[C].fn.call(I[C].context,p);break;case 3:I[C].fn.call(I[C].context,p,E);break;case 4:I[C].fn.call(I[C].context,p,E,x);break;default:if(!F)for(Q=1,F=new Array(U-1);Q<U;Q++)F[Q-1]=arguments[Q];I[C].fn.apply(I[C].context,F)}}return!0},c.prototype.on=function(y,p,E){return i(this,y,p,E,!1)},c.prototype.once=function(y,p,E){return i(this,y,p,E,!0)},c.prototype.removeListener=function(y,p,E,x){var k=e?e+y:y;if(!this._events[k])return this;if(!p)return o(this,k),this;var O=this._events[k];if(O.fn)O.fn===p&&(!x||O.once)&&(!E||O.context===E)&&o(this,k);else{for(var N=0,I=[],U=O.length;N<U;N++)(O[N].fn!==p||x&&!O[N].once||E&&O[N].context!==E)&&I.push(O[N]);I.length?this._events[k]=I.length===1?I[0]:I:o(this,k)}return this},c.prototype.removeAllListeners=function(y){var p;return y?(p=e?e+y:y,this._events[p]&&o(this,p)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(Pu);var n0=Pu.exports;const Uu=Ji(n0);var i0=class extends Uu{socket;constructor(n,t,e){super(),this.socket=new window.WebSocket(n,e),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function s0(n,t){return new i0(n,t)}var o0=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},a0=class extends Uu{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,u){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),u?this.dataPack=u:this.dataPack=new o0,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),c={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(c),r,u=>{if(u)return i(u);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=ct.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)&&(this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval)))})}};const c0=BigInt(0),Un=BigInt(1),u0=BigInt(2),l0=BigInt(7),h0=BigInt(256),f0=BigInt(113),Du=[],Hu=[],Fu=[];for(let n=0,t=Un,e=1,r=0;n<24;n++){[e,r]=[r,(2*e+3*r)%5],Du.push(2*(5*r+e)),Hu.push((n+1)*(n+2)/2%64);let s=c0;for(let i=0;i<7;i++)t=(t<<Un^(t>>l0)*f0)%h0,t&u0&&(s^=Un<<(Un<<BigInt(i))-Un);Fu.push(s)}const zu=jf(Fu,!0),d0=zu[0],p0=zu[1],Xa=(n,t,e)=>e>32?Xf(n,t,e):Yf(n,t,e),Ja=(n,t,e)=>e>32?Jf(n,t,e):Zf(n,t,e);function y0(n,t=24){const e=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let o=0;o<10;o++)e[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,u=(o+2)%10,y=e[u],p=e[u+1],E=Xa(y,p,1)^e[c],x=Ja(y,p,1)^e[c+1];for(let k=0;k<50;k+=10)n[o+k]^=E,n[o+k+1]^=x}let s=n[2],i=n[3];for(let o=0;o<24;o++){const c=Hu[o],u=Xa(s,i,c),y=Ja(s,i,c),p=Du[o];s=n[p],i=n[p+1],n[p]=u,n[p+1]=y}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)e[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~e[(c+2)%10]&e[(c+4)%10]}n[0]^=d0[r],n[1]^=p0[r]}Xn(e)}class na extends tu{constructor(t,e,r,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=r,this.enableXOF=s,this.rounds=i,Va(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Df(this.state)}clone(){return this._cloneInto()}keccak(){qa(this.state32),y0(this.state32,this.rounds),qa(this.state32),this.posOut=0,this.pos=0}update(t){Bi(this),t=$o(t),Zn(t);const{blockLen:e,state:r}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let c=0;c<o;c++)r[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:r,blockLen:s}=this;t[r]^=e,e&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Bi(this,!1),Zn(t),this.finish();const e=this.state,{blockLen:r}=this;for(let s=0,i=t.length;s<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Va(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Qc(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Xn(this.state)}_cloneInto(t){const{blockLen:e,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new na(e,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const g0=(n,t,e)=>eu(()=>new na(t,n,e)),Qa=g0(1,136,256/8);class Ku extends Dc{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Rh(t);const r=Mo(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(t){return xi(this),this.iHash.update(t),this}digestInto(t){xi(this),Yi(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const $u=(n,t,e)=>new Ku(n,t).update(e).digest();$u.create=(n,t)=>new Ku(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function tc(n){n.lowS!==void 0&&$r("lowS",n.lowS),n.prehash!==void 0&&$r("prehash",n.prehash)}function m0(n){const t=Do(n);si(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:s}=t;if(e){if(!r.eql(s,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}class w0 extends Error{constructor(t=""){super(t)}}const Ir={Err:w0,_tlv:{encode:(n,t)=>{const{Err:e}=Ir;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=mi(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?mi(s.length/2|128):"";return mi(n)+i+s+t},decode(n,t){const{Err:e}=Ir;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const y=t.subarray(r,r+u);if(y.length!==u)throw new e("tlv.decode: length bytes not complete");if(y[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const p of y)o=o<<8|p;if(r+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=Ir;if(n<xr)throw new t("integer: negative integers are not allowed");let e=mi(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=Ir;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return rn(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=Ir,s=me("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:u}=r.decode(2,i),{v:y,l:p}=r.decode(2,u);if(p.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(y)}},hexFromSig(n){const{_tlv:t,_int:e}=Ir,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},xr=BigInt(0),Ae=BigInt(1);BigInt(2);const ec=BigInt(3);BigInt(4);function b0(n){const t=m0(n),{Fp:e}=t,r=Xi(t.n,t.nBitLength),s=t.toBytes||((N,I,U)=>{const F=I.toAffine();return Sn(Uint8Array.from([4]),e.toBytes(F.x),e.toBytes(F.y))}),i=t.fromBytes||(N=>{const I=N.subarray(1),U=e.fromBytes(I.subarray(0,e.BYTES)),F=e.fromBytes(I.subarray(e.BYTES,2*e.BYTES));return{x:U,y:F}});function o(N){const{a:I,b:U}=t,F=e.sqr(N),C=e.mul(F,N);return e.add(e.add(C,e.mul(N,I)),U)}if(!e.eql(e.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function c(N){return Uo(N,Ae,t.n)}function u(N){const{allowedPrivateKeyLengths:I,nByteLength:U,wrapPrivateKey:F,n:C}=t;if(I&&typeof N!="bigint"){if(An(N)&&(N=Rn(N)),typeof N!="string"||!I.includes(N.length))throw new Error("invalid private key");N=N.padStart(U*2,"0")}let V;try{V=typeof N=="bigint"?N:rn(me("private key",N,U))}catch{throw new Error("invalid private key, expected hex or "+U+" bytes, got "+typeof N)}return F&&(V=Vt(V,C)),sr("private key",V,Ae,C),V}function y(N){if(!(N instanceof x))throw new Error("ProjectivePoint expected")}const p=Ni((N,I)=>{const{px:U,py:F,pz:C}=N;if(e.eql(C,e.ONE))return{x:U,y:F};const V=N.is0();I==null&&(I=V?e.ONE:e.inv(C));const Q=e.mul(U,I),Y=e.mul(F,I),tt=e.mul(C,I);if(V)return{x:e.ZERO,y:e.ZERO};if(!e.eql(tt,e.ONE))throw new Error("invZ was invalid");return{x:Q,y:Y}}),E=Ni(N=>{if(N.is0()){if(t.allowInfinityPoint&&!e.is0(N.py))return;throw new Error("bad point: ZERO")}const{x:I,y:U}=N.toAffine();if(!e.isValid(I)||!e.isValid(U))throw new Error("bad point: x or y not FE");const F=e.sqr(U),C=o(I);if(!e.eql(F,C))throw new Error("bad point: equation left != right");if(!N.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class x{constructor(I,U,F){if(I==null||!e.isValid(I))throw new Error("x required");if(U==null||!e.isValid(U))throw new Error("y required");if(F==null||!e.isValid(F))throw new Error("z required");this.px=I,this.py=U,this.pz=F,Object.freeze(this)}static fromAffine(I){const{x:U,y:F}=I||{};if(!I||!e.isValid(U)||!e.isValid(F))throw new Error("invalid affine point");if(I instanceof x)throw new Error("projective point not allowed");const C=V=>e.eql(V,e.ZERO);return C(U)&&C(F)?x.ZERO:new x(U,F,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(I){const U=e.invertBatch(I.map(F=>F.pz));return I.map((F,C)=>F.toAffine(U[C])).map(x.fromAffine)}static fromHex(I){const U=x.fromAffine(i(me("pointHex",I)));return U.assertValidity(),U}static fromPrivateKey(I){return x.BASE.multiply(u(I))}static msm(I,U){return Xc(x,r,I,U)}_setWindowSize(I){O.setWindowSize(this,I)}assertValidity(){E(this)}hasEvenY(){const{y:I}=this.toAffine();if(e.isOdd)return!e.isOdd(I);throw new Error("Field doesn't support isOdd")}equals(I){y(I);const{px:U,py:F,pz:C}=this,{px:V,py:Q,pz:Y}=I,tt=e.eql(e.mul(U,Y),e.mul(V,C)),Z=e.eql(e.mul(F,Y),e.mul(Q,C));return tt&&Z}negate(){return new x(this.px,e.neg(this.py),this.pz)}double(){const{a:I,b:U}=t,F=e.mul(U,ec),{px:C,py:V,pz:Q}=this;let Y=e.ZERO,tt=e.ZERO,Z=e.ZERO,ot=e.mul(C,C),St=e.mul(V,V),it=e.mul(Q,Q),W=e.mul(C,V);return W=e.add(W,W),Z=e.mul(C,Q),Z=e.add(Z,Z),Y=e.mul(I,Z),tt=e.mul(F,it),tt=e.add(Y,tt),Y=e.sub(St,tt),tt=e.add(St,tt),tt=e.mul(Y,tt),Y=e.mul(W,Y),Z=e.mul(F,Z),it=e.mul(I,it),W=e.sub(ot,it),W=e.mul(I,W),W=e.add(W,Z),Z=e.add(ot,ot),ot=e.add(Z,ot),ot=e.add(ot,it),ot=e.mul(ot,W),tt=e.add(tt,ot),it=e.mul(V,Q),it=e.add(it,it),ot=e.mul(it,W),Y=e.sub(Y,ot),Z=e.mul(it,St),Z=e.add(Z,Z),Z=e.add(Z,Z),new x(Y,tt,Z)}add(I){y(I);const{px:U,py:F,pz:C}=this,{px:V,py:Q,pz:Y}=I;let tt=e.ZERO,Z=e.ZERO,ot=e.ZERO;const St=t.a,it=e.mul(t.b,ec);let W=e.mul(U,V),A=e.mul(F,Q),a=e.mul(C,Y),l=e.add(U,F),g=e.add(V,Q);l=e.mul(l,g),g=e.add(W,A),l=e.sub(l,g),g=e.add(U,C);let w=e.add(V,Y);return g=e.mul(g,w),w=e.add(W,a),g=e.sub(g,w),w=e.add(F,C),tt=e.add(Q,Y),w=e.mul(w,tt),tt=e.add(A,a),w=e.sub(w,tt),ot=e.mul(St,g),tt=e.mul(it,a),ot=e.add(tt,ot),tt=e.sub(A,ot),ot=e.add(A,ot),Z=e.mul(tt,ot),A=e.add(W,W),A=e.add(A,W),a=e.mul(St,a),g=e.mul(it,g),A=e.add(A,a),a=e.sub(W,a),a=e.mul(St,a),g=e.add(g,a),W=e.mul(A,g),Z=e.add(Z,W),W=e.mul(w,g),tt=e.mul(l,tt),tt=e.sub(tt,W),W=e.mul(l,A),ot=e.mul(w,ot),ot=e.add(ot,W),new x(tt,Z,ot)}subtract(I){return this.add(I.negate())}is0(){return this.equals(x.ZERO)}wNAF(I){return O.wNAFCached(this,I,x.normalizeZ)}multiplyUnsafe(I){const{endo:U,n:F}=t;sr("scalar",I,xr,F);const C=x.ZERO;if(I===xr)return C;if(this.is0()||I===Ae)return this;if(!U||O.hasPrecomputes(this))return O.wNAFCachedUnsafe(this,I,x.normalizeZ);let{k1neg:V,k1:Q,k2neg:Y,k2:tt}=U.splitScalar(I),Z=C,ot=C,St=this;for(;Q>xr||tt>xr;)Q&Ae&&(Z=Z.add(St)),tt&Ae&&(ot=ot.add(St)),St=St.double(),Q>>=Ae,tt>>=Ae;return V&&(Z=Z.negate()),Y&&(ot=ot.negate()),ot=new x(e.mul(ot.px,U.beta),ot.py,ot.pz),Z.add(ot)}multiply(I){const{endo:U,n:F}=t;sr("scalar",I,Ae,F);let C,V;if(U){const{k1neg:Q,k1:Y,k2neg:tt,k2:Z}=U.splitScalar(I);let{p:ot,f:St}=this.wNAF(Y),{p:it,f:W}=this.wNAF(Z);ot=O.constTimeNegate(Q,ot),it=O.constTimeNegate(tt,it),it=new x(e.mul(it.px,U.beta),it.py,it.pz),C=ot.add(it),V=St.add(W)}else{const{p:Q,f:Y}=this.wNAF(I);C=Q,V=Y}return x.normalizeZ([C,V])[0]}multiplyAndAddUnsafe(I,U,F){const C=x.BASE,V=(Y,tt)=>tt===xr||tt===Ae||!Y.equals(C)?Y.multiplyUnsafe(tt):Y.multiply(tt),Q=V(this,U).add(V(I,F));return Q.is0()?void 0:Q}toAffine(I){return p(this,I)}isTorsionFree(){const{h:I,isTorsionFree:U}=t;if(I===Ae)return!0;if(U)return U(x,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:I,clearCofactor:U}=t;return I===Ae?this:U?U(x,this):this.multiplyUnsafe(t.h)}toRawBytes(I=!0){return $r("isCompressed",I),this.assertValidity(),s(x,this,I)}toHex(I=!0){return $r("isCompressed",I),Rn(this.toRawBytes(I))}}x.BASE=new x(t.Gx,t.Gy,e.ONE),x.ZERO=new x(e.ZERO,e.ONE,e.ZERO);const k=t.nBitLength,O=Zc(x,t.endo?Math.ceil(k/2):k);return{CURVE:t,ProjectivePoint:x,normPrivateKeyToScalar:u,weierstrassEquation:o,isWithinCurveOrder:c}}function E0(n){const t=Do(n);return si(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function _0(n){const t=E0(n),{Fp:e,n:r}=t,s=e.BYTES+1,i=2*e.BYTES+1;function o(a){return Vt(a,r)}function c(a){return go(a,r)}const{ProjectivePoint:u,normPrivateKeyToScalar:y,weierstrassEquation:p,isWithinCurveOrder:E}=b0({...t,toBytes(a,l,g){const w=l.toAffine(),b=e.toBytes(w.x),R=Sn;return $r("isCompressed",g),g?R(Uint8Array.from([l.hasEvenY()?2:3]),b):R(Uint8Array.from([4]),b,e.toBytes(w.y))},fromBytes(a){const l=a.length,g=a[0],w=a.subarray(1);if(l===s&&(g===2||g===3)){const b=rn(w);if(!Uo(b,Ae,e.ORDER))throw new Error("Point is not on curve");const R=p(b);let T;try{T=e.sqrt(R)}catch(v){const $=v instanceof Error?": "+v.message:"";throw new Error("Point is not on curve"+$)}const _=(T&Ae)===Ae;return(g&1)===1!==_&&(T=e.neg(T)),{x:b,y:T}}else if(l===i&&g===4){const b=e.fromBytes(w.subarray(0,e.BYTES)),R=e.fromBytes(w.subarray(e.BYTES,2*e.BYTES));return{x:b,y:R}}else{const b=s,R=i;throw new Error("invalid Point, expected length of "+b+", or uncompressed "+R+", got "+l)}}}),x=a=>Rn(jn(a,t.nByteLength));function k(a){const l=r>>Ae;return a>l}function O(a){return k(a)?o(-a):a}const N=(a,l,g)=>rn(a.slice(l,g));class I{constructor(l,g,w){sr("r",l,Ae,r),sr("s",g,Ae,r),this.r=l,this.s=g,w!=null&&(this.recovery=w),Object.freeze(this)}static fromCompact(l){const g=t.nByteLength;return l=me("compactSignature",l,g*2),new I(N(l,0,g),N(l,g,2*g))}static fromDER(l){const{r:g,s:w}=Ir.toSig(me("DER",l));return new I(g,w)}assertValidity(){}addRecoveryBit(l){return new I(this.r,this.s,l)}recoverPublicKey(l){const{r:g,s:w,recovery:b}=this,R=Y(me("msgHash",l));if(b==null||![0,1,2,3].includes(b))throw new Error("recovery id invalid");const T=b===2||b===3?g+t.n:g;if(T>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const _=b&1?"03":"02",d=u.fromHex(_+x(T)),v=c(T),$=o(-R*v),q=o(w*v),X=u.BASE.multiplyAndAddUnsafe(d,$,q);if(!X)throw new Error("point at infinify");return X.assertValidity(),X}hasHighS(){return k(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Ti(this.toDERHex())}toDERHex(){return Ir.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ti(this.toCompactHex())}toCompactHex(){return x(this.r)+x(this.s)}}const U={isValidPrivateKey(a){try{return y(a),!0}catch{return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const a=Gc(t.n);return wf(t.randomBytes(a),t.n)},precompute(a=8,l=u.BASE){return l._setWindowSize(a),l.multiply(BigInt(3)),l}};function F(a,l=!0){return u.fromPrivateKey(a).toRawBytes(l)}function C(a){const l=An(a),g=typeof a=="string",w=(l||g)&&a.length;return l?w===s||w===i:g?w===2*s||w===2*i:a instanceof u}function V(a,l,g=!0){if(C(a))throw new Error("first arg must be private key");if(!C(l))throw new Error("second arg must be public key");return u.fromHex(l).multiply(y(a)).toRawBytes(g)}const Q=t.bits2int||function(a){if(a.length>8192)throw new Error("input is too large");const l=rn(a),g=a.length*8-t.nBitLength;return g>0?l>>BigInt(g):l},Y=t.bits2int_modN||function(a){return o(Q(a))},tt=Zi(t.nBitLength);function Z(a){return sr("num < 2^"+t.nBitLength,a,xr,tt),jn(a,t.nByteLength)}function ot(a,l,g=St){if(["recovered","canonical"].some(lt=>lt in g))throw new Error("sign() legacy options not supported");const{hash:w,randomBytes:b}=t;let{lowS:R,prehash:T,extraEntropy:_}=g;R==null&&(R=!0),a=me("msgHash",a),tc(g),T&&(a=me("prehashed msgHash",w(a)));const d=Y(a),v=y(l),$=[Z(v),Z(d)];if(_!=null&&_!==!1){const lt=_===!0?b(e.BYTES):_;$.push(me("extraEntropy",lt))}const q=Sn(...$),X=d;function mt(lt){const pt=Q(lt);if(!E(pt))return;const ee=c(pt),ft=u.BASE.multiply(pt).toAffine(),gt=o(ft.x);if(gt===xr)return;const we=o(ee*o(X+gt*v));if(we===xr)return;let It=(ft.x===gt?0:2)|Number(ft.y&Ae),Ct=we;return R&&k(we)&&(Ct=O(we),It^=1),new I(gt,Ct,It)}return{seed:q,k2sig:mt}}const St={lowS:t.lowS,prehash:!1},it={lowS:t.lowS,prehash:!1};function W(a,l,g=St){const{seed:w,k2sig:b}=ot(a,l,g),R=t;return af(R.hash.outputLen,R.nByteLength,R.hmac)(w,b)}u.BASE._setWindowSize(8);function A(a,l,g,w=it){const b=a;l=me("msgHash",l),g=me("publicKey",g);const{lowS:R,prehash:T,format:_}=w;if(tc(w),"strict"in w)throw new Error("options.strict was renamed to lowS");if(_!==void 0&&_!=="compact"&&_!=="der")throw new Error("format must be compact or der");const d=typeof b=="string"||An(b),v=!d&&!_&&typeof b=="object"&&b!==null&&typeof b.r=="bigint"&&typeof b.s=="bigint";if(!d&&!v)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let $,q;try{if(v&&($=new I(b.r,b.s)),d){try{_!=="compact"&&($=I.fromDER(b))}catch(It){if(!(It instanceof Ir.Err))throw It}!$&&_!=="der"&&($=I.fromCompact(b))}q=u.fromHex(g)}catch{return!1}if(!$||R&&$.hasHighS())return!1;T&&(l=t.hash(l));const{r:X,s:mt}=$,lt=Y(l),pt=c(mt),ee=o(lt*pt),ft=o(X*pt),gt=u.BASE.multiplyAndAddUnsafe(q,ee,ft)?.toAffine();return gt?o(gt.x)===X:!1}return{CURVE:t,getPublicKey:F,getSharedSecret:V,sign:W,verify:A,ProjectivePoint:u,Signature:I,utils:U}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function A0(n){return{hash:n,hmac:(t,...e)=>$u(n,t,Ih(...e)),randomBytes:Fc}}function R0(n,t){const e=r=>_0({...n,...A0(r)});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),rc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),S0=BigInt(1),Eo=BigInt(2),nc=(n,t)=>(n+t/Eo)/t;function v0(n){const t=Wu,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),u=BigInt(88),y=n*n*n%t,p=y*y*n%t,E=Qt(p,e,t)*p%t,x=Qt(E,e,t)*p%t,k=Qt(x,Eo,t)*y%t,O=Qt(k,s,t)*k%t,N=Qt(O,i,t)*O%t,I=Qt(N,c,t)*N%t,U=Qt(I,u,t)*I%t,F=Qt(U,c,t)*N%t,C=Qt(F,e,t)*p%t,V=Qt(C,o,t)*O%t,Q=Qt(V,r,t)*y%t,Y=Qt(Q,Eo,t);if(!_o.eql(_o.sqr(Y),n))throw new Error("Cannot find square root");return Y}const _o=Xi(Wu,void 0,void 0,{sqrt:v0}),os=R0({a:BigInt(0),b:BigInt(7),Fp:_o,n:rc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=rc,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-S0*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,o=BigInt("0x100000000000000000000000000000000"),c=nc(i*n,t),u=nc(-r*n,t);let y=Vt(n-c*e-u*s,t),p=Vt(-c*r-u*i,t);const E=y>o,x=p>o;if(E&&(y=t-y),x&&(p=t-p),y>o||p>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:E,k1:y,k2neg:x,k2:p}}}},Bh);BigInt(0);os.ProjectivePoint;const I0=Tn.utils.randomPrivateKey,ic=()=>{const n=Tn.utils.randomPrivateKey(),t=Hi(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},Hi=Tn.getPublicKey;function sc(n){try{return Tn.ExtendedPoint.fromHex(n),!0}catch{return!1}}const ia=(n,t)=>Tn.sign(n,t.slice(0,32)),k0=Tn.verify,At=n=>ct.isBuffer(n)?n:n instanceof Uint8Array?ct.from(n.buffer,n.byteOffset,n.byteLength):ct.from(n);let sa=class{constructor(t){Object.assign(this,t)}encode(){return ct.from(cu(zn,this))}static decode(t){return uu(zn,this,t)}static decodeUnchecked(t){return nu(zn,this,t)}};class x0 extends sa{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const zn=new Map;var Vu;const qu=32,mr=32;function T0(n){return n._bn!==void 0}let oc=1;class K extends sa{constructor(t){if(super({}),this._bn=void 0,T0(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Te.decode(t);if(e.length!=mr)throw new Error("Invalid public key input");this._bn=new Yn(e)}else this._bn=new Yn(t);if(this._bn.byteLength()>mr)throw new Error("Invalid public key input")}}static unique(){const t=new K(oc);return oc+=1,new K(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Te.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(ct);if(t.length===mr)return t;const e=ct.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=ct.concat([t.toBuffer(),ct.from(e),r.toBuffer()]),i=ja(s);return new K(i)}static createProgramAddressSync(t,e){let r=ct.alloc(0);t.forEach(function(i){if(i.length>qu)throw new TypeError("Max seed length exceeded");r=ct.concat([r,At(i)])}),r=ct.concat([r,e.toBuffer(),ct.from("ProgramDerivedAddress")]);const s=ja(r);if(sc(s))throw new Error("Invalid seeds, address must fall off the curve");return new K(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(ct.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new K(t);return sc(e.toBytes())}}Vu=K;K.default=new Vu("11111111111111111111111111111111");zn.set(K,{kind:"struct",fields:[["_bn","u256"]]});class O0{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=At(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=At(I0()),this._publicKey=At(Hi(this._secretKey))}get publicKey(){return new K(this._publicKey)}get secretKey(){return ct.concat([this._secretKey,this._publicKey],64)}}const N0=new K("BPFLoader1111111111111111111111111111111111"),Vr=1232,as=127,Qn=64;class oa extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(oa.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class aa extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(aa.prototype,"name",{value:"TransactionExpiredTimeoutError"});class wn extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(wn.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class ti{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const vt=(n="publicKey")=>Ut(32,n),B0=(n="signature")=>Ut(64,n),Qr=(n="string")=>{const t=st([nt("length"),nt("lengthPadding"),Ut(Wr(nt(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const u={chars:ct.from(i,"utf8")};return r(u,o,c)},s.alloc=i=>nt().span+nt().span+ct.from(i,"utf8").length,s},C0=(n="authorized")=>st([vt("staker"),vt("withdrawer")],n),M0=(n="lockup")=>st([Ge("unixTimestamp"),Ge("epoch"),vt("custodian")],n),L0=(n="voteInit")=>st([vt("nodePubkey"),vt("authorizedVoter"),vt("authorizedWithdrawer"),Rt("commission")],n),P0=(n="voteAuthorizeWithSeedArgs")=>st([nt("voteAuthorizationType"),vt("currentAuthorityDerivedKeyOwnerPubkey"),Qr("currentAuthorityDerivedKeySeed"),vt("newAuthorized")],n);function Gu(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Gu({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function ze(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function je(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Tt(n,t){if(!n)throw new Error(t||"Assertion failed")}class cs{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const c=o.toBase58();let u=r.get(c);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,u)),u},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const u=s(c.pubkey);u.isSigner||=c.isSigner,u.isWritable||=c.isWritable}}return new cs(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Tt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),r=t.filter(([,u])=>u.isSigner&&!u.isWritable),s=t.filter(([,u])=>!u.isSigner&&u.isWritable),i=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Tt(e.length>0,"Expected at least one writable signer key");const[u]=e[0];Tt(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([u])=>new K(u)),...r.map(([u])=>new K(u)),...s.map(([u])=>new K(u)),...i.map(([u])=>new K(u))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new K(i),u=t.findIndex(y=>y.equals(c));u>=0&&(Tt(u<256,"Max lookup table index exceeded"),r.push(u),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const ju="Reached end of buffer unexpectedly";function pr(n){if(n.length===0)throw new Error(ju);return n.shift()}function Ke(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(ju);return n.splice(...t)}class cr{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new K(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Te.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new ti(this.staticAccountKeys)}static compile(t){const e=cs.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new ti(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:Te.encode(c.data)}));return new cr({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];je(e,t);const r=this.instructions.map(E=>{const{accounts:x,programIdIndex:k}=E,O=Array.from(Te.decode(E.data));let N=[];je(N,x.length);let I=[];return je(I,O.length),{programIdIndex:k,keyIndicesCount:ct.from(N),keyIndices:x,dataLength:ct.from(I),data:O}});let s=[];je(s,r.length);let i=ct.alloc(Vr);ct.from(s).copy(i);let o=s.length;r.forEach(E=>{const k=st([Rt("programIdIndex"),Ut(E.keyIndicesCount.length,"keyIndicesCount"),Oe(Rt("keyIndex"),E.keyIndices.length,"keyIndices"),Ut(E.dataLength.length,"dataLength"),Oe(Rt("userdatum"),E.data.length,"data")]).encode(E,i,o);o+=k}),i=i.slice(0,o);const c=st([Ut(1,"numRequiredSignatures"),Ut(1,"numReadonlySignedAccounts"),Ut(1,"numReadonlyUnsignedAccounts"),Ut(e.length,"keyCount"),Oe(vt("key"),t,"keys"),vt("recentBlockhash")]),u={numRequiredSignatures:ct.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ct.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ct.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ct.from(e),keys:this.accountKeys.map(E=>At(E.toBytes())),recentBlockhash:Te.decode(this.recentBlockhash)};let y=ct.alloc(2048);const p=c.encode(u,y);return i.copy(y,p),y.slice(0,p+i.length)}static from(t){let e=[...t];const r=pr(e);if(r!==(r&as))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=pr(e),i=pr(e),o=ze(e);let c=[];for(let x=0;x<o;x++){const k=Ke(e,0,mr);c.push(new K(ct.from(k)))}const u=Ke(e,0,mr),y=ze(e);let p=[];for(let x=0;x<y;x++){const k=pr(e),O=ze(e),N=Ke(e,0,O),I=ze(e),U=Ke(e,0,I),F=Te.encode(ct.from(U));p.push({programIdIndex:k,accounts:N,data:F})}const E={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Te.encode(ct.from(u)),accountKeys:c,instructions:p};return new cr(E)}}class sn{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new ti(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=cs.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const p of i){const E=e.extractTableLookup(p);if(E!==void 0){const[x,{writable:k,readonly:O}]=E;r.push(x),s.writable.push(...k),s.readonly.push(...O)}}const[o,c]=e.getMessageComponents(),y=new ti(c,s).compileInstructions(t.instructions);return new sn({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:y,addressTableLookups:r})}serialize(){const t=Array();je(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();je(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();je(i,this.addressTableLookups.length);const o=st([Rt("prefix"),st([Rt("numRequiredSignatures"),Rt("numReadonlySignedAccounts"),Rt("numReadonlyUnsignedAccounts")],"header"),Ut(t.length,"staticAccountKeysLength"),Oe(vt(),this.staticAccountKeys.length,"staticAccountKeys"),vt("recentBlockhash"),Ut(r.length,"instructionsLength"),Ut(e.length,"serializedInstructions"),Ut(i.length,"addressTableLookupsLength"),Ut(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(Vr),y=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(p=>p.toBytes()),recentBlockhash:Te.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,y)}serializeInstructions(){let t=0;const e=new Uint8Array(Vr);for(const r of this.compiledInstructions){const s=Array();je(s,r.accountKeyIndexes.length);const i=Array();je(i,r.data.length);const o=st([Rt("programIdIndex"),Ut(s.length,"encodedAccountKeyIndexesLength"),Oe(Rt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ut(i.length,"encodedDataLength"),Ut(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Vr);for(const r of this.addressTableLookups){const s=Array();je(s,r.writableIndexes.length);const i=Array();je(i,r.readonlyIndexes.length);const o=st([vt("accountKey"),Ut(s.length,"encodedWritableIndexesLength"),Oe(Rt(),r.writableIndexes.length,"writableIndexes"),Ut(i.length,"encodedReadonlyIndexesLength"),Oe(Rt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=pr(e),s=r&as;Tt(r!==s,"Expected versioned message but received legacy message");const i=s;Tt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:pr(e),numReadonlySignedAccounts:pr(e),numReadonlyUnsignedAccounts:pr(e)},c=[],u=ze(e);for(let O=0;O<u;O++)c.push(new K(Ke(e,0,mr)));const y=Te.encode(Ke(e,0,mr)),p=ze(e),E=[];for(let O=0;O<p;O++){const N=pr(e),I=ze(e),U=Ke(e,0,I),F=ze(e),C=new Uint8Array(Ke(e,0,F));E.push({programIdIndex:N,accountKeyIndexes:U,data:C})}const x=ze(e),k=[];for(let O=0;O<x;O++){const N=new K(Ke(e,0,mr)),I=ze(e),U=Ke(e,0,I),F=ze(e),C=Ke(e,0,F);k.push({accountKey:N,writableIndexes:U,readonlyIndexes:C})}return new sn({header:o,staticAccountKeys:c,recentBlockhash:y,compiledInstructions:E,addressTableLookups:k})}}const ca={deserializeMessageVersion(n){const t=n[0],e=t&as;return e===t?"legacy":e},deserialize:n=>{const t=ca.deserializeMessageVersion(n);if(t==="legacy")return cr.from(n);if(t===0)return sn.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let vr=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const U0=ct.alloc(Qn).fill(0);class Bt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=ct.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class xt{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Bt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let N=0;N<e.length;N++)if(e[N].programId===void 0)throw new Error(`Transaction instruction index ${N} has undefined program id`);const s=[],i=[];e.forEach(N=>{N.keys.forEach(U=>{i.push({...U})});const I=N.programId.toString();s.includes(I)||s.push(I)}),s.forEach(N=>{i.push({pubkey:new K(N),isSigner:!1,isWritable:!1})});const o=[];i.forEach(N=>{const I=N.pubkey.toString(),U=o.findIndex(F=>F.pubkey.toString()===I);U>-1?(o[U].isWritable=o[U].isWritable||N.isWritable,o[U].isSigner=o[U].isSigner||N.isSigner):o.push(N)}),o.sort(function(N,I){if(N.isSigner!==I.isSigner)return N.isSigner?-1:1;if(N.isWritable!==I.isWritable)return N.isWritable?-1:1;const U={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return N.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",U)});const c=o.findIndex(N=>N.pubkey.equals(r));if(c>-1){const[N]=o.splice(c,1);N.isSigner=!0,N.isWritable=!0,o.unshift(N)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const N of this.signatures){const I=o.findIndex(U=>U.pubkey.equals(N.publicKey));if(I>-1)o[I].isSigner||(o[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${N.publicKey.toString()}`)}let u=0,y=0,p=0;const E=[],x=[];o.forEach(({pubkey:N,isSigner:I,isWritable:U})=>{I?(E.push(N.toString()),u+=1,U||(y+=1)):(x.push(N.toString()),U||(p+=1))});const k=E.concat(x),O=e.map(N=>{const{data:I,programId:U}=N;return{programIdIndex:k.indexOf(U.toString()),accounts:N.keys.map(F=>k.indexOf(F.pubkey.toString())),data:Te.encode(I)}});return O.forEach(N=>{Tt(N.programIdIndex>=0),N.accounts.forEach(I=>Tt(I>=0))}),new cr({header:{numRequiredSignatures:u,numReadonlySignedAccounts:y,numReadonlyUnsignedAccounts:p},accountKeys:k,recentBlockhash:t,instructions:O})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=ia(r,s.secretKey);this._addSignature(s.publicKey,At(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Tt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=ct.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):k0(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];je(r,e.length);const s=r.length+e.length*64+t.length,i=ct.alloc(s);return Tt(e.length<256),ct.from(r).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(Tt(o.length===64,"signature has invalid length"),ct.from(o).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),Tt(i.length<=Vr,`Transaction too large: ${i.length} > ${Vr}`),i}get keys(){return Tt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Tt(this.instructions.length===1),this.instructions[0].programId}get data(){return Tt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ze(e);let s=[];for(let i=0;i<r;i++){const o=Ke(e,0,Qn);s.push(Te.encode(ct.from(o)))}return xt.populate(cr.from(e),s)}static populate(t,e=[]){const r=new xt;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==Te.encode(U0)?null:Te.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(u=>u.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new Bt({keys:i,programId:t.accountKeys[s.programIdIndex],data:Te.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class ua{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:r,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u}=r,y=o-c;Tt(y>0,"Message header is invalid");const p=t.staticAccountKeys.length-o-u;Tt(p>=0,"Message header is invalid");const E=t.getAccountKeys(e),x=E.get(0);if(x===void 0)throw new Error("Failed to decompile message because no account keys were found");const k=[];for(const O of s){const N=[];for(const U of O.accountKeyIndexes){const F=E.get(U);if(F===void 0)throw new Error(`Failed to find key for account key index ${U}`);const C=U<o;let V;C?V=U<y:U<E.staticAccountKeys.length?V=U-o<p:V=U-E.staticAccountKeys.length<E.accountKeysFromLookups.writable.length,N.push({pubkey:F,isSigner:U<r.numRequiredSignatures,isWritable:V})}const I=E.get(O.programIdIndex);if(I===void 0)throw new Error(`Failed to find program id for program id index ${O.programIdIndex}`);k.push(new Bt({programId:I,data:At(O.data),keys:N}))}return new ua({payerKey:x,instructions:k,recentBlockhash:i})}compileToLegacyMessage(){return cr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return sn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class la{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Tt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(Qn));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();je(e,this.signatures.length);const r=st([Ut(e.length,"encodedSignaturesLength"),Oe(B0(),this.signatures.length,"signatures"),Ut(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=ze(e);for(let o=0;o<s;o++)r.push(new Uint8Array(Ke(e,0,Qn)));const i=ca.deserialize(new Uint8Array(e));return new la(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));Tt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=ia(e,s.secretKey)}}addSignature(t,e){Tt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Tt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const D0=160,H0=64,F0=D0/H0,Yu=1e3/F0,fr=new K("SysvarC1ock11111111111111111111111111111111"),z0=new K("SysvarEpochSchedu1e111111111111111111111111"),K0=new K("Sysvar1nstructions1111111111111111111111111"),Si=new K("SysvarRecentB1ockHashes11111111111111111111"),In=new K("SysvarRent111111111111111111111111111111111"),$0=new K("SysvarRewards111111111111111111111111111111"),W0=new K("SysvarS1otHashes111111111111111111111111111"),V0=new K("SysvarS1otHistory11111111111111111111111111"),vi=new K("SysvarStakeHistory1111111111111111111111111");class ei extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:c=`Unknown action '${(u=>u)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}const q0={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class at extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}async function ri(n,t,e,r){const s=r&&{skipPreflight:r.skipPreflight,preflightCommitment:r.preflightCommitment||r.commitment,maxRetries:r.maxRetries,minContextSlot:r.minContextSlot},i=await n.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await n.confirmTransaction({abortSignal:r?.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},r&&r.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:c}=t.nonceInfo,u=c.keys[0].pubkey;o=(await n.confirmTransaction({abortSignal:r?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:t.nonceInfo.nonce,signature:i},r&&r.commitment)).value}else r?.abortSignal!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await n.confirmTransaction(i,r&&r.commitment)).value;if(o.err)throw i!=null?new ei({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function Jr(n){return new Promise(t=>setTimeout(t,n))}function kt(n,t){const e=n.layout.span>=0?n.layout.span:Gu(n,t),r=ct.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}function Nt(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.instruction!==n.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${n.index}`);return e}const Zu=Ie("lamportsPerSignature"),Xu=st([nt("version"),nt("state"),vt("authorizedPubkey"),vt("nonce"),st([Zu],"feeCalculator")]),Ao=Xu.span;class us{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Xu.decode(At(t),0);return new us({authorizedPubkey:new K(e.authorizedPubkey),nonce:new K(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const G0=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},j0=n=>t=>{const e=Ut(n,t),{encode:r,decode:s}=G0(e),i=e;return i.decode=(o,c)=>{const u=s(o,c);return ku(ct.from(u))},i.encode=(o,c,u)=>{const y=Qo(o,n);return r(y,c,u)},i},kn=j0(8);class Y0{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=nt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Ft))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:r,programId:s}=Nt(Ft.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:r,programId:new K(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Nt(Ft.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:r,programId:s}=Nt(Ft.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:r,programId:new K(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Nt(Ft.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,space:s,programId:i}=Nt(Ft.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new K(e),seed:r,space:s,programId:new K(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Nt(Ft.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new K(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:r,programId:s}=Nt(Ft.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new K(e),seed:r,programId:new K(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:r,lamports:s,space:i,programId:o}=Nt(Ft.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new K(e),seed:r,lamports:s,space:i,programId:new K(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Nt(Ft.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new K(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Nt(Ft.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Nt(Ft.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Nt(Ft.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new K(e)}}static checkProgramId(t){if(!t.equals(be.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ft=Object.freeze({Create:{index:0,layout:st([nt("instruction"),Ge("lamports"),Ge("space"),vt("programId")])},Assign:{index:1,layout:st([nt("instruction"),vt("programId")])},Transfer:{index:2,layout:st([nt("instruction"),kn("lamports")])},CreateWithSeed:{index:3,layout:st([nt("instruction"),vt("base"),Qr("seed"),Ge("lamports"),Ge("space"),vt("programId")])},AdvanceNonceAccount:{index:4,layout:st([nt("instruction")])},WithdrawNonceAccount:{index:5,layout:st([nt("instruction"),Ge("lamports")])},InitializeNonceAccount:{index:6,layout:st([nt("instruction"),vt("authorized")])},AuthorizeNonceAccount:{index:7,layout:st([nt("instruction"),vt("authorized")])},Allocate:{index:8,layout:st([nt("instruction"),Ge("space")])},AllocateWithSeed:{index:9,layout:st([nt("instruction"),vt("base"),Qr("seed"),Ge("space"),vt("programId")])},AssignWithSeed:{index:10,layout:st([nt("instruction"),vt("base"),Qr("seed"),vt("programId")])},TransferWithSeed:{index:11,layout:st([nt("instruction"),kn("lamports"),Qr("seed"),vt("programId")])},UpgradeNonceAccount:{index:12,layout:st([nt("instruction")])}});class be{constructor(){}static createAccount(t){const e=Ft.Create,r=kt(e,{lamports:t.lamports,space:t.space,programId:At(t.programId.toBuffer())});return new Bt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=Ft.TransferWithSeed;e=kt(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:At(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ft.Transfer;e=kt(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Bt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=Ft.AssignWithSeed;e=kt(s,{base:At(t.basePubkey.toBuffer()),seed:t.seed,programId:At(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ft.Assign;e=kt(s,{programId:At(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Bt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ft.CreateWithSeed,r=kt(e,{base:At(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:At(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Bt({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new xt;"basePubkey"in t&&"seed"in t?e.add(be.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Ao,programId:this.programId})):e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Ao,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=Ft.InitializeNonceAccount,r=kt(e,{authorized:At(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:In,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new Bt(s)}static nonceAdvance(t){const e=Ft.AdvanceNonceAccount,r=kt(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new Bt(s)}static nonceWithdraw(t){const e=Ft.WithdrawNonceAccount,r=kt(e,{lamports:t.lamports});return new Bt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:Si,isSigner:!1,isWritable:!1},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=Ft.AuthorizeNonceAccount,r=kt(e,{authorized:At(t.newAuthorizedPubkey.toBuffer())});return new Bt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=Ft.AllocateWithSeed;e=kt(s,{base:At(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:At(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ft.Allocate;e=kt(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Bt({keys:r,programId:this.programId,data:e})}}be.programId=new K("11111111111111111111111111111111");const Z0=Vr-300;class on{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/on.chunkSize)+1+1)}static async load(t,e,r,s,i){{const E=await t.getMinimumBalanceForRentExemption(i.length),x=await t.getAccountInfo(r.publicKey,"confirmed");let k=null;if(x!==null){if(x.executable)return console.error("Program load failed, account is already executable"),!1;x.data.length!==i.length&&(k=k||new xt,k.add(be.allocate({accountPubkey:r.publicKey,space:i.length}))),x.owner.equals(s)||(k=k||new xt,k.add(be.assign({accountPubkey:r.publicKey,programId:s}))),x.lamports<E&&(k=k||new xt,k.add(be.transfer({fromPubkey:e.publicKey,toPubkey:r.publicKey,lamports:E-x.lamports})))}else k=new xt().add(be.createAccount({fromPubkey:e.publicKey,newAccountPubkey:r.publicKey,lamports:E>0?E:1,space:i.length,programId:s}));k!==null&&await ri(t,k,[e,r],{commitment:"confirmed"})}const o=st([nt("instruction"),nt("offset"),nt("bytesLength"),nt("bytesLengthPadding"),Oe(Rt("byte"),Wr(nt(),-8),"bytes")]),c=on.chunkSize;let u=0,y=i,p=[];for(;y.length>0;){const E=y.slice(0,c),x=ct.alloc(c+16);o.encode({instruction:0,offset:u,bytes:E,bytesLength:0,bytesLengthPadding:0},x);const k=new xt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:x});p.push(ri(t,k,[e,r],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await Jr(1e3/4),u+=c,y=y.slice(c)}await Promise.all(p);{const E=st([nt("instruction")]),x=ct.alloc(E.span);E.encode({instruction:1},x);const k=new xt().add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1}],programId:s,data:x}),O="processed",N=await t.sendTransaction(k,[e,r],{preflightCommitment:O}),{context:I,value:U}=await t.confirmTransaction({signature:N,lastValidBlockHeight:k.lastValidBlockHeight,blockhash:k.recentBlockhash},O);if(U.err)throw new Error(`Transaction ${N} failed (${JSON.stringify(U)})`);for(;;){try{if(await t.getSlot({commitment:O})>I.slot)break}catch{}await new Promise(F=>setTimeout(F,Math.round(Yu/2)))}}return!0}}on.chunkSize=Z0;const X0=new K("BPFLoader2111111111111111111111111111111111");class J0{static getMinNumSignatures(t){return on.getMinNumSignatures(t)}static load(t,e,r,s,i){return on.load(t,e,r,i,s)}}function Q0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var eo,ac;function tp(){if(ac)return eo;ac=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,c,u,y,p,E;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(E=n.call(r),E==="[object Array]"){for(c="[",o=r.length-1,i=0;i<o;i++)c+=e(r[i],!0)+",";return o>-1&&(c+=e(r[i],!0)),c+"]"}else if(E==="[object Object]"){for(u=t(r).sort(),o=u.length,c="",i=0;i<o;)y=u[i],p=e(r[y],!1),p!==void 0&&(c&&(c+=","),c+=JSON.stringify(y)+":"+p),i++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return eo=function(r){var s=e(r,!1);if(s!==void 0)return""+s},eo}var ep=tp(),cc=Q0(ep);const Dn=32;function ro(n){let t=0;for(;n>1;)n/=2,t++;return t}function rp(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Ju{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=ro(rp(t+Dn+1))-ro(Dn)-1,r=this.getSlotsInEpoch(e),s=t-(r-Dn);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*Dn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+ro(Dn)):this.slotsPerEpoch}}var np=globalThis.fetch;class ip extends a0{constructor(t,e,r){const s=i=>{const o=s0(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function sp(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const uc=56;class Ro{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=sp(op,t),r=t.length-uc;Tt(r>=0,"lookup table is invalid"),Tt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=st([Oe(vt(),s,"addresses")]).decode(t.slice(uc));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new K(e.authority[0]):void 0,addresses:i.map(o=>new K(o))}}}const op={index:1,layout:st([nt("typeIndex"),kn("deactivationSlot"),Ie("lastExtendedSlot"),Rt("lastExtendedStartIndex"),Rt(),Oe(vt(),Wr(Rt(),-1),"authority")])},ap=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function cp(n){const t=n.match(ap);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),u=c==null?"":`:${c+1}`;return`${o}//${r}${u}${i}`}const Yt=ui(ea(K),G(),n=>new K(n)),Qu=ra([G(),Gt("base64")]),ha=ui(ea(ct),Qu,n=>ct.from(n[0],"base64")),tl=30*1e3;function up(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Ht(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function lc(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function el(n){return He([z({jsonrpc:Gt("2.0"),id:G(),result:n}),z({jsonrpc:Gt("2.0"),id:G(),error:z({code:Bn(),message:G(),data:ut(Td())})})])}const lp=el(Bn());function Et(n){return ui(el(n),lp,t=>"error"in t?t:{...t,result:j(t.result,n)})}function te(n){return Et(z({context:z({slot:L()}),value:n}))}function ls(n){return z({context:z({slot:L()}),value:n})}function no(n,t){return n===0?new sn({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new K(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Te.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new cr(t)}const hp=z({foundation:L(),foundationTerm:L(),initial:L(),taper:L(),terminal:L()}),fp=Et(J(et(z({epoch:L(),effectiveSlot:L(),amount:L(),postBalance:L(),commission:ut(et(L()))})))),dp=J(z({slot:L(),prioritizationFee:L()})),pp=z({total:L(),validator:L(),foundation:L(),epoch:L()}),yp=z({epoch:L(),slotIndex:L(),slotsInEpoch:L(),absoluteSlot:L(),blockHeight:ut(L()),transactionCount:ut(L())}),gp=z({slotsPerEpoch:L(),leaderScheduleSlotOffset:L(),warmup:wr(),firstNormalEpoch:L(),firstNormalSlot:L()}),mp=Ou(G(),J(L())),un=et(He([z({}),G()])),wp=z({err:un}),bp=Gt("receivedSignature"),Ep=z({"solana-core":G(),"feature-set":ut(L())}),_p=z({program:G(),programId:Yt,parsed:Bn()}),Ap=z({programId:Yt,accounts:J(Yt),data:G()}),hc=te(z({err:et(He([z({}),G()])),logs:et(J(G())),accounts:ut(et(J(et(z({executable:wr(),owner:G(),lamports:L(),data:J(G()),rentEpoch:ut(L())}))))),unitsConsumed:ut(L()),returnData:ut(et(z({programId:G(),data:ra([G(),Gt("base64")])}))),innerInstructions:ut(et(J(z({index:L(),instructions:J(He([_p,Ap]))}))))})),Rp=te(z({byIdentity:Ou(G(),J(L())),range:z({firstSlot:L(),lastSlot:L()})}));function Sp(n,t,e,r,s,i){const o=e||np;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return r&&(u=async(p,E)=>{const x=await new Promise((k,O)=>{try{r(p,E,(N,I)=>k([N,I]))}catch(N){O(N)}});return await o(...x)}),new r0(async(p,E)=>{const x={method:"POST",body:p,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},Sy)};try{let k=5,O,N=500;for(;u?O=await u(n,x):O=await o(n,x),!(O.status!==429||s===!0||(k-=1,k===0));)console.error(`Server responded with ${O.status} ${O.statusText}.  Retrying after ${N}ms delay...`),await Jr(N),N*=2;const I=await O.text();O.ok?E(null,I):E(new Error(`${O.status} ${O.statusText}: ${I}`))}catch(k){k instanceof Error&&E(k)}},{})}function vp(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function Ip(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const kp=Et(hp),xp=Et(pp),Tp=Et(dp),Op=Et(yp),Np=Et(gp),Bp=Et(mp),Cp=Et(L()),Mp=te(z({total:L(),circulating:L(),nonCirculating:L(),nonCirculatingAccounts:J(Yt)})),So=z({amount:G(),uiAmount:et(L()),decimals:L(),uiAmountString:ut(G())}),Lp=te(J(z({address:Yt,amount:G(),uiAmount:et(L()),decimals:L(),uiAmountString:ut(G())}))),Pp=te(J(z({pubkey:Yt,account:z({executable:wr(),owner:Yt,lamports:L(),data:ha,rentEpoch:L()})}))),vo=z({program:G(),parsed:Bn(),space:L()}),Up=te(J(z({pubkey:Yt,account:z({executable:wr(),owner:Yt,lamports:L(),data:vo,rentEpoch:L()})}))),Dp=te(J(z({lamports:L(),address:Yt}))),ni=z({executable:wr(),owner:Yt,lamports:L(),data:ha,rentEpoch:L()}),Hp=z({pubkey:Yt,account:ni}),Fp=ui(He([ea(ct),vo]),He([Qu,vo]),n=>Array.isArray(n)?j(n,ha):n),Io=z({executable:wr(),owner:Yt,lamports:L(),data:Fp,rentEpoch:L()}),zp=z({pubkey:Yt,account:Io}),Kp=z({state:He([Gt("active"),Gt("inactive"),Gt("activating"),Gt("deactivating")]),active:L(),inactive:L()}),$p=Et(J(z({signature:G(),slot:L(),err:un,memo:et(G()),blockTime:ut(et(L()))}))),Wp=Et(J(z({signature:G(),slot:L(),err:un,memo:et(G()),blockTime:ut(et(L()))}))),Vp=z({subscription:L(),result:ls(ni)}),qp=z({pubkey:Yt,account:ni}),Gp=z({subscription:L(),result:ls(qp)}),jp=z({parent:L(),slot:L(),root:L()}),Yp=z({subscription:L(),result:jp}),Zp=He([z({type:He([Gt("firstShredReceived"),Gt("completed"),Gt("optimisticConfirmation"),Gt("root")]),slot:L(),timestamp:L()}),z({type:Gt("createdBank"),parent:L(),slot:L(),timestamp:L()}),z({type:Gt("frozen"),slot:L(),timestamp:L(),stats:z({numTransactionEntries:L(),numSuccessfulTransactions:L(),numFailedTransactions:L(),maxTransactionsPerEntry:L()})}),z({type:Gt("dead"),slot:L(),timestamp:L(),err:G()})]),Xp=z({subscription:L(),result:Zp}),Jp=z({subscription:L(),result:ls(He([wp,bp]))}),Qp=z({subscription:L(),result:L()}),ty=z({pubkey:G(),gossip:et(G()),tpu:et(G()),rpc:et(G()),version:et(G())}),fc=z({votePubkey:G(),nodePubkey:G(),activatedStake:L(),epochVoteAccount:wr(),epochCredits:J(ra([L(),L(),L()])),commission:L(),lastVote:L(),rootSlot:et(L())}),ey=Et(z({current:J(fc),delinquent:J(fc)})),ry=He([Gt("processed"),Gt("confirmed"),Gt("finalized")]),ny=z({slot:L(),confirmations:et(L()),err:un,confirmationStatus:ut(ry)}),iy=te(J(et(ny))),sy=Et(L()),rl=z({accountKey:Yt,writableIndexes:J(L()),readonlyIndexes:J(L())}),fa=z({signatures:J(G()),message:z({accountKeys:J(G()),header:z({numRequiredSignatures:L(),numReadonlySignedAccounts:L(),numReadonlyUnsignedAccounts:L()}),instructions:J(z({accounts:J(L()),data:G(),programIdIndex:L()})),recentBlockhash:G(),addressTableLookups:ut(J(rl))})}),nl=z({pubkey:Yt,signer:wr(),writable:wr(),source:ut(He([Gt("transaction"),Gt("lookupTable")]))}),il=z({accountKeys:J(nl),signatures:J(G())}),sl=z({parsed:Bn(),program:G(),programId:Yt}),ol=z({accounts:J(Yt),data:G(),programId:Yt}),oy=He([ol,sl]),ay=He([z({parsed:Bn(),program:G(),programId:G()}),z({accounts:J(G()),data:G(),programId:G()})]),al=ui(oy,ay,n=>"accounts"in n?j(n,ol):j(n,sl)),cl=z({signatures:J(G()),message:z({accountKeys:J(nl),instructions:J(al),recentBlockhash:G(),addressTableLookups:ut(et(J(rl)))})}),Fi=z({accountIndex:L(),mint:G(),owner:ut(G()),programId:ut(G()),uiTokenAmount:So}),ul=z({writable:J(Yt),readonly:J(Yt)}),hs=z({err:un,fee:L(),innerInstructions:ut(et(J(z({index:L(),instructions:J(z({accounts:J(L()),data:G(),programIdIndex:L()}))})))),preBalances:J(L()),postBalances:J(L()),logMessages:ut(et(J(G()))),preTokenBalances:ut(et(J(Fi))),postTokenBalances:ut(et(J(Fi))),loadedAddresses:ut(ul),computeUnitsConsumed:ut(L())}),da=z({err:un,fee:L(),innerInstructions:ut(et(J(z({index:L(),instructions:J(al)})))),preBalances:J(L()),postBalances:J(L()),logMessages:ut(et(J(G()))),preTokenBalances:ut(et(J(Fi))),postTokenBalances:ut(et(J(Fi))),loadedAddresses:ut(ul),computeUnitsConsumed:ut(L())}),Cn=He([Gt(0),Gt("legacy")]),ln=z({pubkey:G(),lamports:L(),postBalance:et(L()),rewardType:et(G()),commission:ut(et(L()))}),cy=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),transactions:J(z({transaction:fa,meta:et(hs),version:ut(Cn)})),rewards:ut(J(ln)),blockTime:et(L()),blockHeight:et(L())}))),uy=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),rewards:ut(J(ln)),blockTime:et(L()),blockHeight:et(L())}))),ly=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),transactions:J(z({transaction:il,meta:et(hs),version:ut(Cn)})),rewards:ut(J(ln)),blockTime:et(L()),blockHeight:et(L())}))),hy=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),transactions:J(z({transaction:cl,meta:et(da),version:ut(Cn)})),rewards:ut(J(ln)),blockTime:et(L()),blockHeight:et(L())}))),fy=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),transactions:J(z({transaction:il,meta:et(da),version:ut(Cn)})),rewards:ut(J(ln)),blockTime:et(L()),blockHeight:et(L())}))),dy=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),rewards:ut(J(ln)),blockTime:et(L()),blockHeight:et(L())}))),py=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),transactions:J(z({transaction:fa,meta:et(hs)})),rewards:ut(J(ln)),blockTime:et(L())}))),dc=Et(et(z({blockhash:G(),previousBlockhash:G(),parentSlot:L(),signatures:J(G()),blockTime:et(L())}))),io=Et(et(z({slot:L(),meta:et(hs),blockTime:ut(et(L())),transaction:fa,version:ut(Cn)}))),_i=Et(et(z({slot:L(),transaction:cl,meta:et(da),blockTime:ut(et(L())),version:ut(Cn)}))),yy=te(z({blockhash:G(),lastValidBlockHeight:L()})),gy=te(wr()),my=z({slot:L(),numTransactions:L(),numSlots:L(),samplePeriodSecs:L()}),wy=Et(J(my)),by=te(et(z({feeCalculator:z({lamportsPerSignature:L()})}))),Ey=Et(G()),_y=Et(G()),Ay=z({err:un,logs:J(G()),signature:G()}),Ry=z({result:ls(Ay),subscription:L()}),Sy={"solana-client":"js/1.0.0-maintenance"};class ll{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const y={};return async p=>{const{commitment:E,config:x}=Ht(p),k=this._buildArgs([],E,void 0,x),O=cc(k);return y[O]=y[O]??(async()=>{try{const N=await this._rpcRequest("getBlockHeight",k),I=j(N,Et(L()));if("error"in I)throw new at(I.error,"failed to get block height information");return I.result}finally{delete y[O]}})(),await y[O]}})();let r,s,i,o,c,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=up(t),this._rpcWsEndpoint=r||cp(t),this._rpcClient=Sp(t,s,i,o,c,u),this._rpcRequest=vp(this._rpcClient),this._rpcBatchRequest=Ip(this._rpcClient),this._rpcWebSocket=new ip(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=j(o,te(L()));if("error"in c)throw new at(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=j(e,Et(et(L())));if("error"in r)throw new at(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=j(t,Et(L()));if("error"in e)throw new at(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=j(t,Cp);if("error"in e)throw new at(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=j(r,Mp);if("error"in s)throw new at(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=j(s,te(So));if("error"in i)throw new at(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=j(s,te(So));if("error"in i)throw new at(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Ht(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",c),y=j(u,Pp);if("error"in y)throw new at(y.error,`failed to get token accounts owned by account ${t.toBase58()}`);return y.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=j(o,Up);if("error"in c)throw new at(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=j(s,Dp);if("error"in i)throw new at(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=j(s,Lp);if("error"in i)throw new at(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=j(o,te(et(ni)));if("error"in c)throw new at(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=j(o,te(et(Io)));if("error"in c)throw new at(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(y=>y.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),u=j(c,te(J(et(Io))));if("error"in u)throw new at(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(y=>y.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),u=j(c,te(J(et(ni))));if("error"in u)throw new at(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Ht(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),u=j(c,Et(Kp));if("error"in u)throw new at(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Ht(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:lc(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",c),y=J(Hp),p=o.withContext===!0?j(u,te(y)):j(u,Et(y));if("error"in p)throw new at(p.error,`failed to get accounts owned by program ${t.toBase58()}`);return p.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=j(o,Et(J(zp)));if("error"in c)throw new at(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=Te.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Tt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((u,y)=>{try{r=this.onSignature(e,(E,x)=>{r=void 0;const k={context:x,value:E};u({__type:vr.PROCESSED,response:k})},t);const p=new Promise(E=>{r==null?E():s=this._onSubscriptionStateChange(r,x=>{x==="subscribed"&&E()})});(async()=>{if(await p,i)return;const E=await this.getSignatureStatus(e);if(i||E==null)return;const{context:x,value:k}=E;if(k!=null)if(k?.err)y(k.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(k.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(k.confirmationStatus==="processed"||k.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:vr.PROCESSED,response:{context:x,value:k}})}})()}catch(p){y(p)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(E=>{const x=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let k=await x();if(!i){for(;k<=r;)if(await Jr(1e3),i||(k=await x(),i))return;E({__type:vr.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),y=this.getCancellationPromise(e);let p;try{const E=await Promise.race([y,u,o]);if(E.__type===vr.PROCESSED)p=E.response;else throw new oa(s)}finally{i=!0,c()}return p}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const u=new Promise(k=>{let O=i,N=null;const I=async()=>{try{const{context:U,value:F}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return N=U.slot,F?.nonce}catch{return O}};(async()=>{if(O=await I(),!c)for(;;){if(i!==O){k({__type:vr.NONCE_INVALID,slotInWhichNonceDidAdvance:N});return}if(await Jr(2e3),c||(O=await I(),c))return}})()}),{abortConfirmation:y,confirmationPromise:p}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),E=this.getCancellationPromise(e);let x;try{const k=await Promise.race([E,p,u]);if(k.__type===vr.PROCESSED)x=k.response;else{let O;for(;;){const N=await this.getSignatureStatus(o);if(N==null)break;if(N.context.slot<(k.slotInWhichNonceDidAdvance??r)){await Jr(400);continue}O=N;break}if(O?.value){const N=t||"finalized",{confirmationStatus:I}=O.value;switch(N){case"processed":case"recent":if(I!=="processed"&&I!=="confirmed"&&I!=="finalized")throw new wn(o);break;case"confirmed":case"single":case"singleGossip":if(I!=="confirmed"&&I!=="finalized")throw new wn(o);break;case"finalized":case"max":case"root":if(I!=="finalized")throw new wn(o);break;default:}x={context:O.context,value:{err:O.value.err}}}else throw new wn(o)}}finally{c=!0,y()}return x}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(u=>{let y=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{y=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>u({__type:vr.TIMED_OUT,timeoutMs:y}),y)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const u=await Promise.race([o,s]);if(u.__type===vr.PROCESSED)c=u.response;else throw new aa(e,u.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=j(t,Et(J(ty)));if("error"in e)throw new at(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=j(r,ey);if("error"in s)throw new at(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=j(i,Et(L()));if("error"in o)throw new at(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=j(i,Et(G()));if("error"in o)throw new at(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=j(s,Et(J(Yt)));if("error"in i)throw new at(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);Tt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=j(s,iy);if("error"in i)throw new at(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=j(i,Et(L()));if("error"in o)throw new at(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=j(r,kp);if("error"in s)throw new at(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Ht(r),o=this._buildArgs([t.map(y=>y.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),u=j(c,fp);if("error"in u)throw new at(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=j(t,xp);if("error"in e)throw new at(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=j(i,Op);if("error"in o)throw new at(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=j(t,Np);if("error"in e)throw new at(e.error,"failed to get epoch schedule");const r=e.result;return new Ju(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=j(t,Bp);if("error"in e)throw new at(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=j(s,sy);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=j(e,wy);if("error"in r)throw new at(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=j(s,by);if("error"in i)throw new at(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=At(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=j(i,te(et(L())));if("error"in o)throw new at(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=j(s,Tp);if("error"in i)throw new at(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=j(i,yy);if("error"in o)throw new at(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=j(o,gy);if("error"in c)throw new at(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=j(t,Et(Ep));if("error"in e)throw new at(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=j(t,Et(G()));if("error"in e)throw new at(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=j(o,ly);if("error"in c)throw c.error;return c.result}case"none":{const c=j(o,uy);if("error"in c)throw c.error;return c.result}default:{const c=j(o,cy);if("error"in c)throw c.error;const{result:u}=c;return u?{...u,transactions:u.transactions.map(({transaction:y,meta:p,version:E})=>({meta:p,transaction:{...y,message:no(E,y.message)},version:E}))}:null}}}catch(c){throw new at(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=j(o,fy);if("error"in c)throw c.error;return c.result}case"none":{const c=j(o,dy);if("error"in c)throw c.error;return c.result}default:{const c=j(o,hy);if("error"in c)throw c.error;return c.result}}}catch(c){throw new at(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...u}=t;r=c,e=u}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=j(i,Rp);if("error"in o)throw new at(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=j(o,io);if("error"in c)throw new at(c.error,"failed to get transaction");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:no(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Ht(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=j(o,_i);if("error"in c)throw new at(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const y=j(u,_i);if("error"in y)throw new at(y.error,"failed to get transactions");return y.result})}async getTransactions(t,e){const{commitment:r,config:s}=Ht(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const y=j(u,io);if("error"in y)throw new at(y.error,"failed to get transactions");const p=y.result;return p&&{...p,transaction:{...p.transaction,message:no(p.version,p.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=j(s,py);if("error"in i)throw new at(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:u,meta:y})=>{const p=new cr(u.message);return{meta:y,transaction:{...u,message:p}}})};return{...c,transactions:c.transactions.map(({transaction:u,meta:y})=>({meta:y,transaction:xt.populate(u.message,u.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=j(i,Et(J(L())));if("error"in o)throw new at(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=j(s,dc);if("error"in i)throw new at(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=j(s,dc);if("error"in i)throw new at(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=j(s,io);if("error"in i)throw new at(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new cr(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:xt.populate(c,u)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=j(s,_i);if("error"in i)throw new at(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=j(o,_i);if("error"in c)throw new at(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const u=await this.getConfirmedBlockSignatures(r);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=j(i,$p);if("error"in o)throw new at(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=j(i,Wp);if("error"in o)throw new at(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Ro({key:t,state:Ro.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=us.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=j(r,Ey);if("error"in s)throw new at(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Jr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=tl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Jr(Yu/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Ht(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=j(i,te(L()));if("error"in o)throw new at(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const N=t.serialize(),I=ct.from(N).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const U=e||{};U.encoding="base64","commitment"in U||(U.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(U.innerInstructions=e.innerInstructions);const F=[I,U],C=await this._rpcRequest("simulateTransaction",F),V=j(C,hc);if("error"in V)throw new Error("failed to simulate transaction: "+V.error.message);return V.result}let s;if(t instanceof xt){let O=t;s=new xt,s.feePayer=O.feePayer,s.instructions=t.instructions,s.nonceInfo=O.nonceInfo,s.signatures=O.signatures}else s=xt.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let O=this._disableBlockhashCaching;for(;;){const N=await this._blockhashWithExpiryBlockHeight(O);if(s.lastValidBlockHeight=N.lastValidBlockHeight,s.recentBlockhash=N.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const I=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(I)&&!this._blockhashInfo.transactionSignatures.includes(I)){this._blockhashInfo.simulatedSignatures.push(I);break}else O=!0}}const o=s._compile(),c=o.serialize(),y=s._serialize(c).toString("base64"),p={encoding:"base64",commitment:this.commitment};if(r){const O=(Array.isArray(r)?r:o.nonProgramIds()).map(N=>N.toBase58());p.accounts={encoding:"base64",addresses:O}}i&&(p.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(p.innerInstructions=e.innerInstructions);const E=[y,p],x=await this._rpcRequest("simulateTransaction",E),k=j(x,hc);if("error"in k){let O;if("data"in k.error&&(O=k.error.data.logs,O&&Array.isArray(O))){const N=`
    `,I=N+O.join(N);console.error(k.error.message,I)}throw new ei({action:"simulate",signature:"",transactionMessage:k.error.message,logs:O})}return k.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=At(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),u=j(c,_y);if("error"in u){let y;throw"data"in u.error&&(y=u.error.data.logs),new ei({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:y})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=j(t,Vp);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=cc([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Tt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Ht(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=j(t,Gp);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=Ht(r),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:lc(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=j(t,Ry);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=j(t,Yp);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=j(t,Xp);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=j(t,Jp);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(u,y)=>{e(u,y);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=j(t,Qp);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class nn{constructor(t){this._keypair=void 0,this._keypair=t??ic()}static generate(){return new nn(ic())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=Hi(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new nn({publicKey:r,secretKey:t})}static fromSeed(t){const e=Hi(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new nn({publicKey:e,secretKey:r})}get publicKey(){return new K(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Tr=Object.freeze({CreateLookupTable:{index:0,layout:st([nt("instruction"),kn("recentSlot"),Rt("bumpSeed")])},FreezeLookupTable:{index:1,layout:st([nt("instruction")])},ExtendLookupTable:{index:2,layout:st([nt("instruction"),kn(),Oe(vt(),Wr(nt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:st([nt("instruction")])},CloseLookupTable:{index:4,layout:st([nt("instruction")])}});class vy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=nt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Tr))if(o.index==r){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Nt(Tr.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Nt(Tr.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(r=>new K(r))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(pa.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class pa{constructor(){}static createLookupTable(t){const[e,r]=K.findProgramAddressSync([t.authority.toBuffer(),Qo(BigInt(t.recentSlot),8)],this.programId),s=Tr.CreateLookupTable,i=kt(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:r}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:be.programId,isSigner:!1,isWritable:!1}];return[new Bt({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=Tr.FreezeLookupTable,r=kt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Bt({programId:this.programId,keys:s,data:r})}static extendLookupTable(t){const e=Tr.ExtendLookupTable,r=kt(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:be.programId,isSigner:!1,isWritable:!1}),new Bt({programId:this.programId,keys:s,data:r})}static deactivateLookupTable(t){const e=Tr.DeactivateLookupTable,r=kt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Bt({programId:this.programId,keys:s,data:r})}static closeLookupTable(t){const e=Tr.CloseLookupTable,r=kt(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Bt({programId:this.programId,keys:s,data:r})}}pa.programId=new K("AddressLookupTab1e1111111111111111111111111");class Iy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=Rt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(yr))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:r}=Nt(yr.RequestUnits,t.data);return{units:e,additionalFee:r}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Nt(yr.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Nt(yr.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Nt(yr.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(ii.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const yr=Object.freeze({RequestUnits:{index:0,layout:st([Rt("instruction"),nt("units"),nt("additionalFee")])},RequestHeapFrame:{index:1,layout:st([Rt("instruction"),nt("bytes")])},SetComputeUnitLimit:{index:2,layout:st([Rt("instruction"),nt("units")])},SetComputeUnitPrice:{index:3,layout:st([Rt("instruction"),kn("microLamports")])}});class ii{constructor(){}static requestUnits(t){const e=yr.RequestUnits,r=kt(e,t);return new Bt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=yr.RequestHeapFrame,r=kt(e,t);return new Bt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=yr.SetComputeUnitLimit,r=kt(e,t);return new Bt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=yr.SetComputeUnitPrice,r=kt(e,{microLamports:BigInt(t.microLamports)});return new Bt({keys:[],programId:this.programId,data:r})}}ii.programId=new K("ComputeBudget111111111111111111111111111111");const pc=64,yc=32,gc=64,mc=st([Rt("numSignatures"),Rt("padding"),tr("signatureOffset"),tr("signatureInstructionIndex"),tr("publicKeyOffset"),tr("publicKeyInstructionIndex"),tr("messageDataOffset"),tr("messageDataSize"),tr("messageInstructionIndex")]);class fs{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,instructionIndex:i}=t;Tt(e.length===yc,`Public Key must be ${yc} bytes but received ${e.length} bytes`),Tt(s.length===gc,`Signature must be ${gc} bytes but received ${s.length} bytes`);const o=mc.span,c=o+e.length,u=c+s.length,y=1,p=ct.alloc(u+r.length),E=i??65535;return mc.encode({numSignatures:y,padding:0,signatureOffset:c,signatureInstructionIndex:E,publicKeyOffset:o,publicKeyInstructionIndex:E,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:E},p),p.fill(e,o),p.fill(s,c),p.fill(r,u),new Bt({keys:[],programId:fs.programId,data:p})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;Tt(e.length===pc,`Private key must be ${pc} bytes but received ${e.length} bytes`);try{const i=nn.fromSecretKey(e),o=i.publicKey.toBytes(),c=ia(r,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:c,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}fs.programId=new K("Ed25519SigVerify111111111111111111111111111");const ky=(n,t)=>{const e=os.sign(n,t);return[e.toCompactRawBytes(),e.recovery]};os.utils.isValidPrivateKey;const xy=os.getPublicKey,wc=32,so=20,bc=64,Ty=11,oo=st([Rt("numSignatures"),tr("signatureOffset"),Rt("signatureInstructionIndex"),tr("ethAddressOffset"),Rt("ethAddressInstructionIndex"),tr("messageDataOffset"),tr("messageDataSize"),Rt("messageInstructionIndex"),Ut(20,"ethAddress"),Ut(64,"signature"),Rt("recoveryId")]);class En{constructor(){}static publicKeyToEthAddress(t){Tt(t.length===bc,`Public key must be ${bc} bytes but received ${t.length} bytes`);try{return ct.from(Qa(At(t))).slice(-so)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:r,signature:s,recoveryId:i,instructionIndex:o}=t;return En.createInstructionWithEthAddress({ethAddress:En.publicKeyToEthAddress(e),message:r,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:r,signature:s,recoveryId:i,instructionIndex:o=0}=t;let c;typeof e=="string"?e.startsWith("0x")?c=ct.from(e.substr(2),"hex"):c=ct.from(e,"hex"):c=e,Tt(c.length===so,`Address must be ${so} bytes but received ${c.length} bytes`);const u=1+Ty,y=u,p=u+c.length,E=p+s.length+1,x=1,k=ct.alloc(oo.span+r.length);return oo.encode({numSignatures:x,signatureOffset:p,signatureInstructionIndex:o,ethAddressOffset:y,ethAddressInstructionIndex:o,messageDataOffset:E,messageDataSize:r.length,messageInstructionIndex:o,signature:At(s),ethAddress:At(c),recoveryId:i},k),k.fill(At(r),oo.span),new Bt({keys:[],programId:En.programId,data:k})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:r,instructionIndex:s}=t;Tt(e.length===wc,`Private key must be ${wc} bytes but received ${e.length} bytes`);try{const i=At(e),o=xy(i,!1).slice(1),c=ct.from(Qa(At(r))),[u,y]=ky(c,i);return this.createInstructionWithPublicKey({publicKey:o,message:r,signature:u,recoveryId:y,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}En.programId=new K("KeccakSecp256k11111111111111111111111111111");var hl;const fl=new K("StakeConfig11111111111111111111111111111111");class dl{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class li{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}hl=li;li.default=new hl(0,0,K.default);class Oy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=nt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Re))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:r}=Nt(Re.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new dl(new K(e.staker),new K(e.withdrawer)),lockup:new li(r.unixTimestamp,r.epoch,new K(r.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Nt(Re.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:r}=Nt(Re.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new K(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:r,authoritySeed:s,authorityOwner:i}=Nt(Re.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new K(i),newAuthorizedPubkey:new K(e),stakeAuthorizationType:{index:r}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Nt(Re.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Nt(Re.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Nt(Re.Withdraw,t.data),r={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(r.custodianPubkey=t.keys[5].pubkey),r}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Nt(Re.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(ds.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Re=Object.freeze({Initialize:{index:0,layout:st([nt("instruction"),C0(),M0()])},Authorize:{index:1,layout:st([nt("instruction"),vt("newAuthorized"),nt("stakeAuthorizationType")])},Delegate:{index:2,layout:st([nt("instruction")])},Split:{index:3,layout:st([nt("instruction"),Ge("lamports")])},Withdraw:{index:4,layout:st([nt("instruction"),Ge("lamports")])},Deactivate:{index:5,layout:st([nt("instruction")])},Merge:{index:7,layout:st([nt("instruction")])},AuthorizeWithSeed:{index:8,layout:st([nt("instruction"),vt("newAuthorized"),nt("stakeAuthorizationType"),Qr("authoritySeed"),vt("authorityOwner")])}}),Ny=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class ds{constructor(){}static initialize(t){const{stakePubkey:e,authorized:r,lockup:s}=t,i=s||li.default,o=Re.Initialize,c=kt(o,{authorized:{staker:At(r.staker.toBuffer()),withdrawer:At(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:At(i.custodian.toBuffer())}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1}],programId:this.programId,data:c};return new Bt(u)}static createAccountWithSeed(t){const e=new xt;e.add(be.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static createAccount(t){const e=new xt;e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:r,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:r,votePubkey:s}=t,i=Re.Delegate,o=kt(i);return new xt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:fl,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,c=Re.Authorize,u=kt(c,{newAuthorized:At(s.toBuffer()),stakeAuthorizationType:i.index}),y=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&y.push({pubkey:o,isSigner:!0,isWritable:!1}),new xt().add({keys:y,programId:this.programId,data:u})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:r,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:c,custodianPubkey:u}=t,y=Re.AuthorizeWithSeed,p=kt(y,{newAuthorized:At(o.toBuffer()),stakeAuthorizationType:c.index,authoritySeed:s,authorityOwner:At(i.toBuffer())}),E=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:fr,isSigner:!1,isWritable:!1}];return u&&E.push({pubkey:u,isSigner:!0,isWritable:!1}),new xt().add({keys:E,programId:this.programId,data:p})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:r,splitStakePubkey:s,lamports:i}=t,o=Re.Split,c=kt(o,{lamports:i});return new Bt({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:c})}static split(t,e){const r=new xt;return r.add(be.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),r.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:c,lamports:u}=t,y=new xt;return y.add(be.allocate({accountPubkey:i,basePubkey:o,seed:c,space:this.space,programId:this.programId})),e&&e>0&&y.add(be.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),y.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:s,splitStakePubkey:i,lamports:u}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:r,authorizedPubkey:s}=t,i=Re.Merge,o=kt(i);return new xt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:r,toPubkey:s,lamports:i,custodianPubkey:o}=t,c=Re.Withdraw,u=kt(c,{lamports:i}),y=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:vi,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return o&&y.push({pubkey:o,isSigner:!0,isWritable:!1}),new xt().add({keys:y,programId:this.programId,data:u})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:r}=t,s=Re.Deactivate,i=kt(s);return new xt().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}ds.programId=new K("Stake11111111111111111111111111111111111111");ds.space=200;class pl{constructor(t,e,r,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=r,this.commission=s}}class By{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const r=nt("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(gr))if(o.index==r){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Nt(gr.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new pl(new K(e.nodePubkey),new K(e.authorizedVoter),new K(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:r}=Nt(gr.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new K(e),voteAuthorizationType:{index:r}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:r,newAuthorized:s,voteAuthorizationType:i}}=Nt(gr.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new K(e),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new K(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Nt(gr.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Mn.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const gr=Object.freeze({InitializeAccount:{index:0,layout:st([nt("instruction"),L0()])},Authorize:{index:1,layout:st([nt("instruction"),vt("newAuthorized"),nt("voteAuthorizationType")])},Withdraw:{index:3,layout:st([nt("instruction"),Ge("lamports")])},UpdateValidatorIdentity:{index:4,layout:st([nt("instruction")])},AuthorizeWithSeed:{index:10,layout:st([nt("instruction"),P0()])}}),Cy=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Mn{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:r,voteInit:s}=t,i=gr.InitializeAccount,o=kt(i,{voteInit:{nodePubkey:At(s.nodePubkey.toBuffer()),authorizedVoter:At(s.authorizedVoter.toBuffer()),authorizedWithdrawer:At(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),c={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Bt(c)}static createAccount(t){const e=new xt;return e.add(be.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:r,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=gr.Authorize,c=kt(o,{newAuthorized:At(s.toBuffer()),voteAuthorizationType:i.index}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new xt().add({keys:u,programId:this.programId,data:c})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:c}=t,u=gr.AuthorizeWithSeed,y=kt(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:At(r.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:At(i.toBuffer()),voteAuthorizationType:o.index}}),p=[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:fr,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new xt().add({keys:p,programId:this.programId,data:y})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,lamports:s,toPubkey:i}=t,o=gr.Withdraw,c=kt(o,{lamports:s}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return new xt().add({keys:u,programId:this.programId,data:c})}static safeWithdraw(t,e,r){if(t.lamports>e-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Mn.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:r,nodePubkey:s}=t,i=gr.UpdateValidatorIdentity,o=kt(i),c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return new xt().add({keys:c,programId:this.programId,data:o})}}Mn.programId=new K("Vote111111111111111111111111111111111111111");Mn.space=3762;const yl=new K("Va1idator1nfo111111111111111111111111111111"),My=z({name:G(),website:ut(G()),details:ut(G()),iconUrl:ut(G()),keybaseUsername:ut(G())});class ya{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(ze(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new K(Ke(e,0,mr)),c=pr(e)===1;s.push({publicKey:o,isSigner:c})}if(s[0].publicKey.equals(yl)&&s[1].isSigner){const i=Qr().decode(ct.from(e)),o=JSON.parse(i);return xu(o,My),new ya(s[1].publicKey,o)}return null}}const Ly=new K("Vote111111111111111111111111111111111111111"),Py=st([vt("nodePubkey"),vt("authorizedWithdrawer"),Rt("commission"),Ie(),Oe(st([Ie("slot"),nt("confirmationCount")]),Wr(nt(),-8),"votes"),Rt("rootSlotValid"),Ie("rootSlot"),Ie(),Oe(st([Ie("epoch"),vt("authorizedVoter")]),Wr(nt(),-8),"authorizedVoters"),st([Oe(st([vt("authorizedPubkey"),Ie("epochOfLastAuthorizedSwitch"),Ie("targetEpoch")]),32,"buf"),Ie("idx"),Rt("isEmpty")],"priorVoters"),Ie(),Oe(st([Ie("epoch"),Ie("credits"),Ie("prevCredits")]),Wr(nt(),-8),"epochCredits"),st([Ie("slot"),Ie("timestamp")],"lastTimestamp")]);class ga{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const r=Py.decode(At(t),4);let s=r.rootSlot;return r.rootSlotValid||(s=null),new ga({nodePubkey:new K(r.nodePubkey),authorizedWithdrawer:new K(r.authorizedWithdrawer),commission:r.commission,votes:r.votes,rootSlot:s,authorizedVoters:r.authorizedVoters.map(Uy),priorVoters:Dy(r.priorVoters),epochCredits:r.epochCredits,lastTimestamp:r.lastTimestamp})}}function Uy({authorizedVoter:n,epoch:t}){return{epoch:t,authorizedVoter:new K(n)}}function Ec({authorizedPubkey:n,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new K(n),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Dy({buf:n,idx:t,isEmpty:e}){return e?[]:[...n.slice(t+1).map(Ec),...n.slice(0,t).map(Ec)]}const _c={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Hy(n,t){const e=t===!1?"http":"https";if(!n)return _c[e].devnet;const r=_c[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}async function Fy(n,t,e,r){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=r):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},c=await n.sendRawTransaction(t,o),u=i&&i.commitment,p=(await(s?n.confirmTransaction(s,u):n.confirmTransaction(c,u))).value;if(p.err)throw c!=null?new ei({action:o?.skipPreflight?"send":"simulate",signature:c,transactionMessage:`Status: (${JSON.stringify(p)})`}):new Error(`Raw transaction ${c} failed (${JSON.stringify(p)})`);return c}const zy=1e9,Ky=Object.freeze(Object.defineProperty({__proto__:null,Account:O0,AddressLookupTableAccount:Ro,AddressLookupTableInstruction:vy,AddressLookupTableProgram:pa,Authorized:dl,BLOCKHASH_CACHE_TIMEOUT_MS:tl,BPF_LOADER_DEPRECATED_PROGRAM_ID:N0,BPF_LOADER_PROGRAM_ID:X0,BpfLoader:J0,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:yr,ComputeBudgetInstruction:Iy,ComputeBudgetProgram:ii,Connection:ll,Ed25519Program:fs,Enum:x0,EpochSchedule:Ju,FeeCalculatorLayout:Zu,Keypair:nn,LAMPORTS_PER_SOL:zy,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Tr,Loader:on,Lockup:li,MAX_SEED_LENGTH:qu,Message:cr,MessageAccountKeys:ti,MessageV0:sn,NONCE_ACCOUNT_LENGTH:Ao,NonceAccount:us,PACKET_DATA_SIZE:Vr,PUBLIC_KEY_LENGTH:mr,PublicKey:K,SIGNATURE_LENGTH_IN_BYTES:Qn,SOLANA_SCHEMA:zn,STAKE_CONFIG_ID:fl,STAKE_INSTRUCTION_LAYOUTS:Re,SYSTEM_INSTRUCTION_LAYOUTS:Ft,SYSVAR_CLOCK_PUBKEY:fr,SYSVAR_EPOCH_SCHEDULE_PUBKEY:z0,SYSVAR_INSTRUCTIONS_PUBKEY:K0,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:Si,SYSVAR_RENT_PUBKEY:In,SYSVAR_REWARDS_PUBKEY:$0,SYSVAR_SLOT_HASHES_PUBKEY:W0,SYSVAR_SLOT_HISTORY_PUBKEY:V0,SYSVAR_STAKE_HISTORY_PUBKEY:vi,Secp256k1Program:En,SendTransactionError:ei,SolanaJSONRPCError:at,SolanaJSONRPCErrorCode:q0,StakeAuthorizationLayout:Ny,StakeInstruction:Oy,StakeProgram:ds,Struct:sa,SystemInstruction:Y0,SystemProgram:be,Transaction:xt,TransactionExpiredBlockheightExceededError:oa,TransactionExpiredNonceInvalidError:wn,TransactionExpiredTimeoutError:aa,TransactionInstruction:Bt,TransactionMessage:ua,TransactionStatus:vr,VALIDATOR_INFO_KEY:yl,VERSION_PREFIX_MASK:as,VOTE_PROGRAM_ID:Ly,ValidatorInfo:ya,VersionedMessage:ca,VersionedTransaction:la,VoteAccount:ga,VoteAuthorizationLayout:Cy,VoteInit:pl,VoteInstruction:By,VoteProgram:Mn,clusterApiUrl:Hy,sendAndConfirmRawTransaction:Fy,sendAndConfirmTransaction:ri},Symbol.toStringTag,{value:"Module"})),br=new K("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new K("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const hi=new K("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new K("So11111111111111111111111111111111111111112");new K("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const ma=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},$y=n=>t=>{const e=Ut(n,t),{encode:r,decode:s}=ma(e),i=e;return i.decode=(o,c)=>{const u=s(o,c);return ku(_t.from(u))},i.encode=(o,c,u)=>{const y=Qo(o,n);return r(y,c,u)},i},Kn=$y(8),gl=n=>{const t=Rt(n),{encode:e,decode:r}=ma(t),s=t;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,c)=>{const u=Number(i);return e(u,o,c)},s},ke=n=>{const t=Ut(32,n),{encode:e,decode:r}=ma(t),s=t;return s.decode=(i,o)=>{const c=r(i,o);return new K(c)},s.encode=(i,o,c)=>{const u=i.toBuffer();return e(u,o,c)},s};class hn extends Error{constructor(t){super(t)}}class ml extends hn{constructor(){super(...arguments),this.name="TokenAccountNotFoundError"}}class Wy extends hn{constructor(){super(...arguments),this.name="TokenInvalidAccountError"}}class wl extends hn{constructor(){super(...arguments),this.name="TokenInvalidAccountOwnerError"}}class Ac extends hn{constructor(){super(...arguments),this.name="TokenInvalidAccountSizeError"}}class Vy extends hn{constructor(){super(...arguments),this.name="TokenInvalidMintError"}}class qy extends hn{constructor(){super(...arguments),this.name="TokenInvalidOwnerError"}}class Gy extends hn{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var ko;(function(n){n[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension",n[n.GroupPointerExtension=40]="GroupPointerExtension",n[n.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",n[n.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",n[n.PausableExtension=44]="PausableExtension"})(ko||(ko={}));var xo;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Mint=1]="Mint",n[n.Account=2]="Account"})(xo||(xo={}));const jy=1,Yy=st([Rt("m"),Rt("n"),gl("isInitialized"),ke("signer1"),ke("signer2"),ke("signer3"),ke("signer4"),ke("signer5"),ke("signer6"),ke("signer7"),ke("signer8"),ke("signer9"),ke("signer10"),ke("signer11")]),Zy=Yy.span;var zi;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n[n.Frozen=2]="Frozen"})(zi||(zi={}));const bl=st([ke("mint"),ke("owner"),Kn("amount"),nt("delegateOption"),ke("delegate"),Rt("state"),nt("isNativeOption"),Kn("isNative"),Kn("delegatedAmount"),nt("closeAuthorityOption"),ke("closeAuthority")]),Hn=bl.span;async function Rc(n,t,e,r=br){const s=await n.getAccountInfo(t,e);return Xy(t,s,r)}function Xy(n,t,e=br){if(!t)throw new ml;if(!t.owner.equals(e))throw new wl;if(t.data.length<Hn)throw new Ac;const r=bl.decode(t.data.slice(0,Hn));let s=_t.alloc(0);if(t.data.length>Hn){if(t.data.length===Zy)throw new Ac;if(t.data[Hn]!=xo.Account)throw new Wy;s=t.data.slice(Hn+jy)}return{address:n,mint:r.mint,owner:r.owner,amount:r.amount,delegate:r.delegateOption?r.delegate:null,delegatedAmount:r.delegatedAmount,isInitialized:r.state!==zi.Uninitialized,isFrozen:r.state===zi.Frozen,isNative:!!r.isNativeOption,rentExemptReserve:r.isNativeOption?r.isNative:null,closeAuthority:r.closeAuthorityOption?r.closeAuthority:null,tlvData:s}}function Jy(n,t){return n instanceof K?[n,t]:[n.publicKey,[n]]}function Qy(n,t,e){if(e.length){n.push({pubkey:t,isSigner:!1,isWritable:!1});for(const r of e)n.push({pubkey:r instanceof K?r:r.publicKey,isSigner:!0,isWritable:!1})}else n.push({pubkey:t,isSigner:!0,isWritable:!1});return n}const tg=st([nt("mintAuthorityOption"),ke("mintAuthority"),Kn("supply"),Rt("decimals"),gl("isInitialized"),nt("freezeAuthorityOption"),ke("freezeAuthority")]);tg.span;function eg(n,t,e=!1,r=br,s=hi){if(!e&&!K.isOnCurve(t.toBuffer()))throw new Gy;const[i]=K.findProgramAddressSync([t.toBuffer(),r.toBuffer(),n.toBuffer()],s);return i}function rg(n,t,e,r,s=br,i=hi){return ng(n,t,e,r,_t.alloc(0),s,i)}function ng(n,t,e,r,s,i=br,o=hi){const c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:be.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new Bt({keys:c,programId:o,data:s})}async function ig(n,t,e,r,s=!1,i,o,c=br,u=hi){const y=eg(e,r,s,c,u);let p;try{p=await Rc(n,y,i,c)}catch(E){if(E instanceof ml||E instanceof wl){try{const x=new xt().add(rg(t.publicKey,y,r,e,c,u));await ri(n,x,[t],o)}catch{}p=await Rc(n,y,i,c)}else throw E}if(!p.mint.equals(e))throw new Vy;if(!p.owner.equals(r))throw new qy;return p}const Sc=st([Rt("instruction"),Kn("amount")]);function sg(n,t,e,r,s=[],i=br){const o=Qy([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],e,s),c=_t.alloc(Sc.span);return Sc.encode({instruction:ko.MintTo,amount:BigInt(r)},c),new Bt({keys:o,programId:i,data:c})}async function og(n,t,e,r,s,i,o=[],c,u=br){const[y,p]=Jy(s,o),E=new xt().add(sg(e,r,y,i,o,u));return await ri(n,E,[t,...p],c)}var El={exports:{}};const ag=/[\p{Lu}]/u,cg=/[\p{Ll}]/u,vc=/^[\p{Lu}](?![\p{Lu}])/gu,_l=/([\p{Alpha}\p{N}_]|$)/u,Al=/[_.\- ]+/,ug=new RegExp("^"+Al.source),Ic=new RegExp(Al.source+_l.source,"gu"),kc=new RegExp("\\d+"+_l.source,"gu"),lg=(n,t,e)=>{let r=!1,s=!1,i=!1;for(let o=0;o<n.length;o++){const c=n[o];r&&ag.test(c)?(n=n.slice(0,o)+"-"+n.slice(o),r=!1,i=s,s=!0,o++):s&&i&&cg.test(c)?(n=n.slice(0,o-1)+"-"+n.slice(o-1),i=s,s=!1,r=!0):(r=t(c)===c&&e(c)!==c,i=s,s=e(c)===c&&t(c)!==c)}return n},hg=(n,t)=>(vc.lastIndex=0,n.replace(vc,e=>t(e))),fg=(n,t)=>(Ic.lastIndex=0,kc.lastIndex=0,n.replace(Ic,(e,r)=>t(r)).replace(kc,e=>t(e))),Rl=(n,t)=>{if(!(typeof n=="string"||Array.isArray(n)))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},Array.isArray(n)?n=n.map(i=>i.trim()).filter(i=>i.length).join("-"):n=n.trim(),n.length===0)return"";const e=t.locale===!1?i=>i.toLowerCase():i=>i.toLocaleLowerCase(t.locale),r=t.locale===!1?i=>i.toUpperCase():i=>i.toLocaleUpperCase(t.locale);return n.length===1?t.pascalCase?r(n):e(n):(n!==e(n)&&(n=lg(n,e,r)),n=n.replace(ug,""),t.preserveConsecutiveUppercase?n=hg(n,e):n=e(n),t.pascalCase&&(n=r(n.charAt(0))+n.slice(1)),fg(n,r))};El.exports=Rl;El.exports.default=Rl;var Le={},rt={};let Lt=class{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}};rt.Layout=Lt;function wa(n,t){return t.property?n+"["+t.property+"]":n}rt.nameWithProperty=wa;function dg(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(n.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Lt))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value:function(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value:function(e,r){return t.decode(e,r)},writable:!0})}rt.bindConstructorLayout=dg;let We=class extends Lt{isCount(){throw new Error("ExternalLayout is abstract")}};class Sl extends We{constructor(t,e){if(t===void 0&&(t=1),!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e){e===void 0&&(e=0);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}let ba=class extends We{constructor(t,e,r){if(!(t instanceof Lt))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Rr||this.layout instanceof Br}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}},Rr=class extends Lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}},Br=class extends Lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}};class fn extends Lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeIntLE(t,r,this.span),this.span}}class Ln extends Lt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeIntBE(t,r,this.span),this.span}}const To=Math.pow(2,32);function ps(n){const t=Math.floor(n/To),e=n-t*To;return{hi32:t,lo32:e}}function ys(n,t){return n*To+t}let pg=class extends Lt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readUInt32LE(e+4);return ys(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=ps(t);return e.writeUInt32LE(s.lo32,r),e.writeUInt32LE(s.hi32,r+4),8}};class yg extends Lt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32BE(e),s=t.readUInt32BE(e+4);return ys(r,s)}encode(t,e,r){r===void 0&&(r=0);const s=ps(t);return e.writeUInt32BE(s.hi32,r),e.writeUInt32BE(s.lo32,r+4),8}}let gg=class extends Lt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readInt32LE(e+4);return ys(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=ps(t);return e.writeUInt32LE(s.lo32,r),e.writeInt32LE(s.hi32,r+4),8}};class mg extends Lt{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readInt32BE(e),s=t.readUInt32BE(e+4);return ys(r,s)}encode(t,e,r){r===void 0&&(r=0);const s=ps(t);return e.writeInt32BE(s.hi32,r),e.writeUInt32BE(s.lo32,r+4),8}}class vl extends Lt{constructor(t){super(4,t)}decode(t,e){return e===void 0&&(e=0),t.readFloatLE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeFloatLE(t,r),4}}class Il extends Lt{constructor(t){super(4,t)}decode(t,e){return e===void 0&&(e=0),t.readFloatBE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeFloatBE(t,r),4}}class kl extends Lt{constructor(t){super(8,t)}decode(t,e){return e===void 0&&(e=0),t.readDoubleLE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeDoubleLE(t,r),8}}class xl extends Lt{constructor(t){super(8,t)}decode(t,e){return e===void 0&&(e=0),t.readDoubleBE(e)}encode(t,e,r){return r===void 0&&(r=0),e.writeDoubleBE(t,r),8}}class Tl extends Lt{constructor(t,e,r){if(!(t instanceof Lt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof We&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof We)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0,s=this.count;if(s instanceof We&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e){e===void 0&&(e=0);const r=[];let s=0,i=this.count;for(i instanceof We&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r){r===void 0&&(r=0);const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,r+o),0);return this.count instanceof We&&this.count.encode(t.length,e,r),i}}let Ol=class extends Lt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Lt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const s=r;let i=0,o=0;for(const c of this.fields){let u=c.span;if(o=0<u?u:0,c.property!==void 0){const y=t[c.property];y!==void 0&&(o=c.encode(y,e,r),0>u&&(u=c.getSpan(e,r)))}i=r,r+=u}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}},Ea=class{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}},Ki=class extends Ea{constructor(t,e){if(!(t instanceof We&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}},_a=class extends Lt{constructor(t,e,r){const s=t instanceof Rr||t instanceof Br;if(s)t=new Ki(new ba(t));else if(t instanceof We&&t.isCount())t=new Ki(t);else if(!(t instanceof Ea))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Lt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&s&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=s,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const s=this.discriminator,i=s.decode(t,e);let o=this.registry[i];if(o===void 0){let c=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(c=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[o.property]=this.defaultLayout.decode(t,e+c)}else r=o.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+o.encode(t[o.property],e,r+c)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new Nl(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e){let r=t;return _t.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}},Nl=class extends Lt{constructor(t,e,r,s){if(!(t instanceof _a))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Lt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}};function mn(n){return 0>n&&(n+=4294967296),n}class Aa extends Lt{constructor(t,e,r){if(!(t instanceof Rr||t instanceof Br))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=void 0),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=mn(i),this},this._packedGetValue=function(){return s}}decode(t,e){const r=this.makeDestinationObject();e===void 0&&(e=0);const s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(s));return r}encode(t,e,r){r===void 0&&(r=0);const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new $n(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Bl(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}class $n{constructor(t,e,r){if(!(t instanceof Aa))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=mn(this.valueMask<<this.start),this.property=r}decode(){const t=this.container._packedGetValue();return mn(t&this.wordMask)>>>this.start}encode(t){if(!Number.isInteger(t)||t!==mn(t&this.valueMask))throw new TypeError(wa("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=mn(t<<this.start);this.container._packedSetValue(mn(e&~this.wordMask)|r)}}let Bl=class extends $n{constructor(t,e){super(t,1,e)}decode(t,e){return!!$n.prototype.decode.call(this,t,e)}encode(t){return typeof t=="boolean"&&(t=+t),$n.prototype.encode.call(this,t)}},Cl=class extends Lt{constructor(t,e){if(!(t instanceof We&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof We||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof We&&(s=t.length),!(_t.isBuffer(t)&&s===t.length))throw new TypeError(wa("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,s,"hex"),this.length instanceof We&&this.length.encode(s,e,r),s}};class Ml extends Lt{constructor(t){super(-1,t)}getSpan(t,e){if(!_t.isBuffer(t))throw new TypeError("b must be a Buffer");e===void 0&&(e=0);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e,r){e===void 0&&(e=0);let s=this.getSpan(t,e);return t.slice(e,e+s-1).toString("utf-8")}encode(t,e,r){r===void 0&&(r=0),typeof t!="string"&&(t=t.toString());const s=new _t(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(e,r),e[r+i]=0,i+1}}class Ll extends Lt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e){if(!_t.isBuffer(t))throw new TypeError("b must be a Buffer");return e===void 0&&(e=0),t.length-e}decode(t,e,r){e===void 0&&(e=0);let s=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");return t.slice(e,e+s).toString("utf-8")}encode(t,e,r){r===void 0&&(r=0),typeof t!="string"&&(t=t.toString());const s=new _t(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(e,r),i}}class Pl extends Lt{constructor(t,e){super(0,e),this.value=t}decode(t,e,r){return this.value}encode(t,e,r){return 0}}rt.ExternalLayout=We;rt.GreedyCount=Sl;rt.OffsetLayout=ba;rt.UInt=Rr;rt.UIntBE=Br;rt.Int=fn;rt.IntBE=Ln;rt.Float=vl;rt.FloatBE=Il;rt.Double=kl;rt.DoubleBE=xl;rt.Sequence=Tl;rt.Structure=Ol;rt.UnionDiscriminator=Ea;rt.UnionLayoutDiscriminator=Ki;rt.Union=_a;rt.VariantLayout=Nl;rt.BitStructure=Aa;rt.BitField=$n;rt.Boolean=Bl;rt.Blob=Cl;rt.CString=Ml;rt.UTF8=Ll;rt.Constant=Pl;rt.greedy=(n,t)=>new Sl(n,t);rt.offset=(n,t,e)=>new ba(n,t,e);rt.u8=n=>new Rr(1,n);rt.u16=n=>new Rr(2,n);rt.u24=n=>new Rr(3,n);rt.u32=n=>new Rr(4,n);rt.u40=n=>new Rr(5,n);rt.u48=n=>new Rr(6,n);rt.nu64=n=>new pg(n);rt.u16be=n=>new Br(2,n);rt.u24be=n=>new Br(3,n);rt.u32be=n=>new Br(4,n);rt.u40be=n=>new Br(5,n);rt.u48be=n=>new Br(6,n);rt.nu64be=n=>new yg(n);rt.s8=n=>new fn(1,n);rt.s16=n=>new fn(2,n);rt.s24=n=>new fn(3,n);rt.s32=n=>new fn(4,n);rt.s40=n=>new fn(5,n);rt.s48=n=>new fn(6,n);rt.ns64=n=>new gg(n);rt.s16be=n=>new Ln(2,n);rt.s24be=n=>new Ln(3,n);rt.s32be=n=>new Ln(4,n);rt.s40be=n=>new Ln(5,n);rt.s48be=n=>new Ln(6,n);rt.ns64be=n=>new mg(n);rt.f32=n=>new vl(n);rt.f32be=n=>new Il(n);rt.f64=n=>new kl(n);rt.f64be=n=>new xl(n);rt.struct=(n,t,e)=>new Ol(n,t,e);rt.bits=(n,t,e)=>new Aa(n,t,e);rt.seq=(n,t,e)=>new Tl(n,t,e);rt.union=(n,t,e)=>new _a(n,t,e);rt.unionLayoutDiscriminator=(n,t)=>new Ki(n,t);rt.blob=(n,t)=>new Cl(n,t);rt.cstr=n=>new Ml(n);rt.utf8=(n,t)=>new Ll(n,t);rt.const=(n,t)=>new Pl(n,t);const wg=Qi(Ky);(function(n){var t=Ye&&Ye.__importDefault||function(W){return W&&W.__esModule?W:{default:W}};Object.defineProperty(n,"__esModule",{value:!0}),n.struct=n.f64=n.f32=n.i32=n.u32=n.i16=n.u16=n.i8=n.u8=void 0,n.u64=c,n.i64=u,n.u128=y,n.i128=p,n.u256=E,n.i256=x,n.publicKey=O,n.option=I,n.bool=U,n.vec=V,n.tagged=Q,n.vecU8=Y,n.str=tt,n.rustEnum=Z,n.array=ot,n.map=it;const e=rt,r=wg,s=t(Ko);var i=rt;Object.defineProperty(n,"u8",{enumerable:!0,get:function(){return i.u8}}),Object.defineProperty(n,"i8",{enumerable:!0,get:function(){return i.s8}}),Object.defineProperty(n,"u16",{enumerable:!0,get:function(){return i.u16}}),Object.defineProperty(n,"i16",{enumerable:!0,get:function(){return i.s16}}),Object.defineProperty(n,"u32",{enumerable:!0,get:function(){return i.u32}}),Object.defineProperty(n,"i32",{enumerable:!0,get:function(){return i.s32}}),Object.defineProperty(n,"f32",{enumerable:!0,get:function(){return i.f32}}),Object.defineProperty(n,"f64",{enumerable:!0,get:function(){return i.f64}}),Object.defineProperty(n,"struct",{enumerable:!0,get:function(){return i.struct}});class o extends e.Layout{constructor(A,a,l){super(A,l),this.blob=(0,e.blob)(A),this.signed=a}decode(A,a=0){const l=new s.default(this.blob.decode(A,a),10,"le");return this.signed?l.fromTwos(this.span*8).clone():l}encode(A,a,l=0){return this.signed&&(A=A.toTwos(this.span*8)),this.blob.encode(A.toArrayLike(_t,"le",this.span),a,l)}}function c(W){return new o(8,!1,W)}function u(W){return new o(8,!0,W)}function y(W){return new o(16,!1,W)}function p(W){return new o(16,!0,W)}function E(W){return new o(32,!1,W)}function x(W){return new o(32,!0,W)}class k extends e.Layout{constructor(A,a,l,g){super(A.span,g),this.layout=A,this.decoder=a,this.encoder=l}decode(A,a){return this.decoder(this.layout.decode(A,a))}encode(A,a,l){return this.layout.encode(this.encoder(A),a,l)}getSpan(A,a){return this.layout.getSpan(A,a)}}function O(W){return new k((0,e.blob)(32),A=>new r.PublicKey(A),A=>A.toBuffer(),W)}class N extends e.Layout{constructor(A,a){super(-1,a),this.layout=A,this.discriminator=(0,e.u8)()}encode(A,a,l=0){return A==null?this.discriminator.encode(0,a,l):(this.discriminator.encode(1,a,l),this.layout.encode(A,a,l+1)+1)}decode(A,a=0){const l=this.discriminator.decode(A,a);if(l===0)return null;if(l===1)return this.layout.decode(A,a+1);throw new Error("Invalid option "+this.property)}getSpan(A,a=0){const l=this.discriminator.decode(A,a);if(l===0)return 1;if(l===1)return this.layout.getSpan(A,a+1)+1;throw new Error("Invalid option "+this.property)}}function I(W,A){return new N(W,A)}function U(W){return new k((0,e.u8)(),F,C,W)}function F(W){if(W===0)return!1;if(W===1)return!0;throw new Error("Invalid bool: "+W)}function C(W){return W?1:0}function V(W,A){const a=(0,e.u32)("length"),l=(0,e.struct)([a,(0,e.seq)(W,(0,e.offset)(a,-a.span),"values")]);return new k(l,({values:g})=>g,g=>({values:g}),A)}function Q(W,A,a){const l=(0,e.struct)([c("tag"),A.replicate("data")]);function g({tag:w,data:b}){if(!w.eq(W))throw new Error("Invalid tag, expected: "+W.toString("hex")+", got: "+w.toString("hex"));return b}return new k(l,g,w=>({tag:W,data:w}),a)}function Y(W){const A=(0,e.u32)("length"),a=(0,e.struct)([A,(0,e.blob)((0,e.offset)(A,-A.span),"data")]);return new k(a,({data:l})=>l,l=>({data:l}),W)}function tt(W){return new k(Y(),A=>A.toString("utf-8"),A=>_t.from(A,"utf-8"),W)}function Z(W,A,a){const l=(0,e.union)(a??(0,e.u8)(),A);return W.forEach((g,w)=>l.addVariant(w,g,g.property)),l}function ot(W,A,a){const l=(0,e.struct)([(0,e.seq)(W,A,"values")]);return new k(l,({values:g})=>g,g=>({values:g}),a)}class St extends e.Layout{constructor(A,a,l){super(A.span+a.span,l),this.keyLayout=A,this.valueLayout=a}decode(A,a){a=a||0;const l=this.keyLayout.decode(A,a),g=this.valueLayout.decode(A,a+this.keyLayout.getSpan(A,a));return[l,g]}encode(A,a,l){l=l||0;const g=this.keyLayout.encode(A[0],a,l),w=this.valueLayout.encode(A[1],a,l+g);return g+w}getSpan(A,a){return this.keyLayout.getSpan(A,a)+this.valueLayout.getSpan(A,a)}}function it(W,A,a){const l=(0,e.u32)("length"),g=(0,e.struct)([l,(0,e.seq)(new St(W,A),(0,e.offset)(l,-l.span),"values")]);return new k(g,({values:w})=>new Map(w),w=>({values:Array.from(w.entries())}),a)}})(Le);/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */function Pn(n){let t=n.length;for(;--t>=0;)n[t]=0}const bg=3,Eg=258,Ul=29,_g=256,Ag=_g+1+Ul,Dl=30,Rg=512,Sg=new Array((Ag+2)*2);Pn(Sg);const vg=new Array(Dl*2);Pn(vg);const Ig=new Array(Rg);Pn(Ig);const kg=new Array(Eg-bg+1);Pn(kg);const xg=new Array(Ul);Pn(xg);const Tg=new Array(Dl);Pn(Tg);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const Oo=new Uint8Array(256);for(let n=0;n<256;n++)Oo[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;Oo[254]=Oo[254]=1;var Og={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(u,y,p){this.fn=u,this.context=y,this.once=p||!1}function i(u,y,p,E,x){if(typeof p!="function")throw new TypeError("The listener must be a function");var k=new s(p,E||u,x),O=e?e+y:y;return u._events[O]?u._events[O].fn?u._events[O]=[u._events[O],k]:u._events[O].push(k):(u._events[O]=k,u._eventsCount++),u}function o(u,y){--u._eventsCount===0?u._events=new r:delete u._events[y]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var y=[],p,E;if(this._eventsCount===0)return y;for(E in p=this._events)t.call(p,E)&&y.push(e?E.slice(1):E);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(p)):y},c.prototype.listeners=function(y){var p=e?e+y:y,E=this._events[p];if(!E)return[];if(E.fn)return[E.fn];for(var x=0,k=E.length,O=new Array(k);x<k;x++)O[x]=E[x].fn;return O},c.prototype.listenerCount=function(y){var p=e?e+y:y,E=this._events[p];return E?E.fn?1:E.length:0},c.prototype.emit=function(y,p,E,x,k,O){var N=e?e+y:y;if(!this._events[N])return!1;var I=this._events[N],U=arguments.length,F,C;if(I.fn){switch(I.once&&this.removeListener(y,I.fn,void 0,!0),U){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,p),!0;case 3:return I.fn.call(I.context,p,E),!0;case 4:return I.fn.call(I.context,p,E,x),!0;case 5:return I.fn.call(I.context,p,E,x,k),!0;case 6:return I.fn.call(I.context,p,E,x,k,O),!0}for(C=1,F=new Array(U-1);C<U;C++)F[C-1]=arguments[C];I.fn.apply(I.context,F)}else{var V=I.length,Q;for(C=0;C<V;C++)switch(I[C].once&&this.removeListener(y,I[C].fn,void 0,!0),U){case 1:I[C].fn.call(I[C].context);break;case 2:I[C].fn.call(I[C].context,p);break;case 3:I[C].fn.call(I[C].context,p,E);break;case 4:I[C].fn.call(I[C].context,p,E,x);break;default:if(!F)for(Q=1,F=new Array(U-1);Q<U;Q++)F[Q-1]=arguments[Q];I[C].fn.apply(I[C].context,F)}}return!0},c.prototype.on=function(y,p,E){return i(this,y,p,E,!1)},c.prototype.once=function(y,p,E){return i(this,y,p,E,!0)},c.prototype.removeListener=function(y,p,E,x){var k=e?e+y:y;if(!this._events[k])return this;if(!p)return o(this,k),this;var O=this._events[k];if(O.fn)O.fn===p&&(!x||O.once)&&(!E||O.context===E)&&o(this,k);else{for(var N=0,I=[],U=O.length;N<U;N++)(O[N].fn!==p||x&&!O[N].once||E&&O[N].context!==E)&&I.push(O[N]);I.length?this._events[k]=I.length===1?I[0]:I:o(this,k)}return this},c.prototype.removeAllListeners=function(y){var p;return y?(p=e?e+y:y,this._events[p]&&o(this,p)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(Og);Le.struct([Le.publicKey("authority"),Le.vecU8("data")]);class Ng extends TypeError{constructor(t,e){let r;const{message:s,...i}=t,{path:o}=t,c=o.length===0?s:"At path: "+o.join(".")+" -- "+s;super(c),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var u;return(u=r)!=null?u:r=[t,...e()]}}}function Bg(n){return _n(n)&&typeof n[Symbol.iterator]=="function"}function _n(n){return typeof n=="object"&&n!=null}function Gr(n){return typeof n=="string"?JSON.stringify(n):""+n}function Cg(n){const{done:t,value:e}=n.next();return t?void 0:e}function Mg(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:u="Expected a value of type `"+o+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+Gr(r)+"`"}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:u}}function*xc(n,t,e,r){Bg(n)||(n=[n]);for(const s of n){const i=Mg(s,t,e,r);i&&(yield i)}}function*Ra(n,t,e){e===void 0&&(e={});const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s};if(i&&(n=t.coercer(n,c),o&&t.type!=="type"&&_n(t.schema)&&_n(n)&&!Array.isArray(n)))for(const y in n)t.schema[y]===void 0&&delete n[y];let u=!0;for(const y of t.validator(n,c))u=!1,yield[y,void 0];for(let[y,p,E]of t.entries(n,c)){const x=Ra(p,E,{path:y===void 0?r:[...r,y],branch:y===void 0?s:[...s,p],coerce:i,mask:o});for(const k of x)k[0]?(u=!1,yield[k[0],void 0]):i&&(p=k[1],y===void 0?n=p:n instanceof Map?n.set(y,p):n instanceof Set?n.add(p):_n(n)&&(n[y]=p))}if(u)for(const y of t.refiner(n,c))u=!1,yield[y,void 0];u&&(yield[void 0,n])}class jr{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:r,validator:s,refiner:i,coercer:o=u=>u,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(u,y)=>{const p=s(u,y);return xc(p,y,this,u)}:this.validator=()=>[],i?this.refiner=(u,y)=>{const p=i(u,y);return xc(p,y,this,u)}:this.refiner=()=>[]}assert(t){return Lg(t,this)}create(t){return Hl(t,this)}is(t){return Fl(t,this)}mask(t){return Pg(t,this)}validate(t,e){return e===void 0&&(e={}),fi(t,this,e)}}function Lg(n,t){const e=fi(n,t);if(e[0])throw e[0]}function Hl(n,t){const e=fi(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Pg(n,t){const e=fi(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function Fl(n,t){return!fi(n,t)[0]}function fi(n,t,e){e===void 0&&(e={});const r=Ra(n,t,e),s=Cg(r);return s[0]?[new Ng(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function di(n,t){return new jr({type:n,schema:null,validator:t})}function Ug(){return di("any",()=>!0)}function ao(n){return new jr({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+Gr(t)}})}function Dg(){return di("boolean",n=>typeof n=="boolean")}function Tc(n){const t=Gr(n);return new jr({type:"literal",schema:n,validator(e){return e===n||"Expected the literal `"+t+"`, but received: "+Gr(e)}})}function Ai(n){return new jr({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function Ii(){return di("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+Gr(n))}function ki(n){return new jr({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function tn(){return di("string",n=>typeof n=="string"||"Expected a string, but received: "+Gr(n))}function qr(n){const t=Object.keys(n);return new jr({type:"type",schema:n,*entries(e){if(_n(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return _n(e)||"Expected an object, but received: "+Gr(e)}})}function zl(n){const t=n.map(e=>e.type).join(" | ");return new jr({type:"union",schema:null,coercer(e,r){return(n.find(i=>{const[o]=i.validate(e,{coerce:!0});return!o})||Sa()).coercer(e,r)},validator(e,r){const s=[];for(const i of n){const[...o]=Ra(e,i,r),[c]=o;if(c[0])for(const[u]of o)u&&s.push(u);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+Gr(e),...s]}})}function Sa(){return di("unknown",()=>!0)}function Hg(n,t,e){return new jr({...n,coercer:(r,s)=>Fl(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}function Fg(n){return Hg(Kl(n),zg,t=>"error"in t?t:{...t,result:Hl(t.result,n)})}const zg=Kl(Sa());function Kl(n){return zl([qr({jsonrpc:Tc("2.0"),id:tn(),result:n}),qr({jsonrpc:Tc("2.0"),id:tn(),error:qr({code:Sa(),message:tn(),data:ki(Ug())})})])}function Kg(n){return Fg(qr({context:qr({slot:Ii()}),value:n}))}Kg(qr({err:Ai(zl([qr({}),tn()])),logs:Ai(ao(tn())),accounts:ki(Ai(ao(Ai(qr({executable:Dg(),owner:tn(),lamports:Ii(),data:ao(tn()),rentEpoch:ki(Ii())}))))),unitsConsumed:ki(Ii())}));var $g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},P={};Object.defineProperty(P,"__esModule",{value:!0});P.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=P.ANCHOR_ERROR__REQUIRE_VIOLATED=P.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=P.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=P.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=P.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=P.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=P.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=P.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=P.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=P.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=P.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=P.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=P.ANCHOR_ERROR__CONSTRAINT_SPACE=P.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=P.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=P.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=P.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=P.ANCHOR_ERROR__CONSTRAINT_ZERO=P.ANCHOR_ERROR__CONSTRAINT_ADDRESS=P.ANCHOR_ERROR__CONSTRAINT_CLOSE=P.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=P.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=P.ANCHOR_ERROR__CONSTRAINT_STATE=P.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=P.ANCHOR_ERROR__CONSTRAINT_SEEDS=P.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=P.ANCHOR_ERROR__CONSTRAINT_OWNER=P.ANCHOR_ERROR__CONSTRAINT_RAW=P.ANCHOR_ERROR__CONSTRAINT_SIGNER=P.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=P.ANCHOR_ERROR__CONSTRAINT_MUT=P.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=P.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=P.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=P.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=P.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=P.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=P.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=P.ANCHOR_ERROR__INSTRUCTION_MISSING=void 0;P.ANCHOR_ERROR__DEPRECATED=P.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=P.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=P.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=P.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=P.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=P.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=P.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=P.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=P.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=P.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=P.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=P.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=P.ANCHOR_ERROR__INVALID_PROGRAM_ID=P.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=P.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=P.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=P.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=P.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=P.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=P.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=P.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=P.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=P.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=P.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=P.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=P.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=void 0;P.ANCHOR_ERROR__INSTRUCTION_MISSING=100;P.ANCHOR_ERROR__INSTRUCTION_FALLBACK_NOT_FOUND=101;P.ANCHOR_ERROR__INSTRUCTION_DID_NOT_DESERIALIZE=102;P.ANCHOR_ERROR__INSTRUCTION_DID_NOT_SERIALIZE=103;P.ANCHOR_ERROR__IDL_INSTRUCTION_STUB=1e3;P.ANCHOR_ERROR__IDL_INSTRUCTION_INVALID_PROGRAM=1001;P.ANCHOR_ERROR__IDL_ACCOUNT_NOT_EMPTY=1002;P.ANCHOR_ERROR__EVENT_INSTRUCTION_STUB=1500;P.ANCHOR_ERROR__CONSTRAINT_MUT=2e3;P.ANCHOR_ERROR__CONSTRAINT_HAS_ONE=2001;P.ANCHOR_ERROR__CONSTRAINT_SIGNER=2002;P.ANCHOR_ERROR__CONSTRAINT_RAW=2003;P.ANCHOR_ERROR__CONSTRAINT_OWNER=2004;P.ANCHOR_ERROR__CONSTRAINT_RENT_EXEMPT=2005;P.ANCHOR_ERROR__CONSTRAINT_SEEDS=2006;P.ANCHOR_ERROR__CONSTRAINT_EXECUTABLE=2007;P.ANCHOR_ERROR__CONSTRAINT_STATE=2008;P.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED=2009;P.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_INIT=2010;P.ANCHOR_ERROR__CONSTRAINT_CLOSE=2011;P.ANCHOR_ERROR__CONSTRAINT_ADDRESS=2012;P.ANCHOR_ERROR__CONSTRAINT_ZERO=2013;P.ANCHOR_ERROR__CONSTRAINT_TOKEN_MINT=2014;P.ANCHOR_ERROR__CONSTRAINT_TOKEN_OWNER=2015;P.ANCHOR_ERROR__CONSTRAINT_MINT_MINT_AUTHORITY=2016;P.ANCHOR_ERROR__CONSTRAINT_MINT_FREEZE_AUTHORITY=2017;P.ANCHOR_ERROR__CONSTRAINT_MINT_DECIMALS=2018;P.ANCHOR_ERROR__CONSTRAINT_SPACE=2019;P.ANCHOR_ERROR__CONSTRAINT_ACCOUNT_IS_NONE=2020;P.ANCHOR_ERROR__CONSTRAINT_TOKEN_TOKEN_PROGRAM=2021;P.ANCHOR_ERROR__CONSTRAINT_MINT_TOKEN_PROGRAM=2022;P.ANCHOR_ERROR__CONSTRAINT_ASSOCIATED_TOKEN_TOKEN_PROGRAM=2023;P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION=2024;P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_AUTHORITY=2025;P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_POINTER_EXTENSION_GROUP_ADDRESS=2026;P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION=2027;P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_AUTHORITY=2028;P.ANCHOR_ERROR__CONSTRAINT_MINT_GROUP_MEMBER_POINTER_EXTENSION_MEMBER_ADDRESS=2029;P.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION=2030;P.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_AUTHORITY=2031;P.ANCHOR_ERROR__CONSTRAINT_MINT_METADATA_POINTER_EXTENSION_METADATA_ADDRESS=2032;P.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION=2033;P.ANCHOR_ERROR__CONSTRAINT_MINT_CLOSE_AUTHORITY_EXTENSION_AUTHORITY=2034;P.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION=2035;P.ANCHOR_ERROR__CONSTRAINT_MINT_PERMANENT_DELEGATE_EXTENSION_DELEGATE=2036;P.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION=2037;P.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_AUTHORITY=2038;P.ANCHOR_ERROR__CONSTRAINT_MINT_TRANSFER_HOOK_EXTENSION_PROGRAM_ID=2039;P.ANCHOR_ERROR__REQUIRE_VIOLATED=2500;P.ANCHOR_ERROR__REQUIRE_EQ_VIOLATED=2501;P.ANCHOR_ERROR__REQUIRE_KEYS_EQ_VIOLATED=2502;P.ANCHOR_ERROR__REQUIRE_NEQ_VIOLATED=2503;P.ANCHOR_ERROR__REQUIRE_KEYS_NEQ_VIOLATED=2504;P.ANCHOR_ERROR__REQUIRE_GT_VIOLATED=2505;P.ANCHOR_ERROR__REQUIRE_GTE_VIOLATED=2506;P.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_ALREADY_SET=3e3;P.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_NOT_FOUND=3001;P.ANCHOR_ERROR__ACCOUNT_DISCRIMINATOR_MISMATCH=3002;P.ANCHOR_ERROR__ACCOUNT_DID_NOT_DESERIALIZE=3003;P.ANCHOR_ERROR__ACCOUNT_DID_NOT_SERIALIZE=3004;P.ANCHOR_ERROR__ACCOUNT_NOT_ENOUGH_KEYS=3005;P.ANCHOR_ERROR__ACCOUNT_NOT_MUTABLE=3006;P.ANCHOR_ERROR__ACCOUNT_OWNED_BY_WRONG_PROGRAM=3007;P.ANCHOR_ERROR__INVALID_PROGRAM_ID=3008;P.ANCHOR_ERROR__INVALID_PROGRAM_EXECUTABLE=3009;P.ANCHOR_ERROR__ACCOUNT_NOT_SIGNER=3010;P.ANCHOR_ERROR__ACCOUNT_NOT_SYSTEM_OWNED=3011;P.ANCHOR_ERROR__ACCOUNT_NOT_INITIALIZED=3012;P.ANCHOR_ERROR__ACCOUNT_NOT_PROGRAM_DATA=3013;P.ANCHOR_ERROR__ACCOUNT_NOT_ASSOCIATED_TOKEN_ACCOUNT=3014;P.ANCHOR_ERROR__ACCOUNT_SYSVAR_MISMATCH=3015;P.ANCHOR_ERROR__ACCOUNT_REALLOC_EXCEEDS_LIMIT=3016;P.ANCHOR_ERROR__ACCOUNT_DUPLICATE_REALLOCS=3017;P.ANCHOR_ERROR__DECLARED_PROGRAM_ID_MISMATCH=4100;P.ANCHOR_ERROR__TRYING_TO_INIT_PAYER_AS_PROGRAM_ACCOUNT=4101;P.ANCHOR_ERROR__INVALID_NUMERIC_CONVERSION=4102;P.ANCHOR_ERROR__DEPRECATED=5e3;class Ve{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,r){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var gs=Ve;function Wg(n,t){return t.property?n+"["+t.property+"]":n}class en extends Ve{isCount(){throw new Error("ExternalLayout is abstract")}}class $l extends en{constructor(t,e,r){if(!(t instanceof Ve))throw new TypeError("layout must be a Layout");if(e===void 0)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof ms||this.layout instanceof Wl}decode(t,e){return e===void 0&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,r){return r===void 0&&(r=0),this.layout.encode(t,e,r+this.offset)}}class ms extends Ve{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntLE(t,r,this.span),this.span}}class Wl extends Ve{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return e===void 0&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,r){return r===void 0&&(r=0),e.writeUIntBE(t,r,this.span),this.span}}const No=Math.pow(2,32);function Vl(n){const t=Math.floor(n/No),e=n-t*No;return{hi32:t,lo32:e}}function ql(n,t){return n*No+t}class Vg extends Ve{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readUInt32LE(e+4);return ql(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=Vl(t);return e.writeUInt32LE(s.lo32,r),e.writeUInt32LE(s.hi32,r+4),8}}class qg extends Ve{constructor(t){super(8,t)}decode(t,e){e===void 0&&(e=0);const r=t.readUInt32LE(e),s=t.readInt32LE(e+4);return ql(s,r)}encode(t,e,r){r===void 0&&(r=0);const s=Vl(t);return e.writeUInt32LE(s.lo32,r),e.writeInt32LE(s.hi32,r+4),8}}class Gg extends Ve{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Ve,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e){e===void 0&&(e=0);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r){r===void 0&&(r=0);const s=r;let i=0,o=0;for(const c of this.fields){let u=c.span;if(o=0<u?u:0,c.property!==void 0){const y=t[c.property];y!==void 0&&(o=c.encode(y,e,r),0>u&&(u=c.getSpan(e,r)))}i=r,r+=u}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}class Gl{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Oc extends Gl{constructor(t,e){if(!(t instanceof en&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}class jl extends Ve{constructor(t,e,r){const s=t instanceof ms||t instanceof Wl;if(s)t=new Oc(new $l(t));else if(t instanceof en&&t.isCount())t=new Oc(t);else if(!(t instanceof Gl))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Ve))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&s&&(i+=t.layout.span)),super(i,r),this.discriminator=t,this.usesPrefixDiscriminator=s,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(t.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}decode(t,e){e===void 0&&(e=0);let r;const s=this.discriminator,i=s.decode(t,e);let o=this.registry[i];if(o===void 0){let c=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(c=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[o.property]=this.defaultLayout.decode(t,e+c)}else r=o.decode(t,e);return r}encode(t,e,r){r===void 0&&(r=0);const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+o.encode(t[o.property],e,r+c)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new jg(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e){let r=t;return _t.isBuffer(t)&&(e===void 0&&(e=0),r=this.discriminator.decode(t,e)),this.registry[r]}}class jg extends Ve{constructor(t,e,r,s){if(!(t instanceof jl))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof Ve))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e){if(0<=this.span)return this.span;e===void 0&&(e=0);let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),r+this.layout.getSpan(t,e+r)}decode(t,e){const r=this.makeDestinationObject();if(e===void 0&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r){r===void 0&&(r=0);let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class Yg extends Ve{constructor(t,e){if(!(t instanceof en&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof en||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e){e===void 0&&(e=0);let r=this.span;return 0>r&&(r=this.length.decode(t,e)),t.slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof en&&(s=t.length),!(_t.isBuffer(t)&&s===t.length))throw new TypeError(Wg("Blob.encode",this)+" requires (length "+s+") Buffer as src");if(r+s>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),r,s,"hex"),this.length instanceof en&&this.length.encode(s,e,r),s}}var Zg=(n,t,e)=>new $l(n,t,e),Xg=n=>new ms(1,n),Or=n=>new ms(4,n),Jg=n=>new Vg(n),Nr=n=>new qg(n),Ee=(n,t,e)=>new Gg(n,t,e),Yl=(n,t,e)=>new jl(n,t,e),pi=(n,t)=>new Yg(n,t);class Qg extends gs{constructor(t){super(-1,t),this.property=t,this.layout=Ee([Or("length"),Or("lengthPadding"),pi(Zg(Or(),-8),"chars")],this.property)}encode(t,e,r=0){if(t==null)return this.layout.span;const s={chars:_t.from(t,"utf8")};return this.layout.encode(s,e,r)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return Or().span+Or().span+new Yn(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function ws(n){return new Qg(n)}function nr(n){return pi(32,n)}const Xe=Yl(Or("instruction"));Xe.addVariant(0,Ee([Nr("lamports"),Nr("space"),nr("owner")]),"createAccount");Xe.addVariant(1,Ee([nr("owner")]),"assign");Xe.addVariant(2,Ee([Nr("lamports")]),"transfer");Xe.addVariant(3,Ee([nr("base"),ws("seed"),Nr("lamports"),Nr("space"),nr("owner")]),"createAccountWithSeed");Xe.addVariant(4,Ee([nr("authorized")]),"advanceNonceAccount");Xe.addVariant(5,Ee([Nr("lamports")]),"withdrawNonceAccount");Xe.addVariant(6,Ee([nr("authorized")]),"initializeNonceAccount");Xe.addVariant(7,Ee([nr("authorized")]),"authorizeNonceAccount");Xe.addVariant(8,Ee([Nr("space")]),"allocate");Xe.addVariant(9,Ee([nr("base"),ws("seed"),Nr("space"),nr("owner")]),"allocateWithSeed");Xe.addVariant(10,Ee([nr("base"),ws("seed"),nr("owner")]),"assignWithSeed");Xe.addVariant(11,Ee([Nr("lamports"),ws("seed"),nr("owner")]),"transferWithSeed");Math.max(...Object.values(Xe.registry).map(n=>n.span));class tm extends gs{constructor(t,e,r,s){super(t.span,s),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}function Nc(n){return new tm(pi(32),t=>new K(t),t=>t.toBuffer(),n)}Ee([Or("version"),Or("state"),Nc("authorizedPubkey"),Nc("nonce"),Ee([Jg("lamportsPerSignature")],"feeCalculator")]);new K("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new K("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var Bc={exports:{}};(function(n,t){var e=typeof self<"u"?self:$g,r=function(){function i(){this.fetch=!1,this.DOMException=e.DOMException}return i.prototype=e,new i}();(function(i){(function(o){var c={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function u(a){return a&&DataView.prototype.isPrototypeOf(a)}if(c.arrayBuffer)var y=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=ArrayBuffer.isView||function(a){return a&&y.indexOf(Object.prototype.toString.call(a))>-1};function E(a){if(typeof a!="string"&&(a=String(a)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function x(a){return typeof a!="string"&&(a=String(a)),a}function k(a){var l={next:function(){var g=a.shift();return{done:g===void 0,value:g}}};return c.iterable&&(l[Symbol.iterator]=function(){return l}),l}function O(a){this.map={},a instanceof O?a.forEach(function(l,g){this.append(g,l)},this):Array.isArray(a)?a.forEach(function(l){this.append(l[0],l[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(l){this.append(l,a[l])},this)}O.prototype.append=function(a,l){a=E(a),l=x(l);var g=this.map[a];this.map[a]=g?g+", "+l:l},O.prototype.delete=function(a){delete this.map[E(a)]},O.prototype.get=function(a){return a=E(a),this.has(a)?this.map[a]:null},O.prototype.has=function(a){return this.map.hasOwnProperty(E(a))},O.prototype.set=function(a,l){this.map[E(a)]=x(l)},O.prototype.forEach=function(a,l){for(var g in this.map)this.map.hasOwnProperty(g)&&a.call(l,this.map[g],g,this)},O.prototype.keys=function(){var a=[];return this.forEach(function(l,g){a.push(g)}),k(a)},O.prototype.values=function(){var a=[];return this.forEach(function(l){a.push(l)}),k(a)},O.prototype.entries=function(){var a=[];return this.forEach(function(l,g){a.push([g,l])}),k(a)},c.iterable&&(O.prototype[Symbol.iterator]=O.prototype.entries);function N(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function I(a){return new Promise(function(l,g){a.onload=function(){l(a.result)},a.onerror=function(){g(a.error)}})}function U(a){var l=new FileReader,g=I(l);return l.readAsArrayBuffer(a),g}function F(a){var l=new FileReader,g=I(l);return l.readAsText(a),g}function C(a){for(var l=new Uint8Array(a),g=new Array(l.length),w=0;w<l.length;w++)g[w]=String.fromCharCode(l[w]);return g.join("")}function V(a){if(a.slice)return a.slice(0);var l=new Uint8Array(a.byteLength);return l.set(new Uint8Array(a)),l.buffer}function Q(){return this.bodyUsed=!1,this._initBody=function(a){this._bodyInit=a,a?typeof a=="string"?this._bodyText=a:c.blob&&Blob.prototype.isPrototypeOf(a)?this._bodyBlob=a:c.formData&&FormData.prototype.isPrototypeOf(a)?this._bodyFormData=a:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)?this._bodyText=a.toString():c.arrayBuffer&&c.blob&&u(a)?(this._bodyArrayBuffer=V(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(a)||p(a))?this._bodyArrayBuffer=V(a):this._bodyText=a=Object.prototype.toString.call(a):this._bodyText="",this.headers.get("content-type")||(typeof a=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var a=N(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?N(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(U)}),this.text=function(){var a=N(this);if(a)return a;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(C(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(ot)}),this.json=function(){return this.text().then(JSON.parse)},this}var Y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function tt(a){var l=a.toUpperCase();return Y.indexOf(l)>-1?l:a}function Z(a,l){l=l||{};var g=l.body;if(a instanceof Z){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,l.headers||(this.headers=new O(a.headers)),this.method=a.method,this.mode=a.mode,this.signal=a.signal,!g&&a._bodyInit!=null&&(g=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new O(l.headers)),this.method=tt(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&g)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(g)}Z.prototype.clone=function(){return new Z(this,{body:this._bodyInit})};function ot(a){var l=new FormData;return a.trim().split("&").forEach(function(g){if(g){var w=g.split("="),b=w.shift().replace(/\+/g," "),R=w.join("=").replace(/\+/g," ");l.append(decodeURIComponent(b),decodeURIComponent(R))}}),l}function St(a){var l=new O,g=a.replace(/\r?\n[\t ]+/g," ");return g.split(/\r?\n/).forEach(function(w){var b=w.split(":"),R=b.shift().trim();if(R){var T=b.join(":").trim();l.append(R,T)}}),l}Q.call(Z.prototype);function it(a,l){l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in l?l.statusText:"OK",this.headers=new O(l.headers),this.url=l.url||"",this._initBody(a)}Q.call(it.prototype),it.prototype.clone=function(){return new it(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new O(this.headers),url:this.url})},it.error=function(){var a=new it(null,{status:0,statusText:""});return a.type="error",a};var W=[301,302,303,307,308];it.redirect=function(a,l){if(W.indexOf(l)===-1)throw new RangeError("Invalid status code");return new it(null,{status:l,headers:{location:a}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(l,g){this.message=l,this.name=g;var w=Error(l);this.stack=w.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function A(a,l){return new Promise(function(g,w){var b=new Z(a,l);if(b.signal&&b.signal.aborted)return w(new o.DOMException("Aborted","AbortError"));var R=new XMLHttpRequest;function T(){R.abort()}R.onload=function(){var _={status:R.status,statusText:R.statusText,headers:St(R.getAllResponseHeaders()||"")};_.url="responseURL"in R?R.responseURL:_.headers.get("X-Request-URL");var d="response"in R?R.response:R.responseText;g(new it(d,_))},R.onerror=function(){w(new TypeError("Network request failed"))},R.ontimeout=function(){w(new TypeError("Network request failed"))},R.onabort=function(){w(new o.DOMException("Aborted","AbortError"))},R.open(b.method,b.url,!0),b.credentials==="include"?R.withCredentials=!0:b.credentials==="omit"&&(R.withCredentials=!1),"responseType"in R&&c.blob&&(R.responseType="blob"),b.headers.forEach(function(_,d){R.setRequestHeader(d,_)}),b.signal&&(b.signal.addEventListener("abort",T),R.onreadystatechange=function(){R.readyState===4&&b.signal.removeEventListener("abort",T)}),R.send(typeof b._bodyInit>"u"?null:b._bodyInit)})}return A.polyfill=!0,i.fetch||(i.fetch=A,i.Headers=O,i.Request=Z,i.Response=it),o.Headers=O,o.Request=Z,o.Response=it,o.fetch=A,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,n.exports=t})(Bc,Bc.exports);Le.rustEnum([Le.struct([],"uninitialized"),Le.struct([Le.option(Le.publicKey(),"authorityAddress")],"buffer"),Le.struct([Le.publicKey("programdataAddress")],"program"),Le.struct([Le.u64("slot"),Le.option(Le.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,Le.u32());function co(n){return new Zl(pi(8),t=>va.fromBuffer(t),t=>t.toBuffer(),n)}function Ri(n){return new Zl(pi(32),t=>new K(t),t=>t.toBuffer(),n)}function uo(n,t){return new em(n,t)}class Zl extends gs{constructor(t,e,r,s){super(t.span,s),this.layout=t,this.decoder=e,this.encoder=r}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,r){return this.layout.encode(this.encoder(t),e,r)}getSpan(t,e){return this.layout.getSpan(t,e)}}class em extends gs{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=Or()}encode(t,e,r=0){return t==null?this.layout.span+this.discriminator.encode(0,e,r):(this.discriminator.encode(1,e,r),this.layout.encode(t,e,r+4)+4)}decode(t,e=0){const r=this.discriminator.decode(t,e);if(r===0)return null;if(r===1)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class va extends Yn{toBuffer(){const t=super.toArray().reverse(),e=_t.from(t);if(e.length===8)return e;if(e.length>=8)throw new Error("u64 too large");const r=_t.alloc(8);return e.copy(r),r}static fromBuffer(t){if(t.length!==8)throw new Error(`Invalid buffer length: ${t.length}`);return new va([...t].reverse().map(e=>`00${e.toString(16)}`.slice(-2)).join(""),16)}}Ee([Ri("mint"),Ri("owner"),co("amount"),uo(Ri(),"delegate"),(n=>{const t=Yl(Xg("discriminator"),null,n);return t.addVariant(0,Ee([]),"uninitialized"),t.addVariant(1,Ee([]),"initialized"),t.addVariant(2,Ee([]),"frozen"),t})("state"),uo(co(),"isNative"),co("delegatedAmount"),uo(Ri(),"closeAuthority")]);new K("11111111111111111111111111111111");const rm="EqdBmAti48MHnM1NMnkDY9E8RMGXuGKMvEVkh9cNxVad",nm="CuB6LjX25D3VTRZ95UYPzPnUckuf8V923qqkWyFFtZv7",im="2gnf4MCGwqt6894jwxk3LCGAqDd2YNVnu25jjc7X5Asv",sm="3GN7iLcmJHZ7dgZNxqgCJxrnEURyiRVAx6XbxtG5Ybra",om="94QpBDDsNBAJ8K593Tn6idXmx3jUqywkD7Pan2m7sZ2T",am="C3aDeQcqbvnmghPSu3GpjwnaZbVP1F97sro4YLpou1h8",cm="2GYfcYA577pQYaz4ArdFKoCFi26WycZGimgKZjGc9tep",um="5Psx6wHweTRzfCsb2pnwfQD5EGTgnVemoCCJX6pQ4S9X",lm="3g7Xg4k7KDzT35Z7uv9B7bTEPkt4gJUU4DkvT6Se436G",hm="GtNuD2FvFicvQpdvFy4rYuqebRfJ5sAaYpQBDAZsvVar",fm="CKqDqg3UDAcdh9eti5NZuNFTqY1gUTUGAHf8nmLcDnYG",dm="Ca72XNvYyKoYtSNFBYr31xYhqF6N2isn2Whr5XTUamn7",pm="CMjf9wWNZDKvTCWcpoY6zA4zs35UNNUo31DpXF5a6AyN",ym="JEB53iZLrHnZcJky9z1Vg6wcEX7zbAyQBSWmHNbN9W4h",gm="5gZHkGVjzKENSuJXZkh1HUhBNzqRGvgxy5KvA7EipPYR",mm="6cEV8XLFDTr5nDeXxXwPbpSGBsso8Ba4hf1LsfdwSV3E",wm="8XTZvQmfYW1QMCH3cT1gsQ4jYQFRqYToKVRNoqGbNNYS",bm="2VF9SWtv9YrpARmBNh3RV4X4qtaGgq5io7uUuFyUiuSC",Em="8b1v6vvmk4tEfSKLL6mvvCys7NtmgMmofEVdES1zUJYp",_m="GGFGR5y7XePA4FxSQAUmys3iP41etpWdBxgLpjm4kGxD",Am="48UqueH76XLcRF1CEpJxQ3BF31kAtJi98eYwsfjmbkvA",Rm="GQSkEnymNus6rvQhnVkRtsZqgGeQ4Zubewx5ypk8CUNS",Sm="4ja3tY3dgECzehd28EhomP3FYj5jCntRh1R4Q2CpehwZ",vm="CTsdNuJimzs5JQSXXsDujw5gPSsWesn1SLFHjJjyxfoN",Im="HDu2SJLmG64g29FhhirvsZKL6GiFyGft3YFJBrfwGoEK",km="5xXmmQzjjeBxG6r9VHVfZM8rcQxFD4w2w6EeHC6s7auX",xm="HQJ4MsmDN2EuvhVRSvXsSp1GpyyWj5L2BzGS5jGC7Kds",Tm="BgrtCseYJe6tgKGnXzhDKWmbuzVjJGLd5eVD94wPnTPg",Om="7sbU47vhiAZFDATnK7idcY31iraDDhQrTfLSE4s36hLA",Nm="7WVZAEiNJWvyMT4oPnFfpWP1H7z2gb7afkEGe8VrfxbM",Bm="2TDcWbLk9fgb4fyXioc13oR2rUetu4FVofKpzMiohTx7",Cm="2JabqXnxTq7Vp5Aa1WTMU6E9ywFcrjam8HC7T1UpJWxp",Mm="BLmPjLJYZmLQPVMcT96insAV1q1PAZksysbd7nBAymBG",Lm="2PciTj5Ry6Ep1psHdxhXnFsvq3S3v1GGqX1ChZD2qLFb",Pm="B6HPVacGQSzDtcTqbhpQ49AVgEeZiYDghU66156KieT9",Um="64tGfZHJw1PpNGH6E65HehHUeBJiAmHKieEGe1qh6zmp",Dm="7KDFA42XbDFJsfZsw3Zfh6SbvLiALfgUXfLndPtgiJD3",Hm="FaDbdyGagwYTgcaohfLBrkQGEQzLzfTw2MZtMQBT89f1",Fm="9kw9krrzp8592sKLJY5NvEeykkJKJanE3frAmRxms7bF",zm="GawPjKbY6NmEiTpVvzPVwPj8PVeuPz8GSz5hSffB32ck",Km="4gRaWApJW864xWeVKy9AsQUmne1mpYGv73DycM9L1coH",$m="4NDG6zcLTgBB69mLfnHLAta3H5KvRXzfh9t2VBKnwxBu",Wm="3RNbBopf5dUJ21TGZMozCxUkJ5gEmkWBN7DWSrgBe2iQ",Vm="5yMGkZcJ8c3EQFBzu8raPfc3xM2jGirJFjkMsUsNa6gW",qm="Dm73LUn3n4CVG8nvRPL1qiL56aCbGTTtSq2aSDh9CdMx",Gm="EtZx14Firf2wDGWJLxvTnFcbkFgem8q7cYaSAe7Ff14k",jm="9MWGUpdy4E2LadxXLHbkjeLnemh7mMn6nFt1YUCEJp2D",Ym="2WEiKTaKqfb9LUHLBRWTh1cUWPfsV7Pwj92faLRwhmAs",Zm="52R4cdnfbTUiPeD56fQEfJeFDVByuvoTtJAGm47BRobX",Xm="GzpnHgP4gJddVXqEReCnpmGCcjVwBxWfLZzM1CwYuSF3",Jm={BTC:rm,ETH:nm,XRP:im,SOL:sm,ADA:om,DOGE:am,LINK:cm,SUI:um,AVAX:lm,SHIB:hm,LTC:fm,DOT:dm,UNI:pm,ONDO:ym,AAVE:gm,PEPE:mm,TRUMP:wm,POL:bm,FIL:Em,RENDER:_m,ARB:Am,JUP:Rm,OP:Sm,S:vm,FET:Im,INJ:km,IMX:xm,WLD:Tm,LDO:Om,GRT:Nm,QNT:Bm,BONK:Cm,JTO:Mm,SAND:Lm,ENS:Pm,GALA:Um,PYTH:Dm,RAY:Hm,HNT:Fm,AXS:zm,MANA:Km,CRV:$m,WIF:Wm,GRASS:Vm,CAKE:qm,VIRTUAL:Gm,AERO:jm,CHZ:Ym,COMP:Zm,APE:Xm},Qm="Bb8XqaW3LG393nF9e1jo5QcKReC3puckud6TC5S26yQG",t1="HH8XjHEduoMDohJ2ywBTvTAbJMo1Twh8DUjZBmxrBR5P",e1="BAwmkVHT7diyR9WftweQ4T8HmUo3NXLLDjuZ9oysaLiS",r1="AgoJmQ9u8Vb7fnKZG5TLgmUebn4i6gFDq7bnv8f1f6er",n1="9yNWsRLFpbbrWyDiM9aXx787gjjkNKUdVEp1NEUqqY4Q",i1="AjzV7UXwtHCGigTekt4J2JzvBhnAtnHLUJh2D4DV21KX",s1="3PgdnxbkdrViNFMTnsSPHZ64QBEAAHSJCa6eLuF6ktz4",o1="dtfBV1T4AmEKHRdKv3iWzJ71EoR1ZQPCiL3gAU8fTQr",a1="38x2ZihNjoPd8ESdPix5aYAbvpioWdwJJyYgkxwss9ir",c1="3d5Tt37DWH3ZNTdzMMRgtkm4ts7jXchaPHhptRqj6EmR",u1="DwMza1FerqCFjSxXW7QHV24EkP32A5YHoxwocSPefLV2",l1="JCwWtYZSVqwYbKNkaBXEJgmNoTJ276Y7Prow1yH3xRYn",h1="2uoeHCiMnnCyeNhtvH9oFgYpDArc61m8uhuwQievjmRm",f1="96ZQCgW52TbSyzT9YmsZEYi7bipXD6sgp11bNtCTEsFf",d1="2CeqfBbPVcjTrkMMqv8Wc5r7jxE4NYWfkok8nxEcw4PH",p1="7xF4iEeDRcwFML41Ecydwea5uEtYPEvzszH7bdmfNGFD",y1="FctNEoX8avV8vcBRK6RSeCgr91JukF9gWDzAFRCRVxHB",g1="JCfDmHEh9XNGYXD1ePsrf312Rpm59cAzcRWWnW4y36q3",m1="97JwVZqAPTWjGpXo1wfC1J5qGr4UhyYVVeYNS1xTRk15",w1="FMchYUN8ZWv87MefLYoNiTR6SmaS3LuCHimu8LARpeUF",b1="3XwSWGKLDzFmgiZd6Y5g6vfHZU3RQctjRpiReuHKxz5G",E1="Ej4tBpRbhH41T8fLyFrgFKqqD8Fqxxwn7pRKuSgjQchg",_1="Ha68VrbwLYziJswsLkipxcRdRHf5nyAx2CJRGJsReMD2",A1="2cCj8N8rHpvN1JDDrYnKUckFiGFoFQz93eBW2JtauqLo",R1="CMAtAw2ZsnB2nB1jDFSBHbzpy8MYWE2wvNQbjuA3ZL84",S1="3vVRenYjGTtpfHzav3HKFVNp3zNSVRFdtjBUbpWVnGA2",v1="9X5DJ1726icYsop5G5PUhFwLPNsvxKpGVBFiLTdSQ5ci",I1="5W19zULtkABFXxEdSVZLDYSMYzWNMLKkXn1cQ3LpUvZq",k1="EioB1mjxqEUhcVR2QpYpiomkcQQGCugaYYD7ZrXFdASF",x1="5a7q2RdFVpSDf29WaoCtPT73p19THNT3pzW3soKVAwYT",T1="6QKL5AAPfa7QhjL6ZKDyefwgNMgE3kcbEvk92t7j7vkK",O1="AJahwq4ZWUwanu1nHqJhkKTPPvAphPnK5N7VKAS5zAmo",N1="HXSgfYT5vmQqGQ6F2NnJBKk43rfheT7vhYXzdmEnAGYx",B1="38Jc726q9ANJoHWZeJgUfsQgmi4tGTSQ5VfuasdrVDhW",C1="9ktXaLih9rrMG1umiQFPb5B5nRoaP9rWtnfJR2257X4W",M1="95jirWbS6SFWTnEpSy9NnjUzRhK6Tcr4sABZ7FM71pxc",L1="8jrbMERCzGyKwAzzoK6F55wUpENjtWbF8HNLHch7wPwM",P1="9L6j5c4V4iympNu9nQoaf5AQJrrUy47UWsVhvcSwUvN5",U1="4w7zDPvaWzvRebYrHAYTpwrUpU4wytiHGGAQJ91S4SeJ",D1="DXSZ2VGymQpMHMJX2jVboTyPRWhxxD64umjhi23ckfca",H1="6cP5fPZbBCa8Yfyjr5exhjDWRJT8TcfY1ZKy82wpEq72",F1="7HFkTjokosBbR6qReEcjFwGsyWte5LZHnq19eobeAvRy",z1="7eGGvXWJ3KKsoTaJydvhBLBDEHE1t8GorhcFXVrZeDRH",K1="Bh9LNKmqzZzagQG3wxdM3dE1FofXZZTe7PhJDkxCAzJ6",$1="MXWkzcQKRaikEF7u5a8Qx2zxw2WTeVFXGx2btV6hcJC",W1="8T4o3dt5QzU7DnM3nqxgzaJbfLViRfpGiNffm1VpoyYY",V1="9jcYaAFUzi72mMEHPAXChsbctj1RACfqrtnRHmxBdFGw",q1="H7FxXMw4gNKoNYiSpsriX35e1WxsLJEvvVaKJ7UYd4yd",G1="9AGfFhxPUSBqHTVJHWcuHUSBRAS7qc81kmtf9vE9w4bC",j1="F3sQx3Xy5u2pKBLUbR3NjhQVt1ZaASNE7p19Ds1iT8Uy",Y1={RAY:Qm,SUI:t1,JUP:e1,FIL:r1,DOGE:n1,PEPE:i1,LDO:s1,CHZ:o1,XRP:a1,OP:c1,FET:u1,S:l1,VIRTUAL:h1,SOL:f1,WLD:d1,MANA:p1,COMP:y1,BTC:g1,HNT:m1,GRT:w1,ARB:b1,APE:E1,AXS:_1,GRASS:A1,UNI:R1,POL:S1,DOT:v1,IMX:I1,JTO:k1,ADA:x1,AAVE:T1,WIF:O1,INJ:N1,AERO:B1,BONK:C1,SAND:M1,ONDO:L1,TRUMP:P1,LINK:U1,LTC:D1,AVAX:H1,CAKE:F1,RENDER:z1,GALA:K1,SHIB:$1,CRV:W1,QNT:V1,PYTH:q1,ETH:G1,ENS:j1},Z1="rYhXyYZMT5jDnd3UyXBhi8qvJfmbaZ53sFVV3tP1t4W",X1={name:"mock_price_feed",version:"0.1.0",spec:"0.1.0",description:"Created with Anchor"},J1=[{name:"initialize_mock",discriminator:[64,137,170,116,11,111,97,92],accounts:[{name:"mockFeed",writable:!0,pda:{seeds:[{kind:"const",value:[109,111,99,107,95,102,101,101,100]},{kind:"arg",path:"symbol"}]}},{name:"payer",writable:!0,signer:!0},{name:"system_program",address:"11111111111111111111111111111111"}],args:[{name:"symbol",type:"string"},{name:"initial_price",type:"i64"},{name:"initial_expo",type:"i32"}]},{name:"set_status",discriminator:[181,184,224,203,193,29,177,224],accounts:[{name:"mockFeed",writable:!0,pda:{seeds:[{kind:"const",value:[109,111,99,107,95,102,101,101,100]},{kind:"account",path:"mockFeed.symbol",account:"MockPriceFeed"}]}}],args:[{name:"new_status",type:"u8"}]},{name:"update_price",discriminator:[61,34,117,155,75,34,123,208],accounts:[{name:"mockFeed",writable:!0,pda:{seeds:[{kind:"const",value:[109,111,99,107,95,102,101,101,100]},{kind:"account",path:"mockFeed.symbol",account:"MockPriceFeed"}]}}],args:[{name:"new_price",type:"i64"},{name:"new_expo",type:"i32"}]}],Q1=[{name:"MockPriceFeed",discriminator:[73,0,218,41,7,202,200,152]}],tw=[{code:6e3,name:"InvalidStatusValue",msg:"Invalid status value provided."}],ew=[{name:"MockPriceFeed",type:{kind:"struct",fields:[{name:"price",type:"i64"},{name:"expo",type:"i32"},{name:"symbol",type:"string"},{name:"status",type:"u8"},{name:"last_updated_slot",type:"u64"},{name:"bump",type:"u8"}]}}],Bo={address:Z1,metadata:X1,instructions:J1,accounts:Q1,errors:tw,types:ew},rw=_t.from([61,34,117,155,75,34,123,208]),nw=1e4,iw=2e5,sw=-8,Cc=new Uint8Array([185,5,173,91,12,63,86,174,120,179,229,194,245,205,82,82,137,52,163,143,21,55,213,6,102,201,68,20,176,119,206,157,229,191,141,162,2,203,2,42,35,182,157,129,223,64,80,91,24,44,18,37,71,35,150,42,170,85,72,61,231,13,227,199]),$i=Jm,Wi=Y1,bn="http://127.0.0.1:8900";let zr,Kr,rr;const Mc=document.getElementById("recipient-address"),Wn=document.getElementById("token-select"),Lc=document.getElementById("mint-amount"),Vn=document.getElementById("mint-button"),lo=document.getElementById("status-message"),Vi=document.getElementById("tx-signature"),xn=document.getElementById("recipient-links-area"),qn=document.getElementById("price-feed-select"),Pc=document.getElementById("new-price"),Gn=document.getElementById("update-price-button"),ho=document.getElementById("update-status-message"),qi=document.getElementById("update-tx-signature"),Gi=document.getElementById("feed-account-link-area"),ow=n=>new Promise(t=>setTimeout(t,n));function aw(n,t){const e=_t.alloc(20);rw.copy(e,0),n.toArrayLike(_t,"le",8).copy(e,8);const s=_t.alloc(4);return s.writeInt32LE(t,0),s.copy(e,16),e}async function cw(n,t,e,r=3,s=2e3,i="confirmed"){let o=null;for(let c=0;c<r;c++)try{const u=await n.getLatestBlockhash(i);t.recentBlockhash=u.blockhash,t.lastValidBlockHeight=u.lastValidBlockHeight,t.feePayer=e.publicKey,t.sign(e);const y=t.serialize(),p={skipPreflight:!0,commitment:i,maxRetries:0},E=await n.sendRawTransaction(y,p);console.log(`    Tx Sent (Attempt ${c+1}/${r}): ${E}`);const x=await n.confirmTransaction({signature:E,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},i);if(x.value.err)throw new Error(`Tx Confirm Failed: ${JSON.stringify(x.value.err)}`);return console.log(`    Tx Confirmed: ${E}`),E}catch(u){o=u;const y=u.message||"";if(y.includes("Blockhash not found")||y.includes("block height exceeded")||y.includes("failed confirmation"))c<r-1?(console.warn(`    Retryable Error (Attempt ${c+1}/${r}): ${y}. Retrying...`),await ow(s)):console.error(`    Failed after ${r} attempts.`);else throw console.error("    Non-retryable error:",u),u}throw console.error("Send/Confirm failed:",o),o}function Pe(n,t=!1){console.log("[Mint Status]",n),lo&&(lo.textContent=`Status: ${n}`,lo.className=t?"error":""),Vi&&(Vi.innerHTML=""),xn&&(xn.innerHTML="")}function Fe(n,t=!1){console.log("[Price Update Status]",n),ho&&(ho.textContent=`Status: ${n}`,ho.className=t?"error":""),qi&&(qi.innerHTML=""),Gi&&(Gi.innerHTML="")}function Ia(){if(bn.includes("devnet"))return{explorerClusterParam:"devnet",solscanClusterParam:"devnet"};if(bn.includes("testnet"))return{explorerClusterParam:"testnet",solscanClusterParam:"testnet"};if(bn.includes("mainnet"))return{explorerClusterParam:"mainnet-beta",solscanClusterParam:"mainnet-beta"};const n=`custom&customUrl=${encodeURIComponent(bn)}`;return{explorerClusterParam:n,solscanClusterParam:n}}function bs(n,t,e){return`https://solscan.io/${n==="account"?"account":n}/${t}?cluster=${e.solscanClusterParam}`}function uw(n){if(rr||(rr=Ia()),!Vi)return;const t=bs("tx",n,rr);Vi.innerHTML=`Transaction: <a href="${t}" target="_blank" title="View on Solscan">${n}</a>`}function lw(n){if(!xn||!rr)return;const t=bs("account",n,rr),e=`${n.substring(0,4)}...${n.substring(n.length-4)}`;xn.innerHTML=`<a href="${t}" target="_blank" title="View Recipient on Solscan">Recipient (${e})</a>`}function hw(n){if(rr||(rr=Ia()),!qi)return;const t=bs("tx",n,rr);qi.innerHTML=`Transaction: <a href="${t}" target="_blank" title="View on Solscan">${n}</a>`}function fw(n){if(!Gi||!rr)return;const t=bs("account",n,rr),e=`${n.substring(0,4)}...${n.substring(n.length-4)}`;Gi.innerHTML=`Price Feed Account: <a href="${t}" target="_blank" title="View Price Feed Account on Solscan">${e}</a>`}function dw(){if(!Wn)return;if(Wn.innerHTML='<option value="">-- Select Token --</option>',Object.keys($i).length===0){console.warn("MINT_ADDRESSES not populated yet for dropdown."),Pe("Error: Token list not loaded. Check console.",!0);return}const n=Object.keys($i).sort();for(const t of n){const e=document.createElement("option");e.value=t,e.textContent=t,Wn.appendChild(e)}}function pw(){if(!qn)return;if(qn.innerHTML='<option value="">-- Select Feed --</option>',Object.keys(Wi).length===0){console.warn("MOCK_PRICE_FEEDS not populated."),Fe("Error: Price feed list not loaded. Run `anchor test` in mockPriceFeed.",!0);return}const n=Object.keys(Wi).sort();for(const t of n){const e=document.createElement("option");e.value=t,e.textContent=t,qn.appendChild(e)}}async function yw(){if(!zr||!Kr||!Mc||!Wn||!Lc||!Vn){Pe("Initialization error. Check console.",!0);return}const n=Mc.value.trim(),t=Wn.value,e=Lc.value.trim();if(!n){Pe("Please enter a recipient address.",!0);return}if(!t){Pe("Please select a token.",!0);return}if(!e){Pe("Please enter an amount to mint.",!0);return}let r;try{r=new K(n)}catch(o){Pe("Invalid recipient address.",!0),console.error(o);return}const s=$i[t];if(!s){Pe(`Mint address not found for ${t}. Check configuration.`,!0);return}const i=new K(s);Vn.disabled=!0,Pe(`Minting ${e} ${t} to ${n}...`),xn&&(xn.innerHTML="");try{const o=await zr.getParsedAccountInfo(i);if(!o||!o.value||!("parsed"in o.value.data))throw new Error("Could not fetch mint info or data is not parsed");const c=o.value.data.parsed.info.decimals,u=10n**BigInt(c),p=18446744073709551615n/u,E=parseInt(e,10);if(isNaN(E)||E<=0)throw new Error("Please enter a valid positive amount.");if(BigInt(E)>p)throw new Error(`Amount too large for ${c} decimals. Maximum allowed: ${p}`);const x=BigInt(E)*u;Pe("Fetching/creating token account for recipient...");const k=await ig(zr,Kr,i,r,!1,"confirmed",void 0,br,hi);Pe(`Minting ${x} (raw) tokens...`);const O=await og(zr,Kr,i,k.address,Kr,x,[],{commitment:"confirmed"},br);Pe(`Successfully minted ${E} ${t}!`),uw(O),lw(n)}catch(o){Pe(`Minting failed: ${o.message||o}`,!0),console.error("Minting error:",o)}finally{Vn.disabled=!1}}async function gw(){if(!zr||!Kr||!qn||!Pc||!Gn){Fe("Initialization error. Check console.",!0);return}const n=qn.value,t=Pc.value.trim();if(!n){Fe("Please select a symbol.",!0);return}if(!t){Fe("Please enter a price.",!0);return}let e;const r=sw;try{if(isNaN(parseFloat(t)))throw new Error("Invalid number format.");const c=t.split("."),u=c[0],y=c[1]||"",p=Math.abs(r);if(y.length>p)throw new Error(`Max ${p} decimals allowed.`);const E=y.padEnd(p,"0"),x=u+E;e=new Yn(x)}catch(c){Fe(`Invalid price: ${c.message}`,!0),console.error(c);return}const s=Wi[n];if(!s){Fe(`Feed address not found for ${n}.`,!0);return}const i=new K(s),o=new K(Bo.address);Gn.disabled=!0,Fe(`Building tx for ${n} to ${t} (raw: ${e.toString()})...`);try{const c=aw(e,r),u=[{pubkey:i,isSigner:!1,isWritable:!0}],y=new Bt({keys:u,programId:o,data:c}),p=new xt().add(ii.setComputeUnitPrice({microLamports:nw})).add(ii.setComputeUnitLimit({units:iw})).add(y);Fe(`Sending tx for ${n}...`);const E=await cw(zr,p,Kr);Fe(`Successfully updated price for ${n}!`),hw(E),fw(i.toBase58())}catch(c){Fe(`Update failed: ${c.message||c}`,!0),console.error("Price update error:",c)}finally{Gn.disabled=!1}}async function mw(){if(Pe("Initializing..."),Fe("Initializing..."),Cc.length!==64){Pe("ERROR: Invalid MINT_AUTHORITY_SECRET_KEY length.",!0),Fe("ERROR: Invalid MINT_AUTHORITY_SECRET_KEY length.",!0);return}try{if(rr=Ia(),console.log("Cluster Info:",rr),Kr=nn.fromSecretKey(Cc),console.log("Mint Authority / Payer Key:",Kr.publicKey.toBase58()),zr=new ll(bn,"confirmed"),console.log("Connected to:",bn),await zr.getVersion(),console.log("Connection successful."),Object.keys($i).length===0)throw new Error("Mint addresses data is empty.");if(console.log("Successfully loaded MINT_ADDRESSES."),Object.keys(Wi).length===0)throw new Error("Mock price feed addresses data is empty.");if(console.log("Successfully loaded MOCK_PRICE_FEEDS."),!Bo||!Bo.address)throw new Error("Mock price feed IDL is missing or invalid.");console.log("Successfully loaded Mock Price Feed IDL."),dw(),pw(),Vn&&Vn.addEventListener("click",yw),Gn&&Gn.addEventListener("click",gw),Pe("Ready. Enter address, select token, and click Mint."),Fe("Ready. Select feed and enter new price.")}catch(n){const t=`Initialization failed: ${n.message||n}`;Pe(t,!0),Fe(t,!0),console.error("Initialization error:",n)}}document.addEventListener("DOMContentLoaded",mw);
